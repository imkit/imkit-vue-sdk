var Kt=Object.defineProperty;var Dt=(e,t,o)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var R=(e,t,o)=>(Dt(e,typeof t!="symbol"?t+"":t,o),o);import{A as Nt,u as me,d as j,v as Oe,a as _,b as L,r as U,w as ue,o as c,c as m,t as y,e as Fe,f as P,g as te,h as u,i as se,F as V,j as J,n as X,k as ae,l as I,m as $,p as Ee,q as Q,s as Be,x as h,y as r,z as Xe,B as rt,C as G,$ as we,D as pe,V as je,E as it,G as Pt,H as he,I as fe,J as Le,K as Gt,L as _t,M as Qe,N as lt,O as ct,P as Yt,Q as Ge,T as We,R as Se,S as Xt,U as jt,W as Wt,X as zt,Y as Jt,Z as Ht,_ as Zt,a0 as dt,a1 as qe,a2 as qt,a3 as $t,a4 as es,a5 as ts,a6 as ss,a7 as $e,a8 as os,a9 as as,aa as ns,ab as rs,ac as is}from"./vendor-bf43fa84.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function o(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=o(a);fetch(a.href,n)}})();const ls="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAExElEQVR4nO2bS4hcRRSGa4yOGkUMKKKiID6yUbIRH7iI7hSiQWV0IwYXtn2rbj9OtaMBF/+5PTPEGNQZIQufCxUkAQVFRIwustfBx8ZkY1ATVCRO8DE+xiinOyNOcuvenqT71u2Z+uBup/7+63XqnDNKBQKBQCAQCAQCPqjVpi6MbTKmCc9py3uM5a8M4bCxOGos/6otftCEWW35DU08bpq4fmxs9xq1kgEwGhMeEEM08d/G8j/L+3BIE+8wFteolQSA041lYwhfL9+UE79j5u6qNtrr1bCjW8mNhvizfhiTYtQfhniqVps5Uw0hI8Zyo/MjBmDOEqMsf6IJV6lhYWxs9xpD/PKgjVnyEQ7HzeQWVXYqlefP0MRv97hFvjGWd8aW7zfUvi7aum2drLxKBWvNOC6JKLlNbjBN+MBYLOT/PfwSUbJRlZgRQ3g1f7Z5b9xK7gBwWq9/uNKcvFjOG0OYy1lJczG1N6gyEls8ln1W4LuohXtOZYx6feoiiY1yTDpwbDWW7Lay+DNj+c9GduKyfo1nLGzWttMWb6kyxTna4tOMGX231dpxTr/H1YTbDfG8e9zkblUGIoLOWjmDMGcRicyztppE78onAEZdEbKcOfU6Lh+0Bk28PeOmfFj5JM6cweTe4kIL7E/XgS/ldlW+0N2XeOpVXqQOyQw4J6qR3Kx8pSy041UucU7BckbkyZG+1flZ5QPdxH2OZf2tj9yNthw5zsLPi9bSQZJdjmW9U3mgE213E27HT9hRL4Gjdpw/8rYqXMyiJuJ9pTmHjKRJU8RUW7hWeUIi6DRNEeFBD2L4pzQxjQbOV54wlmcc275RuBhN/FeaGHl6FC7mP02YdBj0RPFiLH5LE0P09NnKE8biKUdc9njxYoi/TxPzCE1eqjyhLV5yxEJR8WIIs6mz1cKtyhMSwTtis02Fi9GOxJUkzgoX03mTYa1r29fH21cXLkhLxTN9Oe/xknZpJnem6iE+6EOPknKwYzkvSFRbuB5XJYXwuvJW3rE45Lg1porUIulcZ3aR+CHlC92plafO2pwk2IvSYSxecGz3I7UazlO+qDba610pDznEi9AQE25wFgwIzyjfGMu7HNGrnEd2kGNXLC5wN0VgIW5NXKF8U+2uIkcNHgtSfRjEuNK0YAgfuieHZ1RZMFL1dAklnpfc9QCymR+5x8QBrXGuKgu17mx+nDGbEo9slwR7f1pqsnuNdDPZrMpG7dGJK7XFj9kmYb8k2E+m0iAlJE38oiuLcNw475Wyb6hKuEm6LHrq6bEc5QWUnU4Pi7skCNQWv+f93aEwKaJkY24XxtKtt88Qv6kJ09riSfk6UTHxXtfbauhNiqm9QQ7KU/lx/fpKa1K0dds6V464b5/cVs1ks5gwlCYJ0mXR/9XUaX2ZWbzK5ccPtUkARqWRwFmW6XW7WD4iz4e0CHnoTVpEalRSDjbEX6QX+k44xA9qy6/Jqzzv4bliTPr/OSWGmSZvkdKMJNfl65aRselk2ntXnEkD61uyeCfHpPe3AGep1QqCSfkEk3ogmNQD4eDun0nTajVTyzfpZ69Nn6U3iXh+Of9DsupM0hav+NZWNpOmZVvJyhFzSpXHLhFy5qzucycQCAQCgUBA9ca/01SgfkYyM0gAAAAASUVORK5CYII=",ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFSElEQVR4nO1azW9bRRBfia8jggKlfPSAACFF4f8AKkQ/0lYFxAFw6lnHeMYNCRdmbJqkEtAol6KKK4iqd+DAAYFEKyq+BEJUcKINLVAqoCQF0jageXYav33P4a3f87Mj/JNWSuzd2R3v7MxvdtaYAQYYYIAB/qew43wHVOVJIJkFlPct8Ukg+dWS/KMNSH4HlG+A5D2LfLBEsqtQ2b/JrCdYO73BEpNF/sQSL68ol7QByhWL8pElea4wceBG068Yxf13WuRDFuVPXyXXaH9YkrlyeWqj6Rcw8/UWWYD4YoaKhhvyBSCeLBQOX9dTZS3Wh4H4y/aL5ctAfMyiTBWrvA0q9aHi5MxNunBt+nfwWZW3aR8gOR6YdHvFT1ji+3uibIlkFyAvtFnYKYsyoWbuK3fseb5LdxNQTrc3c95i8gQgl+McEhD/bKtcUDPP5KhUeK9FORdnOfqdyQMWuRLrXUneROSbM5/PTm8AkrdilF4uoTxtugmo8o7oGeMlS/xM961KRhtzhXe6RPxYNx3UReeXXixVaw+ZnADID+ucjr/4rTxevy/TicbG5m6IemNeylPZFRSrtUfcnQbkz5j52swmAZJazBnquhm3Q+DMogytmonwcpk3R0wZ+Q3TYwDyETdcwT6+PQPB8roberrhjX1RIL4FiH9xdvnlVEL3Vvm2CDeucsH0CYrI4JzlBWVvHQu0KBMug8qCVGTqTB1GBiTFjgVaks/DCstE4rFY2wrEP1rieYu17Qn6b7fEZ7SpJ046j9JQR+HjphMUK3yPG+R9uLFF+SlEBZH3tO/Le4I+q2fxh8TrpJfuDpMhXh4bm7o16firsBV5ynFWx4wHwgpfVXp3tB/vblW22XfeZy4g+bh1fIlqIz7jAwDKYcecp4wHdFJXEUC5pFlWOOOSS9Ef5r+PQCssyozjaw76jA9gUT4IC6ltNZ6ACu+MUwhIHm/y8sh3JeQnvOep8g4nJr/tK8MAyfeh3anUh7yFNE3WVUz/j/sszuSTzVEfdsLTtx0IkVD8TUM24k23val3QkKc43fOW4h1Evy08bdhdm56t2riaeOx42D/8hIwMnL0GndhqRWOPc9N867wzp4qrHDvq9KZdG1kLZPu1Flla9LIp9ar07Ik33kLAeIPexGWtDSTNiwB8jud7Mwh51xM+40PuHEuxAOID4TXKrM+4wPojWAaUm5Rzqaglmf85tIL+tbj14ETLJd5s7M7V/SSPPEigsyns+TBR+HgRsZJHjSPTzo+BIvylWPWkyYhtDqwku75poc+lQWL8kIaSwwBUMadXT7dbxcAQb7dska9BelYYLk8tRFQ/g6dr7xKHAkAyCXHOy9opSKdUJLXHJM5r4He9EPhPVJ34ldSCy6r83ISCa31mB4DiI+GeQJfyOSaVmGRX4zhwKOmR7AktmsX8S23g1875rOktR6TM9SDR2gpyaeZvw6ASn0opgC+mKfSjVAXLqY1XgLxvV2ZsNSggtFyaQ6eW804loYSP5prKLCrIeFIN7y3XrlGHFSTUQHKsyavJw8Q8/hEaz0a+PXMZ+M3uKRhMEbZy7kpu4JGetfmUQvxvNJQvSQ3ntAxDboYZlCtZ7brZtwOJeIHgPiLeKUbCUdwSY4yE+SsWB/WmxOlp9r07+I+fjD48TTFQz6x1rMl9cZdc1BJoeFAnwlq4G+30Azaoj5+6yceb4KnhyRzkTcYKZoeGUB5NTMG1bVCtTo1p96TvPGypngahvqh8O6dbQWxm2TWkrzbfD58XjOwoAUemE/qd9pH+3acvA8wwAADDGDWP/4FAPVu0JK6ZhcAAAAASUVORK5CYII=",cs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQklEQVR4nO2av2sUQRTH5woVwUrBRgP+QFKaqI2ISOzETkVIJwhJ9s2ed29Wbd/snqRLIdgIlikkCGnEVNEmGPwHzIWAhbFRo+BphCgSebmgl83dZvdub3Y3t1+YZrm5mc++N2/mvR0hcuXKlStXxmSpSh8oeiaRalLp9TANUC8D6gkAOiCyB6u/hAXdBq70fLH4cJ/IioAt2yZsAzSJrEhGcOPWwPTTKtMJkQXJDmETb0g1QD09VvL6ewP4P/hXjke9A1xfWlM9Bqy/9RSwVHo9B86VK9fukuW4V6WiD5nfklAv2457ZUdg/mHSk42tIb3fETjxScbcRA7sU9IWyS2scpdez9ew2l1BawmQHoHSw0XlDSLSwZGRx3sQJ/YX79NRfgaKboGiJ4D0LpPAgPq3RJqUJfe8iKaC7dBlQHoKqP9kBXjmzj3vlOhQUKIBQP0qzcCrNurbwrRkErCoP8oynWkxpYLleGclkscWk4qqgPSj3vQCPwOl3YD+wUoCtkVJtQBlugmoF8P/H1XBoRvcN63Aq80sU7xbOQlKv+nkc4/tVI6nDrjZmrXQHQJFKzF4zmcL3UtpAp5pBisV/YprDEC9tiO0qX3Wv/XU3TgGyzaxtB3k3kasizTpG7YQes0iPR/FB0f4lAVIL0K9YEWvWwYyI8C+ExRH47B9GfTfElCVvvAv2b2eFPDSNutG2HranS+gXkgEmBOBLeOV6VyU/p3Mt6i8QfPASg9vGQ/JMwUskbR54BINNI5XPy6aAQbUs8aBpRw/5ANeDIrGIqKCozdVjQMT0d4wd0oao3FUtYzeSLWuXGoJav4rTYkDA+rpbgKPOXQ4jEuzW7YDvQk7E9qlx0peP18I6RYw57aN40lFL6P098+346DVcPVwiu9IxA3MBTfRoI3k3RSwSsGFOc6HTQHb6J0WKVCB11b3gemtSIu4LNPt5MFy6JpIkTg9nA8XeOrROzgab4sbc5HqXCY0WqJjoOhTF4LkChcXRBrF5Rguy8QGi3rNLrsXRZpll90LG3XqGCxroTsksiCuQXFZpgPYOV4iImMqcFmGKxVRtp60RWPRjrhSwck7Hw03X8B3bpufWmb5BOXPs1vpL/lk/qgLZYgmAAAAAElFTkSuQmCC";class Ae{constructor(t){R(this,"id");R(this,"nickname");R(this,"avatarUrl");R(this,"country");R(this,"city");const{_id:o,nickname:s,avatarUrl:a,country:n,city:i}=t;this.id=o,this.nickname=s??o,this.avatarUrl=a,this.country=n??null,this.city=i??null}}var E=(e=>(e.Text="text",e.Image="image",e.Sticker="sticker",e.Video="video",e.File="file",e.Template="template",e.Flex="flex",e.Location="location",e.Audio="audio",e.Recall="recall",e.JoinRoom="joinRoom",e.LeaveRoom="leaveRoom",e.AddMember="addMember",e.DeleteMember="deleteMember",e.AddMembers="addMembers",e.Announcement="announcement",e))(E||{});class W{constructor(t){R(this,"id");R(this,"roomId");R(this,"senderId");R(this,"type");R(this,"createdAt");R(this,"updatedAt");R(this,"groupId");const{_id:o,room:s,sender:a,messageType:n,createdAtMS:i,updatedAtMS:l,extra:d}=t;this.id=o,this.roomId=s,this.senderId=(a==null?void 0:a._id)||"",n==="line"?this.type=d.type:this.type=n,this.createdAt=i,this.updatedAt=l,this.groupId=`${j(i).startOf("minute").unix()}-${this.senderId}`}_string(t,o){var n;const{t:s}=me();let a=s("message");switch(this.type){case"image":a=s("image");break;case"sticker":a=s("sticker");break;case"video":a=s("video");break;case"file":a=s("file");break;case"location":a=s("location");break;case"audio":a=s("audio");break}return this.senderId===t?s("youSent",[a]):s("someoneSent",[((n=o[this.senderId])==null?void 0:n.nickname)??"",a])}get string(){const{state:{imkit:{uid:t,users:o}}}=_();return this._string(t,o)}get isIncoming(){const{state:{imkit:{uid:t}}}=_();return this.senderId!==t}get isOutgoing(){const{state:{imkit:{uid:t}}}=_();return this.senderId===t}static fromRaw(t){if(!t)return null;switch(t.messageType){case"text":return new xe(t);case"image":return new ds(t);case"sticker":return new et(t);case"video":return new us(t);case"file":return new ps(t);case"template":return new ms(t);case"flex":return new gs(t);case"location":return new As(t);case"audio":return new hs(t);case"announcement":return new xe(t);case"addMember":return new Ne(t);case"deleteMember":return new Ne(t);case"addMembers":return new Ne(t);case"line":switch(t.extra!=="object"&&(t.extra=JSON.parse(t.extra)),t.extra.type){case"sticker":return new et(t);default:return new W(t)}default:return new W(t)}}static fromPayload(t,o){const s=Date.now(),{roomId:a}=t,n={_id:Oe(),room:a,sender:{_id:o},createdAtMS:s,updatedAtMS:s,...t};return W.fromRaw(n)}}const Re=class extends W{constructor(o){super(o);R(this,"text");R(this,"translatedText");R(this,"replyId");R(this,"urls");R(this,"html");const{message:s,reply:a}=o;this.text=s??"",this.translatedText=null,this.replyId=(a==null?void 0:a._id)??null;try{this.urls=Array.from(new Set(Re.autolinker.parse(s).map(n=>n.getUrl()))),this.html=Re.autolinker.link(s.replaceAll(`
`,"<br>"))}catch(n){this.urls=[],this.html="",console.log(o),console.error(n)}}get string(){return this.text}static linkfy(o){try{return Re.autolinker.link(o.replaceAll(`
`,"<br>"))}catch(s){return console.error(s),o}}};let xe=Re;R(xe,"autolinker",new Nt({className:"underline",email:!1,phone:!1,stripPrefix:!1,stripTrailingSlash:!1}));class ds extends W{constructor(o){super(o);R(this,"images");const{images:s,width:a,height:n,thumbnailUrl:i,originalUrl:l}=o;s&&s.length>0?this.images=s:this.images=[{id:l,width:a,height:n,thumbnailUrl:i,originalUrl:l}]}}class et extends W{constructor(o){super(o);R(this,"stickerId");R(this,"stickerUrl");const{sticker:s,extra:a}=o;s?(this.stickerId=s,this.stickerUrl=""):(this.stickerId="",this.stickerUrl=`https://stickershop.line-scdn.net/stickershop/v1/sticker/${a.stickerId}/ios/sticker.png`)}}class us extends W{constructor(o){super(o);R(this,"video");const{id:s,width:a,height:n,thumbnailUrl:i,originalUrl:l,duration:d,thumbnailFile:g,video:A}=o;A?this.video=A:this.video={id:s||l,width:a,height:n,thumbnailUrl:i,originalUrl:l,duration:d,thumbnailFile:g}}}var ge=(e=>(e.Buttons="buttons",e.Confirm="confirm",e.Carousel="carousel",e.ImageCarousel="image_carousel",e))(ge||{});class ms extends W{constructor(o){super(o);R(this,"template");R(this,"templateType");const{template:s}=o;try{this.template=typeof s=="object"?s:JSON.parse(s);const{type:a}=this.template;this.templateType=a}catch(a){console.log(o),console.error(a),this.template={},this.templateType="buttons"}}}var _e=(e=>(e.Bubble="bubble",e.Carousel="carousel",e))(_e||{});class gs extends W{constructor(o){super(o);R(this,"contents");R(this,"flexType");const{contents:s}=o;try{this.contents=typeof s=="object"?s:JSON.parse(s);const{type:a}=this.contents;this.flexType=a}catch(a){console.log(o),console.error(a),this.contents={},this.flexType="bubble"}}}class As extends W{constructor(o){super(o);R(this,"address");R(this,"latitude");R(this,"longitude");const{message:s,latitude:a,longitude:n}=o;this.address=s,this.latitude=a,this.longitude=n}}class Ne extends W{constructor(o){super(o);R(this,"members");switch(o.messageType){case"addMember":this.members=[new Ae(o.member)];break;case"deleteMember":this.members=o.extra.members.map(s=>new Ae(s));break;case"addMembers":this.members=o.extra.invitees.map(s=>new Ae(s));break;default:this.members=[]}}}class ps extends W{constructor(o){super(o);R(this,"url");R(this,"mimeType");R(this,"fileName");R(this,"bytes");R(this,"fileExtension");const{originalUrl:s,extra:a}=o;this.url=s;const{mimeType:n,fileName:i,bytes:l,fileExtension:d}=typeof a=="object"?a:JSON.parse(a);this.mimeType=n,this.fileName=i,this.bytes=l,this.fileExtension=d}}class hs extends W{constructor(o){super(o);R(this,"url");R(this,"mimeType");R(this,"fileName");R(this,"bytes");R(this,"fileExtension");R(this,"duration");const{originalUrl:s,extra:a,duration:n}=o;this.url=s;const{mimeType:i,fileName:l,bytes:d,fileExtension:g}=typeof a=="object"?a:JSON.parse(a);this.mimeType=i,this.fileName=l,this.bytes=d,this.fileExtension=g,this.duration=n}}var mt=(e=>(e.Direct="direct",e.Group="group",e))(mt||{});class Ie{constructor(t){R(this,"id");R(this,"name");R(this,"type");R(this,"createdAt");R(this,"updatedAt");R(this,"memberIds");R(this,"coverUrl");R(this,"lastMessage");R(this,"numberOfUnread");R(this,"lastReadMessageId");R(this,"pref");var F;const{_id:o,name:s,roomType:a,createdTimeMS:n,lastMessage:i,members:l,cover:d,unread:g,memberProperties:A,extParams:p,pref:k}=t;if(this.id=o,this.name=s,this.type=a||"direct",this.createdAt=n,this.lastMessage=W.fromRaw(i),this.updatedAt=((F=this.lastMessage)==null?void 0:F.updatedAt)??n,this.memberIds=l.map(b=>b._id),this.coverUrl=d??"",this.numberOfUnread=g??0,this.lastReadMessageId={},this.pref=k,A)for(const{client:b,lastRead:C}of A)this.lastReadMessageId[b]=C;if(a==="custom"){const b=JSON.parse(p);this.type=b.roomType}}_displayName(t,o){if(this.name)return this.name;if(this.memberIds.filter(s=>s!==t).length===0){const{t:s}=me();return s("emptyChat")}else{if(this.type=="direct")return this.memberIds.filter(s=>s!==t).map(s=>o[s])[0].nickname;if(this.type=="group")return this.memberIds.filter(s=>s!==t).map(s=>o[s].nickname).join(", ")}return""}get displayName(){const{state:{imkit:{uid:t,users:o}}}=_();return this._displayName(t,o)}get avatars(){const{state:{imkit:{uid:t,users:o}}}=_();return this.coverUrl&&this.coverUrl.length>0?[{url:this.coverUrl,name:this.displayName??""}]:this.type=="direct"&&this.memberIds.filter(s=>s!==t).length===1?this.memberIds.filter(s=>s!==t).map(s=>({url:o[s].avatarUrl??"",name:o[s].nickname??""})):this.type=="group"&&this.memberIds.length>=1?this.memberIds.map(s=>o[s]).sort((s,a)=>s.id===t?1:a.id===t?-1:(a.avatarUrl??"").length-(s.avatarUrl??"").length).map(s=>({url:s.avatarUrl??"",name:s.nickname??""})):[{url:"",name:this.displayName??""}]}}const gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQUlEQVR4nO2bu2sUURSHz4CISlR8pNi4e24S151zx0ez2XMmD1gROxEVEcRHIYJYCPaCna9CBBULK/uUAUX0D1Ax4gpa2EUbg6CkMaiIyjWKSdjsIzs7z/vBVFvsnW9/587cc+8CWCwWi8ViscQL5cpu1PJQaZ5Ad3gk6vHEijwN7VCaZ5WWX+ZCkm/9mg9EPa54UK2uUFqe/5MzT9J3pfkgZB0kvrRYjpX0FyQpzyWlvqBMJ0mp6ipF8rqRnExLUsS3WpGTSUno8R6l5Wc7gjIjqVjkdUg81a6cBZKocgjSCmq+t1w5qZdUcP39ncpJraRcqbwZST4EJSh1khTJeJByUiUJtZzohpxUSCq4I32K+FM3BSVZkjPXwuiunPmSsOSPQlLALpdW/YsnICkMDpbXI/HTMAUh8QNIEoOhSuLZfvKrod6g646sNd29gpbzqPmq0nIbSS6i5tMDJdkVF0mo+VWr4wkCxywKleZHpv3ZJNJTqOUGUjkXjST+gVqueJ63MhQzWPJHkfhZ2wMl+aI0X8uVy2vCkoRa3iqqDIcixoAkZ5p1+JpPklLr18MKGknS8qRDOaZVcrfXq/ZAWKArhwP7ZYmnTTu1G0lCkveo/b0QAU67Xb4m8Z8Z8Hxu2BdqN0kk43nP3wgR4sRREmr+GKdlhBMnSUh8v9kTMpOSUMuMeWhAjHEik0T8eOv2oQIkAAc13wlKkiL+3PTppvmk+V5IEE6YkpKKY9ZggZUb8XRSSihCSfKy0bIkqThBlptZZEIKcYJLEs/mt/lbIG0Ui2O9ZrINJkV8HdIE7hzboLRMBjgXvYO0gAHL+XeZM4qQkq3jWt2b7LTcPDkFaU0OktT+zEkdTdx8AdKYHCSpmc87fgUgvglpTE7uv5yOXgGQ5DJkQM6yJSHxOUhpWS1FW+WGxPsgA8lZVj8JNX8NdXciJnJalpSYvXQMXk5Lksy5RciwnIaSzA5u7LuHfVTZ1OGE3CoLJu65E2HsQ8aT0yBJlbMQZ/rCS85iHLPNDXEmn/dXK80vIpCTDBTJ0aXkmGRB1kHPP27lNKDXq/YokjfzJE3a5NST5FaOocdHzL//uhpZi8VisVgsFosFYs5vllNJQwrDPNkAAAAASUVORK5CYII=",fs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVR4nO3WPQrCMBiA4W+yh/BcniABFyNIsrsnOPRS/kz1KlJ35SsdOkhtRaGp7wOB0pZ3CGlSEQAAAAAAAAAAJsC5sjA+bU2IZxviXUd77fTZrHrr3WFpQ7zakB6vhvGp0ndm0XOuLPpi3eiQmZx6T3SZvIt1opvce2J9ugwOhnjKvScmxHpEsM69J2OCNsRb7j35uyVtQ3Tf3BSm3pP2QK8GxKrVfr/IvdfQQ7sv+smPwpR7DZ0dXRL6HehG0WwWPh313uCZy6gHAAAAAAAAAID8wBNoenSqsgBAfQAAAABJRU5ErkJggg==",vs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACJklEQVR4nO2bu04bQRSG13kBJJQUCDPHcgye43SYnLMFr4HyCkiAKKDlJkGTtKFIHyoq8g5AmvAAQJHkDQINIKFFayMhEDu+7FqOZ/5POt1OMZ/O/Ls7OxtFAAAAAAAAAAAA8Ihqo2kMy7ph2SfWbyNVVr8Qf1ycrEl5IHKmWFeN1VtiTUa87g3rQa02/64wORXWT//BxJIiy1j9S3WtFCKIrFwOe0I0EElyXq02x/LJqWtl2BOhQZbVw1yCjI1nhz4JHngnLecQpE3vBbHcpPOEIHYtNbnsK49C6CDKk0dBCeI+8ig4QdxjHoUmiHrNoyAFcUvSURRFJQjinHkUbAdx633tjqzEEMTOLvpdbsTj6CB2dZP8yMyjkJcYPe+kpcAEybGxstUq1pOO11u5fnU30kdBxurGiyVTSkV1MW4vAEFynJEnJcN66hYkZ94LMlY2s+5IxLrtHMtyFYKgrf4F6T//BbGeZCyxN8bKT/d4+eW9IHrqomchTaw7XYzbDUIQtTvp9PHOtd25c9q3+fJ0PBmMIOpVaHgPitpD4VUjcXQOXlYpUw62O5IOuYMNM8oShC1XdcnBpj1lLSt89tH8uRPsc5DFp+ekkNwJrYNMvuMvOEDlBEfwuoCsXHi5tGwBhzhTTEMW/JOjfwo7BtyWFK+kYTbsiRVQ92Tl+8RM821UNO8/zE1RXdeI9esI/orwOf0V4dVdQQAAAAAAAAAAAET+8gBbyTNTzlJ3OgAAAABJRU5ErkJggg==",ks="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEOElEQVR4nO2bz2sUSRTHe6K7/jgIiyxozFQFHZ33OojoOO+NUchRA7q7Fw9ehM0ejR7iwt7UgwcNCOqfkL/Do7/BX+BlYTHir+hZYY3rzsjrnsiYVFfPD2e6OtQXGoaZ7p6qT7/36tWr6iDw8vLy8vLy8vLy8vLyck6l0pF1KqydVkB3NfAHjdzo4fhfI73SwHOjY7QnyLtGdta2KeDHPUJJOOizBp4Jcm050C843xwXgjxKIZ8ZAJz8QlJA9wYIqKGQrgTB8TVBXqSB3g8SUBPSkyLQyW0lGnEe1qDh6EEdwB8U8h0FNB2G4Y8eEFosFuhhsTw+7C0IbVZFD7qypMxdAQcY+4BOeUBoAYR8xwNCW+Cm9x4Q2t3MA0IPqNFLoPYWhB5Qw1sQ9i8X8i6GHlDDWxB6F2tkNR/zMQg9oIa3ILSVLHhRA99QQOeL5doxPcaodh/6KZiYWDsyUtsgZVxZi9NAJzTQ1Xidj/5b9S6mgB4qpD8iGJ32MaxuUcB/KeS/Vx0gBfx4tFw9HHwfFVYNIIX0rzz1zFc9HLWaFwq4ErigrGHo5Qfw/WGobg5ckVuWQ3dLJdqU1uZKpfKDgupRDXRNId9WQO8U8Kf4oHfynQaeVbtqB4MgGFodgID+KZUO/Zy20UKX+axA6MBdF+QauTa3gBTSR40H9trbSb8poOc9WOfzUaRf8wroT0sTC7IrRCPXv8N/1SXB7Gi4zxqOBn4qMSURDvBcH/5zrm1IWQMqhvyLpW0X+ma1QOecB6SQniQ9SYk5JreSeCXTjmgPZLqlvGxOUT4afq/bHo4bgICmjW3SE+vNAZluyn7KFohTps7H39HU0nkygZVrDefNp45u2QGiz0kJoQzLpk63wmlp/2QrpObnyeXnCSSjJaVtMM0Q0M3kJHBlniOuYulDBCkJzpIU8KOV9+UFazKZoXtdNHeiejQB6KuUBz1pg9NMF94Y21I+MO4eoJCOG9sDdN1idV/jSqeSWlLifYFnndrEqSMLqu0zd4RvJ1/Di1JF7BSO1JOkfNKpu8cNkpIkDh7Q9rCiEtpjnWelxZm0IG4GT29tgKazALS1Utlobg8vplpfm5DagbN0v8SbyMZGFSVeHlCiiuXx4UFDyo2LLbOkU3Gxqf+BO6mkag3SHcJpH5IlSLsmDTyb2JGQf+/6vkhTXQ3zrkntqh3sU6IokF53nCg6qKGoTLrSJR9lMtVwURp4xhR/4reDupus7hjbXzSmEHl8G7Ikb0EizZuCaQukQrQU3Ua5Q+BopFsG93rWdTE/a0mB3VgwA16MXcUcT5YBfS3nJiSf9W6mLU7JiZKr4ypkXrTPgQqyiSF+F79nOHWNdCl3o1Y7kgK7OXC36VJI87mPOWmKlp6BZ0x5UnKs4QW5JrejVdCdhiT7jacldEsmm9HoFi8JvY1WMIAvNzPkttzpCzIGFAwMLQUoAAAAAElFTkSuQmCC",ys="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEJ0lEQVR4nO2bS4wbRRCGew3hJSQEKELZeKqdxcFVYyKQBldNlpX2BlwCOYQrF5QDSsIjVxRtlAiExOPChTPixhkkOAQukAVlw0uC5cBTKDxyIomWiEeM2rEQbNzttteemV76l/rmnun+XF011dWtVFRUVFRUVFRUVFRUVFTl1Gw+cC2k+SFAXtYoFzRJdwPtL038g0Z5tdHmu1Toqu/MtwPKxxuEYmn8p0Y5rIK2HJwWnP+0oypEAcnjBcAJFxIgf1AgoC4Qv6jUw1epUKSRzxcJqA/pkwT5ke1NrlceVtFwdFEN5QKQnATkg2maXhMBkcNikU8nrfnZaEHksipeGcuSSl8KVKDvQz4QAZEDEMnJCIhcjpvPR0DkXmYREEVA3Y046mhBFAF1owXR9L6F4hKjCKgbLYjiEuuWlY9FH0QRUDdaELkycr4IJCcA5Ygm3qvbQrBr4eYsy7aYCk2zubA1oU4bUt6niY9p4vd6paf/wRI7BSj75+aym0ad4yx2bu0XRT/fhIB4pYF8n5qMZjYRIF4zNbvSqx7lg5ArGpCs1lv5LlUFlQ1Dr28oHxpHq6qiSlkO8vLWdPFGr3Gnnbs1ydOA/AagfKRJzgDKj6YoCchvAvISoGRj+Z0qAgKSVRNtnINdXLwaiB/VJF/7Q5fvNclj5jMgYEC8NsznNFqd+w3EDbznq6SV7wkSEPSilVUzGvm4Jrk0gXddAuIXlFK1gADxiiOUzwDKKxN/J/Jr3pDKBtRwfAT2LWdaVvtSCIBOuXyO17JC/sPkZeYoDWC2zRz3A+LfPK13b6UBAcp+e7SSL8c9tZaQPOFnRfyNSXArCQiIL9oSTwPO9zlJe/729f3raX6Lr1MfEiDKBCQnLEOaAeRvfZ9Tr+fXD54Xr3k+44wz3ysNEMoRi/VkozxnAoC60No9XzlASSoPWsZztHBAKM9YAQHxuVIgtYUGj0feGhatrJOxzXFIdAPidxydebkMQLa8SxN/Oq0z1rboZiKmC9DBMgDZzgsC8S++0WpU2aIbkPxq7WQGCsiniwa0LctuGDQeTXJ24L+885656QHic86OSWt+tmhIc2kGFkCfDQSEvDStaxfOJbbOkg4AyftFnL7vb2YNAMRvW37/u9kgMzeTRgWz4065TSM/5XDS76pQpHu1rILDPMmzKhTtSHMuHNAd+b0qINV6txULAgTIP5VeWhpVxhd6//sDotsoyapGflKFpizLtpg9ZE8LWBr3kiCgfKf14nUqRCWtfI+PFfw7ug2LVlf0TXmfClka5flRHPaI7WW1CVQzV8snDgfl9eAcs0M1U6qZUNmnbzmbB84/ahA/ZPaQxwVjKqzB+xyvdCjND5ltUn8w/LNx3MFGKzWeaho7u02KYDa7gPiL3sbf5Yu8qya30sTPJaks+C6nvwHqSkKcY2gfKAAAAABJRU5ErkJggg==",xs=["src"],ws={key:1,class:"w-50px h-50px rounded-2xl bg-gray-200 flex items-center justify-center text-xl font-600 text-gray-500"},ee=L({__name:"AvatarView",props:{url:null,name:null},setup(e){const t=e,o=U(!1);o.value=t.url.length===0;const s=()=>{o.value=!0};return ue(()=>[t.url,t.name],()=>{o.value=!1}),(a,n)=>o.value?(c(),m("div",ws,y(e.name&&e.name.length>0?e.name.charAt(0).toUpperCase():""),1)):(c(),m("img",{key:0,src:e.url,class:"w-50px h-50px rounded-2xl object-cover",onError:s},null,40,xs))}}),Ve="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsUlEQVR4nO3aS04CQRAGYNSLKEGNXmS0K72ZdIWlUsU95mYSjQY16BVcaOIdjIo2LgyRx4D9HOpP2LD5+6OHoemeVksikUgkEolEEjkF0qEydA+G3sDwhcb+Xqyx2G6FNLBjUUh3p93+gfMSQL4F5PHvi541cqcVOLbTdk+NxdDQdc+WQn6fBodHz8Qij+3YnJcppKu/4HDoedifGeZL54VQ9tpzCz2jF2Lt+2Wv7aW46J7tguGn2cX8qrp8FBrr/eoqAqKjY0Oik8GGQEN5vp8U1ifaYhXyS3JYH+jksS7R2WBdoLPD/gedLXYddPbYVdCNwdZZOFhoo7A1Z7pZ2NXRDcDWRzcIa7P4BuXuD0cu2HFj0FAfmz9ab9LPEtRYVMTYLvKSVVZQ2aNhjeVitmiN3Fn3e5kdWjvYcMsGrR3uLiaP1h62UpNFa4/7xsmhdYBN8mTQOuCJQHS0jnD8EQ0Nm3ZcCoaGMRf7S9A3TssQcQeQP2Nhlz7yYOijqqptp2WA/BgTuxhNI+dFJ9g7VoYfJjNt6NrbYwZ17yd2DJOrjkbRV2ASiUQikUgkku9P4AsjhYRlvSHnTwAAAABJRU5ErkJggg==",bs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVR4nO2WQQ7CIBBFuZKa2o3deF/0ZKYmhvUzpBhbYpUZIZjIWxf+Z+ZTxphGYwVgAE7Azijxa4Gz30sjfmPiCvQK8S1wCXs44CgRdywZgU4g3oU1c1xSJZhK9ookEyviD2xq30aNiQ/iY3KegM2sfzE+E/sca7KZyC4u2biYuKCvqryI4P0py5z8CxP5xQUmyolXN0DNFlAzhNS8hiyfVO2PqC8mbp7f5jWBQDy7CWo/x/zAQDJUHck8wCEaSsV3OspE+lAaVcL6QBolIcxWPJY3/oo7tk8INpQnayAAAAAASUVORK5CYII=",Cs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3UlEQVR4nO2ayW4TQRCG+0DgTiRCFHNje4tcfTGZv0aN4yoncEADAhIOIMGRBwBC3gUlyhOwRAGOSIEnACMlcSSWyEHlcSSWhGjaPZs8v1SSZc9096dud1dXlTGVKlWqVGlEZe21s0TMRLIM8BrAm0TyFeAfaoPPm/qbPhOG0tJ3TJkUBHPjAC8CvE4k+27GbwBZ0LZMUQVIDeDnRLzrDvqnAdwl4iVr56dMURRF0RiR3ANkxxfoITO+C8jjer1+KldYa+USEb9PD/QfexcEcxdzgSVqh+nO6pGzvQ0IMobl60TyM3vYg/+27AUB38oEFpCbeYEeAr6QxTLeyxv095kmagepwFrbPg/wVt6Qh0DvELUue4a1JzPejZNCv9Xj0RswkTzKG+p4aH7gBdba+anY4/E1OH4Rtyk1IlnxubQBmRwaGH130evyqx20PTPTPOd5lp8OBRsEc+M+fWO1v/vwDNwd6sIB8KLPAaUNPIC+MwzwetmAieS1I6xMEkmvhMC9RmN2IjEwxZGK/RIC60nQdACW5RIDLyUGRhxnKimwrDgAy6eyAmtg0AW44+JBJe7o+HE4eGT8xaWj764elG8l98j4W+JOMILAnaQbRRrQMSyvJhzL58QdEcnHNDaUAm9aPFrHEo2a4xGG0iorcBjK1cTAjcbsxEhdHlSaxSsfML80rgJkoWzAgNweNtfbHZkQj0p3vPIE8eSJKV6YVvoemaMH9R/jbW/lEgA/9DkT6RjfN74URdGYpjMKDLvhNdVS9GSaViKYNAQIipYuBeSKSVNEHOUNOrAeIDdShS1SyYNWIpgsRdQO9CjIHpa3Ul/GR4modSHb3Zs3dPM0eWp6evqEFqalO9txYZpWIpiiCHEu6plPr0zb0pxvoQtOg35OuX0X4FeO9+meXvE07WmtPW3KJKB9RhNb8QWEVwH+oNFQDQEPrKPfxT51/5mmvpP3uCtVqlSpkslJvwD4sB37/slROAAAAABJRU5ErkJggg==",Is={class:"text-xl font-500 text-gray-700 flex items-center justify-between mb-1"},Rs=["onClick"],Es=u("img",{class:"w-4 h-4",src:Ve},null,-1),Ss=[Es],Fs={key:0,class:"flex flex-wrap gap-2 mt-1"},Bs=["onClick"],Us=["onClick"],Ms={class:"bg-gray-100 divide-y rounded"},Ts={class:"grid grid-cols-6 gap-3 p-3"},Os=["onClick"],Ls={class:"flex items-center justify-center p-3 gap-3"},Qs=["placeholder"],Vs=["placeholder"],Ks=["disabled","onClick"],Ds=L({__name:"TagsModal",setup(e){const t=_(),o=U([]),s=U({}),a=U([]),n=U({}),i=U(""),l=U("#60a5fa"),d=["#f43f5e","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#0ea5e9","#6366f1","#8b5cf6","#6b7280","#64748B","#78716c"],g=b=>{t.dispatch("imkit/updateRoomPrefs",{roomId:b,prefs:{tags:o.value,tagColors:s.value}})},A=b=>{const C=t.state.imkit.rooms[b.ref.params.value.roomId];C.pref&&(o.value=[...C.pref.tags],a.value=[...C.pref.tags],s.value={...C.pref.tagColors},n.value={...C.pref.tagColors})},p=()=>{i.value&&(o.value.length>=5||(o.value.includes(i.value)||o.value.push(i.value),s.value[i.value]=l.value,i.value=""))},k=b=>{o.value=o.value.filter(C=>C!==b),delete s.value[b]},F=b=>{i.value=b,l.value=s.value[b]};return(b,C)=>{const N=Fe("vue-final-modal");return c(),P(N,Be(b.$attrs,{onBeforeOpen:A,classes:"flex items-center justify-center","content-class":"bg-white rounded-xl p-5 flex flex-col gap-3 max-w-360px"}),{default:te(({close:S,params:B})=>[u("div",Is,[se(y(b.$t("tag"))+" ",1),u("button",{class:"flex items-center justify-center bg-gray-200 rounded-full w-7 h-7",onClick:S},Ss,8,Rs)]),o.value.length>0?(c(),m("div",Fs,[(c(!0),m(V,null,J(o.value,f=>(c(),m("div",{key:f,class:"bg-blue-400 text-white text-base px-2 py-1 rounded-md flex items-center justify-center gap-1 cursor-pointer",style:X({backgroundColor:s.value[f]}),onClick:v=>F(f)},[se(y(f)+" ",1),u("img",{width:"16",height:"16",src:bs,onClick:ae(v=>k(f),["stop"])},null,8,Us)],12,Bs))),128))])):I("",!0),u("div",Ms,[u("div",Ts,[(c(),m(V,null,J(d,f=>u("div",{key:f,class:"w-10 h-10 rounded",style:X({backgroundColor:f}),onClick:v=>l.value=f},null,12,Os)),64))]),u("div",Ls,[$(u("input",{type:"text",class:"rounded-md p-2 text-base text-white placeholder-white outline-none w-32 flex-grow",style:X({backgroundColor:l.value}),placeholder:b.$t("inputTag"),"onUpdate:modelValue":C[0]||(C[0]=f=>i.value=f)},null,12,Qs),[[Ee,i.value]]),$(u("input",{type:"text",class:"rounded-md p-2 text-base outline-none w-32 flex-grow",placeholder:b.$t("inputTagPlaceholder"),"onUpdate:modelValue":C[1]||(C[1]=f=>l.value=f)},null,8,Vs),[[Ee,l.value]]),u("img",{class:Q(["cursor-pointer",{"opacity-20 cursor-not-allowed":!i.value||o.value.length>=5}]),width:"30",height:"30",src:Cs,onClick:p},null,2)])]),u("button",{class:"text-base rounded-lg flex-grow bg-blue-400 text-white h-10 disabled:bg-blue-200 disabled:cursor-not-allowed",disabled:JSON.stringify([...o.value].sort())===JSON.stringify([...a.value].sort())&&JSON.stringify([...Object.values(s.value)].sort())===JSON.stringify([...Object.values(n.value)].sort()),onClick:()=>{g(B.roomId),S()}},y(b.$t("confirm")),9,Ks)]),_:1},16)}}}),At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR4nO2asUrEQBCGp7PxEbSx8VnEFzG7Bp05sJ05rS18jDsEX8Pn8CxV9ArbkVVEUEJyJrhZ838wXYr92ORLM0QAAAAAGBWVXOwG0evIuo5i3mUC2yqwXYag21SerD12Ff0xrLd1fbVFpRDSzf5W9vO2xZRKIW7wGjcL62t1qntUArGnbPZhXQe2m6OT8/1pCH+JP6UeTUf449NaTkzYXiYlHMUcwgCA/0U1mx9G0fvif0lsq+PZ/KBVOD2Y+7CDDetdq3D2Qw48BOFv5L4R3LDglXZ8w4JoOSrdRO6qotKCSjsqLai0o9JN5K4qKi2otKPSgko7Kt1E7qqi0oJKOyotfSrN/ZdaRjOsz63CaSEk+0GHm0WrcNp+SQshIzhsrwmiD/WZ7tAGq4fLtCNRnuj7mRedZQEAAABAf8UbgvvRyv0JTvIAAAAASUVORK5CYII=",Ns={class:"text-xl font-500 text-gray-700 flex items-center justify-between mb-1"},Ps=["onClick"],Gs=u("img",{class:"w-4 h-4",src:Ve},null,-1),_s=[Gs],Ys=["onClick"],Xs=u("img",{width:"30",height:"30",src:At},null,-1),js=L({__name:"AddToFolderModal",setup(e){const t=_(),o=U(""),s=h(()=>t.state.imkit.sortedFolderIds.map(i=>t.state.imkit.folders[i]).filter(i=>i)),a=i=>{i.ref.params.value&&(o.value=i.ref.params.value.roomId)},n=i=>{o.value&&t.dispatch("imkit/addRoomToFolder",{roomId:o.value,folderId:i})};return(i,l)=>{const d=Fe("vue-final-modal");return c(),P(d,Be(i.$attrs,{onBeforeOpen:a,classes:"flex items-center justify-center","content-class":"bg-white rounded-xl p-5 flex flex-col gap-3 w-360px relative max-h-80vh overflow-y-auto"}),{default:te(({close:g})=>[u("div",Ns,[se(y(i.$t("addToFolder"))+" ",1),u("button",{class:"flex items-center justify-center bg-gray-200 rounded-full w-7 h-7",onClick:g},_s,8,Ps)]),(c(!0),m(V,null,J(r(s),A=>(c(),m("div",{key:A.id,class:"flex items-center p-2 gap-3 cursor-pointer rounded-lg bg-slate-200 relative group",onClick:()=>{n(A.id),g()}},[Xs,se(" "+y(A.name),1)],8,Ys))),128))]),_:1},16)}}});var oe=(e=>(e.RoomName="roomName",e.RoomMember="roomMember",e.RoomPrefTags="roomPrefTags",e.RoomPrefFolder="roomPrefFolder",e.RoomTags="roomTags",e))(oe||{});const Ws={class:"flex items-center justify-center gap-1.5"},zs={key:0,class:"bg-slate-500 w-1 h-10 rounded-full ml-2 flex-shrink-0"},Js={class:"h-50px w-50px relative flex-shrink-0"},Hs={key:2,class:"absolute h-5 w-5 -right-1 -bottom-1 bg-slate-200 rounded-lg p-3px",src:gt},Zs={class:"flex flex-col flex-grow text-left w-0 min-w-0"},qs={class:"flex justify-between"},$s=["innerHTML"],eo={class:"text-xs text-gray-500 whitespace-nowrap"},to=["innerHTML"],so={key:0,class:"text-xs font-600 bg-blue-400 text-white rounded-full px-1.5 pt-0.5 h-5 min-w-5 text-center leading-none flex items-center justify-center"},oo={key:0,class:"flex flex-wrap gap-1 mt-1"},ao=["onClick"],no=u("img",{width:"20",height:"20",src:fs},null,-1),ro=[no],io={key:0,class:"absolute right-3 top-[calc(50%_+_28px)] p-1.5 bg-white z-10 rounded-lg shadow-md flex flex-col items-stretch gap-1"},lo=["onClick"],co=u("img",{width:"24",height:"24",src:vs},null,-1),uo=["onClick"],mo=u("img",{width:"24",height:"24",src:gt},null,-1),go=["onClick"],Ao=u("img",{width:"24",height:"24",src:ks},null,-1),po=["onClick"],ho=u("img",{width:"24",height:"24",src:ys},null,-1),fo=L({__name:"RoomCell",props:{source:null},setup(e){const t=e;j.extend(Xe),j.extend(rt);const o=h(()=>{let f=j(t.source.updatedAt);return f.isSame(j(),"day")?f.format("H:mm"):f.isYesterday()?"Yesterday":f.isSame(j(),"week")?f.format("dddd"):f.isSame(j(),"year")?f.format("MMM D"):f.format("ll")}),s=_(),a=h(()=>s.state.imkit.rooms[t.source.id]),n=h(()=>s.state.imkit.searchKeyword.length>0&&s.state.imkit.searchType===oe.RoomName?a.value.displayName.replaceAll(s.state.imkit.searchKeyword,`<span class="text-blue-400">${s.state.imkit.searchKeyword}</span>`):a.value.displayName),i=h(()=>{var f;return s.state.imkit.searchKeyword.length>0&&s.state.imkit.searchType===oe.RoomMember?[`<span class="text-blue-400">${s.state.imkit.searchKeyword}</span>`,...a.value.memberIds.map(v=>s.state.imkit.users[v]).filter(v=>v).map(v=>v.nickname||v.id).filter(v=>v!==s.state.imkit.searchKeyword)].join(", "):(f=a.value.lastMessage)==null?void 0:f.string}),l=h(()=>s.state.imkit.selectedRoomId===t.source.id),d=h(()=>!!s.state.imkit.roomIdsInFolders[t.source.id]),g=h(()=>s.state.imkit.actionMenuRoomId),A=h(()=>s.state.imkit.searchKeyword),p=h(()=>{var f;return((f=t.source.pref)==null?void 0:f.sticky)??!1}),k=h(()=>s.state.imkit.sortedFolderIds),F=()=>{we.show({component:Ds},{roomId:t.source.id}),s.commit("imkit/setState",{actionMenuRoomId:""})},b=()=>{g.value===t.source.id?s.commit("imkit/setState",{actionMenuRoomId:""}):s.commit("imkit/setState",{actionMenuRoomId:t.source.id})},C=()=>{s.commit("imkit/setState",{selectedRoomId:t.source.id,actionMenuRoomId:""})},N=async()=>{var v;const f=!((v=t.source.pref)!=null&&v.sticky);await s.dispatch("imkit/updateRoomPrefs",{roomId:t.source.id,prefs:{sticky:f}})},S=async()=>{await s.dispatch("imkit/removeRoomFromFolder",t.source.id)},B=async()=>{we.show({component:js},{roomId:t.source.id})};return(f,v)=>{var K,Y;const T=pe("click-outside");return c(),m("div",Ws,[r(d)&&!r(A)?(c(),m("div",zs)):I("",!0),u("div",{class:Q(["flex items-center p-2 gap-3 cursor-pointer rounded-lg min-h-66px flex-grow group sm:hover:bg-gray-100 relative",{"bg-gray-100":r(l)}]),onClick:C},[u("div",Js,[r(a).avatars.length===1?(c(),P(ee,{key:0,url:r(a).avatars[0].url,name:r(a).avatars[0].name,class:"relative"},null,8,["url","name"])):(c(),m(V,{key:1},[G(ee,{url:r(a).avatars[1].url,name:r(a).avatars[1].name,class:"h-36px w-36px text-16px absolute top-0 right-0"},null,8,["url","name"]),G(ee,{url:r(a).avatars[0].url,name:r(a).avatars[0].name,class:Q(["h-38px w-38px text-16px absolute bottom-0 left-0 border-2 border-white group-hover:border-gray-100",{"border-gray-100":r(l)}])},null,8,["url","name","class"])],64)),r(p)?(c(),m("img",Hs)):I("",!0)]),u("div",Zs,[u("div",qs,[u("div",{class:"text-base text-gray-900 overflow-ellipsis overflow-hidden whitespace-nowrap",innerHTML:r(n)},null,8,$s),u("div",eo,y(r(o)),1)]),u("div",{class:Q(["flex items-center justify-between",{"text-gray-800":r(a).numberOfUnread>0}])},[u("div",{class:"text-sm text-gray-500 overflow-ellipsis overflow-hidden whitespace-nowrap",innerHTML:r(i)},null,8,to),r(a).numberOfUnread>0&&!r(l)?(c(),m("div",so,y(r(a).numberOfUnread>99?"99+":r(a).numberOfUnread),1)):I("",!0)],2),(K=r(a).pref)!=null&&K.tags?(c(),m("div",oo,[(c(!0),m(V,null,J(((Y=r(a).pref)==null?void 0:Y.tags)??[],Z=>{var re;return c(),m("div",{key:Z,class:"bg-blue-400 text-white text-xs px-1 py-0.5 rounded-md",style:X({backgroundColor:(((re=r(a).pref)==null?void 0:re.tagColors)||{})[Z]})},y(Z),5)}),128))])):I("",!0)]),u("div",{class:Q(["absolute right-4 w-10 h-10 rounded-full bg-white shadow-md items-center justify-center hidden group-hover:flex hover:scale-110 hover:transform hover:transition",{"!flex":r(g)==e.source.id}]),onClick:ae(b,["stop"])},ro,10,ao),r(g)==e.source.id?$((c(),m("div",io,[u("div",{class:"flex gap-2 text-gray-800 text-base cursor-pointer hover:bg-gray-100 p-2 rounded",onClick:ae(F,["stop"])},[co,se(" "+y(f.$t("tag")),1)],8,lo),u("div",{class:"flex gap-2 text-gray-800 text-base cursor-pointer hover:bg-gray-100 p-2 rounded",onClick:ae(N,["stop"])},[mo,se(" "+y(r(p)?f.$t("unpin"):f.$t("pin")),1)],8,uo),r(d)?(c(),m("div",{key:0,class:"flex gap-2 text-gray-800 text-base cursor-pointer hover:bg-gray-100 p-2 rounded",onClick:ae(S,["stop"])},[Ao,se(" "+y(f.$t("removeFromFolder")),1)],8,go)):r(k).length>0?(c(),m("div",{key:1,class:"flex gap-2 text-gray-800 text-base cursor-pointer hover:bg-gray-100 p-2 rounded",onClick:ae(B,["stop"])},[ho,se(" "+y(f.$t("addToFolder")),1)],8,po)):I("",!0)])),[[T,()=>{r(s).commit("imkit/setState",{actionMenuRoomId:""})}]]):I("",!0)],2)])}}}),vo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVR4nO3UQU7CUBSF4bcQGbsVYeAajO90A9wHa5B32YhO3BEkRgYkxggbgDTRxBGa0Nse5XzJnXXQk79pSiIicsGa6fIW5hsUP5w88037bPrrcqnbH8d+XvtsYpFni0k2X//25fu69p0a83Hng1Hqy9DjTnwZrxp8rsZ8nEtdEdZd5VJvzh4oIv8TCH5U30+DuwaCqiocCQRVVTgSCKqqcCQQVFXhSCCoqsKRQFBVhSOBoKoKRwJBVRWOBIKqKhwJBFVVOBIIqqpwJBBUVeFIIKiqwpFAUFWFI4GgqgpHgvl+6Kpfl80/4geX+kwzuNTH8MH3s8V1Nn8feizM3zB/uEp9uJsuRzB/Qqm7/sfWXVu2t7EiIiKSunIEhOq3p0W+CNEAAAAASUVORK5CYII=",ko="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAADaUlEQVR4nO2aS2gTURSG4/sBilZxI1grghtBaF0VxKXgq6uKgiiIpJ17k2bOGUVX/neS4mPhQtSFuhUXxZVEW3HlxlU3uqgKrlTEF/jAR+ujlZvpxFaCySQzmUkyB84mZM78H+e/987cuYlEHHHE0TJxGFicsnIdhpXtikJqLVqT76DCtHsEYUSQmpCspqKUgjEuWQ0bpr2nZlApT68SrO6FDVUxPGGECG3Vw5J6GjaEd2j1uCpo0UCdLZHD3mBNuycComtKT2NasrobtuBaUxDuVASrp/kozsaegRnjABaWBTZMbAhbrF/Zl8H68nY20Rm2UN/SRGf5DlvZrtCF+pSGle2Kgf+NuMMcvjVjS3MLjGHBeG+QvV0SRpseWDDGU6a9Tes7cvzcMsl41dTABuGQq08STjV1hwVh0NWWYrtXMiabFlgwbgKYW+isia2S1VdPzrAaCZgwmkxiqdYkrFy7YLz2WsNoHGC87KPBtcVJitTDauoYDQFM+Jyi7Batpbd3aJ5k3Kq2lhF1YEHqt2TsdbVIVhdrqWcEBSxYffIJOuPqEIRUrfWMIIAF421/JrtJkjrhZcko0d1rfztr7xCkfkYUWB0oCjXR79jSKyxGAMzXNfotbPbLMUZAwB8MRncRmrBfMn5UXgNjmQxW6GuTjNWC8MwP2MCApdOhL9qGbg1B2CkY38peS+qdIGwsbh4yHvgFGyiwdMbghH70c+voh31J+Pgf2O8znDFHEq77CRs4sHTs+Usyjs7aECT1psT/JlOEg0VHsLL9hq0TsCrASMYxt54zg+P57O5CFWFN7Ktldo8AsHIszjjr1hwYwDrJeDL9+5C2cOFejG5t7SBg6w4sncnskvu2029hjWRcdT9g64/Zeg0PCjYUYOnY90YyeWXBzHuk01guGI+ChA0PmAvQeaLzS4ovBIR80LDhAnNhGbqvOytZXa4HbPjAXFirX9QLNhLAss5pxMAlIu4wN7mlZat9EE9ZuY7QhfqUwsq1lwVOpy8smj7ON9XQSep7RYdaCrZmNdz4wMgnKg19qCt0wTWmYdm7El5Cb6y1RHfd0Ac09UHN0MV7TowZJ8+sTFQTRGhrqPFMyFcNOzMkY7c+uxjJ2dvZMbntecxWEnrJ0sf5wj7676bWojVVJD6OOOJINEP8AR99+lKlJ3IWAAAAAElFTkSuQmCC",yo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVR4nO2aTU4CQRCFm5W6N7jSiEeAgxjkAO6UmQakaw5QPRCXLlzCRVRAEzd6CfUSSoIrTfET40wbZpA4hdSX1LI7703PvCbhKSUIwtpgzMWW18QDL2iVOEwtaBdI07J95rQJK77Bnm/suwb7wWmmmm60Ccuk9VdOG43zHW3sfdamkg/eVQPML2zWN/iSvYnU87yI6dxqnWz8pFO93tqEFddGvsE3H2xfA3Z9YztZzlgD2D5pcpqefNPJoICKmQV88KC9q5hBmkib43CuE21wjLjpSONXjmZnNBq4Fz1p8lCvX27MXUz3rONp9RRztMFBVHctaBfmL2xi0RECXcUc0hjT3cTi3IX0CyZ+wrajmDMJsu+6vaBVmrtQDIOcMEvklQb5ht1IaIGEFksktEBCy42EFkhosURCCyS03EhogYQWSyS0QELLjYQWSGixREILJLTcSGiBhBZLJLRAQsvN2oWWXrc/xGtBuxAvtNi+Yo5v7G1U9+kZ7q9PqQVwlKjUQoy7i47aEm2sOJoF++joal0l3sQL8OiHlttw0pbhUUybNneGzhJdMzxM8+ByVN9bfiXwj8bgIPWrUg0wT0XNzMWnHN/g0wngdmrDX6ZX6KQNDhY2GymIl6m7yLIgDjiigEr7zSaCriy627Ku/s+GtCS+egRBUP+BT4sLtV3SLOLeAAAAAElFTkSuQmCC",xo={key:0,width:"20",height:"20",src:ko},wo={key:1,width:"20",height:"20",src:yo},bo={key:3,class:"h-40px w-40px relative flex-shrink-0"},Co={class:"flex flex-col flex-grow text-left w-0 min-w-0"},Io={class:"flex justify-between"},Ro={class:"text-sm text-gray-900 overflow-ellipsis overflow-hidden whitespace-nowrap"},Eo={class:"text-xs text-gray-500 whitespace-nowrap"},So={class:"text-xs text-gray-500 overflow-ellipsis overflow-hidden whitespace-nowrap"},Fo={key:0,class:"text-xs font-600 bg-blue-400 text-white rounded-full px-1.5 pt-0.5 h-5 min-w-5 text-center leading-none flex items-center justify-center"},Bo=L({__name:"RoomCell",props:{source:null},setup(e){const t=e;j.extend(Xe),j.extend(rt);const o=h(()=>{let i=j(t.source.updatedAt);return i.isSame(j(),"day")?i.format("H:mm"):i.isYesterday()?"Yesterday":i.isSame(j(),"week")?i.format("dddd"):i.isSame(j(),"year")?i.format("MMM D"):i.format("ll")}),s=_(),a=h(()=>s.state.imkit.selectedRoomIdsForCreateFolder[t.source.id]),n=i=>{s.commit("imkit/updateField",{key:"selectedRoomIdsForCreateFolder",value:{[t.source.id]:i}})};return(i,l)=>{var d;return c(),m("div",{class:Q(["flex items-center p-1 px-2 gap-2 cursor-pointer rounded-lg min-h-44px w-full group sm:hover:bg-gray-100 relative",{"bg-gray-100":r(a)}]),onClick:l[0]||(l[0]=g=>n(!r(a)))},[r(a)?(c(),m("img",xo)):(c(),m("img",wo)),e.source.avatars.length===1?(c(),P(ee,{key:2,url:e.source.avatars[0].url,name:e.source.avatars[0].name,class:"h-34px w-34px rounded-lg text-base flex-shrink-0"},null,8,["url","name"])):(c(),m("div",bo,[G(ee,{url:e.source.avatars[1].url,name:e.source.avatars[1].name,class:"h-32px w-32px text-16px absolute top-0 right-0 rounded-lg"},null,8,["url","name"]),G(ee,{url:e.source.avatars[0].url,name:e.source.avatars[0].name,class:"h-34px w-34px text-base absolute bottom-0 left-0 border-2 border-white group-hover:border-gray-100 rounded-lg"},null,8,["url","name"])])),u("div",Co,[u("div",Io,[u("div",Ro,y(e.source.displayName),1),u("div",Eo,y(r(o)),1)]),u("div",{class:Q(["flex items-center justify-between",{"text-gray-800":e.source.numberOfUnread>0}])},[u("div",So,y((d=e.source.lastMessage)==null?void 0:d.string),1),e.source.numberOfUnread>0?(c(),m("div",Fo,y(e.source.numberOfUnread>99?"99+":e.source.numberOfUnread),1)):I("",!0)],2)])],2)}}}),Uo={class:"text-xl font-500 text-gray-700 flex items-center justify-between mb-1"},Mo=["onClick"],To=u("img",{class:"w-4 h-4",src:Ve},null,-1),Oo=[To],Lo=["placeholder"],Qo=["disabled","onClick"],pt=L({__name:"UpdateFolderModal",setup(e){const t=_(),o=U(),s=U(""),a=h(()=>o.value?o.value.roomIds.map(d=>t.state.imkit.rooms[d]).concat(t.state.imkit.sortedRooms).sort((d,g)=>{var A,p,k;return((A=d.pref)==null?void 0:A.sticky)===((p=g.pref)==null?void 0:p.sticky)?g.updatedAt-d.updatedAt:(k=d.pref)!=null&&k.sticky?-1:1}):t.state.imkit.sortedRooms),n=h(()=>s.value.length>0&&Object.keys(t.state.imkit.selectedRoomIdsForCreateFolder).length>0),i=d=>{console.log(d.ref.params.value),d.ref.params.value&&(o.value=t.state.imkit.folders[d.ref.params.value.folderId],o.value&&(s.value=o.value.name,t.commit("imkit/setState",{selectedRoomIdsForCreateFolder:o.value.roomIds.reduce((g,A)=>(g[A]=!0,g),{})})))},l=()=>{var d;t.dispatch("imkit/updateFolder",{folderKey:((d=o.value)==null?void 0:d.id)||`folder_${Date.now()}`,name:s.value})};return(d,g)=>{const A=Fe("vue-final-modal");return c(),P(A,Be(d.$attrs,{onBeforeOpen:i,classes:"flex items-center justify-center","content-class":"bg-white rounded-xl p-5 flex flex-col gap-3 w-360px"}),{default:te(({close:p})=>[u("div",Uo,[se(y(o.value?d.$t("editFolder"):d.$t("createFolder"))+" ",1),u("button",{class:"flex items-center justify-center bg-gray-200 rounded-full w-7 h-7",onClick:p},Oo,8,Mo)]),$(u("input",{type:"text",class:"bg-gray-100 flex-grow outline-none p-2 rounded-md",placeholder:d.$t("folderName"),"onUpdate:modelValue":g[0]||(g[0]=k=>s.value=k)},null,8,Lo),[[Ee,s.value]]),G(r(je),{class:"h-50vh overflow-auto","data-key":"id","data-sources":r(a),"data-component":Bo,"wrap-class":"flex flex-col gap-1.5","estimated-size":44},null,8,["data-sources","wrap-class"]),u("button",{class:Q(["h-10 text-base rounded-lg flex-grow bg-blue-400 text-white",{"!bg-gray-400 cursor-not-allowed":!r(n)}]),disabled:!r(n),onClick:()=>{l(),p()}},y(d.$t("confirm")),11,Qo)]),_:1},16)}}}),Vo=u("img",{width:"30",height:"30",src:At},null,-1),Ko={class:"flex flex-col"},Do=["innerHTML"],No={class:"text-sm text-gray-500 overflow-ellipsis overflow-hidden whitespace-nowrap"},Po={key:0,class:"ml-auto text-xs font-600 bg-blue-400 text-white rounded-full h-5 min-w-5 text-center leading-none flex items-center justify-center"},Go=["onClick"],_o=u("img",{width:"20",height:"20",src:"https://img.icons8.com/ios-glyphs/30/637289/pencil--v1.png"},null,-1),Yo=[_o],Xo=["onClick"],jo=u("img",{width:"20",height:"20",src:vo},null,-1),Wo=[jo],zo=L({__name:"FolderCell",props:{source:null},setup(e){const t=e,o=_(),s=h(()=>o.state.imkit.searchKeyword.length>0&&o.state.imkit.searchType===oe.RoomPrefFolder?t.source.name.replaceAll(o.state.imkit.searchKeyword,`<span class="text-blue-400">${o.state.imkit.searchKeyword}</span>`):t.source.name),a=h(()=>t.source.roomIds.filter(d=>o.state.imkit.selectedRoomId!==d).reduce((d,g)=>{const A=o.state.imkit.rooms[g];return A?d+A.numberOfUnread:d},0)),n=()=>{o.state.imkit.selectedFolderId===t.source.id?o.commit("imkit/setState",{selectedFolderId:""}):o.commit("imkit/setState",{selectedFolderId:t.source.id})},i=()=>{o.dispatch("imkit/removeFolder",t.source.id)},l=()=>{we.show({component:pt},{folderId:t.source.id})};return(d,g)=>(c(),m("div",{class:"flex items-center p-2 gap-3 cursor-pointer rounded-lg min-h-66px bg-slate-200 relative group",onClick:n},[Vo,u("div",Ko,[u("div",{class:"text-basse text-gray-900 overflow-ellipsis overflow-hidden whitespace-nowrap",innerHTML:r(s)},null,8,Do),u("div",No,y(d.$t("numberOfChatroom",e.source.roomIds.length)),1)]),r(a)>0?(c(),m("div",Po,y(r(a)),1)):I("",!0),u("div",{class:"absolute right-14 w-8 h-8 rounded-full bg-white shadow-md items-center justify-center hidden group-hover:flex hover:scale-110 hover:transform hover:transition !hover:flex",onClick:ae(l,["stop"])},Yo,8,Go),u("div",{class:"absolute right-4 w-8 h-8 rounded-full bg-white shadow-md items-center justify-center hidden group-hover:flex hover:scale-110 hover:transform hover:transition !hover:flex",onClick:ae(i,["stop"])},Wo,8,Xo)]))}}),Jo=L({__name:"RoomListWrapperCell",props:{source:null},setup(e){return(t,o)=>e.source instanceof r(Ie)?(c(),P(fo,{key:0,source:e.source},null,8,["source"])):(c(),P(zo,{key:1,source:e.source},null,8,["source"]))}});var ie=(e=>(e.FetchRooms="/rooms",e.FetchRoom="/rooms",e.SearchRooms="/search",e.Subscribe="/me/subscribe",e.Unsubscribe="/me/unsubscribe",e))(ie||{});const Ke=e=>(he("data-v-73979804"),e=e(),fe(),e),Ho={class:"overflow-auto relative"},Zo={class:"flex items-center bg-gray-100 rounded-lg h-12 mb-2 w-full p-3 gap-2"},qo=Ke(()=>u("img",{class:"w-6 h-6 cursor-pointer",src:ls},null,-1)),$o=["placeholder"],ea={key:0,class:"flex items-center gap-2 overflow-auto text-sm text-gray-900 mb-2"},ta=["onClick"],sa={key:1,slot:"header",class:"flex flex-col gap-1"},oa=Ke(()=>u("div",{class:"loading rounded-2xl w-50px h-50px"},null,-1)),aa=Ke(()=>u("div",{class:"flex-grow flex flex-col justify-center gap-2"},[u("div",{class:"loading h-5 rounded-md w-full"}),u("div",{class:"loading h-4 rounded-md w-4/5"})],-1)),na=[oa,aa],ra=Ke(()=>u("img",{width:"30",height:"30",src:cs},null,-1)),ia=[ra],la=L({__name:"RoomList",setup(e){const t=_(),o=U(""),s=U(!1),a=U(),n=h(()=>t.state.imkit.sortedRooms),i=h(()=>t.state.imkit.sortedFolderIds.map(f=>t.state.imkit.folders[f]).filter(f=>f)),l=h(()=>t.state.imkit.folders[t.state.imkit.selectedFolderId]),d=h(()=>t.state.imkit.searchType),g=h(()=>t.state.imkit.searchKeyword?Object.keys(t.state.imkit.searchRooms):[]),A=h(()=>{if(t.state.imkit.searchKeyword){if(d.value===oe.RoomPrefFolder&&l.value){const v=[...t.state.imkit.searchRooms[d.value]],T=l.value.roomIds.map(Y=>t.state.imkit.rooms[Y]).filter(Y=>Y),K=v.findIndex(Y=>Y.id===l.value.id);return K>-1&&v.splice(K+1,0,...T),v}return t.state.imkit.searchRooms[d.value]||[]}const f=[...i.value,...n.value];if(l.value){const v=l.value.roomIds.map(K=>t.state.imkit.rooms[K]).filter(K=>K),T=i.value.findIndex(K=>K.id===l.value.id);T>-1&&f.splice(T+1,0,...v)}return f}),p=U(!1),k=h(()=>s.value||p.value||!!t.state.imkit.isRequesting[ie.SearchRooms]),F=()=>{t.dispatch("imkit/fetchRooms")},b=()=>{we.show({component:pt})},N=it(1e3,async()=>{o.value!==t.state.imkit.searchKeyword&&(o.value?t.dispatch("imkit/searchRooms",o.value):(t.commit("imkit/setState",{rooms:{},sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0,folders:{},sortedFolderIds:[],roomIdsInFolders:{},selectedRoomId:"",searchKeyword:""}),B()))}),S=Pt(500,N,{atBegin:!1});ue(o,S),ue(n,f=>{if(!t.state.imkit.selectedRoomId&&document.body.clientWidth>640){const v=Object.values(f).find(T=>T.numberOfUnread===0);v&&t.commit("imkit/setState",{selectedRoomId:v.id})}});const B=async()=>{p.value=!0,await t.dispatch("imkit/fetchPrefs"),await t.dispatch("imkit/fetchRooms"),p.value=!1,await t.dispatch("imkit/fetchRoomsInFolders")};return B(),(f,v)=>(c(),m("div",Ho,[G(r(je),{class:"p-2 h-full overflow-auto","data-key":"id","data-sources":r(A),"data-component":Jo,"wrap-class":"flex flex-col gap-1.5","estimated-size":66,keeps:60,onTobottom:F},{header:te(()=>[u("div",Zo,[qo,$(u("input",{ref_key:"searchInput",ref:a,class:"bg-gray-100 outline-none flex-grow","onUpdate:modelValue":v[0]||(v[0]=T=>o.value=T),placeholder:f.$t("search"),onCompositionstart:v[1]||(v[1]=T=>s.value=!0),onCompositionend:v[2]||(v[2]=T=>s.value=!1)},null,40,$o),[[Ee,o.value]]),o.value?(c(),m("img",{key:0,src:ut,class:"w-5 h-5 cursor-pointer",onClick:v[3]||(v[3]=()=>{r(S).cancel({upcomingOnly:!0}),o.value="",r(N)()})})):I("",!0)]),r(g).length>0?(c(),m("div",ea,[(c(!0),m(V,null,J(r(g),T=>(c(),m("div",{key:T,class:Q(["rounded-lg p-2 whitespace-nowrap cursor-pointer hover:bg-gray-100",{"bg-gray-100 text-gray-800 font-medium":T===r(d)}]),onClick:K=>r(t).commit("imkit/setState",{searchType:T})},y(f.$t(T)),11,ta))),128))])):I("",!0),r(k)?(c(),m("div",sa,[(c(),m(V,null,J(20,T=>u("div",{key:T,class:"p-2 flex gap-3"},na)),64))])):I("",!0)]),_:1},8,["data-sources","wrap-class"]),u("button",{class:"absolute rounded-full bg-white right-3 bottom-3 shadow-md w-14 h-14 flex items-center justify-center cursor-pointer",onClick:b},ia)]))}});const ne=(e,t)=>{const o=e.__vccOpts||e;for(const[s,a]of t)o[s]=a;return o},ca=ne(la,[["__scopeId","data-v-73979804"]]),da="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVR4nO3aP0oEMRSA8SfiFl7CPu1AgpV51ovmLeQK9v45gF7Aq6jXEO/gegy1WBlhQZHNvEJQNt8P0kw1fMyEhEQEAAAAAAAAALCtaq27Ue0qqT19jry4HJ/99Xv9C6HWWVK7T2qrbyOXW+ldqHUWc3n4EUdtFdXeh/l8X3oVGnHW41AXB9Kj4IgT1Z5FZEd6ExxxUi6vUe1YOp2Q7ybjHJ0W6U0gzmbEaSBOA3EaiNNAnAbiNAzD2Z5nEZjUTqRHSe2GOA0plxdWyA0xl+XmL6i8dbmF+CqpXfOLNTBJOyNN7th7/90GIk0jkgORHIjkQCQHIjkQyYFjn986OMxl2eXB4RpHzw5cXnDg+ovDeFkq5XKRcnkcR1Q75wIVAAAAAAAAAMg2+AByUSBd2KYVoQAAAABJRU5ErkJggg==",ua="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEu0lEQVR4nO1ay48UZRD/Dj4SvPhOfN8XhUMz9Q1msKvGXV3jZKdq1uEmGiGrf4D4CJpwQPSG4CMkxoT4inrdEF83FaJnjAYJCXBSFr3IgdVdMNW9RNmume3tx0xvmF/yJZ3Mbn3166+6qr6qcm6EEUYYYYQYwXj3Xh+2n/bEbwPy10ByAkj+9MR/69JnIP5Vf9O/qSE/tWlL+x63lrCZOvd54leA+BdPcinLApKfPfIufWGuqqg/1H7AI38AyAtZiSYW8qInmfXEgasK6o90bwbi/UvKXSppXdSXuXlCbh8uWeKt8TdZGtErTR35D4/t6YETDYKZa4H4nRQKLgDKESDZ44k70JwaazQev0n/X5c+12h6vf7miV/zKEfTfBKAfED/fyBkN0xM3ADEX6yg0CkgeT7YInesVv6D41N3AvFOj3x6hT0OB63WOjcAst/3VkJ+A+Jninj7KqMeyg5A/r2PN/+uNNJBbMb9TvbQxrB9Y9H7qtkDyYd9T7oM8waUd3uEjnlNLlzJ0NOO9urxTRe7GfFW26T4r3rYGXcDQg07j3qU8/Zpc6eYTR7mWzzKOetkVQE3YABJE1AuWCGr0ejelnsDT3LIfKMZzNiH3PAoL16xQm5kMm/b4t5zeQAkG6Msx3BQWeR5kt2GrN0ZdUs6MuTFTaHcn0VeBED5zAo96jndkAnH3pvPGqQ/znzrASPr0TibSWDBhGN5PGNld5luWZ7kVUO5M2Pd7nVVIRzlBsinjEN5edXCwLjParrockBDGBC/8f+VN6wBtl8wzPqn1VcqKOkQ6s3uXa5iiHJv69ML5e7UQuKyTMJZHXEVBZD8YFjjttQCPMpbhoA9rqLwKHuN73h/agFA/M1yAbWmiKsoIJQnjFTzy9QCPPLJxBtrTo3lVayoTGs5NNkwLPJEagFRKWWZAK1d5VWs6LB0GUHYutWQO5deMeMalif+lk14cnLyesPJXkiv2NVGGK5Ckz6Z8NI0vb6qhKMmQC6nReWEpbIIFxCWpJTEozTCKK8b+r6ZWoB28ZK5tBytMOEfk4Q7T6YWoC3LJGFeXFVCPiDCeqHJfXlQRC3LZH6601WMcJStJb/fYxkE8a61WgDwxC8VVuKph7KjKoRrTX4umXDwQuYpAiD+1HBe57RWPWzCS33pRBEPiD/KIi+Cb05vsMq0WiJ1QybsUT4xHWveW51Hed9QMpNpF1XTApRnLZ088UFXRJ4KRm6tUzjDaLX4Jj8WTwElc+ci8v0IOmZgvlGU84MkHZG1m2kXAbld6GaAfMAmzfOA7e2FbtbTjM2TVR32Fb5hEMe8w/a3Ezuywkwq2b1MOqj/1mwYhte4MhC0Wut0zKA3aQ0TPFNEsUBlLMXZuZ5kUb4tfc4jUNJ9TvpyRqYdgSyFe82Bl9LFMyvsMVs62WXmbX/Ty+OiFslR9uqdVS/qavZ6err0WWO9/qZXvOjWs/KAmw6p7SvNjPshmq+ypgPKW3OFe+MsTkU776WOHkay+WAZTjEzook6HS4l+adQoiifF9EEKA16U9H+rLYss5PlY3rFW3Oz03WtRpBsixwcylce5Xg8IMrzccKiz3JcC27a/NKyjLY/h633CCOMMIKrCv4FJTQtkqp0FHwAAAAASUVORK5CYII=",ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVElEQVR4nO2azUrDUBBGhxnvS9SZuhOsBF3bufEp+py1olB/3klt3VgEJaUbqbE0LpJOvgMDWc7HnBvI5BIBAADYwTUd0YSEojNwOtXMT+byWZVmfh5cpUuKyPE4XZjL0rJ8/SiXpZapoGiY8/1W2E2p8x1Fw1ze6wJXU6ZoWF3YTVE0DIEFEw6FQWmB0qEwKC1QOhQGpQVKh8KgtEDp1rFxOtfMt5rlbZeSbVfVozrPhk6jRmG1TMWvO6iuV9MdmTo/tt5802k7P+yXdkKiWVYHGzjLar+996RvgemwlTbneX9eWlkWjRf7Q6eROt+oy0vnNV73yNOTks6oC9iOhikahsCCCYfCoLRA6VAYlBYoHQqD0gKlQ2FQWqB0KNTl9a+Pd4qGOs/qzzFPKRpDp1HNjmzR+G9B19EyFdWSXLN8rKt6jniTdotqZ9yHC+IAAED/5BvYQaHooEGgKAAAAABJRU5ErkJggg==",ga="data:image/png;base64,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",Aa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADnklEQVR4nO2a3WoUMRSAT3Nm1RfQ2t1kaqUqtChiFdvdk1mxVnwBwfcQrUUEr8SfG71U36AUFQUvqxa9EsULaX0D0dpWqVCstsppKyxuMtntj/t3Pggss0km+TY5yWYGQBAEQRCEdWIsnjaE943FD4bwOydNOGUs3jMJDkGrks3DAU1qwlj8nZpIvcgS7IdWQlNU1IRzQTlrSVuc1TZKoHVGDlYsp1RSLoF90OwYq55VK6d0ukEzYxIcWrectRQTDkKzYlZXK9f0+aFJXTR5yHKKSQ3zNU/eu9CsGF7KnaNCDZfnVZecgginoFkxhPNOQRY6/s3L19xxCOehWTGeuLJZ+RseI4LSEUEBRFAAERRABAUQQQFEUAARFEAEBRBBAURQABEUQAQFEEEBRFAAERSg5QRpi4uuDvT0wLZqjlz5oL6s7n7IeQ7tv7nq7j4D230PBKBWaIuzrkbtJthZzaE9H9CX51UjnkP7SVfdXceh3TPiZqBWaMJJV6OySTRQ7WOflacYeciujhw1Uu1jn5iigju/eg+1Qlv12NmoRJ135Y8JT/niSqUptnjS05YL7hGnHkGtMBaveho14S1Danz9gtRzX72a1CvPCLoCtSImHHR2hPBX+wDscpXhV1l8sSuQZnQRulPiz5KrXK6AJ6BW9PVBhhvu6dANXzl+laVKSTMmiayvPkN4y/NDfYEiRFBLjC/wEi5kLRhfOX6VpaI3PUiN+0YO01GAmO9VTUD/r2TzmcMpnRsDgLbQNOWOrKyIvE8inOfPfM0XkEtoM1Y98Nx/WSeZg1APGKuepki6vFX35QDsu6+26gnUCznKHOLA7GnskiZ1brPvyXX6ArMh/GkKmV6oJwzhzZRYsqwtXg9Ntwpp49dlvHJW4981qDc6i7DDWPUuEHDH0gJ3CA7IKTHn7x7sLf8vg3okttBlCKfTO4ALPNp471JpvSv7HMJbvtWqZGpNdxZhD9QzJh8d1YRfK9jbLGmrXvJfhNhGeZbApwCc+DNf4+84T9p0KhE/F9vMEWgEdBId0xY/VbER3FDShB9jyvRBIxET7NWk3my5HKte1/208sHBklcv38HaxsTgIq9WvsO5hiIm6DFWPeTlfhPkLPNKxnVCs2EKmV5t8U5opfOkz5rwdlOKKeMsYK4Q9fMporY4mjKNRjkP5+Uy0KoYj6Bat6tuMCIoHREUQAQFEEEBRFAAERRABAUQQYIgCIIgCAI0Gn8ADIaRj4Vk+wwAAAAASUVORK5CYII=",pa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADnElEQVR4nM2ZX0hTYRTA1z8o6KEiooiiCCEqiCDqxTLopR6Dbnf3nO/u7l8XSvLBhx58UZo+JEEYmUYDzQ3MhCDC6bb2FqSNVIikt0gTaTMlMPpj+cU37/Squ/d+d5uuAwf2sLPz4/z7vu/M4ShQBEHYAADbZVneL0nSYUmSylwu115FUbY51lIkSdqJiJcB4C4ixhHxIwD8RERqpgAwAwAfEPEFANwihFwQBGFLUaBqa2vXI+IlDWjWCgY5lUEjYich5HQhETsFAMPFgkJj2OeiKO6zBQcAPgD4vdpwuKhTiHiOCw4Rr68hGNVF8ockSeVWaS1HxD+lAMR5TRNCduWEq6io2AgAIyWEo1okQ0Z1J5caDucB/yLikVy1N1BqOFyEvLcEThTFA4g4Z2VYV1dHn3Z306amJkoI4Xbodrvpo2CQPunqotXV1TyAE+yE0qdXtTIK1NfTVDpN05OTGY3H49Tlclk6U1WVDg0PL9h9Hh+nN6qqLO0IIcf16W2zMujp6VlwwgupLoPLamtrqyWgJEnX9ICDVgZt7e0rHKVNII3gmAYCAZ7SeKBP8TeeOnqTTHJBqiZwLBOctRvPwAmCsJW32D0eD33d35/TcSKRyED6/X46ODSU8zvRWIzKsszbySPZ9O7hBWTq8/kMI/kykTCOXCRiq/MRcTR7vJXZAcxGsn9gICdIoZHTRXA6A+h0Ok/YBbQDGc0DTtPZbIOczQeQBzKaP1xGFUXZzGrwTL4/4DdpCH3jFASYb4qt4NKFQ87m3SS8cOnCIKcygIqi7LZjaDaEe/v6uIe5lQLAJ9uDmkXu7eCgaUN4TBrHTiQB4L3+qJu2MvB6vdxD2GcyzGOxGNfABoCoHjBpZRAKhXI6jPT25nRoBtnQ0MATxfv620wwn+tWxADOCrKlpYUnglf1gF6e2/SXVMr22erz+WhSBzk6NkYrKyst7ZxO59EFQLbs0R4rpkY1NTU0HA7T242N3N2I8wOXNjc308cdHVy3ae2isG75o+mVHaerrHdyvequ/AdglC0ORFE8ZLTnW/VlEVpr0GEksiyfRMRfJYQbFwRhhyGgNhPdPG/kYisAzLAAmcLp6pHwbE+xeHATbB/psCOEkGNr0NlziBg23GhxRvM8ADxj+7sign1FxIdLhnGhwm49AHCRLcI14HfaZtSwqQDgOyKmtLO+EwBushu8qqqbigbGI8wh+yuCEHKQ7ZvZ5xUnQZ7yD8zfzl1rwXkSAAAAAElFTkSuQmCC",ha="data:image/png;base64,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",fa="data:image/png;base64,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",va="data:image/png;base64,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",ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVR4nO2bsWtUQRDGV1AxWCoWWgsS7ULgbufI2RxWNlraqq34F7ybiYgaYqVFsBP/AEWFgJWQUtBCkICW0Sg2ejeTa3RlL57cJXfcnXkvu++9+cG0B/vdt9/uzts1RlEURVEURVGmYTZxh4H4rkX5DCjfLcqDBeqcnupHioxFvgMkbrD4F5A8raHUTdnpOod2CjRQb2vE1+uJO2LKyBhxXK8syRdAbs7f/nHMlIlJBYKeUMgdS/y4lnRmTRmYViDoyymL/AqQLxrnDpii8v8CSZ+r5F1hcyoNgaBXKJs+p+rJz+OmKKQqEBUwp7IQCP45in/nPqcyFYh251Rl2c2YPLFfAkFec2rfBaLBnAJqnTUxE0ogyEtOBReI+lxFvA7EN6LKqdCiwPD66rsMNuGTofWJVSDXn1PVpHVOBaKx028tSE6FdgnEnlN+FYEIBj51oWxakqSatE5kLdDH4IPdm6O2AOVRZvsp22xfCz3IdBzVnQmrVWxfSD2ngPgSkLwA4g8WuR18sHt1Fcp7S+2rmfWnKstuxu9BasRzfuXwh0x/frIkKxbluSV5M0GzP3hZlG9+P1W5xadMCBpL7mg16ZypLsqCbcoVS3wTUO4D8RNAfh2LI//up5bmVtwhEyONSIT0Ipk808hYSD/lTJ5plFWgRiRTDJDvlXPgND6kvTj1xB1MZeAVXeYHsciXAeVlLP94VBvF7iaQwg8q2qOGJf6Ua7dkfVjVdscYcuiY9f1tmOVHmDVtudIOUbRpL6Mco599IIZ8mYTQ2QL66VmGu0UvL8jIfNHrLzTMMXqByuUuXyYhk00d6iVOV4jrdZOQjmNEL5LDLmH0KYIrfL5MwrT5Ml/C51AbY8Qp94O6kU8yUZ7B4tZ5U3b8o167LdJG91EvyUN91KsoiqIoiqIoZps/5GTgdqN3Zd0AAAAASUVORK5CYII=",ft="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVR4nO2bv4vUUBDHn6DicaViobUgnp292lnZaGmrtuJfoOV5B1ZaiJ34BygqCFaC5YEWCyIoy2XfzOzOxEIQ3MYbye3q/Yomuyb3XpL5wLQL893J900mb5wzDMMwDMMwjFno9fSwR74HKAjEKSA/GDCfmulH2oxHXgYS3R4e+adHfobIF1zXmVSO6D/iPaLc7Pf7R1wXKRBHt6pKCEjuev/tqOsSZQWCrRh74ieI6RnXBeYQSH/7FCC/8SSXVfWAayvzCgTbA+VDa32qEoHoj08NM58CgGOuLVQpELTRp2oSSKc+tdF4n6pTIMjxqSRJFlyT2DeBqKE+td8CwS6fIvq65GImoEDaCJ8KLRDsjE8w5FtR+VQEoujeqpJRNmVYFzkRWp8oBYK9PnXWBKKCqiJ5F8SnIqgSjdqnNk8RCp70XP2UR75DRMdrFQhQPodO9j/jh0d5XFs/BcA3IkiygoriDU/yGmB0qXKfQkyvAMpLT/zRo3xvgVg9GPL12uZTSZIsZD0IopzLTo7sJXNzHk3yCFBeeJK1EsP+4OFJOOunkiQ96UJARIsAchqRzwPItQHybSC574mfepK3EVXkGIhX11QPuRihaITkVddkqGYhs0fONRnqqkAUyyOGvNLNxKmESSOvqOrBShJP7JjfCeLoKpC8iugfj6dRnDaB2vSo7VXDo3wJnVzUL6s27iggggrQqAdmESSsZcJGrpQrjA3tIa9a7LOPxOEvZQjuLWifnrXAX+zyAuzyF7v+QjkVYxeopHn+UoaazHdslzipBdfrylBJxaBdJNccf7FVBGi7v5RhVn/xnVuHQoYCcbq9UPe3lUxAfj4guei6znSpd3lSSZwC8UNb6jUMwzAMwzAMN+EXe4XJ/lKRL1IAAAAASUVORK5CYII=",ka="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRUlEQVR4nO2YzUrEMBSFsxp9CX0SYTazGJKCm5yZ5dhcEBRci4hjl/NO7sadvoH6Fu6GghKoNNZfMkkpw/ngQgmX5J6b00KvUoQQslMUKMcG8mis2xjI25ewbqOte/B5amgUOD3UcK/fFt4Jn3c8PzlQQ0Jbd/6f4oM4U0PCQKqguCo2JwsFyiMDd/lrWLlrve6fI3PQhj83iYBO5/qMigI8ZlZOjJXV50+irJIHOvvPyolKSXhA0o172p8C/sLwBiI7lHs9GRTQwBuIhRZqoIVioYUaaKFYaKEGWigWWqiBForlx84FP+ZbrYP/xDs+ldCQ+uMAAKOUe0+nF3vt9FpqlQNj3UsweLpKJQLASEOuAwFPKgfautueZqI3WQSMF4t9DbnPWbyGW3s7ZREQiFhquOfwndiuaKm9bXznsxZPCCEqJe/j5Sspw8QNvwAAAABJRU5ErkJggg==",tt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVR4nO2ZS0oDQRCGBwT1AD5AfN1E0KhJV1QSuzSuYqqCiOBar6AHiBHBA3gLieglfIsLcRPduFBQesKYjijCTLckWB/MIh3yd1X13wn8CQJBEP4vs8vFcUDaB6Q7hfwGyO9xHxV+nu4AqaryNOa9+OwizSjk5yRFw0+P5idYKqW8Tt5b8dhsIotro14aaNgmOnq6zGB5EhG7k2giYnd2kaZA89Wntua9wAcNrzY2McW71M6aJprDuXEjurLWB8hH0Wv7wiad/FeMnn2xg6TMFXgQkC+MYLRmezXwALjUV0iHX8U6qwFNjx3dAHwjJg38AsgJWIiFYgBiIQuxUAxALGQhFooBiIUsxEIxALGQhVgoBiAW+mUaHZVKqNZiu8I1zbe+ciFYKqWsoV0nFlSa7yPB+QINhZsgVa0I8Mps6iKZyyBPtyRzSJXkDSDXmsVSIVzL01gYwPrMRpHqTrJRhbxtebLWctTemqC6iRgDFywsr46A5pdm4Eob0XtmQuaYTYbp4v8BFepQxXkqDci71nRe7SY6golisRc0nbVMTdOJwvJKOlcejr6d2prp3PqAQj71eHGPvDeRTm/2KKQd+044eTSdmwg/+CvCi420BZqPze9E/AtMD4B0kMZS/58VLwhC0FZ8ALiaxMwFZ/dcAAAAAElFTkSuQmCC",st="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEElEQVR4nO2Xu4sUQRCHC8HHJYqgiAgmXqKpkQgqIjjTtRss9m/v9MBzqpbB9TA08MUECv4DcslhaCSYGZkoCAZiYCCoaGRwoKKooIi6K+OB2w4LB+exsyX9wUQzDPV1PbqbKBKpj2RmZqOD3GpCJ8li8OzlIUP7DF1MkO0ho8H3GdpzkFNkNfgUnTmyQBKDr4kkrnxNJP/ZyveHPl7eM+Q1Qx8x5KaDXuRjeujg7OyGWgUcZL4SbG9Zmb/E9Kvzcoe9TAOYGN8MYPnHQT8w9ErjeL6lbokeQ7vhN3yiu5lxckfa1v0OmbKX6wx9OlxEPjP0cpKcXT9WEsNoIN/JkAsMfTYkIy9cWw7QuEuUFEWxhpG1nNfHFYkfzsul8v3YS5SUgaZeOw76riJye2QT618lSprTuo293q1MrPtHkG8iKxJLZSVXK5m4V2smVnIfSNGZc15+huVUV08suindvZL/NCCnK+V0nqzdiRlybSAh38s9hSxRlD0RNraX5yPd7FaDo618+9LBsIZSWi0Y2g0EPpbHFLJWSg7y5M9U8lKQNRyydiDw1lwvFL8bWl4OplLWIms4L0W4uZE1mtDJQODT3jxfS9bgoIwakH1kDYYsBDe5c2QN5+XMYBrpDbJGis7h4GjxgKyRTOW7glPqK7JGgmxrIPCGrAFgIhilX8gaANYFAt/IGogCkUgkQiPgF1+GFsoZdsMBAAAAAElFTkSuQmCC",ya=e=>(he("data-v-54676e48"),e=e(),fe(),e),xa={class:"flex gap-3"},wa={class:"flex flex-col gap-1"},ba={key:0,class:"w-10 h-10 rounded object-cover ml-auto"},Ca=["innerHTML"],Ia=["innerHTML"],Ra=["innerHTML"],Ea={key:3,class:"flex flex-col gap-3 my-1"},Sa=["onClick"],Fa=ya(()=>u("div",{class:"my-0.5 w-2px rounded-full bg-blue-300 flex-shrink-0"},null,-1)),Ba={class:"flex flex-col gap-0.5 flex-grow overflow-hidden align-center justify-center"},Ua={class:"text-sm font-bold ellipsis"},Ma={class:"text-xs multiline-ellipsis"},Ta=["src"],Oa=L({__name:"TextMessageContent",props:{message:null},setup(e){const t=e,o=_(),s=h(()=>o.state.imkit.messages[t.message.replyId??""]),a=h(()=>{const p=s.value;return p?o.state.imkit.users[p.senderId]:null}),n=h(()=>t.message.isIncoming),i=h(()=>{const{urls:p}=t.message;return p?p.map(k=>o.state.imkit.linkPreviews[k]).filter(k=>k):[]}),l=h(()=>{if(s.value.type===E.Text)return s.value.text;if(s.value.type===E.Image){const{t:p}=me();return{[E.Text]:p("text"),[E.Image]:p("image"),[E.Video]:p("video"),[E.Sticker]:p("sticker")}[s.value.type]}return""}),d=h(()=>{if(s.value.type===E.Image)return s.value.images[0]}),g=p=>{window.open(p,"_blank")},A=()=>{o.dispatch("imkit/navigateToMessage",t.message.replyId)};return(p,k)=>{const F=pe("src");return c(),m(V,null,[r(s)?(c(),m("div",{key:0,class:"flex flex-col gap-2 cursor-pointer",onClick:A},[u("div",xa,[G(ee,{class:"row-span-2 h-24px w-24px rounded-lg text-sm flex-shrink-0",url:r(a).avatarUrl??"",name:r(a).nickname??""},null,8,["url","name"]),u("div",wa,[u("div",{class:Q(["text-sm font-bold",[r(n)?"text-gray-600":"text-white"]])},y(r(a).nickname),3),u("div",{class:Q(["text-xs multiline-ellipsis",[r(n)?"text-gray-500":"text-gray-200"]])},y(r(l)),3)]),r(d)?$((c(),m("img",ba,null,512)),[[F,r(d).thumbnailUrl]]):I("",!0)]),u("div",{class:Q(["h-1px -mx-2",[r(n)?"bg-gray-200":" bg-blue-300"]])},null,2),u("div",{class:"break-all",innerHTML:e.message.html},null,8,Ca)])):(c(),m("div",{key:1,class:"break-all",innerHTML:e.message.html},null,8,Ia)),r(n)&&e.message.translatedText?(c(),m("div",{key:2,class:"break-all text-gray-400",innerHTML:p.$t("translation")+": "+e.message.translatedText},null,8,Ra)):I("",!0),r(i).length>0?(c(),m("div",Ea,[(c(!0),m(V,null,J(r(i),b=>(c(),m("div",{key:b.url,class:"flex items-stretch justify-center gap-2 cursor-pointer",onClick:C=>g(b.url)},[Fa,u("div",Ba,[u("div",Ua,y(b.title),1),u("div",Ma,y(b.description||p.$t("tapOpen")),1)]),b.images.length>0?(c(),m("img",{key:0,src:b.images[0],class:"h-12 w-12 my-auto rounded flex-shrink-0 object-cover"},null,8,Ta)):I("",!0)],8,Sa))),128))])):I("",!0)],64)}}});const de=ne(Oa,[["__scopeId","data-v-54676e48"]]),La="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADNklEQVR4nO2Z20sVURTGd9r9IlLmDYxuBEmBURBSkQWF2EsvUUT17EOFb9ZbFIRBQdEfYIUUBNlDd6KgIqOrhWU3MQiiIior7QLlL9Y5a07b0eM5xzPjmYnzgXj2ntnfWt+stfdes8eYLLLIIuMARgILgU3AdmArsBZYBOSaoANYDBwBvhEfH4BGoNIEDUAJcBLotRx+ChwHDgGHgWbgiUtUMzDLBAFAFfBOHfsE7AbKBrl/NrAL+KJjPgPVw+t1f6dWAz/UoRNAYQpjp2rEBL+BLf56G9+RcqBbHdk5RI4RMlZT8hew1HtPo4bG60qzUlLC6h8FPFYRezyws1e5JEXz03bcIp4JNAHfXZOzHVgH1Gn7GpDjgb0c4IpyNnglotqaiJK7rcBV4JUlSFLhDzDXE6MmYrdCOeXhFXlB1qPOylpf4rpeqcIiS2e6zrsBnFbuWpMOgJtKtC/BvKlN+6kNzL1Z7V9Ih2SBkryUyeyph8n7UKg+fEyHpM6rVSgd8G+BGTeUwcuAe0qQmY1JAXSqHzNMspA8tyaYU9DF9otMAHijvhwA1gCjEw2YYy2pnTrRUg+nxwDaXHvXe6B+wHkLTAE69MZTwEQTEAB5wBJgo27KUroI7vSr5YBjevFSplaoFKuMW1ZlkWcXe726e5eaEAAYq+WQoMnp3K8dB02IABQDXzUIFdJxX4UsNyED0BALgr6RCSb7ZExS4K6PZwKCNmn8jPyEMT4Zi8An7nyl75LGa22UhVDIBKXvlsZlbawPoZB5Sv9CGtu0cSaEQuqVvlEaBdYbYFVYhBB9D3LqsBqnc4d2vAWmh0TIUaVukdMXpzMXOG+JWRFUIUQj4YiQTCp33zAJOOcYBs4CG4BpCUtnn4UQdX6+zgknnWRXXxVvQK7e3EXquJGqEBnD0NDSLxJxDBTo0f9F3Wec0nkwXPdRSA/wXE9yamJzYjgxmJBQgayQgCGUEQEeAA/lpSeeEH0hegTcNkEFUQedz2zFbiEqQq4JWk1QQfSI0/lOIstlqbWEFlnXngX+fIC+T935b/+ORSvwoG9kbAQ/EkmICZ8IV5q161840ilBZJL+TJ2F+U/wF9Y5UmVGwaQRAAAAAElFTkSuQmCC",Qa={key:0,class:"relative flex items-center justify-center"},Va={class:"max-w-80vh max-h-80vh",alt:""},Ka={key:0,class:"absolute max-w-80vh max-h-80vh",alt:""},Da=u("div",{class:"absolute inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1),Na={key:1,class:"mt-4 flex gap-4"},Pa=["onClick"],Ga=u("img",{class:"w-5 h-5",src:La},null,-1),_a=["onClick"],Ya=L({__name:"ImageModal",setup(e){const t=_(),o=h(()=>t.state.imkit.downloadProgresses),s=h(()=>t.state.imkit.imageCache),a=n=>{const i=document.createElement("a"),l=s.value.get(n.originalUrl);i.href=l;const d=l.split(";")[0].replace("data:","").split("/")[1];i.download=`download.${d}`,i.click()};return(n,i)=>{const l=Fe("vue-final-modal"),d=pe("src");return c(),P(l,Be(n.$attrs,{classes:"flex items-center justify-center","content-class":""}),{default:te(({close:g,params:A})=>[A.image?(c(),m("div",Qa,[$(u("img",Va,null,512),[[d,A.image.thumbnailUrl]]),A.image.thumbnailUrl!==A.image.originalUrl?$((c(),m("img",Ka,null,512)),[[d,A.image.originalUrl]]):I("",!0),(!r(o)[A.image.originalUrl]||r(o)[A.image.originalUrl]<1)&&A.image.thumbnailUrl!==A.image.originalUrl?(c(),m(V,{key:1},[Da,G(r(Le),{class:"!absolute",diameter:40,"completed-steps":r(o)[A.image.originalUrl]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):I("",!0)])):I("",!0),A.image?(c(),m("div",Na,[u("button",{class:"text-base border rounded-lg flex-grow text-white gap-1.5 font-400 px-3 py-2 flex items-center justify-center",onClick:p=>a(A.image)},[Ga,se(" "+y(n.$t("download")),1)],8,Pa),u("button",{class:"text-base border rounded-lg flex-grow text-white gap-1.5 font-400 px-3 py-2 flex items-center justify-center",onClick:g},y(n.$t("close")),9,_a)])):I("",!0)]),_:1},16)}}}),Xa=["onClick"],ja=u("div",{class:"absolute inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1),Wa=L({__name:"ImageMessageContent",props:{message:null},setup(e){const t=e,o=_(),s=h(()=>o.state.imkit.uploadProgresses),a=(i,l)=>{if(t.message.images.length===1){const{width:g,height:A}=l;return g<A?{width:"200px",height:`${200*A/g}px`}:{width:`${200*g/A}px`,height:"200px"}}else return i===t.message.images.length-1&&i%2===0?{width:`${200*2+1}px`,height:"200px"}:{width:"200px",height:"200px"}},n=i=>{we.show({component:Ya},{image:i})};return(i,l)=>{const d=pe("src");return c(),m("div",{class:Q(["-m-2 grid gap-1px",[e.message.images.length>1?"grid-cols-2":"grid-cols-1"]])},[(c(!0),m(V,null,J(e.message.images,(g,A)=>(c(),m("div",{key:g.thumbnailUrl,class:Q(["relative flex items-center justify-center",{"col-span-2":e.message.images.length>1&&A===e.message.images.length-1&&A%2===0}]),onClick:p=>n(g)},[$(u("img",{src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"border-0 object-cover transition",style:X(a(A,g))},null,4),[[d,g.thumbnailUrl]]),g.thumbnailUrl.startsWith("data")?(c(),m(V,{key:0},[ja,G(r(Le),{class:"!absolute",diameter:40,"completed-steps":r(s)[`${g.id}-original`]===void 0?(r(s)[`${g.id}-original`]+r(s)[`${g.id}-thumbnail`])/2*100:r(s)[`${g.id}-original`]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):I("",!0)],10,Xa))),128))],2)}}}),za=["src"],Ja=L({__name:"StickerMessageContent",props:{message:null},setup(e){const t=e,o=h(()=>t.message.stickerUrl?t.message.stickerUrl:`/sticker/${t.message.stickerId.split("-")[0]}/${t.message.stickerId}.png`);return(s,a)=>(c(),m("img",{src:r(o),class:"border-0 object-contain w-30 h-30"},null,8,za))}}),vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVR4nO3bP68MURzH4RMhNIobEhoJFaFCKRI6Ha/AW9DSKeUqVVqlmkQv8ScUOoVGgUSnQCM8MpFJZJmz17V398zO9ym32nwyO7O/M+eUEhERERERK4Z9OLDq79EcnMIjfPfLB9zA3jJ1OIMv/u41zpUpw0t13VV1B/vL1OCYrXuLS2VKcN6/uzeZGzku2J6PuFrWne0H6j3AkbKu/H+gzidcw66ybiwmUO8xjpd1YrGBOl9xE3vKOrD4QL1XOFvGzs4F6nzDrW6+K2NlZwP13uBiGSPLCdT5gbujG1csL1DvPS6XsbD8QL37OFhaZ3WBxjGuWG2g3sNmxxVtBGp3XNFOoN/HlROlFdoL1Na4os1Avac4nEB1z7E7V1DdlQSqu51AdZsJVJefWMWz3KSHPcGhPOb/lD+KFRk1BmRYrchyx4AsmFVkyXVAFu0H5LVPRV4cDsir54psXmh+TFgE2UBVly14c2QT5xzZBjxHNpLPgaO2bnpHETp4MSfMdA+zdHAanwfi5DhUBydnDtS9w/UcqJvRBcHG7OcREREREVEm5icELZJIi+Y1dAAAAABJRU5ErkJggg==",Ha=u("div",{class:"absolute inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1),Za=u("img",{class:"absolute pointer-events-none",src:vt,width:"24",height:"24"},null,-1),qa={class:"absolute right-2 bottom-2 text-white font-bold bg-black bg-opacity-30 rounded-full text-xs py-1 px-2"},$a=L({__name:"VideoMessageContent",props:{message:null},setup(e){const t=e,o=`vp-${Math.random()}`,s=U(),a=U(),n=U(!1),i=()=>{const{width:p,height:k}=t.message.video;return p<k?{width:"200px",height:`${200*k/p}px`}:{width:`${200*p/k}px`,height:"200px"}},l=_(),d=async()=>{if(n.value)return;n.value=!0;const A=await l.dispatch("imkit/fetchVideoBlob",t.message.video.originalUrl);s.value&&(s.value.src=URL.createObjectURL(A)),a.value=_t(o)},g=h(()=>l.state.imkit.uploadProgresses);return(A,p)=>{const k=pe("src");return c(),m("div",{class:"-m-2 relative flex items-center justify-center cursor-pointer",style:X(i()),onClick:d},[$(u("video",{ref_key:"videoPlayer",ref:s,id:o,class:"video-js vjs-default-skin absolute inset-0 w-full h-full",controls:"",preload:"auto",autoplay:""},null,512),[[Gt,n.value]]),n.value?I("",!0):(c(),m(V,{key:0},[$(u("img",{src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"border-0 object-cover transition",style:X(i())},null,4),[[k,e.message.video.thumbnailUrl]]),e.message.video.thumbnailUrl.startsWith("data")?(c(),m(V,{key:0},[Ha,G(r(Le),{class:"!absolute",diameter:40,"completed-steps":r(g)[e.message.video.id]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):(c(),m(V,{key:1},[Za,u("div",qa,y(Math.floor(e.message.video.duration/60))+":"+y(`${Math.floor(e.message.video.duration%60)}`.padStart(2,"0")),1)],64))],64))],4)}}}),en="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR4nO3aMUpDQRSF4VmI1m5HtLCxkMxxA86JazAz2Ygi2LkgbVWMpQpKFCyihSZ33r0x58As4GP+F17gpaRp2sbs6GS6nUu7RGlPYHuzPrm029HJdDdFwYL1vgd0Af2Sx5MDb2/6uNnO2FBodMr4C8n6HAqN/re6t4gG62tmPfyX4PT52MRBYwBwKDQGAodBY0BwCDQGBruj4QB2RcMJ7IaGI9gFDWfwfMes+z+9kXX5w4HOYJyebS2LBuvN2oEz6/Uq6LUDY4BH4k/zBglM3bDtECBbPcPUj5bdECBbJU0lbTcEyFZJU0nbDQGyVdJU0nZDgGyVNJW03RAgWyVNJW03BMhWSVNJ2w0BslXSVNJ2Q4BslTSVtN2wcUmXvh+XrnJyaY/2YNarsGDWc3PwaDzZyaU9eOO+ndLufvupxHJfxZd2AdaZO5R1Nr/ZblhN01LEvQM/68r6Ex4bqgAAAABJRU5ErkJggg==",kt=e=>(he("data-v-24966336"),e=e(),fe(),e),tn=kt(()=>u("img",{class:"w-8 object-contain",src:en},null,-1)),sn={class:"flex flex-col gap-0.5 font-400"},on={class:"text-base break-all"},an=kt(()=>u("div",{class:"absolute -m-2 inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1)),nn=L({__name:"FileMessageContent",props:{message:null},setup(e){const t=e,o=_(),s=h(()=>t.message.isIncoming),a=h(()=>o.state.imkit.uploadProgresses),n=h(()=>{const l=t.message.bytes;return l<1e3?l+"B":l<1e3*1e3?(l/1e3).toFixed(1)+"KB":l<1e3*1e3*1e3?(l/1e3/1e3).toFixed(1)+"MB":(l/1e3/1e3/1e3).toFixed(1)+"GB"}),i=async()=>{try{const{url:l,fileName:d,fileExtension:g}=t.message,A=await o.state.imkit.axios.get(l,{responseType:"arraybuffer",onDownloadProgress:F=>{const{total:b}=F;b&&o.commit("imkit/updateField",{key:"downloadProgresses",value:{[l]:F.loaded/b}})}}),p=btoa(new Uint8Array(A.data).reduce((F,b)=>F+String.fromCharCode(b),"")),k=document.createElement("a");k.href=`data:${A.headers["content-type"]};base64,${p}`,k.download=`${d}.${g}`,k.click()}catch(l){console.error(l)}};return(l,d)=>(c(),m("div",{class:"flex items-center justify-center gap-2 cursor-pointer relative",onClick:i},[tn,u("div",sn,[u("div",on,y(e.message.fileName)+"."+y(e.message.fileExtension),1),u("div",{class:Q(["text-sm",{"text-gray-500":r(s)}])},y(l.$t("fileSize"))+": "+y(r(n)),3)]),e.message.url===""?(c(),m(V,{key:0},[an,G(r(Le),{class:"!absolute",diameter:40,"completed-steps":r(a)[e.message.id]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):I("",!0)]))}});const rn=ne(nn,[["__scopeId","data-v-24966336"]]),le=e=>{e.type==="uri"&&window.open(e.uri,"_blank")},ln={class:"w-250px text-base overflow-hidden cursor-pointer"},cn=["src"],dn={key:1,class:"py-3 flex flex-col gap-2 border-t"},un=["onClick"],mn=L({__name:"TemplateMessageButtonsContent",props:{message:null},setup(e){const t=e,o=h(()=>t.message.isIncoming),s=h(()=>!o.value);return(a,n)=>{var i;return c(),m("div",ln,[e.message.template.thumbnailImageUrl?(c(),m("img",{key:0,class:Q(["object-cover",{"object-contain":e.message.template.imageSize==="contain"}]),style:X({"background-color":e.message.template.imageBackgroundColor??"#ffffff",height:`${e.message.template.imageAspectRatio==="square"?250:250/1.51}px`}),src:e.message.template.thumbnailImageUrl,onClick:n[0]||(n[0]=l=>r(le)(e.message.template.defaultAction))},null,14,cn)):I("",!0),u("div",{class:"p-3 flex flex-col gap-1",onClick:n[1]||(n[1]=l=>r(le)(e.message.template.defaultAction))},[u("div",null,y((i=e.message.template.title)==null?void 0:i.substring(0,40)),1),e.message.template.text?(c(),m("div",{key:0,class:Q(["text-sm",{"text-gray-500":r(o),"text-gray-100":r(s)}])},y(!e.message.template.thumbnailImageUrl&&!e.message.template.title?e.message.template.text.substring(0,160):e.message.template.text.substring(0,60)),3)):I("",!0)]),e.message.template.actions.length>0?(c(),m("div",dn,[(c(!0),m(V,null,J(e.message.template.actions,l=>(c(),m("div",{key:l.label,class:Q(["flex items-center justify-center text-sm p-0.5",{"text-slate-500":r(o),"text-slate-100":r(s)}]),onClick:d=>r(le)(l)},y(l.label),11,un))),128))])):I("",!0)])}}}),gn={class:"w-250px text-base overflow-hidden"},An={class:"p-3"},pn={class:"flex border-t divide-x"},hn=["onClick"],fn=L({__name:"TemplateMessageConfirmContent",props:{message:null},setup(e){const t=e,o=h(()=>t.message.isIncoming),s=h(()=>!o.value);return(a,n)=>(c(),m("div",gn,[u("div",An,y(e.message.template.text.substring(0,240)),1),u("div",pn,[(c(!0),m(V,null,J(e.message.template.actions.slice(0,2),i=>(c(),m("div",{key:i.label,class:Q(["flex-grow flex items-center justify-center p-2 cursor-pointer",{"text-slate-500":r(o),"text-slate-100":r(s)}]),onClick:l=>r(le)(i)},y(i.label),11,hn))),128))])]))}}),vn={class:"text-base overflow-auto cursor-pointer flex gap-2"},kn=["src","onClick"],yn=["onClick"],xn={key:1,class:"py-3 flex flex-col gap-2 border-t"},wn=["onClick"],bn=L({__name:"TemplateMessageCarouselContent",props:{message:null},setup(e){const t=e,o=h(()=>t.message.isIncoming),s=h(()=>!o.value);return(a,n)=>(c(),m("div",vn,[(c(!0),m(V,null,J(e.message.template.columns,(i,l)=>{var d;return c(),m("div",{key:l,class:Q(["w-250px text-base overflow-hidden cursor-pointer rounded-xl",[r(o)?"bg-gray-100 text-gray-900":"bg-blue-400 text-white "]])},[i.thumbnailImageUrl?(c(),m("img",{key:0,class:Q(["object-cover",{"object-contain":e.message.template.imageSize==="contain"}]),style:X({"background-color":i.imageBackgroundColor??"#ffffff",height:`${e.message.template.imageAspectRatio==="square"?250:250/1.51}px`}),src:i.thumbnailImageUrl,onClick:g=>r(le)(i.defaultAction)},null,14,kn)):I("",!0),u("div",{class:"p-3 flex flex-col gap-1",onClick:g=>r(le)(i.defaultAction)},[u("div",null,y((d=i.title)==null?void 0:d.substring(0,40)),1),i.text?(c(),m("div",{key:0,class:Q(["text-sm",{"text-gray-500":r(o),"text-gray-100":r(s)}])},y(!i.thumbnailImageUrl&&!i.title?i.text.substring(0,160):i.text.substring(0,60)),3)):I("",!0)],8,yn),i.actions.length>0?(c(),m("div",xn,[(c(!0),m(V,null,J(i.actions,g=>(c(),m("div",{key:g.label,class:Q(["flex items-center justify-center text-sm p-0.5",{"text-slate-500":r(o),"text-slate-100":r(s)}]),onClick:A=>r(le)(g)},y(g.label),11,wn))),128))])):I("",!0)],2)}),128))]))}}),Cn={class:"text-base overflow-auto cursor-pointer flex gap-2"},In=["src","onClick"],Rn=L({__name:"TemplateMessageImageCarouselContent",props:{message:null},setup(e){return(t,o)=>(c(),m("div",Cn,[(c(!0),m(V,null,J(e.message.template.columns,(s,a)=>(c(),m("img",{key:a,src:s.imageUrl,class:"w-250px h-250px object-cover rounded-xl",onClick:n=>r(le)(s.action)},null,8,In))),128))]))}}),En=L({__name:"TemplateMessageContent",props:{message:null},setup(e){const t={[ge.Buttons]:mn,[ge.Confirm]:fn,[ge.Carousel]:bn,[ge.ImageCarousel]:Rn};return(o,s)=>(c(),P(Qe(t[e.message.templateType]),{message:e.message},null,8,["message"]))}}),Sn=L({__name:"FlexMessageBoxComponent",props:{content:null},setup(e){const t=o=>({none:"0",xs:"2px",sm:"4px",md:"8px",lg:"12px",xl:"16px",xxl:"20px"})[o]??o;return(o,s)=>(c(),m("div",{class:Q(["flex",{"flex-col":e.content.layout==="vertical","flex-row":e.content.layout==="horizontal","flex-row items-baseline":e.content.layout==="baseline"}]),style:X({backgroundColor:e.content.backgroundColor??"#00000000",borderColor:e.content.borderColor,borderWidth:e.content.borderWidth,borderRadius:e.content.cornerRadius,width:e.content.width,maxWidth:e.content.maxWidth,height:e.content.height,maxHeight:e.content.maxHeight})},[(c(!0),m(V,null,J(e.content.contents,(a,n)=>(c(),P(Ce,{key:n,content:a,style:X(e.content.layout==="vertical"?{marginTop:a.margin?t(a.margin):n===0?0:t(e.content.spacing)}:{marginLeft:a.margin?t(a.margin):n===0?0:t(e.content.spacing)})},null,8,["content","style"]))),128))],6))}}),Fn=L({__name:"FlexMessageButtonComponent",props:{content:null},setup(e){const t=e,o=h(()=>t.content.style==="primary"?"#ffffff":t.content.style==="secondary"?"#000000":t.content.color||"#42659a"),s=h(()=>t.content.style==="primary"?t.content.color||"#17c950":t.content.style==="secondary"?t.content.color||"#dcdfe5":"");return(a,n)=>(c(),m("button",{class:Q([[e.content.size==="md"?"h-52px":"h-40px"],"rounded-lg"]),style:X({color:r(o),backgroundColor:r(s)}),onClick:n[0]||(n[0]=i=>r(le)(e.content.action))},y(e.content.action.label),7))}}),Bn=["src"],Un=L({__name:"FlexMessageImageComponent",props:{content:null},setup(e){const t=e,o=h(()=>t.content.aspectRatio?t.content.aspectRatio.replace(":","/"):"1/1");return(s,a)=>(c(),m("div",{class:Q(["w-full bg-gray-300 overflow-hidden",[e.content.aspectMode==="cover"?"object-cover":"object-contain"]]),style:X({"aspect-ratio":r(o)})},[u("img",{class:"w-full h-full",src:e.content.url},null,8,Bn)],6))}}),Mn=["src"],Tn=L({__name:"FlexMessageVideoComponent",props:{content:null},setup(e){return(t,o)=>(c(),m("video",{src:e.content.url},null,8,Mn))}}),On=L({__name:"FlexMessageIconComponent",props:{content:null},setup(e){const t=e,o=h(()=>{const s=t.content.size;return{xxs:"12px",xs:"13px",sm:"14px",md:"16px",lg:"19px",xl:"22px",xxl:"29px","3xl":"35px","4xl":"48px","5xl":"74px"}[s]??"16px"});return(s,a)=>(c(),m("span",{style:X({overflow:"hidden",background:"no-repeat center",backgroundSize:"contain",backgroundImage:"url("+e.content.url+")",width:r(o),height:r(o)})},null,4))}}),Ln=L({__name:"FlexMessageTextComponent",props:{content:null},setup(e){const t=e,o=h(()=>{const s=t.content.size;return{xxs:"12px",xs:"13px",sm:"14px",md:"16px",lg:"19px",xl:"22px",xxl:"29px","3xl":"35px","4xl":"48px","5xl":"74px"}[s]??"16px"});return(s,a)=>(c(),m("div",{class:"basis-0",style:X({flexGrow:e.content.flex??0})},[u("p",{class:Q([e.content.weight==="bold"?"font-700":"font-400",e.content.wrap?"overflow-clip whitespace-normal break-words overflow-hidden":"truncate whitespace-nowrap overflow-hidden"]),style:X({fontSize:r(o),color:e.content.color,"text-size-adjust":"100%"})},y(e.content.text),7)],4))}}),Qn=L({__name:"FlexMessageSpanComponent",props:{content:null},setup(e){return(t,o)=>(c(),m("span",null,y(e.content.text),1))}}),Vn=L({__name:"FlexMessageSeparatorComponent",props:{content:null},setup(e){return(t,o)=>(c(),m("div"))}}),Ce=L({__name:"FlexMessageComponent",props:{content:null},setup(e){const t=e,o={box:Sn,button:Fn,image:Un,video:Tn,icon:On,text:Ln,span:Qn,separator:Vn},s=h(()=>t.content.type);return(a,n)=>(c(),P(Qe(o[r(s)]),{content:e.content},null,8,["content"]))}}),yt=L({__name:"FlexMessageBubbleComponent",props:{content:null},setup(e){const t=e,o=h(()=>t.content.header),s=h(()=>t.content.hero),a=h(()=>t.content.body),n=h(()=>t.content.footer),i=h(()=>{var p;return(p=t.content.styles)==null?void 0:p.header}),l=h(()=>{var p;return(p=t.content.styles)==null?void 0:p.hero}),d=h(()=>{var p;return(p=t.content.styles)==null?void 0:p.body}),g=h(()=>{var p;return(p=t.content.styles)==null?void 0:p.footer}),A=h(()=>{switch(t.content.size){case"nano":return"10px";case"micro":return"13px";case"kilo":return n.value?"13px 13px 17px 13px":"13px";case"mega":return n.value?"19px 20px 10px 20px":"20px";case"giga":return n.value?"19px 20px 10px 20px":"20px";default:return"20px"}});return(p,k)=>{var F,b,C,N,S,B,f,v,T,K,Y,Z;return c(),m("div",{class:Q(["bg-gray-100 text-hex-444444 rounded-xl overflow-hidden",{"w-120px":e.content.size==="nano","w-160px":e.content.size==="micro","w-260px":e.content.size==="kilo","w-300px":e.content.size==="mega"||!e.content.size,"w-386px":e.content.size==="giga"}])},[r(o)?(c(),P(Ce,{key:0,content:r(o),style:X({backgroundColor:(F=r(i))==null?void 0:F.backgroundColor,borderBottom:(b=r(i))!=null&&b.separator?`1px solid ${(C=r(i))==null?void 0:C.separatorColor}`:"none"})},null,8,["content","style"])):I("",!0),r(s)?(c(),P(Ce,{key:1,content:r(s),style:X({backgroundColor:(N=r(l))==null?void 0:N.backgroundColor,borderBottom:(S=r(l))!=null&&S.separator?`1px solid ${(B=r(l))==null?void 0:B.separatorColor}`:"none"})},null,8,["content","style"])):I("",!0),r(a)?(c(),P(Ce,{key:2,content:r(a),style:X({backgroundColor:(f=r(d))==null?void 0:f.backgroundColor,borderBottom:(v=r(d))!=null&&v.separator?`1px solid ${(T=r(d))==null?void 0:T.separatorColor}`:"none",padding:r(A)})},null,8,["content","style"])):I("",!0),r(n)?(c(),P(Ce,{key:3,content:r(n),class:"p-2.5",style:X({backgroundColor:(K=r(g))==null?void 0:K.backgroundColor,borderBottom:(Y=r(g))!=null&&Y.separator?`1px solid ${(Z=r(g))==null?void 0:Z.separatorColor}`:"none"})},null,8,["content","style"])):I("",!0)],2)}}}),Kn=L({__name:"FlexMessageBubbleContent",props:{message:null},setup(e){return(t,o)=>(c(),P(yt,{content:e.message.contents},null,8,["content"]))}}),Dn={class:"flex items-start gap-2 overflow-auto"},Nn=L({__name:"FlexMessageCarouselContent",props:{message:null},setup(e){return(t,o)=>(c(),m("div",Dn,[(c(!0),m(V,null,J(e.message.contents.contents,(s,a)=>(c(),P(yt,{key:a,content:s},null,8,["content"]))),128))]))}}),Pn=L({__name:"FlexMessageContent",props:{message:null},setup(e){const t={[_e.Bubble]:Kn,[_e.Carousel]:Nn};return(o,s)=>(c(),P(Qe(t[e.message.flexType]),{message:e.message},null,8,["message"]))}}),Gn=e=>(he("data-v-d84a2a16"),e=e(),fe(),e),_n={class:"p-2 w-300px <sm:w-250px underline"},Yn=Gn(()=>u("div",{class:"absolute inset-0"},null,-1)),Xn=L({__name:"LocationMessageContent",props:{message:null},setup(e){const t=e,s=_().state.imkit.config.mapApiKey,a=h(()=>({lat:t.message.latitude,lng:t.message.longitude})),n=()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${t.message.address}`,"_blank")};return(i,l)=>(c(),m("div",{class:"flex flex-col -m-2 cursor-pointer relative",onClick:n},[G(r(ct),{"api-key":r(s),center:r(a),zoom:15,disableDefaultUi:!0,class:"w-300px h-200px <sm:w-250px <sm:h-150px"},{default:te(()=>[G(r(lt),{options:{position:r(a)}},null,8,["options"])]),_:1},8,["api-key","center"]),u("div",_n,y(e.message.address),1),Yn]))}});const jn=ne(Xn,[["__scopeId","data-v-d84a2a16"]]),Wn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACS0lEQVR4nO2bPYsUQRCGG1E0MRAFTQSNTjRSQxE0M9NfoGCwOv3O3k7XKpxR9e7hdyRGlxoan2B+4AcamBmYGKhgZqAmoitzB87eMh93595uz877QCcbLQ9dNV3V1cYQQgghhBBCpswV1T3Anf3T/h/BYZP+Cev0uXX+N8QPIPoFzt9qtx/tNk0HiZ6C+B9rYtYv6/z7OOmdMU0GTt/myRmSlO6qx1dv3t9rmkbcXTxaJmfdcvrROr1gmkSc9M5uWFAm6kljEjm6em7TglYl+a+R08tm1sFWBWW7aTmSxcNmVsH/ClqT9A3iO6q6w8waGIegLOxWrnf6c2aWwDgFpUcC0Z9w6lutpV1mFsCYBQ2Jehd1+6dN3cE2CVqV5PwvK3ovre9MXcE2ChpaHyLXO2/qCCYjKC1+/1jnl2pXrmBigv6F3Web9C6auoAJCxpK4k9bogdM6GBKgmpTrmCagrL1LNhyBWEICrdcQSiCsrBbiUWPmVBAaIJCK1cQoKBMlH9pb+ghCpJSSa9VdSd3kBRLikUvUZCU7CLnH1KQlOUjfUBBwhAbbO1cpK+YpKXwPPRifv72QX7mhQfFwcZDiqXGoCDXsFhF8c5huwP54cSGGYq/UGy5Ir9sYNMe+eUCr31QnIR5cYj8cOLVM4qTMIcXEHo/eRyAA1TlcASvAg5xVsAx4Ao4SF7BtY4e2UT7s3lPEVKs+DcV1y7NfcyS0pb+Sev0e4EcPodKaXf1+MiDuk9WdIEP6kZIhUQLd/eN/k4IIYQQQggxDeMvr6MHGaopSLgAAAAASUVORK5CYII=",zn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4klEQVR4nO2bzy5DQRTGJ8GaDQ+ANZ4FXbDxZ9HoGTc1p01scA5SGmshfQLBAu+gkYgXYqEyjUhEae/0Ti/y/ZJZ3vnO/e733d0xBgAAAAAAgFhsVGSCKrJoK1L8cpwsJ9XDqaw1ycm0v7uz5v5CktTGTd6IyLBlObEsL5a19f2RV8t6WS7LWL+a/g7r9PpnPW2R02fr9NjPaPKCnDa6DfrpOG32M3Cx2Bgh1od0mnJm8oDKMveejN6H9V+WZTVYk2U9rZ6fsVSVGTNorJO99MO2B74N1SSndyGaxLqb7dv3MizreZBBTh5DNf2zgQadm1///+EPg55CNf2zQQY5bZhBQzAIBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAb1lyDGKkKUZRZyemMGvcziZMcMmk13MBuyDmW3dCVU0zpd+zPrUCE1I5b7fhbq2huOTpsp03Nq8kJEhoml3l5/7PIVifWiuF0fzWIlk1iueqjyM7EcFQpXQyZvkqQ2XqrIfKcFW2JdKm3JZNaa/k5/dydNP8uvWOoFAAAAAADm3/IGGLsxyp+ApQ8AAAAASUVORK5CYII=",Jn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVR4nO3bTy5DYRSG8ZuosU5qAWWMtZQJE38GVkGHiHGj6QoEA+yBSJpuiIFXGtesvPee77sp+vwS057zPcXsFAUAAADQFEmrknYkHc/42ZO01sDM9fKzZ83cltTJPTOyZEvSpaQ3/exd0o2kdoaZbUl38l4lnU93zPPa2LIj1fOcsrCkZUkvNWde5X119WW3yt+Mug4SZh4F5k133Mj7+mrL9hXzkDDzMTjzNO/rqy07DC47Tpg5Ds4c5n19M/9/vkwSZk4UM8r7+mrLjoLLEsggkEEgg0AGgQwCGQQyCGQQyCCQQSCDQAaBDAIZBDIIZBDIIJBBIINABoEMAhkEMghkEMggkEEgg0AGgQwCGQQyCGQQyCCQQSCDQAaBDAIZBDIIZCxMoGFw2YU5RegHl72fwzHLSd7XV1t2M3gOtZ8w8/DPnEMF/8yeEg/qWuVRXh2DYl70ufBFef7ovsVrSSuZTjJvK4SZ7nQmaSnPa9OW7kjqfXNguyup28DMbvnZs2b2fsVRLwAAAIp/6wPxkEFCV8mUxgAAAABJRU5ErkJggg==",Hn=["onClick"],Zn={key:0,src:Wn,width:"24",height:"24"},qn={key:1,src:vt,width:"24",height:"24"},$n={key:1,class:"h-5 flex items-center justify-center"},er=u("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),tr=u("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1),sr=[er,tr],or={key:0,src:zn,width:"24",height:"24"},ar={key:1,src:Jn,width:"24",height:"24"},nr={class:"text-white font-bold bg-black bg-opacity-30 rounded-full text-xs py-1 px-2"},rr=L({__name:"AudioMessageContent",props:{message:null},setup(e){const t=e,o=_(),s=U(0),a=U(),n=U(0),i=U(),l=h(()=>t.message.isIncoming),d=()=>{a.value&&(n.value=a.value.seek()/a.value.duration()*100,a.value.playing()&&requestAnimationFrame(d))},g=async()=>{var p,k;switch(s.value){case 0:{const F=new Yt.Howl({src:t.message.url,format:["m4a","mp3","wav","aac","webm"],onload:()=>{F.play(),s.value=3},onplay:()=>{requestAnimationFrame(d)},onend:()=>{s.value=2},onloaderror:(b,C)=>console.log(2,b,C),xhr:{headers:{"IM-Authorization":o.state.imkit.config.token,"IM-Client-Key":o.state.imkit.config.clientKey}}});a.value=F,s.value=1;break}case 2:case 4:(p=a.value)==null||p.play(),s.value=3;break;case 3:(k=a.value)==null||k.pause(),s.value=4;break}},A=async p=>{if(!a.value||!i.value)return;const{x:k,width:F}=i.value.getBoundingClientRect();n.value=(p.clientX-k)/F*100,a.value.seek(a.value.duration()*n.value/100)};return(p,k)=>(c(),m(V,null,[u("div",{class:Q(["absolute top-0 bottom-0 left-0 pointer-events-none",[r(l)?"bg-gray-300":"bg-blue-300"]]),style:X({width:`${n.value}%`})},null,6),u("div",{ref_key:"container",ref:i,class:"flex items-center justify-between w-250px p-3 relative -m-2",onClick:A},[u("button",{onClick:ae(g,["stop"])},[new Set([0,2,4]).has(s.value)?(c(),m(V,{key:0},[r(l)?(c(),m("img",Zn)):(c(),m("img",qn))],64)):s.value===1?(c(),m("div",$n,[(c(),m("svg",{class:Q(["w-5 h-5 animate-spin",[r(l)?"text-gray-400 fill-gray-100":"text-gray-200 fill-blue-400"]]),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sr,2))])):s.value===3?(c(),m(V,{key:2},[r(l)?(c(),m("img",or)):(c(),m("img",ar))],64)):I("",!0)],8,Hn),u("div",nr,y(Math.floor(e.message.duration/60))+":"+y(`${Math.floor(e.message.duration%60)}`.padStart(2,"0")),1)],512)],64))}}),ir={class:"flex items-center justify-center"},lr={class:"bg-gray-100 rounded-lg py-1.5 px-2 my-3 text-sm text-gray-700"},cr=L({__name:"SystemMessageContent",props:{message:null},setup(e){const t=e,o=_(),s=h(()=>o.state.imkit.users),a=h(()=>{const{t:n}=me(),i=s.value[t.message.senderId].nickname;switch(t.message.type){case E.Recall:return t.message.senderId===o.state.imkit.uid?n("youUnsentMessage"):n("someoneUnsentMessage",[i]);case E.JoinRoom:return n("someoneJoinedTheChat",[i]);case E.LeaveRoom:return n("someoneLeftTheChat",[i]);case E.AddMember:return n("someoneInvited",[i,t.message.members.map(l=>l.nickname).join(", ")]);case E.DeleteMember:return n("someoneKicked",[i,t.message.members.map(l=>l.nickname).join(", ")]);case E.AddMembers:return n("someoneInvited",[i,t.message.members.map(l=>l.nickname).join(", ")]);case E.Announcement:return t.message.text;default:return""}});return(n,i)=>(c(),m("div",ir,[u("div",lr,y(r(a)),1)]))}}),dr={key:3,class:"text-gray-500 text-xs self-end flex flex-col items-end"},ur={key:0},mr={key:4,class:"text-gray-500 text-xs self-end"},gr=L({__name:"MessageCell",props:{source:null},setup(e){const t=e,o={[E.Text]:de,[E.Image]:Wa,[E.Sticker]:Ja,[E.Video]:$a,[E.File]:rn,[E.Template]:En,[E.Flex]:Pn,[E.Location]:jn,[E.Audio]:rr,[E.Recall]:de,[E.JoinRoom]:de,[E.LeaveRoom]:de,[E.AddMember]:de,[E.DeleteMember]:de,[E.AddMembers]:de,[E.Announcement]:de},s=_(),a=h(()=>{if(s.state.imkit.uid!==t.source.senderId)return 0;const{rooms:S,uid:B,messages:f}=s.state.imkit,v=S[t.source.roomId];return v?Object.keys(v.lastReadMessageId).filter(T=>T!==B).map(T=>{const K=v.lastReadMessageId[T];return f[K]}).reduce((T,K)=>K&&K.createdAt>=t.source.createdAt?T+1:T,0):0}),n=h(()=>t.source.isIncoming),i=h(()=>!n.value),l=h(()=>s.state.imkit.messageGroupHead[t.source.id]),d=h(()=>s.state.imkit.messageGroupTail[t.source.id]),g=U(!1),A=S=>{g.value=!0,S.preventDefault()},p=()=>{s.commit("imkit/setState",{replyId:t.source.id})},k=()=>{let S="";switch(t.source.type){case E.Text:S=t.source.text;break;case E.Location:S=t.source.address;break}navigator.clipboard.writeText(S)},F=()=>{s.dispatch("imkit/recallMessage",{roomId:t.source.roomId,_id:t.source.id,messageType:"recall"})},b=h(()=>{const S=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;if(t.source.type===E.Text){const B=t.source.text;for(let f=0;f<B.length;f++)if(!S.test(B[f]))return!1;return!0}return!1}),C=h(()=>t.source),N=h(()=>new Set([E.Recall,E.JoinRoom,E.LeaveRoom,E.AddMember,E.DeleteMember,E.AddMembers,E.Announcement]).has(t.source.type));return(S,B)=>r(N)?(c(),P(cr,{key:0,message:e.source},null,8,["message"])):(c(),m("div",{key:1,class:Q(["flex gap-2",[r(n)?"justify-start":"justify-end",r(l)?"mt-1":"mt-0.25",r(d)?"mb-1":"mb-0.25"]]),onMouseleave:B[1]||(B[1]=f=>g.value=!1)},[r(i)&&g.value?(c(),m("img",{key:0,src:ka,class:"w-5 h-5 my-auto cursor-pointer",onClick:F})):I("",!0),r(i)&&g.value?(c(),m("img",{key:1,src:tt,class:"w-5 h-5 my-auto cursor-pointer",onClick:k})):I("",!0),r(i)&&g.value?(c(),m("img",{key:2,src:st,class:"w-5 h-5 my-auto cursor-pointer",onClick:p})):I("",!0),r(i)&&r(d)&&!g.value?(c(),m("div",dr,[r(a)>0?(c(),m("div",ur,y(S.$t("read"))+" "+y(r(a)),1)):I("",!0),u("div",null,y(r(j)(e.source.createdAt).format("H:mm")),1)])):I("",!0),u("div",{class:Q(["rounded overflow-hidden relative <sm:max-w-3/4",[r(n)?"bg-gray-100 text-gray-900 rounded-r-xl":"bg-blue-400 text-white rounded-l-xl",r(i)&&r(l)?"rounded-tr-xl":"",r(i)&&r(d)?"rounded-br-xl":"",r(n)&&r(l)?"rounded-tl-xl":"",r(n)&&r(d)?"rounded-bl-xl":"",[r(E).Sticker,r(E).Image].includes(e.source.type)?"!bg-white":"",r(b)?"!bg-white !text-3xl":"",[r(E).Template,r(E).Flex].includes(e.source.type)?"!bg-white !rounded-none":"py-1.5 px-2 max-w-3/5",[r(ge).ImageCarousel,r(ge).Carousel].includes(r(C).templateType)?"!bg-white !rounded-none":""]]),onContextmenu:A,onMouseenter:B[0]||(B[0]=f=>g.value=!0)},[(c(),P(Qe(o[e.source.type]),{message:e.source},null,8,["message"]))],34),r(n)&&r(d)&&!g.value?(c(),m("div",mr,y(r(j)(e.source.createdAt).format("H:mm")),1)):I("",!0),r(n)&&g.value?(c(),m("img",{key:5,src:st,class:"w-5 h-5 my-auto cursor-pointer",onClick:p})):I("",!0),r(n)&&g.value?(c(),m("img",{key:6,src:tt,class:"w-5 h-5 my-auto cursor-pointer",onClick:k})):I("",!0)],34))}});const Ar=ne(gr,[["__scopeId","data-v-eebc47aa"]]),pr={class:"overflow-auto absolute right-0 bottom-[110%] rounded-xl h-80 w-80 bg-white border flex flex-col divide-y"},hr={class:"flex-grow grid grid-cols-4 p-4 gap-4 items-center justify-center overflow-y-auto"},fr=["src","onClick"],vr={class:"flex flex-shrink-0 h-14 w-full overflow-x-auto p-3 gap-4"},kr=["src","onClick"],yr=L({__name:"StickerPanel",emits:["close"],setup(e,{emit:t}){const o=_(),s=[{name:"FunFunFamily",number:40},{name:"animal",number:16},{name:"emoji",number:40},{name:"food",number:16},{name:"money",number:11},{name:"natural",number:30},{name:"people",number:16},{name:"sport",number:16}],a=U(s[0]),n=h(()=>o.state.imkit.rooms[o.state.imkit.selectedRoomId]),i=async l=>{const d={roomId:n.value.id,messageType:"sticker",sticker:l};await o.dispatch("imkit/sendMessage",d),t("close")};return(l,d)=>(c(),m("div",pr,[u("div",hr,[(c(!0),m(V,null,J(a.value.number,g=>(c(),m("img",{src:`/sticker/${a.value.name}/${a.value.name}-${g}.png`,key:g,class:"border-0 cursor-pointer object-contain",onClick:A=>i(`${a.value.name}-${g}`)},null,8,fr))),128))]),u("div",vr,[(c(),m(V,null,J(s,g=>u("img",{src:`/sticker/${g.name}/${g.name}-1.png`,key:g.name,class:"border-0 cursor-pointer object-contain h-full",onClick:A=>a.value=g},null,8,kr)),64))])]))}}),Pe=e=>new Promise((t,o)=>{const s=new FileReader;s.onload=()=>{const a=new Image;a.src=s.result,a.onload=async()=>{t({id:await Ge(a.src),width:a.width,height:a.height,thumbnailUrl:a.src,originalUrl:a.src})},a.onerror=()=>o},s.onerror=()=>{o(s.error)},s.readAsDataURL(e)}),xr=e=>new Promise((t,o)=>{const s=document.createElement("canvas"),a=s.getContext("2d");if(!a){o(new Error("Could not get canvas context"));return}const n=document.createElement("video");n.src=URL.createObjectURL(e),n.autoplay=!0,n.onloadedmetadata=()=>{s.width=n.videoWidth,s.height=n.videoHeight},n.onloadeddata=()=>{a.drawImage(n,0,0,s.width,s.height),s.toBlob(async i=>{if(!i){o(new Error("Could not create blob"));return}const l=new File([i],"snapshot.jpg",{type:"image/jpeg"}),d=new FileReader;d.readAsDataURL(i),d.onloadend=async()=>{t({id:await Ge(n.src),width:s.width,height:s.height,duration:n.duration,thumbnailUrl:d.result,originalUrl:"",thumbnailFile:{id:await Ge(s.toDataURL()),file:l}})}},"image/jpeg")},n.onerror=()=>o}),wr={key:0,class:"bg-gray-200 rounded-lg mb-3 flex gap-2 p-2"},br={class:"flex flex-col gap-1"},Cr={class:"text-sm font-bold text-gray-600"},Ir={class:"text-xs text-gray-500 multiline-ellipsis"},Rr={class:"flex gap-2 ml-auto"},Er={key:0,class:"w-10 h-10 rounded object-cover"},Sr=L({__name:"ReplyMessagePreview",setup(e){const t=_(),o=h(()=>{const{replyId:l}=t.state.imkit;return t.state.imkit.messages[l]}),s=h(()=>{const l=o.value;if(l)return t.state.imkit.users[l.senderId]}),a=h(()=>{if(o.value.type===E.Text)return o.value.text;if(o.value.type===E.Image){const{t:l}=me();return{[E.Text]:l("text"),[E.Image]:l("image"),[E.Video]:l("video"),[E.Sticker]:l("sticker")}[o.value.type]}return""}),n=h(()=>{if(o.value.type===E.Image)return o.value.images[0]}),i=()=>{t.commit("imkit/setState",{replyId:""})};return(l,d)=>{var A,p,k;const g=pe("src");return r(o)?(c(),m("div",wr,[G(ee,{class:"bg-gray-300 row-span-2 h-24px w-24px rounded-lg text-sm flex-shrink-0",url:((A=r(s))==null?void 0:A.avatarUrl)??"",name:((p=r(s))==null?void 0:p.nickname)??""},null,8,["url","name"]),u("div",br,[u("div",Cr,y((k=r(s))==null?void 0:k.nickname),1),u("div",Ir,y(r(a)),1)]),u("div",Rr,[r(n)?$((c(),m("img",Er,null,512)),[[g,r(n).thumbnailUrl]]):I("",!0),u("img",{src:ut,class:"w-5 h-5 cursor-pointer text-gray-400",onClick:i})])])):I("",!0)}}});const Fr=ne(Sr,[["__scopeId","data-v-e952c252"]]),Br="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXElEQVR4nO2Zv2sUQRTHH4qKhYWFiljYSqLVFbl9M3aiQbAzWFgGrA0Wlrvz7oKKRLAMWomN9w8o2AdLG7EJgj8awUKy995GRFcWklxiSLxzf8zMMh/49vtlZt/37XcBAoFAIBAIBAL7oyidVsRGGXnUpfQCtBF8kB9TSTaviFcUSb4lwxLF6XloC2gkQuKnSJzuMLpNSPwQfEYvrp1A4gUkfreXyb9OOQHviPMDupddQuJnxTUdy+iW0mnwhW6fz2iSu2j4w2QmN8Ur4DpTcX5YGb6GJAMk/vl/RjeUZPPgKlG8fg4N31ckX0uZHA2rtJje4BLdpfyoNjKHhl8rw7+rMDoaVvIEXEETd5BkWRleq9TkdvW5a9fkve/HNfEtNPK2NpOjYfXewziRMu/vgmdxImVO90exnPgVJ1TmdGXgVZyokorM8EotRjGRG7u+TiwLiT8Wc6N6szS8attcox8KiuSOdXO7xL+inpytxfDF/vC0Mrxq3+QOvYK6p7LeXAvtm82LZ4GmV0UkzqwYNvJt9nF+BJpmZjE9VSwciuRzw+/vEthkqvHr7lCroWu/7o62GjN1XXeXW42qr7uTrcZ+IMmb1rQa44CJ3PS61ZiUznJ+SBn54lerUZJi4fei1aiKKE5PouF1J1uNulDEzyc6XcMvwGc0cWciw73sMvgOjhlRaPjT3CA/CL6DY0YUksTQBjpjRVSNrYaLEYVGXkKbiP4RURHxdWgbaq+IstVq2Isoy61G8xHlUKtRf0Q52mpU/GNu1UoFa4uNsv+27g1nrT1EIBAIBAJghT+Mm9s2KhDbfwAAAABJRU5ErkJggg==",xt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACy0lEQVR4nO1Zu24TQRRdAaGg5FHx+AsQfIgFgj5NZOeeSQGi2Y7QWiQKiCaW0iFCAaHhD1JEAoUPIKQiMRKR7Jld4wy66weOsbUzuzO7RvKRrmTJo/U5O/feOXMdBHPMMUdu6ErlfHt5+Z4ieiqBt5LoqyT6KYE4id7nff6O17SAuzoMzwVloy3ETUn0XBEdKkBbxncJrLaq1RuFEz+pVq8p4JUkijIQPxOy94yNEyGuFkI+Ah5KomZe4hPiOAIeeCOuFxcXFPDaA3F9Johe8m+5Jn9JAh+9k8cwrXb4N12RXyiSvPobn3QYXswtoJC0wdTYyEW+TfSoRPKaIxLifibyv5aWriiio7IFSKJmphbLfb5s8moQROtW5Pl0tDqkhNBxvW5MKFkrhM0uRO1a7ZaxgMQeWJD/vburdberO1tb6eQ3N5O13b09rVZWzEUAq0bk2WSxT7EiP0CKiAH54fI9CxFEh2waUwUkrtIiFUYJDUTEjca/axuNyWvrFqkH3EkVwHbXpsDG3+qknZi2JjZIubFdeGKS/9tWD00R4Yw8kjp4ky4A2Ld98FQRp6e9cEBe9brRF5MdyGyVJ4pwRF71UujIRECuS0oiYvyt93cjF3kkKaRKFdApSEDTZwp1vKcQ/Bdxx3MRbzsh3y9Yk3NCuWyjrg6y0YJ1KOJxqgAeOs2slajVbpuZOaKDrGYu9mXmgG/G0zy2rlnsdOzTThM9MyI/kxcaQLWA64ENeCJgWWD+guhFYAsNXJ6FS70CjjPPTXlWWbaASIhKkAc8qyxRwFqQF3wPlcC7oslL4IMOwwu5BQyHu0Q7hZEneu9suDs2Xi+iM605e/OTwLNKT93pR+6CtZybrvMB4yDXFfd5bttB0eDTMbEdpt5pNIgO2B5Yn7A+wCaLh048t2HPzhcPvtmxHelHUwKf+Tu2xOwqZ+Jv1jnmCP5//AFGuxmMzLZJIgAAAABJRU5ErkJggg==",ze=e=>(he("data-v-34096c10"),e=e(),fe(),e),Ur={class:"relative flex justify-center"},Mr=["onClick"],Tr=ze(()=>u("img",{class:"w-4 h-4",src:Ve},null,-1)),Or=[Tr],Lr={key:0,class:"transition duration-150 ease-in-out absolute flex items-center gap-1 bottom-2 bg-white bg-opacity-85 rounded-full shadow-lg p-2 text-xs"},Qr=ze(()=>u("img",{class:"w-4 h-4",src:xt},null,-1)),Vr=["disabled","onClick"],Kr={key:0,class:"w-full h-10.5 flex items-center justify-center"},Dr=ze(()=>u("svg",{class:"w-6 h-6 text-gray-200 animate-spin fill-blue-300",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),u("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)),Nr=[Dr],Pr={class:"text-base font-600"},Gr={class:"text-xs"},_r=L({__name:"LocationModal",setup(e){class t{constructor(f,v,T=null){R(this,"lat");R(this,"lng");R(this,"address");this.lat=f,this.lng=v,this.address=T}get isValid(){return this.address!==null}}const{t:o}=me(),s=_(),a=s.state.imkit.config.mapApiKey,n=U(),i=U(new t(21.30895,-157.826182)),l=U({lat:i.value.lat,lng:i.value.lng}),d=h(()=>({position:{lat:i.value.lat,lng:i.value.lng}})),g=U(""),A=U(!1),p=U(10),k=U(!1),F=U(""),b=()=>new Promise((B,f)=>{A.value=!0,navigator.geolocation.getCurrentPosition(v=>{let{latitude:T,longitude:K}=v.coords;F.value="",A.value=!1,B({lat:T,lng:K})},v=>{switch(A.value=!1,v.code){case v.PERMISSION_DENIED:F.value=o("noAccessLocationPermission");break;case v.POSITION_UNAVAILABLE:F.value=o("locationInfoUnavailable");break;case v.TIMEOUT:F.value=o("requestLocationTimeout");break}f(v)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),C=async(B,f)=>{try{const{data:v}=await Se.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${B},${f}&key=${a}`);if(v.error_message)throw new Error(v.error_message);return v.results[0].formatted_address}catch(v){throw F.value=o("addressUnavailable"),v}},N=it(700,async B=>{var f,v;try{if(B===0){const Y=(f=n.value)==null?void 0:f.map.getCenter();if(Y){const{lat:Z,lng:re}=Y;i.value=new t(Z(),re())}}else if(B===1){const{lat:Y,lng:Z}=await b();i.value=new t(Y,Z),p.value=17,(v=n.value)==null||v.map.panTo({lat:Y,lng:Z})}const{lat:T,lng:K}=i.value;g.value=await C(T,K),i.value=new t(T,K,g.value)}catch(T){console.error(T)}},{noLeading:!1,noTrailing:!1}),S=async B=>{k.value=!0;const f={roomId:s.state.imkit.selectedRoomId,messageType:"location",message:g.value,latitude:d.value.position.lat,longitude:d.value.position.lng};B(),await s.dispatch("imkit/sendMessage",f),k.value=!1};return N(1),(B,f)=>{const v=Fe("vue-final-modal");return c(),P(v,Be(B.$attrs,{classes:"flex items-center justify-center","content-class":"flex flex-col bg-white rounded-lg overflow-hidden w-450px <sm:w-350px"}),{default:te(({close:T})=>[u("div",Ur,[G(r(ct),{ref_key:"mapRef",ref:n,"api-key":r(a),center:l.value,zoom:p.value,disableDefaultUi:!0,onCenter_changed:f[0]||(f[0]=K=>r(N)(0)),class:"w-450px h-350px <sm:w-350px <sm:h-250px"},{default:te(()=>[G(r(lt),{options:r(d)},null,8,["options"])]),_:1},8,["api-key","center","zoom"]),u("button",{class:"absolute top-2 right-2 flex items-center justify-center bg-white rounded-full shadow-lg w-9 h-9",onClick:T},Or,8,Mr),u("button",{class:"absolute bottom-2 right-2 flex items-center justify-center bg-white rounded-full shadow-lg w-9 h-9",onClick:f[1]||(f[1]=K=>r(N)(1))},[u("img",{class:Q(["w-5 h-5",{"animate-pulse":A.value}]),src:Br},null,2)]),G(We,null,{default:te(()=>[F.value?(c(),m("div",Lr,[Qr,se(" "+y(F.value),1)])):I("",!0)]),_:1})]),u("button",{class:"flex flex-col items-center gap-0.5 bg-blue-400 disabled:cursor-not-allowed text-white rounded-lg m-2 p-2",disabled:A.value||k.value||!i.value.isValid,onClick:K=>S(T)},[k.value?(c(),m("div",Kr,Nr)):(c(),m(V,{key:1},[u("div",Pr,y(B.$t("sendCurrentLocation")),1),u("div",Gr,y(g.value),1)],64))],8,Vr)]),_:1},16)}}});const Yr=ne(_r,[["__scopeId","data-v-34096c10"]]),Xr=e=>(he("data-v-3a9d3650"),e=e(),fe(),e),jr={class:"flex items-center gap-1 flex-grow"},Wr={class:"h-12 bg-gray-100 px-3 rounded-xl w-0 min-w-0 flex-grow flex items-center gap-3 relative"},zr={key:0,class:"transition duration-150 ease-in-out flex items-center gap-1 bg-white rounded-xl p-2 text-xs text-gray-600"},Jr=Xr(()=>u("img",{class:"w-4 h-4",src:xt},null,-1)),Hr={class:"volumes"},Zr={class:"text-white font-bold bg-black bg-opacity-30 rounded-full text-xs py-1 px-2 ml-auto"},qr={key:1,class:"cursor-not-allowed ml-2 mr-1 w-6 h-6",src:ft},$r=L({__name:"AudioInput",setup(e){const{t}=me(),o=_(),s=U(3),a=U(),n=U(),i="audio/webm",l=180,d=U(0),g=U(0),A=U(),p=U(),k=Xt([]),F=U(""),b=h(()=>d.value>1),C=async()=>{var S,B;try{switch(s.value){case 3:{s.value=0,k.splice(0),d.value=0,g.value=0,a.value=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),n.value=new Wt.RecordRTCPromisesHandler(a.value,{type:"audio",mimeType:i});let f=new AudioContext,v=f.createAnalyser();v.fftSize=64,v.smoothingTimeConstant=0,f.createMediaStreamSource(a.value).connect(v),p.value=window.setInterval(()=>{let K=new Uint8Array(v.frequencyBinCount);v.getByteFrequencyData(K);let Y=K.reduce((re,Ue)=>re+Ue)/K.length;const Z=Math.min(1,Y/128);k.unshift(Z)},100),await n.value.startRecording(),g.value=Date.now(),A.value=window.setInterval(()=>{d.value=(Date.now()-g.value)/1e3,d.value>=l&&C()},1e3),s.value=1;break}case 1:s.value=2,await((S=n.value)==null?void 0:S.stopRecording()),(B=a.value)==null||B.getTracks().forEach(f=>f.stop()),clearInterval(A.value),clearInterval(p.value),s.value=3;break;default:break}}catch(f){console.error(f),F.value=t("noAccessMicrophonePermission")}},N=async()=>{var B;s.value!==3&&await C(),k.splice(0),d.value=0,g.value=0;let S=await((B=n.value)==null?void 0:B.getBlob());if(S){const f=await zt(S),v=new File([S],`${Oe()}.webm`),T={roomId:o.state.imkit.selectedRoomId,messageType:"audio",file:v,duration:f,originalUrl:"",extra:{mimeType:i,fileName:v.name.split(".").slice(0,-1).join("."),bytes:v.size,fileExtension:v.name.split(".").pop()}};await o.dispatch("imkit/sendMessage",T)}};return jt(()=>{clearInterval(A.value),clearInterval(p.value)}),(S,B)=>(c(),m("div",jr,[u("div",Wr,[u("div",{class:"w-8 h-8 border border-2px border-gray-300 rounded-full flex items-center justify-center flex-shrink-0",onClick:C},[u("div",{class:Q(["bg-red-500 rounded-full w-6 h-6 transition-all ease-in duration-200",{"w-3.5 h-3.5 rounded":s.value==1,"bg-red-300 cursor-not-allowed":F.value}])},null,2)]),G(We,null,{default:te(()=>[F.value?(c(),m("div",zr,[Jr,se(" "+y(F.value),1)])):I("",!0)]),_:1}),u("div",Hr,[(c(!0),m(V,null,J(k,(f,v)=>(c(),m("div",{key:v,class:"w-0.5 bg-gray-400 rounded flex-shrink-0 !min-h-0.5",style:X({height:`${f*28}px`})},null,4))),128))]),u("div",Zr,y(Math.floor(d.value/60))+":"+y(`${Math.floor(d.value%60)}`.padStart(2,"0")),1)]),r(b)?(c(),m("img",{key:0,class:"cursor-pointer ml-2 mr-1 w-6 h-6",src:ht,onClick:N})):(c(),m("img",qr))]))}});const ei=ne($r,[["__scopeId","data-v-3a9d3650"]]),be=e=>(he("data-v-0364bb3d"),e=e(),fe(),e),ti=["onDrop"],si={class:"flex items-center p-3 gap-3 border-b border-solid"},oi={key:2,class:"h-40px w-40px relative"},ai={class:"text-base text-gray-900 overflow-ellipsis overflow-hidden whitespace-nowrap"},ni={key:0,slot:"header",class:"w-full h-12 flex items-center justify-center"},ri=be(()=>u("svg",{class:"w-6 h-6 text-gray-200 animate-spin fill-blue-400",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[u("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),u("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)),ii=[ri],li={key:0,class:"text-sm text-gray-900 px-2"},ci={class:"flex items-end justify-center p-2 relative gap-3 pl-3"},di={key:1,class:"absolute left-2 bottom-64px p-1.5 bg-white z-10 rounded-lg shadow-md flex items-stretch gap-1 text-gray-900"},ui=be(()=>u("img",{class:"w-6 h-6",src:ga},null,-1)),mi={class:"text-xs"},gi=be(()=>u("img",{class:"w-6 h-6",src:Aa},null,-1)),Ai={class:"text-xs"},pi={key:3,class:"bg-gray-100 p-3 rounded-lg flex flex-grow flex-col items-stretch relative"},hi={class:"flex items-center bg-gray-100 gap-3"},fi={class:"flex flex-col flex-grow justify-center items-stretch gap-3 w-0 min-w-0"},vi=["placeholder","onKeydown"],ki={key:0,class:"flex gap-3"},yi=["src"],xi=["onClick"],wi=be(()=>u("img",{src:ha,width:"24",height:"24"},null,-1)),bi=[wi],Ci=be(()=>u("img",{src:fa,width:"24",height:"24"},null,-1)),Ii=[Ci],Ri=be(()=>u("img",{src:va,width:"24",height:"24"},null,-1)),Ei={key:1,class:"cursor-not-allowed my-auto ml-0.5 mr-1 w-6 h-6",src:ft},Si=L({__name:"ChatRoom",setup(e){const t=_(),o=h(()=>t.state.imkit.rooms[t.state.imkit.selectedRoomId]),s=h(()=>t.state.imkit.selectedRoomId),a=h(()=>!!t.state.imkit.isRequesting[`/rooms/${t.state.imkit.selectedRoomId}/messages/v3`]),n=h(()=>t.state.imkit.sortedMessages),i=h(()=>new URL(window.location.href).searchParams.get("roomId")),l=h(()=>n.value.at(-1)),d=h(()=>t.state.imkit.isRoomInfoVisible),g=h(()=>t.state.imkit.navigationTargetId),A=U(null),p=U(""),k=U(!1),F=U(!1),b=U(!1),C=U(!1),N=U(),S=U([]),B=U([]),f=U(!1),v=U(!1),T=U(!1),K=U(),Y=U(j().subtract(5,"second")),Z=U(!1),re=h(()=>t.state.imkit.replyId),Ue=h(()=>{const{t:M}=me(),O=Object.keys(t.state.imkit.isTyping);return O.length>0?O.map(D=>{var z;return((z=t.state.imkit.users[D])==null?void 0:z.nickname)??""}).join(", ")+M("isTyping"):""}),He=async()=>{const M=async()=>{if(p.value){const{replyId:D}=t.state.imkit,z={roomId:o.value.id,messageType:"text",message:p.value,reply:D||null};p.value="",await t.dispatch("imkit/sendMessage",z),t.commit("imkit/setState",{replyId:null})}},O=async()=>{if(S.value.length>0){const D={roomId:o.value.id,messageType:"image",images:S.value,files:B.value};S.value=[],B.value=[],await t.dispatch("imkit/sendMessage",D)}};await Promise.all([O(),M()])},bt=async()=>{var O;const M=await t.dispatch("imkit/fetchMessages",o.value.id);M&&M.length>0&&((O=A.value)==null||O.scrollToIndex(M.length))},Ct=()=>{v.value=!1},It=M=>{p.value+=M.i,b.value=!1},Rt=()=>{var M;(M=N.value)==null||M.click()},Et=async M=>{var ve;const D=Array.from(((ve=M==null?void 0:M.target)==null?void 0:ve.files)||[]).filter(H=>H.size<2e7);if(D.length===0||D.length>10)return;const z=D.filter(H=>H.type.startsWith("image")),q=D.filter(H=>H.type.startsWith("video")),ce=D.filter(H=>!H.type.startsWith("image")&&!H.type.startsWith("video"));if(z.length>0){const H=await Promise.all(z.map(Pe)),ke={roomId:o.value.id,messageType:"image",images:H,files:Array.from(D)};await t.dispatch("imkit/sendMessage",ke)}if(q.length>0)for(const H of q){const ke=await xr(H),{width:Ot,height:Lt,duration:Qt}=ke,Vt={roomId:o.value.id,messageType:"video",video:ke,file:H,width:Ot,height:Lt,duration:Qt};await t.dispatch("imkit/sendMessage",Vt)}if(ce.length>0)for(const H of ce){const ke={roomId:o.value.id,messageType:"file",file:H,originalUrl:"",extra:{mimeType:H.type,fileName:H.name.split(".").slice(0,-1).join("."),bytes:H.size,fileExtension:H.name.split(".").pop()}};await t.dispatch("imkit/sendMessage",ke)}N.value&&(N.value.value="")},St=async M=>{const O=((M==null?void 0:M.dataTransfer)||{}).files||[];if(O.length===0||O.length>10)return;const D=await Promise.all(Array.from(O).map(Pe)),z={roomId:o.value.id,messageType:"image",images:D,files:Array.from(O)};await t.dispatch("imkit/sendMessage",z)},Ze=M=>{M.preventDefault()},Ft=async M=>{const D=(M.clipboardData||{}).files;D.length===0||D.length>10||(M.preventDefault(),S.value=S.value.concat(await Promise.all(Array.from(D).map(Pe))),B.value=B.value.concat(Array.from(D)))},Bt=()=>{t.commit("imkit/setState",{selectedRoomId:""})},Ut=M=>{S.value.splice(M,1),B.value.splice(M,1)};ue(s,async(M,O)=>{console.log(M,O),M!==O&&(f.value=!1,t.commit("imkit/clearChatRoom"),Promise.all([t.dispatch("imkit/fetchMessages",M),t.dispatch("imkit/fetchRoom",M)]).finally(()=>{var D,z;(((D=o.value)==null?void 0:D.numberOfUnread)??0)>0&&(t.dispatch("imkit/updateLastRead",M),t.dispatch("imkit/insertUnreadMessage")),(z=A.value)==null||z.scrollToBottom(),f.value=!0}))},{immediate:!0}),ue([()=>n.value.length,()=>l.value],([M],[O])=>{var D,z,q,ce,ve;M-O>1||(((D=A.value)==null?void 0:D.getOffset())+((z=A.value)==null?void 0:z.getClientSize())==((q=A.value)==null?void 0:q.getScrollSize())||((ce=n.value[n.value.length-1])==null?void 0:ce.senderId)===t.state.imkit.uid?(v.value=!1,(ve=A.value)==null||ve.scrollToBottom()):v.value=!0)}),ue(g,M=>{var D;if(!M)return;const O=n.value.findIndex(z=>z.id===M);O!==-1&&((D=A.value)==null||D.scrollToIndex(O)),t.commit("imkit/setState",{navigationTargetId:""})}),ue(re,()=>{var M;re.value&&((M=K.value)==null||M.focus())}),ue(p,()=>{if(Y.value.add(5,"second")>j())return;Y.value=j();const{socket:M,selectedRoomId:O}=t.state.imkit;M.emit("typing",O)});const Mt=()=>{setTimeout(()=>{k.value=!1},0)},Tt=M=>{!k.value&&M.keyCode==13&&!M.shiftKey&&!T.value&&(M.preventDefault(),He())};return(M,O)=>{var z;const D=pe("click-outside");return r(o)?(c(),m("div",{key:0,class:"flex flex-col h-full bg-white",onDrop:ae(St,["prevent"]),onDragenter:Ze,onDragover:Ze},[u("div",si,[r(i)?I("",!0):(c(),m("img",{key:0,src:da,class:"cursor-pointer sm:hidden",width:"36",height:"36",onClick:Bt})),r(o).avatars.length===1?(c(),P(ee,{key:1,url:r(o).avatars[0].url,name:r(o).avatars[0].name,class:"h-40px w-40px text-lg"},null,8,["url","name"])):(c(),m("div",oi,[G(ee,{url:r(o).avatars[1].url,name:r(o).avatars[1].name,class:"h-28px w-28px text-sm rounded-xl absolute top-0 right-0"},null,8,["url","name"]),G(ee,{url:r(o).avatars[0].url,name:r(o).avatars[0].name,class:"h-30px w-30px text-sm rounded-xl absolute bottom-0 left-0 border-2 border-white group-hover:border-gray-100"},null,8,["url","name"])])),u("div",ai,y(r(o).displayName),1),u("img",{src:ua,class:"cursor-pointer ml-auto",width:"30",height:"30",onClick:O[0]||(O[0]=q=>r(t).commit("imkit/setState",{isRoomInfoVisible:!r(d)}))})]),G(r(je),{class:Q(["p-2 h-100vh overflow-auto",{"opacity-0":!f.value&&!r(a)}]),ref_key:"vl",ref:A,"data-key":"id","data-sources":r(n),"data-component":Ar,"wrap-class":"flex flex-col","estimated-size":66,keeps:50,onTotop:bt,onTobottom:Ct},{header:te(()=>[r(a)?(c(),m("div",ni,ii)):I("",!0)]),footer:te(()=>[r(Ue)?(c(),m("div",li,y(r(Ue)),1)):I("",!0)]),_:1},8,["class","data-sources"]),u("div",ci,[v.value?(c(),m("div",{key:0,class:"absolute -top-10 h-10 bg-gray-200 bg-opacity-90 w-full flex items-center px-3 cursor-pointer",onClick:O[1]||(O[1]=(...q)=>A.value.scrollToBottom&&A.value.scrollToBottom(...q))},y((z=r(o).lastMessage)==null?void 0:z.string),1)):I("",!0),u("img",{src:ma,class:Q(["w-5 h-12 cursor-pointer object-contain transform transition flex-shrink-0",{"rotate-45":C.value}]),onClick:O[2]||(O[2]=()=>{C.value?C.value=!1:Z.value=!0})},null,2),Z.value?$((c(),m("div",di,[u("div",{class:"flex flex-col items-center justify-center gap-1 p-2 w-16 cursor-pointer",onClick:O[3]||(O[3]=q=>r(we).show({component:Yr}))},[ui,u("div",mi,y(M.$t("location")),1)]),u("div",{class:"flex flex-col items-center justify-center gap-1 p-2 w-16 cursor-pointer",onClick:O[4]||(O[4]=()=>{Z.value=!1,C.value=!0})},[gi,u("div",Ai,y(M.$t("audio")),1)])])),[[D,()=>{Z.value=!1}]]):I("",!0),C.value?(c(),P(ei,{key:2})):(c(),m("div",pi,[G(Fr),u("div",hi,[u("div",fi,[$(u("textarea",{ref_key:"input",ref:K,type:"text",class:Q(["bg-gray-100 outline-none h-6 resize-none flex-grow",{"!h-12":p.value.split(`
`).length===2,"!h-18":p.value.split(`
`).length>2}]),placeholder:M.$t("TypeMessage"),"onUpdate:modelValue":O[5]||(O[5]=q=>p.value=q),onCompositionstart:O[6]||(O[6]=q=>k.value=!0),onCompositionend:Mt,onKeydown:Jt(Tt,["enter"]),onPaste:Ft},null,42,vi),[[Ee,p.value]]),S.value.length>0?(c(),m("div",ki,[(c(!0),m(V,null,J(S.value,(q,ce)=>(c(),m("div",{key:`${q.id}-${ce}`,class:"relative w-12 h-12 group"},[u("img",{src:q.thumbnailUrl,class:"w-full h-full absolute left-0 bottom-0 rounded-lg object-cover bg-gray-200"},null,8,yi),u("img",{src:pa,class:"w-5 h-5 absolute -right-2 -top-2 cursor-pointer hidden group-hover:block",onClick:ve=>Ut(ce)},null,8,xi)]))),128))])):I("",!0)]),u("button",{class:"flex-shrink-0",onClick:O[7]||(O[7]=q=>F.value=!0)},bi),u("button",{class:"flex-shrink-0",onClick:O[8]||(O[8]=q=>b.value=!0)},Ii),u("button",{class:"flex-shrink-0",onClick:Rt},[Ri,u("input",{ref_key:"fileInput",ref:N,type:"file",multiple:"true",onChange:Et,class:"hidden"},null,544)])]),F.value?$((c(),P(yr,{key:0,onClose:O[9]||(O[9]=()=>{F.value=!1})},null,512)),[[D,()=>{F.value=!1}]]):I("",!0),b.value?$((c(),P(r(Ht),{key:1,class:"overflow-auto absolute right-0 bottom-[110%]",native:!0,onSelect:It},null,512)),[[D,()=>{b.value=!1}]]):I("",!0)])),T.value&&!C.value?(c(),m(V,{key:4},[p.value.length>0?(c(),m("img",{key:0,class:"cursor-pointer my-auto ml-0.5 mr-1 w-6 h-6",src:ht,onClick:He})):(c(),m("img",Ei))],64)):I("",!0)])],40,ti)):I("",!0)}}});const ot=ne(Si,[["__scopeId","data-v-0364bb3d"]]),Fi={class:"flex flex-col divide-y"},Bi={class:"flex items-center gap-4 px-3 h-64px"},Ui={class:"h-50px w-50px relative"},Mi={class:"text-base text-gray-900 overflow-ellipsis overflow-hidden whitespace-nowrap"},Ti={class:"p-2 flex flex-col gap-4 overflow-auto"},Oi={class:"text-base text-gray-500 mb-2"},Li={class:"flex flex-col gap-3"},Qi={class:"h-50px w-50px relative"},Vi={class:"flex flex-col text-base overflow-ellipsis overflow-hidden whitespace-nowrap"},Ki={class:"text-base text-gray-900"},Di={key:0,class:"text-sm text-gray-500"},Ni={class:"text-gray-500"},Pi={class:"text-gray-500"},Gi=L({__name:"ChatRoomInfo",setup(e){j.extend(Xe);const t=_(),o=h(()=>t.state.imkit.rooms[t.state.imkit.selectedRoomId]),s=h(()=>t.state.imkit.users),a=h(()=>t.state.imkit.uid);return(n,i)=>(c(),m("div",Fi,[u("div",Bi,[u("div",Ui,[r(o).avatars.length===1?(c(),P(ee,{key:0,url:r(o).avatars[0].url,name:r(o).avatars[0].name,class:"relative"},null,8,["url","name"])):(c(),m(V,{key:1},[G(ee,{url:r(o).avatars[1].url,name:r(o).avatars[1].name,class:"h-36px w-36px text-16px absolute top-0 right-0"},null,8,["url","name"]),G(ee,{url:r(o).avatars[0].url,name:r(o).avatars[0].name,class:"h-38px w-38px text-16px absolute bottom-0 left-0 border-2 border-white group-hover:border-gray-100"},null,8,["url","name"])],64))]),u("div",Mi,y(r(o).displayName),1)]),u("div",Ti,[u("div",null,[u("div",Oi,y(n.$t("members")),1),u("div",Li,[(c(!0),m(V,null,J(r(o).memberIds,l=>(c(),m("div",{key:l,class:"flex items-center gap-4"},[u("div",Qi,[G(ee,{url:r(s)[l].avatarUrl??"",name:r(s)[l].nickname,class:"relative h-50px w-50px text-lg"},null,8,["url","name"])]),u("div",Vi,[u("div",Ki,y(r(s)[l].nickname),1),r(s)[l].city&&r(s)[l].country?(c(),m("div",Di,y(r(s)[l].city)+", "+y(r(s)[l].country),1)):I("",!0)])]))),128))])]),u("div",null,[u("div",Ni,y(n.$t("createdAt"))+" "+y(r(j)(r(o).createdAt).format("lll")),1),u("div",Pi,y(n.$t("updatedAt"))+" "+y(r(j)(r(o).updatedAt).format("lll")),1)]),r(o).type===r(mt).Group?(c(),m("button",{key:0,class:"w-full text-gray-500 border rounded-lg p-2",onClick:i[0]||(i[0]=l=>r(t).dispatch("imkit/removeMembers",{roomId:r(o).id,uids:[r(a)]}))},y(n.$t("leaveGroup")),1)):I("",!0)])]))}}),_i={class:"flex divide-x relative h-screen"},Yi=L({__name:"App",setup(e){const t=_(),o=h(()=>t.state.imkit.selectedRoomId),s=h(()=>t.state.imkit.isRoomInfoVisible),a=h(()=>new URL(window.location.href).searchParams.get("roomId"));return(n,i)=>(c(),m("div",_i,[r(a)?(c(),m(V,{key:0},[r(o)?(c(),P(ot,{key:0,class:"w-full <sm:w-full <sm:absolute <sm:inset-0"})):I("",!0)],64)):(c(),m(V,{key:1},[G(ca,{class:"w-1/4 min-w-300px <sm:w-full"}),G(We,{name:"slide-fade"},{default:te(()=>[r(o)?(c(),P(ot,{key:0,class:"w-3/4 <sm:w-full <sm:absolute <sm:inset-0"})):I("",!0)]),_:1})],64)),r(o)&&r(s)?(c(),P(Gi,{key:2,class:"w-1/4 min-w-300px <sm:w-full <sm:absolute <sm:inset-0"})):I("",!0),G(r(Zt))]))}});const Xi=ne(Yi,[["__scopeId","data-v-f8a1d685"]]);const ji={count:0,config:{},uid:"",axios:Se,isRequesting:{},socket:dt(),imageCache:qe(),translationCache:qe(),users:{},rooms:{},sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0,uploadProgresses:{},downloadProgresses:{},linkPreviews:{},actionMenuRoomId:"",folders:{},sortedFolderIds:[],roomIdsInFolders:{},selectedRoomIdsForCreateFolder:{},selectedFolderId:"",searchKeyword:"",searchType:oe.RoomName,searchRooms:{},selectedRoomId:"",messages:{},sortedMessages:[],numberOfTotalMessages:-1,messageGroupHead:{},messageGroupTail:{},replyId:"",navigationTargetId:"",isRoomInfoVisible:!1,isTyping:{}};var x=(e=>(e.increment="increment",e.fetchRooms="fetchRooms",e.fetchRoom="fetchRoom",e.fetchMessages="fetchMessages",e.updateLastRead="updateLastRead",e.handleMessageFromSocket="handleMessageFromSocket",e.handleRoomFromSocket="handleRoomFromSocket",e.handleLastReadFromSocket="handleLastReadFromSocket",e.sendMessage="sendMessage",e.recallMessage="recallMessage",e.uploadMedia="uploadMedia",e.fetchLinkPreview="fetchLinkPreview",e.handleLinkPreviews="handleLinkPreviews",e.fetchVideoBlob="fetchVideoBlob",e.navigateToMessage="navigateToMessage",e.uploadImage="uploadImage",e.updateRoomPrefs="updateRoomPrefs",e.fetchPrefs="fetchPrefs",e.updatePref="updatePref",e.deletePref="deletePref",e.updateFolder="updateFolder",e.removeFolder="removeFolder",e.handlePrefChangeFromSocket="handlePrefChangeFromSocket",e.handlePrefDeleteFromSocket="handlePrefDeleteFromSocket",e.aggregateRoomsAndFolders="aggregateRoomsAndFolders",e.removeMembers="removeMembers",e.handleTypingFromSocket="handleTypingFromSocket",e.insertUnreadMessage="insertUnreadMessage",e.translate="translate",e.searchRooms="searchRooms",e.subscribe="subscribe",e.unsubscribe="unsubscribe",e.removeRoomFromFolder="removeRoomFromFolder",e.addRoomToFolder="addRoomToFolder",e.fetchRoomsInFolders="fetchRoomsInFolders",e))(x||{}),w=(e=>(e.increment="increment",e.setState="setState",e.updateField="updateField",e.deleteField="deleteField",e.updateRoom="updateRoom",e.updateLastRead="updateLastRead",e.concatMessages="concatMessages",e.pushMessage="pushMessage",e.replaceMessage="replaceMessage",e.clearChatRoom="clearChatRoom",e.deleteRoom="deleteRoom",e.recallMessage="recallMessage",e.insertUnreadMessage="insertUnreadMessage",e))(w||{});class ye{constructor(t,o,s){R(this,"id");R(this,"name");R(this,"roomIds");this.id=t,this.name=o,this.roomIds=s}get payload(){return{children:this.roomIds.map(t=>({id:t,type:"room"}))}}}const Wi={[x.increment]({commit:e}){e(w.increment)},async[x.fetchRooms]({state:e,commit:t,dispatch:o},{pageSize:s}={pageSize:void 0}){if(e.isRequesting[ie.FetchRooms])return;const{numberOfFetchedRooms:a,uid:n}=e;if(a===e.numberOfTotalRooms&&a>0)return;const i=s!==void 0?s:Math.min(Math.max(30,a),120),{data:{result:l}}=await e.axios.get(ie.FetchRooms,{params:{skip:a,limit:i,q:`{ "members": "${n}" }`}}),{data:d,totalCount:g}=l,A={},p={};for(const k of d){A[k._id]=new Ie(k);for(const F of k.members)p[F.id]||(p[F.id]=new Ae(F))}t(w.updateField,{key:"rooms",value:A}),t(w.updateField,{key:"users",value:p}),t(w.setState,{numberOfTotalRooms:g,numberOfFetchedRooms:a+i}),o(x.aggregateRoomsAndFolders)},async[x.handleMessageFromSocket]({state:e,commit:t,dispatch:o},s){let a=e.rooms[s.roomId];if(a){const{id:n,numberOfUnread:i}=a;if(s.roomId===e.selectedRoomId){if(await o(x.handleLinkPreviews,[s]),e.config.translationApiKey&&s.type===E.Text&&s.senderId!==e.uid){const l=s.text;try{const d=await o(x.translate,l);s.translatedText=d!==l?d:null}catch(d){console.error(d)}}t(w.pushMessage,s),t(w.updateRoom,{id:n,updatedAt:s.createdAt,lastMessage:s,numberOfUnread:0}),o(x.updateLastRead,n),t(w.setState,{numberOfTotalMessages:e.numberOfTotalMessages+1})}else t(w.updateRoom,{id:n,updatedAt:s.createdAt,lastMessage:s,numberOfUnread:i+1})}else await o(x.fetchRoom,s.roomId),a=e.rooms[s.roomId]},async[x.fetchMessages]({state:e,commit:t,dispatch:o},s){var b;const a=`/rooms/${s}/messages/v3`;if(e.isRequesting[a]||e.sortedMessages.length>=e.numberOfTotalMessages&&e.numberOfTotalMessages!==-1)return;const{data:{result:n}}=await e.axios.get(a,{params:{limit:30,beforeMessage:(b=e.sortedMessages[0])==null?void 0:b.id}}),{data:i,totalCount:l}=n,d={},g=C=>{const N=W.fromRaw(C);return N?[N].concat(g(C.reply)):[]};if(i.flatMap(C=>g(C)).forEach(C=>{d[C.id]=C}),await o(x.handleLinkPreviews,Object.values(d)),e.config.translationApiKey){const C=Object.values(d).filter(S=>S.type===E.Text&&S.senderId!==e.uid),N=await Promise.allSettled(C.map(S=>o(x.translate,S.text)));for(let S=0;S<C.length;S++){const B=N[S];B.status==="fulfilled"&&B.value!==C[S].text&&(C[S].translatedText=xe.linkfy(B.value))}}t(w.concatMessages,{messages:d,messageIds:i.map(C=>C._id)}),l>e.numberOfTotalMessages&&t(w.setState,{numberOfTotalMessages:l});let A=[];const p={},k={};let F=null;for(const C of e.sortedMessages)C.groupId!==F&&(A.length>0&&(p[A[0].id]=!0,k[A[A.length-1].id]=!0),A=[],F=C.groupId),A.push(C);return A.length>0&&(p[A[0].id]=!0,k[A[A.length-1].id]=!0),t(w.setState,{messageGroupHead:p,messageGroupTail:k}),i},async[x.fetchRoom]({state:e,commit:t},o){const{data:{result:s}}=await e.axios.get(ie.FetchRoom+`/${o}`),a=new Ie(s),n={};n[a.id]=a,t(w.updateField,{key:"rooms",value:n});const i={};for(const l of s.members)i[l.id]||(i[l.id]=new Ae(l));t(w.updateField,{key:"users",value:i})},async[x.updateLastRead]({state:e,commit:t},o){var i;const s=`/rooms/${o}/lastRead`;if(e.isRequesting[s])return;const a=e.rooms[o],{data:{result:n}}=await e.axios.put(s,{message:(i=a.lastMessage)==null?void 0:i.id});n&&t(w.updateRoom,{id:o,numberOfUnread:0})},async[x.handleRoomFromSocket]({commit:e,dispatch:t},o){const s={};s[o.id]=o,await e(w.updateField,{key:"rooms",value:s}),t(x.aggregateRoomsAndFolders)},async[x.handleLastReadFromSocket]({commit:e},t){e(w.updateLastRead,t)},async[x.sendMessage]({state:e,commit:t,dispatch:o},s){const{roomId:a}=s;if(!a)return;const n=W.fromPayload(s,e.uid);if(!n)return;if(t(w.pushMessage,n),s.messageType===E.Image){const{files:d}=s,g=await Promise.all(s.images.map((p,k)=>o(x.uploadImage,{image:p,file:d[k]}))),A=[];s.images.forEach((p,k)=>{e.imageCache.set(g[k].thumbnailUrl,p.thumbnailUrl);const{id:F,width:b,height:C}=p;A.push({originalUrl:g[k].originalUrl,thumbnailUrl:g[k].thumbnailUrl,width:b,height:C}),t(w.deleteField,{key:"uploadProgresses",value:`${F}-original`}),t(w.deleteField,{key:"uploadProgresses",value:`${F}-thumbnail`})}),s.images=A,delete s.files}else if(s.messageType===E.Video){const{file:d,video:g}=s,A=g.thumbnailFile;if(!A)return;const p=await Promise.all([o(x.uploadMedia,{id:A.id,file:A.file}),o(x.uploadMedia,{id:g.id,file:d})]);s.width=g.width,s.height=g.height,s.duration=g.duration,s.thumbnailUrl=p[0],s.originalUrl=p[1],e.imageCache.set(p[0],g.thumbnailUrl),delete s.file,t(w.deleteField,{key:"uploadProgresses",value:g.id})}else if(s.messageType===E.File){const{file:d}=s,g=await o(x.uploadMedia,{id:n.id,file:d});s.originalUrl=g,delete s.file,t(w.deleteField,{key:"uploadProgresses",value:n.id})}else if(s.messageType===E.Audio){const{file:d}=s,g=await o(x.uploadMedia,{id:n.id,file:d});s.originalUrl=g,delete s.file,t(w.deleteField,{key:"uploadProgresses",value:n.id})}const{data:{result:i}}=await e.axios.post(`/rooms/${a}/message`,s),l=W.fromRaw(i);if(l)return await o(x.handleLinkPreviews,[l]),l.roomId===e.selectedRoomId?t(w.replaceMessage,{message:l,targetMessageId:n.id}):t(w.updateRoom,{id:l.roomId,updatedAt:l.createdAt,lastMessage:l}),l},async[x.recallMessage]({state:e,commit:t},o){const{roomId:s}=o;if(!s)return;const{data:{result:a}}=await e.axios.post(`/rooms/${s}/message`,o),n=W.fromRaw(a);n&&t(w.recallMessage,n)},async[x.uploadMedia]({state:e,commit:t},{id:o,file:s}){const a=new FormData;a.append("file",s);const{data:{result:{_id:n}}}=await e.axios.post("/files/chatserver-upload",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:i=>{const{total:l}=i;l&&t(w.updateField,{key:"uploadProgresses",value:{[o]:i.loaded/l}})}});return`${e.config.domain}/files/chatserver-upload/${n}`},async[x.uploadImage]({dispatch:e},{image:t,file:o}){if(o.size>1024*1024)try{const a=await qt(o,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),n=await Promise.all([e(x.uploadMedia,{id:`${t.id}-original`,file:o}),e(x.uploadMedia,{id:`${t.id}-thumbnail`,file:a})]);return{originalUrl:n[0],thumbnailUrl:n[1]}}catch(a){console.error(a)}const s=await e(x.uploadMedia,{id:`${t.id}-original`,file:o});return{originalUrl:s,thumbnailUrl:s}},async[x.fetchLinkPreview](e,t){const{data:o}=await Se.get(encodeURI(`https://url.imkit.io/?url=${t}`));return o},async[x.handleLinkPreviews]({state:e,commit:t,dispatch:o},s){const a=Array.from(new Set(s.flatMap(l=>(l==null?void 0:l.urls)||[]).filter(l=>!e.linkPreviews[l])));if(a.length===0)return;const n={};(await Promise.allSettled(a.map(l=>o(x.fetchLinkPreview,l)))).forEach((l,d)=>{l.status==="fulfilled"&&(n[a[d]]=l.value)}),t(w.updateField,{key:"linkPreviews",value:n})},async[x.fetchVideoBlob]({state:e},t){const{data:o}=await e.axios.get(t,{responseType:"blob"});return o},async[x.navigateToMessage]({state:e,commit:t,dispatch:o},s){let a=!1;for(;!a;)if(a=e.messages[s]!==void 0&&e.sortedMessages.findIndex(n=>n.id===s)>-1,a)t(w.setState,{navigationTargetId:s});else if(e.sortedMessages.length<e.numberOfTotalMessages||e.numberOfTotalMessages===-1)await o(x.fetchMessages,e.selectedRoomId);else break},async[x.updateRoomPrefs]({state:e,commit:t,dispatch:o},{roomId:s,prefs:a}){await e.axios.post(`/roomPrefs/${s}`,a);const n=e.rooms[s];n&&(t(w.updateRoom,{id:s,pref:{...n.pref,...a}}),o(x.aggregateRoomsAndFolders))},async[x.fetchPrefs]({state:e,commit:t}){const{data:{result:o}}=await e.axios.get("/me/pref"),s={},a=[],n={},i={},l={};for(const d of o)if(d.key==="folders-meta")for(const g of d.data)n[g.key]=g.name,a.push(g.key);else{if(d.key==="blackList")continue;i[d.key]=d.data.children.map(g=>g.id)}for(const d of a){s[d]=new ye(d,n[d],i[d]||[]);for(const g of i[d]||[])l[g]=!0}t(w.setState,{folders:s,sortedFolderIds:a,roomIdsInFolders:l})},async[x.fetchRoomsInFolders]({state:e,dispatch:t}){const o=Object.keys(e.roomIdsInFolders).length;for(;e.numberOfFetchedRooms<o;)await t(x.fetchRooms,{pageSize:200});const s=$t(6),a=Object.keys(e.roomIdsInFolders).filter(n=>!e.rooms[n]).map(n=>s(()=>t(x.fetchRoom,n)));await Promise.allSettled(a)},async[x.updatePref]({state:e},{key:t,value:o}){return await e.axios.post(`/me/pref/${t}`,o)},async[x.deletePref]({state:e},t){return await e.axios.delete(`/me/pref/${t}`)},async[x.updateFolder]({state:e,dispatch:t,commit:o},{folderKey:s,name:a}){const n=Object.keys(e.selectedRoomIdsForCreateFolder).filter(l=>e.selectedRoomIdsForCreateFolder[l]);await t(x.updatePref,{key:"folders-meta",value:e.sortedFolderIds.map(l=>e.folders[l]).filter(l=>!!l&&l.id!==s).map(l=>({key:l.id,name:l.name})).concat([{key:s,name:a}]).sort((l,d)=>l.key.localeCompare(d.key))}),await t(x.updatePref,{key:s,value:{children:n.map(l=>({id:l,type:"room"}))}}),e.folders[s]&&o(w.updateField,{key:"roomIdsInFolders",value:e.folders[s].roomIds.reduce((l,d)=>(l[d]=!1,l),{})});const i=new ye(s,a,n);o(w.updateField,{key:"folders",value:{[s]:i}}),o(w.updateField,{key:"roomIdsInFolders",value:n.reduce((l,d)=>(l[d]=!0,l),{})}),o(w.setState,{sortedFolderIds:[...new Set([...e.sortedFolderIds,s])],selectedRoomIdsForCreateFolder:{}}),t(x.aggregateRoomsAndFolders)},async[x.removeFolder]({state:e,dispatch:t},o){await t(x.deletePref,o),await t(x.updatePref,{key:"folders-meta",value:e.sortedFolderIds.map(s=>e.folders[s]).filter(s=>!!s&&s.id!==o).map(s=>({key:s.id,name:s.name}))}),t(x.handlePrefDeleteFromSocket)},async[x.handlePrefChangeFromSocket]({state:e,commit:t,dispatch:o},s){const{key:a,data:n}=s;if(a==="folders-meta"){const i={},l=[];for(const{key:d,name:g}of n){const A=e.folders[d]||new ye(d,g,[]);i[d]=A,l.push(d)}t(w.setState,{folders:i,sortedFolderIds:l})}else{const{id:i,name:l}=e.folders[a];if(i){const d=n.children.map(A=>A.id),g=new ye(i,l,d);t(w.updateField,{key:"folders",value:{[a]:g}}),t(w.updateField,{key:"roomIdsInFolders",value:d.reduce((A,p)=>(A[p]=!0,A),{})})}}o(x.aggregateRoomsAndFolders)},async[x.handlePrefDeleteFromSocket]({state:e,commit:t,dispatch:o},s){const a=e.folders[s];if(!a)return;const n={};for(const i of a.roomIds)n[i]=!1;t(w.deleteField,{key:"folders",value:s}),t(w.updateField,{key:"roomIdsInFolders",value:n}),t(w.setState,{sortedFolderIds:e.sortedFolderIds.filter(i=>i!==s)}),o(x.aggregateRoomsAndFolders)},async[x.aggregateRoomsAndFolders]({state:e,commit:t}){const o=Object.values(e.rooms).filter(s=>!e.roomIdsInFolders[s.id]).sort((s,a)=>{var n,i,l;return((n=s.pref)==null?void 0:n.sticky)===((i=a.pref)==null?void 0:i.sticky)?a.updatedAt-s.updatedAt:(l=s.pref)!=null&&l.sticky?-1:1});t(w.setState,{sortedRooms:o})},async[x.removeMembers]({state:e,commit:t},{roomId:o,uids:s}){var n;if(e.rooms[o]&&(await e.axios.post(`/rooms/${o}/delete/members`,{systemMessage:!0,members:s}),s.includes(e.uid))){t(w.deleteRoom,o);const i=(n=e.sortedRooms.find(l=>l.numberOfUnread===0))==null?void 0:n.id;i&&t(w.setState,{selectedRoomId:i})}},async[x.handleTypingFromSocket]({state:e,commit:t},o){const{room:s,sender:a}=o;if(s!==e.selectedRoomId||a===e.uid)return;const n=e.isTyping[a];n!==void 0&&clearTimeout(n);const i=setTimeout(()=>{t(w.deleteField,{key:"isTyping",value:a})},6e3);t(w.updateField,{key:"isTyping",value:{[a]:i}})},async[x.insertUnreadMessage]({state:e,commit:t}){const o=e.rooms[e.selectedRoomId];if(!o)return;const s=o.lastReadMessageId[e.uid];if(!s)return;const a=e.messages[s];if(!a)return;const n=W.fromPayload({messageType:E.Announcement,message:"以下為尚未閱讀的訊息",createdAtMS:a.createdAt+1},e.uid);n&&t(w.insertUnreadMessage,{lastReadMessageId:s,message:n})},async[x.translate]({state:e},t){if(e.translationCache.has(t))return e.translationCache.get(t)||t;let o=navigator.language.split("-")[0];const s={am:"am",ar:"ar",eu:"eu",bn:"bn","en-gb":"en-GB","pt-br":"pt-BR",bg:"bg",ca:"ca",chr:"chr",hr:"hr",cs:"cs",da:"da",nl:"nl",en:"en",et:"et",fil:"fil",fi:"fi",fr:"fr",de:"de",el:"el",gu:"gu",iw:"iw",hi:"hi",hu:"hu",is:"is",id:"id",it:"it",ja:"ja",kn:"kn",ko:"ko",lv:"lv",lt:"lt",ms:"ms",ml:"ml",mr:"mr",no:"no",pl:"pl","pt-pt":"pt-PT",ro:"ro",ru:"ru",sr:"sr","zh-cn":"zh-CN",sk:"sk",sl:"sl",es:"es",sw:"sw",sv:"sv",ta:"ta",te:"te",th:"th","zh-tw":"zh-TW",tr:"tr",ur:"ur",uk:"uk",vi:"vi",cy:"cy"};s[navigator.language.toLowerCase()]&&(o=s[navigator.language.toLowerCase()]);const a=await fetch("https://translation.googleapis.com/language/translate/v2",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:new URLSearchParams({q:t,key:e.config.translationApiKey,target:o}),redirect:"follow"}).then(n=>n.json()).then(n=>{var i;return(i=n.data)==null?void 0:i.translations[0].translatedText});return e.translationCache.set(t,a),a},async[x.searchRooms]({state:e,commit:t},o){if(e.isRequesting[ie.SearchRooms])return;const s=Object.values(oe),{data:{result:a}}=await e.axios.post(ie.SearchRooms,{type:s,keyword:o}),n={},i={},l={};for(const A of s)a[A].forEach(p=>{n[p._id]=new Ie(p),l[A]||(l[A]=[]),l[A].push(n[p._id]);for(const k of p.members)i[k.id]||(i[k.id]=new Ae(k))});for(const A of Object.values(e.folders))A.name.includes(o)&&(l[oe.RoomPrefFolder]||(l[oe.RoomPrefFolder]=[]),l[oe.RoomPrefFolder].push(A));const d=Object.keys(l),g=d.length>0?d[0]:oe.RoomName;t(w.updateField,{key:"rooms",value:n}),t(w.updateField,{key:"users",value:i}),t(w.setState,{searchRooms:l,searchType:g,searchKeyword:o})},async[x.subscribe]({state:e}){if(!e.config.firebaseConfig||!e.config.firebaseVapidKey||await Notification.requestPermission()!=="granted")return;const o=es(e.config.firebaseConfig),s=ts(o),a=await ss(s,{vapidKey:e.config.firebaseVapidKey});if(!a)return;let n=localStorage.getItem("imkit-deviceId");n||(n=Oe(),localStorage.setItem("imkit-deviceId",n)),await e.axios.post(ie.Subscribe,{type:"fcm",token:a,deviceId:n})},async[x.unsubscribe]({state:e}){let t=localStorage.getItem("imkit-deviceId");t||(t=Oe(),localStorage.setItem("imkit-deviceId",t)),await e.axios.post(ie.Unsubscribe,{type:"fcm",deviceId:t})},async[x.removeRoomFromFolder]({state:e,commit:t,dispatch:o},s){if(!e.roomIdsInFolders[s])return;const a=e.folders[e.selectedFolderId];if(!a)return;const n=a.id,i=a.roomIds.filter(d=>d!==s);await o(x.updatePref,{key:n,value:{children:i.map(d=>({id:d,type:"room"}))}});const l=new ye(n,a.name,i);t(w.updateField,{key:"folders",value:{[n]:l}}),t(w.updateField,{key:"roomIdsInFolders",value:{[s]:!1}}),o(x.aggregateRoomsAndFolders)},async[x.addRoomToFolder]({state:e,commit:t,dispatch:o},{roomId:s,folderId:a}){const n=e.folders[a];if(!n)return;const i=Array.from(new Set([...n.roomIds,s]));await o(x.updatePref,{key:a,value:{children:i.map(d=>({id:d,type:"room"}))}});const l=new ye(a,n.name,i);t(w.updateField,{key:"folders",value:{[a]:l}}),t(w.updateField,{key:"roomIdsInFolders",value:{[s]:!0}}),o(x.aggregateRoomsAndFolders)}},zi={doubleCount:e=>e.count*2},Ji={[w.increment](e){e.count++},[w.setState](e,t){Object.assign(e,t)},[w.updateField](e,t){const{key:o,value:s}=t;Object.assign(e[o],s)},[w.deleteField](e,t){const{key:o,value:s}=t;delete e[o][s]},[w.updateRoom](e,t){const{id:o}=t,s=e.rooms[o];s&&Object.assign(s,t)},[w.updateLastRead](e,t){const{roomId:o,uid:s,messageId:a}=t,n=e.rooms[o];n&&(n.lastReadMessageId[s]=a)},[w.concatMessages](e,t){const{messages:o,messageIds:s}=t;Object.assign(e.messages,o),e.sortedMessages=e.sortedMessages.concat(s.map(a=>e.messages[a])).sort((a,n)=>a.createdAt-n.createdAt)},[w.pushMessage](e,t){if(t.roomId!==e.selectedRoomId||e.messages[t.id])return;const o=e.sortedMessages,s=o.length>0?o[o.length-1].groupId:null;t.groupId===s?(e.messageGroupTail[o[o.length-1].id]=!1,e.messageGroupTail[t.id]=!0):(e.messageGroupHead[t.id]=!0,e.messageGroupTail[t.id]=!0),e.messages[t.id]=t;for(let a=e.sortedMessages.length-1;a>=0;a--)if(t.createdAt>=e.sortedMessages[a].createdAt){e.sortedMessages.push(t);break}},[w.replaceMessage](e,t){const{targetMessageId:o,message:s}=t;if(s.roomId===e.selectedRoomId){for(let a=e.sortedMessages.length-1;a>=0;a--)if(e.sortedMessages[a].id===o){e.sortedMessages.splice(a,1);break}if(delete e.messages[o],!e.messages[s.id]){e.messages[s.id]=s;let a=0;for(let l=e.sortedMessages.length-1;l>=0;l--)if(s.createdAt>=e.sortedMessages[l].createdAt){a=l+1;break}e.sortedMessages.splice(a,0,s),a-1>=0&&e.sortedMessages[a-1].groupId===s.groupId?e.messageGroupTail[e.sortedMessages[a-1].id]=!1:e.messageGroupHead[s.id]=!0,a+1<e.sortedMessages.length&&e.sortedMessages[a+1].groupId===s.groupId?e.messageGroupHead[e.sortedMessages[a+1].id]=!1:e.messageGroupTail[s.id]=!0}}},[w.clearChatRoom](e){e.messages={},e.sortedMessages=[],e.numberOfTotalMessages=-1,e.messageGroupHead={},e.messageGroupTail={},e.replyId="",e.navigationTargetId="",e.isRoomInfoVisible=!1,e.isTyping={}},[w.deleteRoom](e,t){delete e.rooms[t],delete e.roomIdsInFolders[t],delete e.selectedRoomIdsForCreateFolder[t],e.sortedRooms=e.sortedRooms.filter(o=>o.id!==t)},[w.recallMessage](e,t){const o=e.sortedMessages;for(let s=e.sortedMessages.length-1;s>=0;s--)if(o[s].id===t.id){o.splice(s,1,t);break}e.messages[t.id]=t},[w.insertUnreadMessage](e,t){const{lastReadMessageId:o,message:s}=t,a=e.sortedMessages;for(let n=e.sortedMessages.length-1;n>=0;n--)if(a[n].id===o){a.splice(n+1,0,s);break}}},wt={state:ji,mutations:Ji,getters:zi,actions:Wi,namespaced:!0};function Me(e,t,o){const{url:s}=t,a=s==null?void 0:s.split("?")[0];if(!a)return;const n={};n[a]=e==0?new Date:null,o.commit("imkit/updateField",{key:"isRequesting",value:n})}const Hi=async e=>{};function Zi(e,t){const{domain:o}=e,s=Se.create({baseURL:o});return s.interceptors.request.use(a=>{Me(0,a,t);const n=new $e({"IM-Authorization":t.state.imkit.config.token,"IM-Client-Key":t.state.imkit.config.clientKey});return a.headers=n,a},a=>{const{config:n}=a;return Me(1,n,t),Promise.reject(a)}),s.interceptors.response.use(a=>{const{config:n}=a;return Me(1,n,t),a},async a=>{const{config:n}=a;if(Me(1,n,t),a.response.status===401){await Hi();const i=new $e({"IM-Authorization":t.state.imkit.config.token,"IM-Client-Key":t.state.imkit.config.clientKey});return n.headers=i,Se.request(n)}return Promise.reject(a)}),s}function qi(e,t){const{domain:o,clientKey:s,token:a}=e,n=dt(o,{forceBase64:!0});return n.on("connect",()=>{n.emit("auth2",a,{CLIENT_KEY:s,Authorization:a},i=>{console.log(i)})}),n.on("disconnect",i=>{console.log(i)}),n.on("chat message",i=>{t.dispatch("imkit/handleMessageFromSocket",W.fromRaw(i))}),n.on("room",i=>{const l=new Ie(i);if(!l.id)return;const d={};for(const g of i.members)d[g.id]||(d[g.id]=new Ae(g));t.dispatch("imkit/handleRoomFromSocket",l),t.commit("imkit/updateField",{key:"users",value:d})}),n.on("lastRead",i=>{const{roomID:l,memberID:d,messageID:g}=i;t.dispatch("imkit/handleLastReadFromSocket",{roomId:l,uid:d,messageId:g})}),n.on("roomPref",i=>{const{room:l,...d}=i;l&&(t.commit("imkit/updateRoom",{id:l,pref:d}),d.sticky!==void 0&&t.dispatch("imkit/aggregateRoomsAndFolders"))}),n.on("myPrefChange",i=>{t.dispatch("imkit/handlePrefChangeFromSocket",i)}),n.on("myPrefDelete",i=>{t.dispatch("imkit/handlePrefDeleteFromSocket",i)}),n.on("typing",i=>{t.dispatch("imkit/handleTypingFromSocket",i)}),n}const $i="Close",el="Confirm",tl="Folder Name",sl="Create Folder",ol="Tag",al="Input Tag",nl="Input Tag Color #02B13F",rl="Download",il="{0} unsent a message",ll="Read",cl="Pin",dl="Unpin",ul="Empty Chat",ml="Members",gl="Created At",Al="Updated At",pl="Leave Group",hl="Text",fl="Image",vl="Video",kl="Sticker",yl="Message",xl="{0} sent",wl="{0} sent a {1}",bl="Tap here to open the link.",Cl="Type a message...",Il="{0} is typing...",Rl="{0} joined the chat",El="{0} left the chat",Sl="{0} invited {1}",Fl="{0} kicked {1}",Bl="You unsent a message",Ul="File size",Ml="File",Tl="Translation",Ol="Search",Ll="Location",Ql="Send Current Location",Vl="No access location permission.",Kl="The request to get location timed out.",Dl="The address is unavailable.",Nl="audio message",Pl="No access microphone permission.",Gl="Remove from folder",_l="Edit Folder",Yl="Add to Folder",Xl="{n} Chatrooms",jl="Room Name",Wl="Member",zl="Tag",Jl="Folder",Hl="Attribute",Zl={close:$i,confirm:el,folderName:tl,createFolder:sl,tag:ol,inputTag:al,inputTagPlaceholder:nl,download:rl,someoneUnsentMessage:il,read:ll,pin:cl,unpin:dl,emptyChat:ul,members:ml,createdAt:gl,updatedAt:Al,leaveGroup:pl,text:hl,image:fl,video:vl,sticker:kl,message:yl,youSent:xl,someoneSent:wl,tapOpen:bl,TypeMessage:Cl,isTyping:Il,someoneJoinedTheChat:Rl,someoneLeftTheChat:El,someoneInvited:Sl,someoneKicked:Fl,youUnsentMessage:Bl,fileSize:Ul,file:Ml,translation:Tl,search:Ol,location:Ll,sendCurrentLocation:Ql,noAccessLocationPermission:Vl,"locationInfoUnavailable.":"Location information is unavailable.",requestLocationTimeout:Kl,addressUnavailable:Dl,audio:Nl,noAccessMicrophonePermission:Pl,removeFromFolder:Gl,editFolder:_l,addToFolder:Yl,numberOfChatroom:Xl,roomName:jl,roomMember:Wl,roomPrefTags:zl,roomPrefFolder:Jl,roomTags:Hl},ql="關閉",$l="確認",ec="資料夾名稱",tc="建立資料夾",sc="標籤",oc="輸入標籤名稱",ac="請輸入自訂色彩例如 #02B13F",nc="下載",rc="{0} 已收回訊息",ic="已讀",lc="置頂",cc="取消置頂",dc="沒有成員",uc="成員",mc="創建時間",gc="更新時間",Ac="退出群組",pc="文字",hc="圖片",fc="影片",vc="貼圖",kc="訊息",yc="{0}已傳送",xc="{0}向您傳送了{1}",wc="點選此處以開啟此連結。",bc="輸入訊息...",Cc="{0} 正在輸入...",Ic="{0}加入聊天",Rc="{0}離開聊天",Ec="{0}邀請{1}加入",Sc="{0}將{1}踢出",Fc="您已收回訊息",Bc="檔案大小",Uc="檔案",Mc="翻譯",Tc="搜尋",Oc="位置",Lc="傳送目前位置",Qc="無存取位置權限",Vc="請求位置逾時",Kc="無法取得地址",Dc="語音訊息",Nc="無存取麥克風權限",Pc="從資料夾中移除",Gc="編輯資料夾",_c="新增至資料夾",Yc="{n} 個聊天室",Xc="聊天室名稱",jc="成員",Wc="標籤",zc="資料夾",Jc="屬性",Hc={close:ql,confirm:$l,folderName:ec,createFolder:tc,tag:sc,inputTag:oc,inputTagPlaceholder:ac,download:nc,someoneUnsentMessage:rc,read:ic,pin:lc,unpin:cc,emptyChat:dc,members:uc,createdAt:mc,updatedAt:gc,leaveGroup:Ac,text:pc,image:hc,video:fc,sticker:vc,message:kc,youSent:yc,someoneSent:xc,tapOpen:wc,TypeMessage:bc,isTyping:Cc,someoneJoinedTheChat:Ic,someoneLeftTheChat:Rc,someoneInvited:Ec,someoneKicked:Sc,youUnsentMessage:Fc,fileSize:Bc,file:Uc,translation:Mc,search:Tc,location:Oc,sendCurrentLocation:Lc,noAccessLocationPermission:Qc,"locationInfoUnavailable.":"無法取得位置資訊",requestLocationTimeout:Vc,addressUnavailable:Kc,audio:Dc,noAccessMicrophonePermission:Nc,removeFromFolder:Pc,editFolder:Gc,addToFolder:_c,numberOfChatroom:Yc,roomName:Xc,roomMember:jc,roomPrefTags:Wc,roomPrefFolder:zc,roomTags:Jc},at={"en-US":Zl,"zh-TW":Hc},Zc=os({legacy:!1,locale:navigator.language in at?navigator.language:"en-US",messages:at}),qc=e=>{try{return JSON.parse(atob(e.split(".")[1]))}catch{return{id:""}}},$c={install:async(e,t)=>{const{store:o,config:s}=t;o.hasModule("imkit")||o.registerModule("imkit",wt);const{id:a,_id:n}=qc(s.token),i=a||n,l=Zi(s,o),d=qi(s,o);o.commit("imkit/setState",{config:s,uid:i,axios:l,socket:d}),e.use(as),e.use(ns),e.use(Zc),e.directive("src",async(g,A)=>{const{value:p,oldValue:k}=A;if(p.startsWith("data:")){g.src=p;return}const{imageCache:F}=o.state.imkit;if(k===void 0||p!==k){if(F.has(p)){g.src=F.get(p);return}try{g.classList.add("opacity-0");const b=await l.get(p,{responseType:"arraybuffer",onDownloadProgress:S=>{const{total:B}=S;B&&o.commit("imkit/updateField",{key:"downloadProgresses",value:{[p]:S.loaded/B}})}}),C=btoa(new Uint8Array(b.data).reduce((S,B)=>S+String.fromCharCode(B),"")),N=`data:${b.headers["content-type"]};base64,${C}`;F.set(p,N),g.src=N}catch{g.src=p}g.classList.remove("opacity-0")}})}},ed=[],De=rs({plugins:ed,modules:{imkit:wt}}),Je=is(Xi);Je.use(De);const Te={domain:"https://imkit-dev.funtek.io",clientKey:"fangho_imkit_0412_2018_001_clientkey",token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImhvMSIsIm5pY2tuYW1lIjoi6bOz5qKoIiwiYXZhdGFyVXJsIjpudWxsLCJleHAiOjE2ODU2NDA0NjgsImlhdCI6MTY1NDEwNDQ2OH0.oeVAZCDgUNEL0lIMf6nVUOieChZdeKv7l8m465_4j4o",translationApiKey:"AIzaSyB3t1p6ig_D4S6oV-WzIsLxXtT35O-3OhE",mapApiKey:"AIzaSyC1XhSZ_MVbnZAtYNV-0PwRn7rILnOcZV4",firebaseConfig:{apiKey:"AIzaSyDH6fgpRFaH7vIqAcGQi48wgvNf8BJ9q1I",authDomain:"fir-chat-server.firebaseapp.com",databaseURL:"https://fir-chat-server.firebaseio.com",projectId:"fir-chat-server",storageBucket:"fir-chat-server.appspot.com",messagingSenderId:"970263218499",appId:"1:970263218499:web:cf2db5b6ba042a9a4247f6"},firebaseVapidKey:"BEcbM6I41PAJDlJbS0pAYhbjugsD4BY4E-apKrSqBcmy7WODyFGxv90PrPhoXGf1DVHIdldBUR1Onmva5grnq-g"},Ye=new URLSearchParams(window.location.search);if(Ye.has("token")){Te.token=Ye.get("token")||"",localStorage.setItem("imkit-token",Te.token);const e=new URL(window.location.href);e.searchParams.delete("token"),window.history.replaceState(null,"",e.toString())}else localStorage.getItem("imkit-token")&&(Te.token=localStorage.getItem("imkit-token")||"");Je.use($c,{store:De,config:Te});Je.mount("#app");De.dispatch("imkit/subscribe");const nt=Ye.get("roomId");nt&&De.commit("imkit/setState",{selectedRoomId:nt});
