var is=Object.defineProperty;var ls=(o,e,t)=>e in o?is(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var $=(o,e,t)=>ls(o,typeof e!="symbol"?e+"":e,t);import{d as B,r as cs,o as c,c as u,a as U,u as k,W as ds,F as j,b as us,_ as ht,l as Ct,e as De,v as Ke,i as ms,g as gs,f as hs,p as ps,h as fs,j as vs,k as te,m as As,n as bs,A as ks,q as ys,t as ws,s as W,w as Me,x as l,K as pe,y as M,z as P,B as le,C as b,R as be,D as Ae,E as de,G as he,H as ce,I as ne,J as $e,L as re,M as ee,N as y,O as Ne,P as f,Q as lt,S as Cs,T as xs,U as N,V as Oe,X as qe,Y as Ge,Z as ct,$ as xt,a0 as Pe,a1 as Le,a2 as Xe,a3 as $t,a4 as $s,a5 as We,a6 as Ts,a7 as Tt,a8 as It,a9 as Is,aa as Ms,ab as Ss,ac as nt,ad as Fs,ae as Rs,af as Us,ag as Es,ah as et,ai as Bs,aj as at,ak as Ls,al as _s,am as Os,an as zs,ao as pt,ap as Ds,aq as Ps,ar as Ns,as as Vs,at as js,au as Ks,av as Hs}from"./vendor-C7bpy2Kk.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();const Qs=B({__name:"App",setup(o){return(e,t)=>{const s=cs("router-view");return c(),u(j,null,[U(s),U(k(ds))],64)}}}),Je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAExElEQVR4nO2bS4hcRRSGa4yOGkUMKKKiID6yUbIRH7iI7hSiQWV0IwYXtn2rbj9OtaMBF/+5PTPEGNQZIQufCxUkAQVFRIwustfBx8ZkY1ATVCRO8DE+xiinOyNOcuvenqT71u2Z+uBup/7+63XqnDNKBQKBQCAQCAQCPqjVpi6MbTKmCc9py3uM5a8M4bCxOGos/6otftCEWW35DU08bpq4fmxs9xq1kgEwGhMeEEM08d/G8j/L+3BIE+8wFteolQSA041lYwhfL9+UE79j5u6qNtrr1bCjW8mNhvizfhiTYtQfhniqVps5Uw0hI8Zyo/MjBmDOEqMsf6IJV6lhYWxs9xpD/PKgjVnyEQ7HzeQWVXYqlefP0MRv97hFvjGWd8aW7zfUvi7aum2drLxKBWvNOC6JKLlNbjBN+MBYLOT/PfwSUbJRlZgRQ3g1f7Z5b9xK7gBwWq9/uNKcvFjOG0OYy1lJczG1N6gyEls8ln1W4LuohXtOZYx6feoiiY1yTDpwbDWW7Lay+DNj+c9GduKyfo1nLGzWttMWb6kyxTna4tOMGX231dpxTr/H1YTbDfG8e9zkblUGIoLOWjmDMGcRicyztppE78onAEZdEbKcOfU6Lh+0Bk28PeOmfFj5JM6cweTe4kIL7E/XgS/ldlW+0N2XeOpVXqQOyQw4J6qR3Kx8pSy041UucU7BckbkyZG+1flZ5QPdxH2OZf2tj9yNthw5zsLPi9bSQZJdjmW9U3mgE213E27HT9hRL4Gjdpw/8rYqXMyiJuJ9pTmHjKRJU8RUW7hWeUIi6DRNEeFBD2L4pzQxjQbOV54wlmcc275RuBhN/FeaGHl6FC7mP02YdBj0RPFiLH5LE0P09NnKE8biKUdc9njxYoi/TxPzCE1eqjyhLV5yxEJR8WIIs6mz1cKtyhMSwTtis02Fi9GOxJUkzgoX03mTYa1r29fH21cXLkhLxTN9Oe/xknZpJnem6iE+6EOPknKwYzkvSFRbuB5XJYXwuvJW3rE45Lg1porUIulcZ3aR+CHlC92plafO2pwk2IvSYSxecGz3I7UazlO+qDba610pDznEi9AQE25wFgwIzyjfGMu7HNGrnEd2kGNXLC5wN0VgIW5NXKF8U+2uIkcNHgtSfRjEuNK0YAgfuieHZ1RZMFL1dAklnpfc9QCymR+5x8QBrXGuKgu17mx+nDGbEo9slwR7f1pqsnuNdDPZrMpG7dGJK7XFj9kmYb8k2E+m0iAlJE38oiuLcNw475Wyb6hKuEm6LHrq6bEc5QWUnU4Pi7skCNQWv+f93aEwKaJkY24XxtKtt88Qv6kJ09riSfk6UTHxXtfbauhNiqm9QQ7KU/lx/fpKa1K0dds6V464b5/cVs1ks5gwlCYJ0mXR/9XUaX2ZWbzK5ccPtUkARqWRwFmW6XW7WD4iz4e0CHnoTVpEalRSDjbEX6QX+k44xA9qy6/Jqzzv4bliTPr/OSWGmSZvkdKMJNfl65aRselk2ntXnEkD61uyeCfHpPe3AGep1QqCSfkEk3ogmNQD4eDun0nTajVTyzfpZ69Nn6U3iXh+Of9DsupM0hav+NZWNpOmZVvJyhFzSpXHLhFy5qzucycQCAQCgUBA9ca/01SgfkYyM0gAAAAASUVORK5CYII=",Ye="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFSElEQVR4nO1azW9bRRBfia8jggKlfPSAACFF4f8AKkQ/0lYFxAFw6lnHeMYNCRdmbJqkEtAol6KKK4iqd+DAAYFEKyq+BEJUcKINLVAqoCQF0jageXYav33P4a3f87Mj/JNWSuzd2R3v7MxvdtaYAQYYYIAB/qew43wHVOVJIJkFlPct8Ukg+dWS/KMNSH4HlG+A5D2LfLBEsqtQ2b/JrCdYO73BEpNF/sQSL68ol7QByhWL8pElea4wceBG068Yxf13WuRDFuVPXyXXaH9YkrlyeWqj6Rcw8/UWWYD4YoaKhhvyBSCeLBQOX9dTZS3Wh4H4y/aL5ctAfMyiTBWrvA0q9aHi5MxNunBt+nfwWZW3aR8gOR6YdHvFT1ji+3uibIlkFyAvtFnYKYsyoWbuK3fseb5LdxNQTrc3c95i8gQgl+McEhD/bKtcUDPP5KhUeK9FORdnOfqdyQMWuRLrXUneROSbM5/PTm8AkrdilF4uoTxtugmo8o7oGeMlS/xM961KRhtzhXe6RPxYNx3UReeXXixVaw+ZnADID+ucjr/4rTxevy/TicbG5m6IemNeylPZFRSrtUfcnQbkz5j52swmAZJazBnquhm3Q+DMogytmonwcpk3R0wZ+Q3TYwDyETdcwT6+PQPB8roberrhjX1RIL4FiH9xdvnlVEL3Vvm2CDeucsH0CYrI4JzlBWVvHQu0KBMug8qCVGTqTB1GBiTFjgVaks/DCstE4rFY2wrEP1rieYu17Qn6b7fEZ7SpJ046j9JQR+HjphMUK3yPG+R9uLFF+SlEBZH3tO/Le4I+q2fxh8TrpJfuDpMhXh4bm7o16firsBV5ynFWx4wHwgpfVXp3tB/vblW22XfeZy4g+bh1fIlqIz7jAwDKYcecp4wHdFJXEUC5pFlWOOOSS9Ef5r+PQCssyozjaw76jA9gUT4IC6ltNZ6ACu+MUwhIHm/y8sh3JeQnvOep8g4nJr/tK8MAyfeh3anUh7yFNE3WVUz/j/sszuSTzVEfdsLTtx0IkVD8TUM24k23val3QkKc43fOW4h1Evy08bdhdm56t2riaeOx42D/8hIwMnL0GndhqRWOPc9N867wzp4qrHDvq9KZdG1kLZPu1Flla9LIp9ar07Ik33kLAeIPexGWtDSTNiwB8jud7Mwh51xM+40PuHEuxAOID4TXKrM+4wPojWAaUm5Rzqaglmf85tIL+tbj14ETLJd5s7M7V/SSPPEigsyns+TBR+HgRsZJHjSPTzo+BIvylWPWkyYhtDqwku75poc+lQWL8kIaSwwBUMadXT7dbxcAQb7dska9BelYYLk8tRFQ/g6dr7xKHAkAyCXHOy9opSKdUJLXHJM5r4He9EPhPVJ34ldSCy6r83ISCa31mB4DiI+GeQJfyOSaVmGRX4zhwKOmR7AktmsX8S23g1875rOktR6TM9SDR2gpyaeZvw6ASn0opgC+mKfSjVAXLqY1XgLxvV2ZsNSggtFyaQ6eW804loYSP5prKLCrIeFIN7y3XrlGHFSTUQHKsyavJw8Q8/hEaz0a+PXMZ+M3uKRhMEbZy7kpu4JGetfmUQvxvNJQvSQ3ntAxDboYZlCtZ7brZtwOJeIHgPiLeKUbCUdwSY4yE+SsWB/WmxOlp9r07+I+fjD48TTFQz6x1rMl9cZdc1BJoeFAnwlq4G+30Azaoj5+6yceb4KnhyRzkTcYKZoeGUB5NTMG1bVCtTo1p96TvPGypngahvqh8O6dbQWxm2TWkrzbfD58XjOwoAUemE/qd9pH+3acvA8wwAADDGDWP/4FAPVu0JK6ZhcAAAAASUVORK5CYII=",qs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsBAMAAAB9SEr+AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAbUExURUdwTP///////////////////////////////xb9HQ4AAAAIdFJOUwCAvz5nE+qvkBVomAAAAT1JREFUWMPtl70LwjAQxatWXP0aHHUQOlZxcFRcHIuIriIOHV0ER6ui+bMl2ErvcmlCEKQxb+tLf5RqLu/V85yc7NKkBRS+3docuB1MrRjUM+JuPUD2CWFntM763G1g9wqpGl5nN25PBTsEWEVYv3O7J9gzBZbQWLOk2CD7V4M8ds3ctgT7WL08ltD3OMxhDvsFZjjdlh54Po0tFZhh4ng4/9iRu1XsPlEsbnH+vdMUp+UQp/AIhHQ3y26Y6AvXcayuaqnW3Yim6KqWzUfMDjRGV7VUU3HrFw5Objz6FCapaqn49U4PSxB2KTcmHuZamBgdVmPjGJ6eoRbmF205ObbB2CPSwZY6Xx105Ctj8WtPM3w3w1/SG0NqH/7ZVjacbksPPL8Qi2WYYeJIqpoq3yRVTZmmkqqmym4np5LrBeYgWB5+6q94AAAAAElFTkSuQmCC";class ke{constructor(e){$(this,"id");$(this,"nickname");$(this,"avatarUrl");$(this,"country");$(this,"city");$(this,"clientType");$(this,"memberIds");const{_id:t,nickname:s,avatarUrl:n,country:a,city:r,clientType:i,members:d}=e;this.id=t,this.nickname=s??t,this.avatarUrl=n,this.country=a??null,this.city=r??null,this.clientType=i??null,this.memberIds={},d==null||d.forEach(m=>{this.memberIds[m._id]=!0})}}const Gs="Schließen",Xs="Bestätigen",Ws="Ordnername",Js="Ordner erstellen",Ys="Tag",Zs="Tag-Namen eingeben",eo="Bitte benutzerdefinierte Farbe eingeben, z. B. #02B13F",to="Herunterladen",so="{0} hat die Nachricht zurückgezogen",oo="Gelesen",no="Anheften",ao="Lösen",ro="Keine Mitglieder",io="Mitglieder",lo="Erstellt am",co="Aktualisiert am",uo="Gruppe verlassen",mo="Text",go="Bild",ho="Video",po="Sticker",fo="Nachricht",vo="{0} gesendet",Ao="{0} hat Ihnen {1} gesendet",bo="Hier tippen, um den Link zu öffnen.",ko="Nachricht eingeben...",yo="{0} tippt...",wo="{0} ist dem Chat beigetreten",Co="{0} hat den Chat verlassen",xo="{0} hat {1} eingeladen",$o="{0} hat {1} entfernt",To="Sie haben die Nachricht zurückgezogen",Io="Dateigröße",Mo="Datei",So="Übersetzung",Fo="Suche",Ro="Standort",Uo="Aktuellen Standort senden",Eo="Kein Zugriff auf Standortberechtigung",Bo="Standortinformationen nicht verfügbar",Lo="Standortanfrage abgelaufen",_o="Adresse nicht verfügbar",Oo="Sprachnachricht",zo="Kein Zugriff auf Mikrofonberechtigung",Do="Aus Ordner entfernen",Po="Ordner bearbeiten",No="Zum Ordner hinzufügen",Vo="{n} Chaträume",jo="Chatraum-Name",Ko="Mitglieder",Ho="Tags",Qo="Ordner",qo="Eigenschaften",Go="Massenversand",Xo="Bitte Nachricht eingeben",Wo="In Unterhaltung suchen",Jo="Gestern",Yo="Heute",Zo="Ordner löschen?",en="Ausblenden",tn="Einblenden",sn="Abbrechen",on="Erstellen",nn="Speichern",an="Tag-Namen eingeben",rn="Tag wirklich löschen?",ln="Tag bearbeiten",cn="Farbe wählen",dn="Blockieren",un="Entblocken",mn="Dieser Benutzer wurde blockiert.",gn="Benachrichtigungen stummschalten",hn="Benachrichtigungen aktivieren",pn="Chatraum wirklich löschen?",fn="Nach dem Löschen können Sie die bisherigen Nachrichten dieses Chatraums nicht mehr sehen. Auf der Gegenseite bleibt der Chatraum erhalten, und die andere Person kann Ihnen weiterhin neue Nachrichten senden.",vn="Ungelesene Nachrichten unten",An={close:Gs,confirm:Xs,folderName:Ws,createFolder:Js,tag:Ys,inputTag:Zs,inputTagPlaceholder:eo,download:to,someoneUnsentMessage:so,read:oo,pin:no,unpin:ao,emptyChat:ro,members:io,createdAt:lo,updatedAt:co,leaveGroup:uo,text:mo,image:go,video:ho,sticker:po,message:fo,youSent:vo,someoneSent:Ao,tapOpen:bo,TypeMessage:ko,isTyping:yo,someoneJoinedTheChat:wo,someoneLeftTheChat:Co,someoneInvited:xo,someoneKicked:$o,youUnsentMessage:To,fileSize:Io,file:Mo,translation:So,search:Fo,location:Ro,sendCurrentLocation:Uo,noAccessLocationPermission:Eo,locationInfoUnavailable:Bo,requestLocationTimeout:Lo,addressUnavailable:_o,audio:Oo,noAccessMicrophonePermission:zo,removeFromFolder:Do,editFolder:Po,addToFolder:No,numberOfChatroom:Vo,roomName:jo,roomMember:Ko,roomPrefTags:Ho,roomPrefFolder:Qo,roomTags:qo,massTexting:Go,inputMessage:Xo,searchInConversation:Wo,yesterday:Jo,today:Yo,confirmToDeleteFolder:Zo,hide:en,unhide:tn,delete:"Löschen",cancel:sn,create:on,save:nn,createTag:an,confirmDeleteTag:rn,editTag:ln,chooseColor:cn,block:dn,unblock:un,textareaBlockedHint:mn,mute:gn,unmute:hn,chatroomDeleteConfirmationTitle:pn,chatroomDeleteConfirmationMessage:fn,unreadMessages:vn},bn="Close",kn="Confirm",yn="Folder Name",wn="Create Folder",Cn="Tag",xn="Input Tag",$n="Input Tag Color #02B13F",Tn="Download",In="{0} unsent a message",Mn="Read",Sn="Pin",Fn="Unpin",Rn="Empty Chat",Un="Members",En="Created At",Bn="Updated At",Ln="Leave Group",_n="Text",On="Image",zn="Video",Dn="Sticker",Pn="Message",Nn="{0} sent",Vn="{0} sent a {1}",jn="Tap here to open the link.",Kn="Type a message...",Hn="{0} is typing...",Qn="{0} joined the chat",qn="{0} left the chat",Gn="{0} invited {1}",Xn="{0} kicked {1}",Wn="You unsent a message",Jn="File size",Yn="File",Zn="Translation",ea="Search",ta="Location",sa="Send Current Location",oa="No access location permission.",na="The request to get location timed out.",aa="The address is unavailable.",ra="Audio Message",ia="No access microphone permission.",la="Remove from folder",ca="Edit Folder",da="Add to Folder",ua="{n} Chatrooms",ma="Room Name",ga="Member",ha="Tag",pa="Folder",fa="Attribute",va="Mass Texting",Aa="Input Message",ba="Search in Conversation",ka="Yesterday",ya="Today",wa="Confirm Delete Folder",Ca="Hide",xa="Unhide",$a="Cancel",Ta="Create",Ia="Save",Ma="Enter tag name",Sa="Confirm Delete Tag?",Fa="Edit Tag",Ra="Choose Color",Ua="Block",Ea="Unblock",Ba="This user has been blocked",La="Mute",_a="Unmute",Oa="Are you sure you want to delete this chatroom?",za="After deleting this chatroom, you will not be able to view the chat history in the chatroom. For the other user in the chatroom, their chat history will not be affected, and they can still send you new messages.",Da="Below are unread messages",Pa={close:bn,confirm:kn,folderName:yn,createFolder:wn,tag:Cn,inputTag:xn,inputTagPlaceholder:$n,download:Tn,someoneUnsentMessage:In,read:Mn,pin:Sn,unpin:Fn,emptyChat:Rn,members:Un,createdAt:En,updatedAt:Bn,leaveGroup:Ln,text:_n,image:On,video:zn,sticker:Dn,message:Pn,youSent:Nn,someoneSent:Vn,tapOpen:jn,TypeMessage:Kn,isTyping:Hn,someoneJoinedTheChat:Qn,someoneLeftTheChat:qn,someoneInvited:Gn,someoneKicked:Xn,youUnsentMessage:Wn,fileSize:Jn,file:Yn,translation:Zn,search:ea,location:ta,sendCurrentLocation:sa,noAccessLocationPermission:oa,"locationInfoUnavailable.":"Location information is unavailable.",requestLocationTimeout:na,addressUnavailable:aa,audio:ra,noAccessMicrophonePermission:ia,removeFromFolder:la,editFolder:ca,addToFolder:da,numberOfChatroom:ua,"no-chatroom":"No chatroom",roomName:ma,roomMember:ga,roomPrefTags:ha,roomPrefFolder:pa,roomTags:fa,massTexting:va,inputMessage:Aa,searchInConversation:ba,yesterday:ka,today:ya,confirmToDeleteFolder:wa,hide:Ca,unhide:xa,delete:"Delete",cancel:$a,create:Ta,save:Ia,createTag:Ma,confirmDeleteTag:Sa,editTag:Fa,chooseColor:Ra,block:Ua,unblock:Ea,textareaBlockedHint:Ba,mute:La,unmute:_a,chatroomDeleteConfirmationTitle:Oa,chatroomDeleteConfirmationMessage:za,unreadMessages:Da},Na="Cerrar",Va="Confirmar",ja="Nombre de la carpeta",Ka="Crear carpeta",Ha="Etiqueta",Qa="Ingresar nombre de etiqueta",qa="Por favor ingrese un color personalizado como #02B13F",Ga="Descargar",Xa="{0} ha retirado un mensaje",Wa="Leído",Ja="Fijar",Ya="Desfijar",Za="No hay miembros",er="Miembros",tr="Creado el",sr="Actualizado el",or="Salir del grupo",nr="Texto",ar="Imagen",rr="Video",ir="Sticker",lr="Mensaje",cr="{0} enviado",dr="{0} te ha enviado {1}",ur="Toca aquí para abrir este enlace.",mr="Escribe un mensaje...",gr="{0} está escribiendo...",hr="{0} se unió al chat",pr="{0} abandonó el chat",fr="{0} invitó a {1}",vr="{0} expulsó a {1}",Ar="Has retirado un mensaje",br="Tamaño del archivo",kr="Archivo",yr="Traducción",wr="Buscar",Cr="Ubicación",xr="Enviar ubicación actual",$r="Sin permiso de acceso a la ubicación",Tr="Tiempo de espera para solicitud de ubicación",Ir="Dirección no disponible",Mr="Mensaje de voz",Sr="Sin permiso de acceso al micrófono",Fr="Eliminar de la carpeta",Rr="Editar carpeta",Ur="Añadir a carpeta",Er="{n} salas de chat",Br="Nombre de la sala",Lr="Miembro",_r="Etiquetas",Or="Carpeta",zr="Atributos",Dr="Mensaje masivo",Pr="Por favor, ingresa el contenido del mensaje",Nr="Buscar en la conversación",Vr="Ayer",jr="Hoy",Kr="¿Eliminar carpeta?",Hr="Ocultar",Qr="Mostrar",qr="Cancelar",Gr="Crear",Xr="Guardar",Wr="Ingresar nombre de etiqueta",Jr="¿Confirmar eliminación de etiqueta?",Yr="Editar etiqueta",Zr="Elegir color",ei="Bloquear",ti="Desbloquear",si="Este usuario ha sido bloqueado.",oi="Silenciar notificaciones",ni="Activar notificaciones",ai="¿Confirmar eliminación de la sala de chat?",ri="Después de eliminar la sala de chat, no podrás ver el historial de chat anterior. La sala de chat desde la perspectiva de la otra persona no se verá afectada y aún podrán enviarte nuevos mensajes.",ii="Mensajes no leídos a continuación",li={close:Na,confirm:Va,folderName:ja,createFolder:Ka,tag:Ha,inputTag:Qa,inputTagPlaceholder:qa,download:Ga,someoneUnsentMessage:Xa,read:Wa,pin:Ja,unpin:Ya,emptyChat:Za,members:er,createdAt:tr,updatedAt:sr,leaveGroup:or,text:nr,image:ar,video:rr,sticker:ir,message:lr,youSent:cr,someoneSent:dr,tapOpen:ur,TypeMessage:mr,isTyping:gr,someoneJoinedTheChat:hr,someoneLeftTheChat:pr,someoneInvited:fr,someoneKicked:vr,youUnsentMessage:Ar,fileSize:br,file:kr,translation:yr,search:wr,location:Cr,sendCurrentLocation:xr,noAccessLocationPermission:$r,"locationInfoUnavailable.":"Información de ubicación no disponible",requestLocationTimeout:Tr,addressUnavailable:Ir,audio:Mr,noAccessMicrophonePermission:Sr,removeFromFolder:Fr,editFolder:Rr,addToFolder:Ur,numberOfChatroom:Er,roomName:Br,roomMember:Lr,roomPrefTags:_r,roomPrefFolder:Or,roomTags:zr,massTexting:Dr,inputMessage:Pr,searchInConversation:Nr,yesterday:Vr,today:jr,confirmToDeleteFolder:Kr,hide:Hr,unhide:Qr,delete:"Eliminar",cancel:qr,create:Gr,save:Xr,createTag:Wr,confirmDeleteTag:Jr,editTag:Yr,chooseColor:Zr,block:ei,unblock:ti,textareaBlockedHint:si,mute:oi,unmute:ni,chatroomDeleteConfirmationTitle:ai,chatroomDeleteConfirmationMessage:ri,unreadMessages:ii},ci="Fermer",di="Confirmer",ui="Nom du dossier",mi="Créer un dossier",gi="Étiquette",hi="Saisir le nom de l'étiquette",pi="Veuillez saisir une couleur personnalisée comme #02B13F",fi="Télécharger",vi="{0} a retiré un message",Ai="Lu",bi="Épingler",ki="Désépingler",yi="Pas de membres",wi="Membres",Ci="Créé le",xi="Mis à jour le",$i="Quitter le groupe",Ti="Texte",Ii="Image",Mi="Vidéo",Si="Autocollant",Fi="Message",Ri="{0} envoyé",Ui="{0} vous a envoyé {1}",Ei="Appuyez ici pour ouvrir ce lien.",Bi="Écrivez un message...",Li="{0} est en train d'écrire...",_i="{0} a rejoint le chat",Oi="{0} a quitté le chat",zi="{0} a invité {1}",Di="{0} a expulsé {1}",Pi="Vous avez retiré un message",Ni="Taille du fichier",Vi="Fichier",ji="Traduction",Ki="Rechercher",Hi="Localisation",Qi="Envoyer la position actuelle",qi="Pas d'autorisation d'accès à la localisation",Gi="Délai d'attente de la demande de localisation dépassé",Xi="Adresse non disponible",Wi="Message vocal",Ji="Pas d'autorisation d'accès au microphone",Yi="Retirer du dossier",Zi="Modifier le dossier",el="Ajouter au dossier",tl="{n} salons de discussion",sl="Nom du salon",ol="Membre",nl="Étiquettes",al="Dossier",rl="Attributs",il="Message de masse",ll="Veuillez saisir le contenu du message",cl="Rechercher dans la conversation",dl="Hier",ul="Aujourd'hui",ml="Supprimer le dossier ?",gl="Masquer",hl="Afficher",pl="Annuler",fl="Créer",vl="Enregistrer",Al="Saisir le nom de l'étiquette",bl="Confirmer la suppression de l'étiquette ?",kl="Modifier l'étiquette",yl="Choisir une couleur",wl="Bloquer",Cl="Débloquer",xl="Cet utilisateur a été bloqué.",$l="Désactiver les notifications",Tl="Activer les notifications",Il="Confirmer la suppression du salon de discussion ?",Ml="Après avoir supprimé le salon de discussion, vous ne pourrez plus voir l'historique des conversations précédentes. Le salon de discussion du point de vue de l'autre personne ne sera pas affecté et ils pourront toujours vous envoyer de nouveaux messages.",Sl="Messages non lus ci-dessous",Fl={close:ci,confirm:di,folderName:ui,createFolder:mi,tag:gi,inputTag:hi,inputTagPlaceholder:pi,download:fi,someoneUnsentMessage:vi,read:Ai,pin:bi,unpin:ki,emptyChat:yi,members:wi,createdAt:Ci,updatedAt:xi,leaveGroup:$i,text:Ti,image:Ii,video:Mi,sticker:Si,message:Fi,youSent:Ri,someoneSent:Ui,tapOpen:Ei,TypeMessage:Bi,isTyping:Li,someoneJoinedTheChat:_i,someoneLeftTheChat:Oi,someoneInvited:zi,someoneKicked:Di,youUnsentMessage:Pi,fileSize:Ni,file:Vi,translation:ji,search:Ki,location:Hi,sendCurrentLocation:Qi,noAccessLocationPermission:qi,"locationInfoUnavailable.":"Informations de localisation non disponibles",requestLocationTimeout:Gi,addressUnavailable:Xi,audio:Wi,noAccessMicrophonePermission:Ji,removeFromFolder:Yi,editFolder:Zi,addToFolder:el,numberOfChatroom:tl,roomName:sl,roomMember:ol,roomPrefTags:nl,roomPrefFolder:al,roomTags:rl,massTexting:il,inputMessage:ll,searchInConversation:cl,yesterday:dl,today:ul,confirmToDeleteFolder:ml,hide:gl,unhide:hl,delete:"Supprimer",cancel:pl,create:fl,save:vl,createTag:Al,confirmDeleteTag:bl,editTag:kl,chooseColor:yl,block:wl,unblock:Cl,textareaBlockedHint:xl,mute:$l,unmute:Tl,chatroomDeleteConfirmationTitle:Il,chatroomDeleteConfirmationMessage:Ml,unreadMessages:Sl},Rl="閉じる",Ul="確認",El="フォルダ名",Bl="フォルダを作成",Ll="タグ",_l="タグを入力",Ol="カスタムカラーを入力してください（例：#02B13F）",zl="ダウンロード",Dl="{0}がメッセージを取り消しました",Pl="既読",Nl="ピン留め",Vl="ピン留めを解除",jl="チャットが空です",Kl="メンバー",Hl="作成日",Ql="更新日",ql="グループを退出",Gl="テキスト",Xl="画像",Wl="ビデオ",Jl="スティッカー",Yl="メッセージ",Zl="{0}が送信しました",ec="{0}が{1}を送信しました",tc="リンクを開くにはこちらをタップしてください。",sc="メッセージを入力...",oc="{0}が入力中...",nc="{0}がチャットに参加しました",ac="{0}がチャットを退出しました",rc="{0}が{1}を招待しました",ic="{0}が{1}をキックしました",lc="あなたはメッセージを取り消しました",cc="ファイルサイズ",dc="ファイル",uc="翻訳",mc="検索",gc="位置",hc="現在の位置を送信",pc="位置情報のアクセス許可がありません。",fc="位置情報のリクエストがタイムアウトしました。",vc="アドレスが利用できません。",Ac="オーディオメッセージ",bc="マイクのアクセス許可がありません。",kc="フォルダから削除",yc="フォルダを編集",wc="フォルダに追加",Cc="{n}のチャットルーム",xc="チャットルーム名",$c="メンバー",Tc="タグ",Ic="フォルダ",Mc="属性",Sc="一斉送信",Fc="メッセージを入力",Rc="チャット内を検索",Uc="昨日",Ec="今日",Bc="フォルダを削除しますか？",Lc="非表示",_c="非表示を解除",Oc="キャンセル",zc="作成",Dc="保存",Pc="タグ名を入力してください",Nc="タグを削除してよろしいですか？",Vc="タグを編集",jc="色を選択",Kc="ブロック",Hc="ブロック解除​",Qc="このユーザーはブロックされました。",qc="通知をミュート",Gc="通知をオンにする",Xc="チャットルームの削除を確認？",Wc="チャットルームを削除すると、そのチャットルームの過去のチャットを閲覧することができなくなります。他の視聴者のコーナーにあるチャットルームは影響を受けず、新しいメッセージを送信することができます。",Jc="以下は未読メッセージです",Yc={close:Rl,confirm:Ul,folderName:El,createFolder:Bl,tag:Ll,inputTag:_l,inputTagPlaceholder:Ol,download:zl,someoneUnsentMessage:Dl,read:Pl,pin:Nl,unpin:Vl,emptyChat:jl,members:Kl,createdAt:Hl,updatedAt:Ql,leaveGroup:ql,text:Gl,image:Xl,video:Wl,sticker:Jl,message:Yl,youSent:Zl,someoneSent:ec,tapOpen:tc,TypeMessage:sc,isTyping:oc,someoneJoinedTheChat:nc,someoneLeftTheChat:ac,someoneInvited:rc,someoneKicked:ic,youUnsentMessage:lc,fileSize:cc,file:dc,translation:uc,search:mc,location:gc,sendCurrentLocation:hc,noAccessLocationPermission:pc,"locationInfoUnavailable.":"位置情報を取得できません。",requestLocationTimeout:fc,addressUnavailable:vc,audio:Ac,noAccessMicrophonePermission:bc,removeFromFolder:kc,editFolder:yc,addToFolder:wc,numberOfChatroom:Cc,"no-chatroom":"チャットルームがありません",roomName:xc,roomMember:$c,roomPrefTags:Tc,roomPrefFolder:Ic,roomTags:Mc,massTexting:Sc,inputMessage:Fc,searchInConversation:Rc,yesterday:Uc,today:Ec,confirmToDeleteFolder:Bc,hide:Lc,unhide:_c,delete:"削除",cancel:Oc,create:zc,save:Dc,createTag:Pc,confirmDeleteTag:Nc,editTag:Vc,chooseColor:jc,block:Kc,unblock:Hc,textareaBlockedHint:Qc,mute:qc,unmute:Gc,chatroomDeleteConfirmationTitle:Xc,chatroomDeleteConfirmationMessage:Wc,unreadMessages:Jc},Zc="닫기",ed="확인",td="폴더 이름",sd="폴더 만들기",od="태그",nd="태그 이름 입력",ad="#02B13F와 같은 사용자 지정 색상을 입력하세요",rd="다운로드",id="{0}님이 메시지를 삭제했습니다",ld="읽음",cd="고정",dd="고정 해제",ud="멤버 없음",md="멤버",gd="생성 시간",hd="업데이트 시간",pd="그룹 나가기",fd="텍스트",vd="이미지",Ad="비디오",bd="스티커",kd="메시지",yd="{0} 보냄",wd="{0}님이 {1}을(를) 보냈습니다",Cd="이 링크를 열려면 여기를 탭하세요.",xd="메시지 입력...",$d="{0}님이 입력 중...",Td="{0}님이 채팅에 참여했습니다",Id="{0}님이 채팅방을 나갔습니다",Md="{0}님이 {1}님을 초대했습니다",Sd="{0}님이 {1}님을 강제 퇴장시켰습니다",Fd="메시지를 삭제했습니다",Rd="파일 크기",Ud="파일",Ed="번역",Bd="검색",Ld="위치",_d="현재 위치 보내기",Od="위치 접근 권한 없음",zd="위치 요청 시간 초과",Dd="주소를 사용할 수 없음",Pd="음성 메시지",Nd="마이크 접근 권한 없음",Vd="폴더에서 제거",jd="폴더 편집",Kd="폴더에 추가",Hd="채팅방 {n}개",Qd="방 이름",qd="멤버",Gd="태그",Xd="폴더",Wd="속성",Jd="대량 메시지",Yd="메시지 내용을 입력하세요",Zd="대화에서 검색",eu="어제",tu="오늘",su="폴더를 삭제하시겠습니까?",ou="숨기기",nu="숨기기 취소",au="취소",ru="만들기",iu="저장",lu="태그 이름 입력",cu="태그를 삭제하시겠습니까?",du="태그 편집",uu="색상 선택",mu="차단",gu="차단 해제",hu="이 사용자는 차단되었습니다.",pu="알림 끄기",fu="알림 켜기",vu="채팅방을 삭제하시겠습니까?",Au="채팅방을 삭제하면 이전 채팅 기록을 볼 수 없게 됩니다. 상대방의 관점에서의 채팅방은 영향을 받지 않으며, 여전히 새 메시지를 보낼 수 있습니다.",bu="아래는 읽지 않은 메시지입니다",ku={close:Zc,confirm:ed,folderName:td,createFolder:sd,tag:od,inputTag:nd,inputTagPlaceholder:ad,download:rd,someoneUnsentMessage:id,read:ld,pin:cd,unpin:dd,emptyChat:ud,members:md,createdAt:gd,updatedAt:hd,leaveGroup:pd,text:fd,image:vd,video:Ad,sticker:bd,message:kd,youSent:yd,someoneSent:wd,tapOpen:Cd,TypeMessage:xd,isTyping:$d,someoneJoinedTheChat:Td,someoneLeftTheChat:Id,someoneInvited:Md,someoneKicked:Sd,youUnsentMessage:Fd,fileSize:Rd,file:Ud,translation:Ed,search:Bd,location:Ld,sendCurrentLocation:_d,noAccessLocationPermission:Od,"locationInfoUnavailable.":"위치 정보를 사용할 수 없습니다",requestLocationTimeout:zd,addressUnavailable:Dd,audio:Pd,noAccessMicrophonePermission:Nd,removeFromFolder:Vd,editFolder:jd,addToFolder:Kd,numberOfChatroom:Hd,roomName:Qd,roomMember:qd,roomPrefTags:Gd,roomPrefFolder:Xd,roomTags:Wd,massTexting:Jd,inputMessage:Yd,searchInConversation:Zd,yesterday:eu,today:tu,confirmToDeleteFolder:su,hide:ou,unhide:nu,delete:"삭제",cancel:au,create:ru,save:iu,createTag:lu,confirmDeleteTag:cu,editTag:du,chooseColor:uu,block:mu,unblock:gu,textareaBlockedHint:hu,mute:pu,unmute:fu,chatroomDeleteConfirmationTitle:vu,chatroomDeleteConfirmationMessage:Au,unreadMessages:bu},yu="Fechar",wu="Confirmar",Cu="Nome da pasta",xu="Criar pasta",$u="Etiqueta",Tu="Inserir nome da etiqueta",Iu="Por favor, insira uma cor personalizada como #02B13F",Mu="Descarregar",Su="{0} retirou uma mensagem",Fu="Lido",Ru="Fixar",Uu="Desafixar",Eu="Sem membros",Bu="Membros",Lu="Criado em",_u="Atualizado em",Ou="Sair do grupo",zu="Texto",Du="Imagem",Pu="Vídeo",Nu="Autocolante",Vu="Mensagem",ju="{0} enviado",Ku="{0} enviou-lhe {1}",Hu="Toque aqui para abrir este link.",Qu="Escreva uma mensagem...",qu="{0} está a escrever...",Gu="{0} entrou no chat",Xu="{0} saiu do chat",Wu="{0} convidou {1}",Ju="{0} expulsou {1}",Yu="Retirou uma mensagem",Zu="Tamanho do ficheiro",em="Ficheiro",tm="Tradução",sm="Pesquisar",om="Localização",nm="Enviar localização atual",am="Sem permissão de acesso à localização",rm="Tempo esgotado para pedido de localização",im="Endereço indisponível",lm="Mensagem de voz",cm="Sem permissão de acesso ao microfone",dm="Remover da pasta",um="Editar pasta",mm="Adicionar à pasta",gm="{n} salas de chat",hm="Nome da sala",pm="Membro",fm="Etiquetas",vm="Pasta",Am="Atributos",bm="Mensagem em massa",km="Por favor, insira o conteúdo da mensagem",ym="Pesquisar na conversa",wm="Ontem",Cm="Hoje",xm="Eliminar pasta?",$m="Ocultar",Tm="Mostrar",Im="Cancelar",Mm="Criar",Sm="Guardar",Fm="Inserir nome da etiqueta",Rm="Confirmar eliminação da etiqueta?",Um="Editar etiqueta",Em="Escolher cor",Bm="Bloquear",Lm="Desbloquear",_m="Este utilizador foi bloqueado.",Om="Silenciar notificações",zm="Ativar notificações",Dm="Confirmar eliminação da sala de chat?",Pm="Após eliminar a sala de chat, não poderá visualizar o histórico de conversas anterior. A sala de chat da perspetiva da outra pessoa não será afetada e ainda poderão enviar-lhe novas mensagens.",Nm="Mensagens não lidas abaixo",Vm={close:yu,confirm:wu,folderName:Cu,createFolder:xu,tag:$u,inputTag:Tu,inputTagPlaceholder:Iu,download:Mu,someoneUnsentMessage:Su,read:Fu,pin:Ru,unpin:Uu,emptyChat:Eu,members:Bu,createdAt:Lu,updatedAt:_u,leaveGroup:Ou,text:zu,image:Du,video:Pu,sticker:Nu,message:Vu,youSent:ju,someoneSent:Ku,tapOpen:Hu,TypeMessage:Qu,isTyping:qu,someoneJoinedTheChat:Gu,someoneLeftTheChat:Xu,someoneInvited:Wu,someoneKicked:Ju,youUnsentMessage:Yu,fileSize:Zu,file:em,translation:tm,search:sm,location:om,sendCurrentLocation:nm,noAccessLocationPermission:am,"locationInfoUnavailable.":"Informação de localização indisponível",requestLocationTimeout:rm,addressUnavailable:im,audio:lm,noAccessMicrophonePermission:cm,removeFromFolder:dm,editFolder:um,addToFolder:mm,numberOfChatroom:gm,roomName:hm,roomMember:pm,roomPrefTags:fm,roomPrefFolder:vm,roomTags:Am,massTexting:bm,inputMessage:km,searchInConversation:ym,yesterday:wm,today:Cm,confirmToDeleteFolder:xm,hide:$m,unhide:Tm,delete:"Eliminar",cancel:Im,create:Mm,save:Sm,createTag:Fm,confirmDeleteTag:Rm,editTag:Um,chooseColor:Em,block:Bm,unblock:Lm,textareaBlockedHint:_m,mute:Om,unmute:zm,chatroomDeleteConfirmationTitle:Dm,chatroomDeleteConfirmationMessage:Pm,unreadMessages:Nm},jm="Închide",Km="Confirmă",Hm="Nume dosar",Qm="Creare dosar",qm="Etichetă",Gm="Introduceți numele etichetei",Xm="Vă rugăm să introduceți o culoare personalizată ca #02B13F",Wm="Descarcă",Jm="{0} a retras un mesaj",Ym="Citit",Zm="Fixează",e0="Anulează fixarea",t0="Nu există membri",s0="Membri",o0="Creat la",n0="Actualizat la",a0="Părăsește grupul",r0="Text",i0="Imagine",l0="Video",c0="Autocolant",d0="Mesaj",u0="{0} trimis",m0="{0} v-a trimis {1}",g0="Atingeți aici pentru a deschide acest link.",h0="Scrieți un mesaj...",p0="{0} scrie...",f0="{0} s-a alăturat conversației",v0="{0} a părăsit conversația",A0="{0} l-a invitat pe {1}",b0="{0} l-a eliminat pe {1}",k0="Ați retras un mesaj",y0="Dimensiune fișier",w0="Fișier",C0="Traducere",x0="Caută",$0="Locație",T0="Trimite locația curentă",I0="Fără permisiune de acces la locație",M0="Timpul pentru solicitarea locației a expirat",S0="Adresa nu este disponibilă",F0="Mesaj vocal",R0="Fără permisiune de acces la microfon",U0="Elimină din dosar",E0="Editează dosar",B0="Adaugă la dosar",L0="{n} camere de chat",_0="Nume cameră",O0="Membru",z0="Etichete",D0="Dosar",P0="Atribute",N0="Mesaj în masă",V0="Vă rugăm să introduceți conținutul mesajului",j0="Caută în conversație",K0="Ieri",H0="Astăzi",Q0="Ștergeți dosarul?",q0="Ascunde",G0="Afișează",X0="Anulează",W0="Crează",J0="Salvează",Y0="Introduceți numele etichetei",Z0="Confirmați ștergerea etichetei?",e1="Editează eticheta",t1="Alegeți culoarea",s1="Blochează",o1="Deblochează",n1="Acest utilizator a fost blocat.",a1="Dezactivează notificările",r1="Activează notificările",i1="Confirmați ștergerea camerei de chat?",l1="După ștergerea camerei de chat, nu veți mai putea vizualiza istoricul conversațiilor anterioare. Camera de chat din perspectiva celeilalte persoane nu va fi afectată și aceasta va putea în continuare să vă trimită mesaje noi.",c1="Mai jos sunt mesajele necitite",d1={close:jm,confirm:Km,folderName:Hm,createFolder:Qm,tag:qm,inputTag:Gm,inputTagPlaceholder:Xm,download:Wm,someoneUnsentMessage:Jm,read:Ym,pin:Zm,unpin:e0,emptyChat:t0,members:s0,createdAt:o0,updatedAt:n0,leaveGroup:a0,text:r0,image:i0,video:l0,sticker:c0,message:d0,youSent:u0,someoneSent:m0,tapOpen:g0,TypeMessage:h0,isTyping:p0,someoneJoinedTheChat:f0,someoneLeftTheChat:v0,someoneInvited:A0,someoneKicked:b0,youUnsentMessage:k0,fileSize:y0,file:w0,translation:C0,search:x0,location:$0,sendCurrentLocation:T0,noAccessLocationPermission:I0,"locationInfoUnavailable.":"Informațiile despre locație nu sunt disponibile",requestLocationTimeout:M0,addressUnavailable:S0,audio:F0,noAccessMicrophonePermission:R0,removeFromFolder:U0,editFolder:E0,addToFolder:B0,numberOfChatroom:L0,roomName:_0,roomMember:O0,roomPrefTags:z0,roomPrefFolder:D0,roomTags:P0,massTexting:N0,inputMessage:V0,searchInConversation:j0,yesterday:K0,today:H0,confirmToDeleteFolder:Q0,hide:q0,unhide:G0,delete:"Șterge",cancel:X0,create:W0,save:J0,createTag:Y0,confirmDeleteTag:Z0,editTag:e1,chooseColor:t1,block:s1,unblock:o1,textareaBlockedHint:n1,mute:a1,unmute:r1,chatroomDeleteConfirmationTitle:i1,chatroomDeleteConfirmationMessage:l1,unreadMessages:c1},u1="ปิด",m1="ยืนยัน",g1="ชื่อโฟลเดอร์",h1="สร้างโฟลเดอร์",p1="แท็ก",f1="ป้อนชื่อแท็ก",v1="กรุณาป้อนสีที่กำหนดเอง เช่น #02B13F",A1="ดาวน์โหลด",b1="{0} ได้ถอนข้อความ",k1="อ่านแล้ว",y1="ปักหมุด",w1="ถอนหมุด",C1="ไม่มีสมาชิก",x1="สมาชิก",$1="สร้างเมื่อ",T1="อัปเดตเมื่อ",I1="ออกจากกลุ่ม",M1="ข้อความ",S1="รูปภาพ",F1="วิดีโอ",R1="สติกเกอร์",U1="ข้อความ",E1="ส่ง{0}แล้ว",B1="{0}ได้ส่ง{1}ถึงคุณ",L1="แตะที่นี่เพื่อเปิดลิงก์นี้",_1="พิมพ์ข้อความ...",O1="{0} กำลังพิมพ์...",z1="{0}เข้าร่วมการแชท",D1="{0}ออกจากการแชท",P1="{0}เชิญ{1}",N1="{0}เตะ{1}ออก",V1="คุณได้ถอนข้อความ",j1="ขนาดไฟล์",K1="ไฟล์",H1="การแปล",Q1="ค้นหา",q1="ตำแหน่ง",G1="ส่งตำแหน่งปัจจุบัน",X1="ไม่มีสิทธิ์เข้าถึงตำแหน่ง",W1="การขอตำแหน่งหมดเวลา",J1="ที่อยู่ไม่พร้อมใช้งาน",Y1="ข้อความเสียง",Z1="ไม่มีสิทธิ์เข้าถึงไมโครโฟน",eg="นำออกจากโฟลเดอร์",tg="แก้ไขโฟลเดอร์",sg="เพิ่มลงในโฟลเดอร์",og="ห้องแชท {n} ห้อง",ng="ชื่อห้อง",ag="สมาชิก",rg="แท็ก",ig="โฟลเดอร์",lg="คุณลักษณะ",cg="ส่งข้อความหมู่",dg="กรุณาป้อนเนื้อหาข้อความ",ug="ค้นหาในการสนทนา",mg="เมื่อวาน",gg="วันนี้",hg="ลบโฟลเดอร์?",pg="ซ่อน",fg="ยกเลิกการซ่อน",vg="ยกเลิก",Ag="สร้าง",bg="บันทึก",kg="ป้อนชื่อแท็ก",yg="ยืนยันการลบแท็ก?",wg="แก้ไขแท็ก",Cg="เลือกสี",xg="บล็อก",$g="ยกเลิกการบล็อก",Tg="ผู้ใช้นี้ถูกบล็อกแล้ว",Ig="ปิดการแจ้งเตือน",Mg="เปิดการแจ้งเตือน",Sg="ยืนยันการลบห้องแชท?",Fg="หลังจากลบห้องแชทแล้ว คุณจะไม่สามารถดูประวัติการแชทก่อนหน้านี้ได้ ห้องแชทจากมุมมองของอีกฝ่ายจะไม่ได้รับผลกระทบและพวกเขายังคงสามารถส่งข้อความใหม่ถึงคุณได้",Rg="ด้านล่างนี้คือข้อความที่ยังไม่ได้อ่าน",Ug={close:u1,confirm:m1,folderName:g1,createFolder:h1,tag:p1,inputTag:f1,inputTagPlaceholder:v1,download:A1,someoneUnsentMessage:b1,read:k1,pin:y1,unpin:w1,emptyChat:C1,members:x1,createdAt:$1,updatedAt:T1,leaveGroup:I1,text:M1,image:S1,video:F1,sticker:R1,message:U1,youSent:E1,someoneSent:B1,tapOpen:L1,TypeMessage:_1,isTyping:O1,someoneJoinedTheChat:z1,someoneLeftTheChat:D1,someoneInvited:P1,someoneKicked:N1,youUnsentMessage:V1,fileSize:j1,file:K1,translation:H1,search:Q1,location:q1,sendCurrentLocation:G1,noAccessLocationPermission:X1,"locationInfoUnavailable.":"ข้อมูลตำแหน่งไม่พร้อมใช้งาน",requestLocationTimeout:W1,addressUnavailable:J1,audio:Y1,noAccessMicrophonePermission:Z1,removeFromFolder:eg,editFolder:tg,addToFolder:sg,numberOfChatroom:og,roomName:ng,roomMember:ag,roomPrefTags:rg,roomPrefFolder:ig,roomTags:lg,massTexting:cg,inputMessage:dg,searchInConversation:ug,yesterday:mg,today:gg,confirmToDeleteFolder:hg,hide:pg,unhide:fg,delete:"ลบ",cancel:vg,create:Ag,save:bg,createTag:kg,confirmDeleteTag:yg,editTag:wg,chooseColor:Cg,block:xg,unblock:$g,textareaBlockedHint:Tg,mute:Ig,unmute:Mg,chatroomDeleteConfirmationTitle:Sg,chatroomDeleteConfirmationMessage:Fg,unreadMessages:Rg},Eg="Đóng",Bg="Xác nhận",Lg="Tên thư mục",_g="Tạo thư mục",Og="Thẻ",zg="Nhập tên thẻ",Dg="Vui lòng nhập màu tùy chỉnh như #02B13F",Pg="Tải xuống",Ng="{0} đã thu hồi một tin nhắn",Vg="Đã đọc",jg="Ghim",Kg="Bỏ ghim",Hg="Không có thành viên",Qg="Thành viên",qg="Được tạo lúc",Gg="Được cập nhật lúc",Xg="Rời nhóm",Wg="Văn bản",Jg="Hình ảnh",Yg="Video",Zg="Nhãn dán",eh="Tin nhắn",th="{0} đã gửi",sh="{0} đã gửi cho bạn {1}",oh="Nhấn vào đây để mở liên kết này.",nh="Nhập tin nhắn...",ah="{0} đang nhập...",rh="{0} đã tham gia cuộc trò chuyện",ih="{0} đã rời cuộc trò chuyện",lh="{0} đã mời {1}",ch="{0} đã đuổi {1}",dh="Bạn đã thu hồi một tin nhắn",uh="Kích thước tệp",mh="Tệp",gh="Dịch",hh="Tìm kiếm",ph="Vị trí",fh="Gửi vị trí hiện tại",vh="Không có quyền truy cập vị trí",Ah="Yêu cầu vị trí đã hết thời gian",bh="Địa chỉ không khả dụng",kh="Tin nhắn thoại",yh="Không có quyền truy cập micrô",wh="Xóa khỏi thư mục",Ch="Chỉnh sửa thư mục",xh="Thêm vào thư mục",$h="{n} phòng trò chuyện",Th="Tên phòng",Ih="Thành viên",Mh="Thẻ",Sh="Thư mục",Fh="Thuộc tính",Rh="Nhắn tin hàng loạt",Uh="Vui lòng nhập nội dung tin nhắn",Eh="Tìm kiếm trong cuộc trò chuyện",Bh="Hôm qua",Lh="Hôm nay",_h="Xóa thư mục?",Oh="Ẩn",zh="Hiện",Dh="Hủy",Ph="Tạo",Nh="Lưu",Vh="Nhập tên thẻ",jh="Xác nhận xóa thẻ?",Kh="Chỉnh sửa thẻ",Hh="Chọn màu",Qh="Chặn",qh="Bỏ chặn",Gh="Người dùng này đã bị chặn.",Xh="Tắt thông báo",Wh="Bật thông báo",Jh="Xác nhận xóa phòng trò chuyện?",Yh="Sau khi xóa phòng trò chuyện, bạn sẽ không thể xem lịch sử trò chuyện trước đó. Phòng trò chuyện từ góc nhìn của người khác sẽ không bị ảnh hưởng và họ vẫn có thể gửi tin nhắn mới cho bạn.",Zh="Dưới đây là các tin nhắn chưa đọc",e2={close:Eg,confirm:Bg,folderName:Lg,createFolder:_g,tag:Og,inputTag:zg,inputTagPlaceholder:Dg,download:Pg,someoneUnsentMessage:Ng,read:Vg,pin:jg,unpin:Kg,emptyChat:Hg,members:Qg,createdAt:qg,updatedAt:Gg,leaveGroup:Xg,text:Wg,image:Jg,video:Yg,sticker:Zg,message:eh,youSent:th,someoneSent:sh,tapOpen:oh,TypeMessage:nh,isTyping:ah,someoneJoinedTheChat:rh,someoneLeftTheChat:ih,someoneInvited:lh,someoneKicked:ch,youUnsentMessage:dh,fileSize:uh,file:mh,translation:gh,search:hh,location:ph,sendCurrentLocation:fh,noAccessLocationPermission:vh,"locationInfoUnavailable.":"Thông tin vị trí không khả dụng",requestLocationTimeout:Ah,addressUnavailable:bh,audio:kh,noAccessMicrophonePermission:yh,removeFromFolder:wh,editFolder:Ch,addToFolder:xh,numberOfChatroom:$h,roomName:Th,roomMember:Ih,roomPrefTags:Mh,roomPrefFolder:Sh,roomTags:Fh,massTexting:Rh,inputMessage:Uh,searchInConversation:Eh,yesterday:Bh,today:Lh,confirmToDeleteFolder:_h,hide:Oh,unhide:zh,delete:"Xóa",cancel:Dh,create:Ph,save:Nh,createTag:Vh,confirmDeleteTag:jh,editTag:Kh,chooseColor:Hh,block:Qh,unblock:qh,textareaBlockedHint:Gh,mute:Xh,unmute:Wh,chatroomDeleteConfirmationTitle:Jh,chatroomDeleteConfirmationMessage:Yh,unreadMessages:Zh},t2="关闭",s2="确认",o2="资料夹名称",n2="建立资料夹",a2="标签",r2="输入标签名称",i2="请输入自订色彩例如 #02B13F",l2="下载",c2="{0} 已收回讯息",d2="已读",u2="置顶",m2="取消置顶",g2="没有成员",h2="成员",p2="创建时间",f2="更新时间",v2="退出群组",A2="文字",b2="图片",k2="影片",y2="贴图",w2="讯息",C2="{0}已传送",x2="{0}向您传送了{1}",$2="点选此处以开启此连结。",T2="输入讯息...",I2="{0} 正在输入...",M2="{0}加入聊天",S2="{0}离开聊天",F2="{0}邀请{1}加入",R2="{0}将{1}踢出",U2="您已收回讯息",E2="档案大小",B2="档案",L2="翻译",_2="搜寻",O2="位置",z2="传送目前位置",D2="无存取位置权限",P2="请求位置逾时",N2="无法取得地址",V2="语音讯息",j2="无存取麦克风权限",K2="从资料夹中移除",H2="编辑资料夹",Q2="新增至资料夹",q2="{n} 个聊天室",G2="聊天室名称",X2="成员",W2="标签",J2="资料夹",Y2="属性",Z2="群发讯息",ep="请输入讯息内容",tp="搜寻对话",sp="昨天",op="今天",np="删除资料夹？",ap="隐藏",rp="取消隐藏",ip="取消",lp="建立",cp="储存",dp="输入标签名称",up="确认删除标签?",mp="编辑标签",gp="选择颜色",hp="封锁",pp="解封锁",fp="此用户已被封锁。",vp="关闭通知",Ap="开启通知",bp="确认要删除聊天室吗？",kp="删除聊天室后，您将无法再检视此聊天室过去的聊天记录。对方视角下的聊天室将不受任何影响，且还是可以传新讯息给您。",yp="以下为尚未阅读的讯息",wp={close:t2,confirm:s2,folderName:o2,createFolder:n2,tag:a2,inputTag:r2,inputTagPlaceholder:i2,download:l2,someoneUnsentMessage:c2,read:d2,pin:u2,unpin:m2,emptyChat:g2,members:h2,createdAt:p2,updatedAt:f2,leaveGroup:v2,text:A2,image:b2,video:k2,sticker:y2,message:w2,youSent:C2,someoneSent:x2,tapOpen:$2,TypeMessage:T2,isTyping:I2,someoneJoinedTheChat:M2,someoneLeftTheChat:S2,someoneInvited:F2,someoneKicked:R2,youUnsentMessage:U2,fileSize:E2,file:B2,translation:L2,search:_2,location:O2,sendCurrentLocation:z2,noAccessLocationPermission:D2,"locationInfoUnavailable.":"无法取得位置资讯",requestLocationTimeout:P2,addressUnavailable:N2,audio:V2,noAccessMicrophonePermission:j2,removeFromFolder:K2,editFolder:H2,addToFolder:Q2,numberOfChatroom:q2,roomName:G2,roomMember:X2,roomPrefTags:W2,roomPrefFolder:J2,roomTags:Y2,massTexting:Z2,inputMessage:ep,searchInConversation:tp,yesterday:sp,today:op,confirmToDeleteFolder:np,hide:ap,unhide:rp,delete:"删除",cancel:ip,create:lp,save:cp,createTag:dp,confirmDeleteTag:up,editTag:mp,chooseColor:gp,block:hp,unblock:pp,textareaBlockedHint:fp,mute:vp,unmute:Ap,chatroomDeleteConfirmationTitle:bp,chatroomDeleteConfirmationMessage:kp,unreadMessages:yp},Cp="關閉",xp="確認",$p="資料夾名稱",Tp="建立資料夾",Ip="標籤",Mp="輸入標籤名稱",Sp="請輸入自訂色彩例如 #02B13F",Fp="下載",Rp="{0} 已收回訊息",Up="已讀",Ep="置頂",Bp="取消置頂",Lp="沒有成員",_p="成員",Op="創建時間",zp="更新時間",Dp="退出群組",Pp="文字",Np="圖片",Vp="影片",jp="貼圖",Kp="訊息",Hp="{0}已傳送",Qp="{0}向您傳送了{1}",qp="點選此處以開啟此連結。",Gp="輸入訊息...",Xp="{0} 正在輸入...",Wp="{0}加入聊天",Jp="{0}離開聊天",Yp="{0}邀請{1}加入",Zp="{0}將{1}踢出",ef="您已收回訊息",tf="檔案大小",sf="檔案",of="翻譯",nf="搜尋",af="位置",rf="傳送目前位置",lf="無存取位置權限",cf="請求位置逾時",df="無法取得地址",uf="語音訊息",mf="無存取麥克風權限",gf="從資料夾中移除",hf="編輯資料夾",pf="新增至資料夾",ff="{n} 個聊天室",vf="聊天室名稱",Af="成員",bf="標籤",kf="資料夾",yf="屬性",wf="群發訊息",Cf="請輸入訊息內容",xf="搜尋對話",$f="昨天",Tf="今天",If="刪除資料夾？",Mf="隱藏",Sf="取消隱藏",Ff="取消",Rf="建立",Uf="儲存",Ef="輸入標籤名稱",Bf="確認刪除標籤?",Lf="編輯標籤",_f="選擇顏色",Of="封鎖",zf="解封鎖",Df="此用戶已被封鎖。",Pf="關閉通知",Nf="開啟通知",Vf="確認要刪除聊天室嗎？",jf="刪除聊天室後，您將無法再檢視此聊天室過去的聊天記錄。對方視角下的聊天室將不受任何影響，且還是可以傳新訊息給您。",Kf="以下為尚未閱讀的訊息",Hf={close:Cp,confirm:xp,folderName:$p,createFolder:Tp,tag:Ip,inputTag:Mp,inputTagPlaceholder:Sp,download:Fp,someoneUnsentMessage:Rp,read:Up,pin:Ep,unpin:Bp,emptyChat:Lp,members:_p,createdAt:Op,updatedAt:zp,leaveGroup:Dp,text:Pp,image:Np,video:Vp,sticker:jp,message:Kp,youSent:Hp,someoneSent:Qp,tapOpen:qp,TypeMessage:Gp,isTyping:Xp,someoneJoinedTheChat:Wp,someoneLeftTheChat:Jp,someoneInvited:Yp,someoneKicked:Zp,youUnsentMessage:ef,fileSize:tf,file:sf,translation:of,search:nf,location:af,sendCurrentLocation:rf,noAccessLocationPermission:lf,"locationInfoUnavailable.":"無法取得位置資訊",requestLocationTimeout:cf,addressUnavailable:df,audio:uf,noAccessMicrophonePermission:mf,removeFromFolder:gf,editFolder:hf,addToFolder:pf,numberOfChatroom:ff,"no-chatroom":"沒有聊天室",roomName:vf,roomMember:Af,roomPrefTags:bf,roomPrefFolder:kf,roomTags:yf,massTexting:wf,inputMessage:Cf,searchInConversation:xf,yesterday:$f,today:Tf,confirmToDeleteFolder:If,hide:Mf,unhide:Sf,delete:"刪除",cancel:Ff,create:Rf,save:Uf,createTag:Ef,confirmDeleteTag:Bf,editTag:Lf,chooseColor:_f,block:Of,unblock:zf,textareaBlockedHint:Df,mute:Pf,unmute:Nf,chatroomDeleteConfirmationTitle:Vf,chatroomDeleteConfirmationMessage:jf,unreadMessages:Kf},ft={"de-DE":An,"en-US":Pa,"es-ES":li,"fr-FR":Fl,"ja-JP":Yc,"ko-KR":ku,"pt-PT":Vm,"ro-RO":d1,"th-TH":Ug,"vi-VN":e2,"zh-CN":wp,"zh-TW":Hf},me=us({legacy:!1,locale:typeof navigator<"u"&&navigator.language in ft?navigator.language:"en-US",messages:ft});class Mt{constructor(e=null){$(this,"head");$(this,"tail");$(this,"main");$(this,"length");this.head=e,this.tail=e,this.main=e,this.length=e?1:0}numberOfMessages(){let e=0,t=this.head;for(;t;)e+=t.length,t=t.next;return e}concate(e){var t;(t=this.main)==null||t.concate(e)}unshift(e){var t;(t=this.main)==null||t.unshift(e)}insert(e){if(this.length===0){this.head=this.tail=this.main=e,this.length=1;return}if(e.length===0)return;let t=this.tail;for(;t&&t.head.createdAt>e.head.createdAt;)t=t.prev;t?(t===this.tail&&(this.tail=e),e.next=t.next,e.next&&(e.next.prev=e),t.next=e,e.prev=t):(e.next=this.head,e.next&&(e.next.prev=e),this.head=e),this.main=e,this.length++}merge(){if(this.length<=1)return;let e=this.tail;for(;e;){if(e.prev&&e.canCombine(e.prev)){e.combine(e.prev),e.prev===this.main&&(this.main=e),e.prev=e.prev.prev,e.prev?e.prev.next=e:this.head=e,this.length--;break}e=e.prev}e&&this.merge()}isValid(){if(this.head&&this.head.prev||this.tail&&this.tail.next)return!1;let e=0,t=this.head;for(;t;){if(t.prev&&t.prev.next!==t||t.next&&t.next.prev!==t)return!1;e++,t=t.next}return e===this.length}}var ge=(o=>(o.RoomName="roomName",o.RoomMember="roomMember",o.RoomPrefTags="roomPrefTags",o.RoomPrefFolder="roomPrefFolder",o.RoomTags="roomTags",o))(ge||{});const St={count:0,config:{},uid:"",axios:De,isRequesting:{},socket:Ct({autoConnect:!1}),imageCache:ht(),translationCache:ht(),users:{},rooms:{},sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0,uploadProgresses:{},downloadProgresses:{},linkPreviews:{},actionMenuRoomId:"",folders:{},sortedFolderIds:[],roomIdsInFolders:{},selectedRoomIdsForCreateFolder:{},selectedFolderId:"",searchKeyword:"",searchType:ge.RoomName,searchRooms:{},roomTag:"",deliveringMessages:new Map,processingMessages:new Map,selectedRoomId:"",messageMultiList:new Mt,numberOfTotalMessages:-1,replyId:"",navigationTargetId:"",isRoomInfoVisible:!1,isTyping:{},isSearchInRoomMode:!1,messageSearchKeyword:"",blockedUsers:{}};var ve=(o=>(o.FetchRooms="/rooms",o.Search="/search",o.Subscribe="/me/subscribe",o.Unsubscribe="/me/unsubscribe",o))(ve||{});class Re{constructor(e,t,s){$(this,"id");$(this,"name");$(this,"roomIds");this.id=e,this.name=t,this.roomIds=s}get payload(){return{children:this.roomIds.map(e=>({id:e,type:"room"}))}}}var T=(o=>(o.increment="increment",o.fetchRooms="fetchRooms",o.fetchRoom="fetchRoom",o.loadMessages="loadMessages",o.updateLastRead="updateLastRead",o.handleMessageFromSocket="handleMessageFromSocket",o.handleRoomFromSocket="handleRoomFromSocket",o.handleLastReadFromSocket="handleLastReadFromSocket",o.sendMessage="sendMessage",o.recallMessage="recallMessage",o.uploadMedia="uploadMedia",o.fetchLinkPreview="fetchLinkPreview",o.handleLinkPreviews="handleLinkPreviews",o.fetchVideoBlob="fetchVideoBlob",o.navigateToMessage="navigateToMessage",o.uploadImage="uploadImage",o.updateRoomPrefs="updateRoomPrefs",o.fetchPrefs="fetchPrefs",o.updatePref="updatePref",o.deletePref="deletePref",o.updateFolder="updateFolder",o.removeFolder="removeFolder",o.handlePrefChangeFromSocket="handlePrefChangeFromSocket",o.handlePrefDeleteFromSocket="handlePrefDeleteFromSocket",o.aggregateRoomsAndFolders="aggregateRoomsAndFolders",o.removeMembers="removeMembers",o.handleTypingFromSocket="handleTypingFromSocket",o.insertUnreadMessage="insertUnreadMessage",o.translate="translate",o.searchRooms="searchRooms",o.subscribe="subscribe",o.unsubscribe="unsubscribe",o.removeRoomFromFolder="removeRoomFromFolder",o.addRoomToFolder="addRoomToFolder",o.fetchRoomsInFolders="fetchRoomsInFolders",o.batchSendMessage="batchSendMessage",o.toggleNotification="toggleNotification",o.translateMessage="translateMessage",o.blockUser="blockUser",o.unblockUser="unblockUser",o.getBlockList="getBlockList",o.hideMessagesFromUserInRoom="hideMessagesFromUserInRoom",o))(T||{}),C=(o=>(o.increment="increment",o.setState="setState",o.updateField="updateField",o.deleteField="deleteField",o.updateRoom="updateRoom",o.updateLastRead="updateLastRead",o.pushMessage="pushMessage",o.replaceMessage="replaceMessage",o.clearChatRoom="clearChatRoom",o.deleteRoom="deleteRoom",o.setMap="setMap",o.deleteMap="deleteMap",o.insertMessageLinkedList="insertMessageLinkedList",o.concateMessageLinkedList="concateMessageLinkedList",o.unshiftMessageLinkedList="unshiftMessageLinkedList",o))(C||{});class Qf{constructor(e){$(this,"head");$(this,"tail");$(this,"length");$(this,"map");$(this,"messageGroups");$(this,"firstMessageOfDate");$(this,"prev",null);$(this,"next",null);this.head=null,this.tail=null,this.length=0,this.map=new Map,this.messageGroups=new Map,this.firstMessageOfDate=new Map;const t=s=>{const n=ae.fromRaw(s);return n?[n].concat(t(s.reply)):[]};for(const s of e.reverse()){const n=ae.fromRaw(s);n&&this.append(n);for(const a of t(s.reply))this.map.set(a.id,a)}}append(e){if(!this.contains(e.id)){if(this.tail){let t=this.tail;for(;t&&t.createdAt>e.createdAt;)t=t.prev;t?(t===this.tail&&(this.tail=e),e.next=t.next,t.next=e,e.prev=t):(e.next=this.head,this.head=e),e.next&&(e.next.prev=e)}else this.head=this.tail=e;this.map.set(e.id,e),this.length++,this.insertMessageToGroup(e)}}insertMessageToGroup(e){if(e.isSystem)return;if(this.messageGroups.has(e.groupId)){const s=this.messageGroups.get(e.groupId);if(s){let n=!1;for(let a=s.length-1;a>=0;a--)if(s[a].createdAt<e.createdAt){a==s.length-1?s.push(e):s.splice(a+1,0,e),n=!0;break}n||s.unshift(e)}}else this.messageGroups.set(e.groupId,[e]);const t=this.firstMessageOfDate.get(e.dateId);(!t||t.createdAt>e.createdAt)&&this.firstMessageOfDate.set(e.dateId,e)}remove(e){var n,a;const t=this.finds(e);if(!t)return;t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,this.map.delete(e),this.length--;const s=this.messageGroups.get(t.groupId);if(s){const r=s.indexOf(t);r>=0&&(s.splice(r,1),s.length===0&&this.messageGroups.delete(t.groupId))}((n=this.firstMessageOfDate.get(t.dateId))==null?void 0:n.id)===t.id&&(t.dateId===((a=t.next)==null?void 0:a.dateId)?this.firstMessageOfDate.set(t.dateId,t.next):this.firstMessageOfDate.delete(t.dateId))}replace(e,t){var n;const s=this.finds(e);if(s){s.prev?s.prev.next=t:this.head=t,s.next?s.next.prev=t:this.tail=t,t.prev=s.prev,t.next=s.next,this.map.delete(e),this.map.set(t.id,t);const a=this.messageGroups.get(s.groupId);if(a){const r=a.indexOf(s);r>=0&&(t.isSystem?a.splice(r,1):a[r]=t)}((n=this.firstMessageOfDate.get(s.dateId))==null?void 0:n.id)===s.id&&this.firstMessageOfDate.set(s.dateId,t)}}concate(e){if(e.length!==0){this.tail?(this.tail.next=e.head,e.head&&(e.head.prev=this.tail),this.tail=e.tail):(this.head=e.head,this.tail=e.tail);for(const[t,s]of e.map)this.map.set(t,s);this.length+=e.length;for(const[t,s]of e.messageGroups)if(this.messageGroups.has(t)){if(this.messageGroups.get(t))for(const a of s)this.insertMessageToGroup(a)}else this.messageGroups.set(t,s);for(const[t,s]of e.firstMessageOfDate){const n=this.firstMessageOfDate.get(t);n!==void 0?n.createdAt>s.createdAt&&this.firstMessageOfDate.set(t,s):this.firstMessageOfDate.set(t,s)}}}unshift(e){if(e.length!==0){this.head?(this.head.prev=e.tail,e.tail&&(e.tail.next=this.head),this.head=e.head):(this.head=e.head,this.tail=e.tail);for(const[t,s]of e.map)this.map.set(t,s);this.length+=e.length;for(const[t,s]of e.messageGroups)if(this.messageGroups.has(t)){if(this.messageGroups.get(t))for(const a of s)this.insertMessageToGroup(a)}else this.messageGroups.set(t,s);for(const[t,s]of e.firstMessageOfDate){const n=this.firstMessageOfDate.get(t);n!==void 0?n.createdAt>s.createdAt&&this.firstMessageOfDate.set(t,s):this.firstMessageOfDate.set(t,s)}}}resetHead(e){if(this.head&&this.head.id===e)return;const t=this.finds(e);if(t){this.head=t,t.prev=null;let s=0,n=t;for(;n;)s++,n=n.next;this.length=s}}resetTail(e){if(this.tail&&this.tail.id===e)return;const t=this.finds(e);if(t){this.tail=t,t.next=null;let s=0,n=t;for(;n;)s++,n=n.prev;this.length=s}}canCombine(e){var t,s;return e.length===0||!e.head||!e.tail?!1:this.contains(e.tail.id)||this.contains(e.head.id)||e.contains(((t=this.head)==null?void 0:t.id)??"")&&e.contains(((s=this.tail)==null?void 0:s.id)??"")}combine(e){var n,a,r,i;if(e.length===0||!e.head||!e.tail)return;const t=this.contains(e.head.id),s=this.contains(e.tail.id);if(!(t&&s)){if(!t&&!s)e.contains(((n=this.head)==null?void 0:n.id)??"")&&e.contains(((a=this.tail)==null?void 0:a.id)??"")&&(this.head=e.head,this.tail=e.tail,this.length=e.length,this.map=e.map);else if(s){const d=(r=this.finds(e.tail.id))==null?void 0:r.next;d?this.resetHead(d.id):(this.head=null,this.tail=null,this.length=0),this.unshift(e)}else if(t){const d=(i=this.finds(e.head.id))==null?void 0:i.prev;d?this.resetTail(d.id):(this.head=null,this.tail=null,this.length=0),this.concate(e)}}}array(){const e=[];let t=this.head;for(;t;)e.push(t),t=t.next;return e}finds(e){const t=this.map.get(e);if(t)return t.next||t.prev||this.head===t&&this.tail===t?t:void 0}contains(e){return this.finds(e)!==void 0}isValid(){if(this.head&&this.head.prev||this.tail&&this.tail.next)return!1;let e=0,t=this.head;for(;t;){if(t.prev&&t.prev.next!==t||t.next&&t.next.prev!==t)return!1;e++,t=t.next}return e===this.length}}const qf={[T.increment]({commit:o}){o(C.increment)},async[T.fetchRooms]({state:o,commit:e,dispatch:t},{pageSize:s}={pageSize:void 0}){if(o.isRequesting[ve.FetchRooms])return;const{numberOfFetchedRooms:n,uid:a}=o;if(n===o.numberOfTotalRooms&&n>0)return;const r=s!==void 0?s:Math.min(Math.max(30,n),120),{data:{result:i}}=await o.axios.get(ve.FetchRooms,{params:{skip:n,limit:r,q:o.roomTag?`{ "members": "${a}", "roomTags": "${o.roomTag}" }`:`{ "members": "${a}" }`}}),{data:d,totalCount:m}=i,g={},h={};for(const v of d){g[v._id]=new ze(v,o.uid);for(const p of v.members)h[p.id]||(h[p.id]=new ke(p))}e(C.updateField,{key:"rooms",value:g}),e(C.updateField,{key:"users",value:h}),e(C.setState,{numberOfTotalRooms:m,numberOfFetchedRooms:n+r}),t(T.aggregateRoomsAndFolders)},async[T.handleMessageFromSocket]({state:o,commit:e,dispatch:t},s){var a,r;let n=o.rooms[s.roomId];if(n){const{id:i,numberOfUnread:d}=n;s.roomId===o.selectedRoomId?(o.processingMessages.has(s.id)||(await t(T.handleLinkPreviews,[s]),(a=o.messageMultiList.main)!=null&&a.contains(s.id)?e(C.replaceMessage,{targetMessageId:s.id,message:s}):e(C.pushMessage,s)),e(C.updateRoom,{id:i,updatedAt:s.createdAt,lastMessage:s,numberOfUnread:0}),t(T.updateLastRead,i),e(C.setState,{numberOfTotalMessages:o.numberOfTotalMessages+1})):e(C.updateRoom,{id:i,updatedAt:s.createdAt,lastMessage:s,numberOfUnread:s.senderId!==o.uid?d+1:d}),(r=n.pref)!=null&&r.hidden&&t(T.updateRoomPrefs,{roomId:i,prefs:{hidden:!1}}),t(T.aggregateRoomsAndFolders)}else await t(T.fetchRoom,s.roomId),n=o.rooms[s.roomId]},async[T.loadMessages]({state:o,commit:e,dispatch:t},{roomId:s,beforeMessageId:n,afterMessageId:a,targetMessageId:r}){const i=r?`/rooms/${s}/messages/v3/${r}`:a?`/rooms/${s}/messages/v3/${a}`:`/rooms/${s}/messages/v3`;if(o.isRequesting[i]||o.messageMultiList.numberOfMessages()>=o.numberOfTotalMessages&&o.numberOfTotalMessages!==-1)return;const{data:{result:d}}=await o.axios.get(i,{params:r?{before:15,after:15}:n?{limit:30,beforeMessage:n}:a?{after:30}:{limit:30}}),{data:m,totalCount:g}=d;a&&m.shift();const h={};for(const A of m){const w=A.sender._id;h[w]||(h[w]=new ke(A.sender))}e(C.updateField,{key:"users",value:h});const v=new Qf(m),p=v.array();return await t(T.handleLinkPreviews,p),e(n?C.unshiftMessageLinkedList:a?C.concateMessageLinkedList:C.insertMessageLinkedList,v),g>o.numberOfTotalMessages&&e(C.setState,{numberOfTotalMessages:g}),m},async[T.fetchRoom]({state:o,commit:e},t){const{data:{result:s}}=await o.axios.get(`/rooms/${t}`),n=new ze(s,o.uid),a={};a[n.id]=n,e(C.updateField,{key:"rooms",value:a});const r={};s.members.flatMap(i=>Array.isArray(i.members)?[...i.members,i]:[i]).forEach(i=>{r[i.id]||(r[i.id]=new ke(i))}),e(C.updateField,{key:"users",value:r})},async[T.updateLastRead]({state:o,commit:e},t){var r;const s=`/rooms/${t}/lastRead`;if(o.isRequesting[s])return;const n=o.rooms[t],{data:{result:a}}=await o.axios.put(s,{message:(r=n.lastMessage)==null?void 0:r.id});a&&e(C.updateRoom,{id:t,numberOfUnread:0})},async[T.handleRoomFromSocket]({commit:o,dispatch:e},t){const s={};s[t.id]=t,await o(C.updateField,{key:"rooms",value:s}),e(T.aggregateRoomsAndFolders)},async[T.handleLastReadFromSocket]({commit:o},e){o(C.updateLastRead,e)},async[T.sendMessage]({state:o,commit:e,dispatch:t},s){const{roomId:n}=s;if(!n)return;const a=ae.fromPayload(s,o.uid);if(!a)return;if(e(C.setMap,{mapName:"deliveringMessages",key:a.id,value:a}),e(C.pushMessage,a),s.messageType===R.Image){const{files:d}=s,m=await Promise.all(s.images.map((h,v)=>t(T.uploadImage,{image:h,file:d[v]}))),g=[];s.images.forEach((h,v)=>{o.imageCache.set(m[v].thumbnailUrl,h.thumbnailUrl);const{id:p,width:A,height:w}=h;g.push({originalUrl:m[v].originalUrl,thumbnailUrl:m[v].thumbnailUrl,width:A,height:w}),e(C.deleteField,{key:"uploadProgresses",value:`${p}-original`}),e(C.deleteField,{key:"uploadProgresses",value:`${p}-thumbnail`})}),s.images=g,delete s.files}else if(s.messageType===R.Video){const{file:d,video:m}=s,g=m.thumbnailFile;if(!g)return;const h=await Promise.all([t(T.uploadMedia,{id:g.id,file:g.file}),t(T.uploadMedia,{id:m.id,file:d})]);s.width=m.width,s.height=m.height,s.duration=m.duration,s.thumbnailUrl=h[0],s.originalUrl=h[1],o.imageCache.set(h[0],m.thumbnailUrl),delete s.file,e(C.deleteField,{key:"uploadProgresses",value:m.id})}else if(s.messageType===R.File){const{file:d}=s,m=await t(T.uploadMedia,{id:a.id,file:d});s.originalUrl=m,delete s.file,e(C.deleteField,{key:"uploadProgresses",value:a.id})}else if(s.messageType===R.Audio){const{file:d}=s,m=await t(T.uploadMedia,{id:a.id,file:d});s.originalUrl=m,delete s.file,e(C.deleteField,{key:"uploadProgresses",value:a.id})}const{data:{result:r}}=await o.axios.post(`/rooms/${n}/message`,s),i=ae.fromRaw(r);if(i)return e(C.setMap,{mapName:"processingMessages",key:i.id,value:i}),e(C.deleteMap,{mapName:"deliveringMessages",key:a.id}),await t(T.handleLinkPreviews,[i]),i.roomId===o.selectedRoomId?e(C.replaceMessage,{message:i,targetMessageId:a.id}):e(C.updateRoom,{id:i.roomId,updatedAt:i.createdAt,lastMessage:i}),e(C.deleteMap,{mapName:"processingMessages",key:i.id}),i},async[T.batchSendMessage]({state:o},e){await o.axios.post("/messages/batch",e)},async[T.recallMessage]({state:o,commit:e},t){var i;const{roomId:s}=t;if(!s)return;const{data:{result:n}}=await o.axios.post(`/rooms/${s}/message`,t),a=ae.fromRaw(n);if(!a)return;const r=o.rooms[`${s}`];r&&((i=r.lastMessage)==null?void 0:i.id)===a.id&&e(C.updateRoom,{id:s,lastMessage:a}),e(C.replaceMessage,{targetMessageId:a.id,message:a})},async[T.uploadMedia]({state:o,commit:e},{id:t,file:s}){const n=new FormData;n.append("file",s);const{data:{result:{_id:a}}}=await o.axios.post("/files/chatserver-upload",n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:r=>{const{total:i}=r;i&&e(C.updateField,{key:"uploadProgresses",value:{[t]:r.loaded/i}})}});return`${o.config.domain}/files/chatserver-upload/${a}`},async[T.uploadImage]({dispatch:o},{image:e,file:t}){if(t.size>1024*1024)try{const n=await fs(t,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),a=await Promise.all([o(T.uploadMedia,{id:`${e.id}-original`,file:t}),o(T.uploadMedia,{id:`${e.id}-thumbnail`,file:n})]);return{originalUrl:a[0],thumbnailUrl:a[1]}}catch(n){console.error(n)}const s=await o(T.uploadMedia,{id:`${e.id}-original`,file:t});return{originalUrl:s,thumbnailUrl:s}},async[T.fetchLinkPreview](o,e){const{data:t}=await De.get(encodeURI(`https://url.imkit.io/?url=${e}`));return t},async[T.handleLinkPreviews]({state:o,commit:e,dispatch:t},s){const n=Array.from(new Set(s.flatMap(i=>(i==null?void 0:i.urls)||[]).filter(i=>!o.linkPreviews[i])));if(n.length===0)return;const a={};(await Promise.allSettled(n.map(i=>t(T.fetchLinkPreview,i)))).forEach((i,d)=>{i.status==="fulfilled"&&(a[n[d]]=i.value)}),e(C.updateField,{key:"linkPreviews",value:a})},async[T.fetchVideoBlob]({state:o},e){const{data:t}=await o.axios.get(e,{responseType:"blob"});return t},async[T.navigateToMessage]({state:o,commit:e,dispatch:t},s){var n;(n=o.messageMultiList.main)!=null&&n.contains(s)?e(C.setState,{navigationTargetId:s}):(await t(T.loadMessages,{roomId:o.selectedRoomId,targetMessageId:s}),await e(C.setState,{navigationTargetId:s}))},async[T.updateRoomPrefs]({state:o,commit:e,dispatch:t},{roomId:s,prefs:n}){await o.axios.post(`/roomPrefs/${s}`,n);const a=o.rooms[s];a&&(e(C.updateRoom,{id:s,pref:{...a.pref,...n}}),t(T.aggregateRoomsAndFolders))},async[T.fetchPrefs]({state:o,commit:e}){const{data:{result:t}}=await o.axios.get("/me/pref"),s={},n=[],a={},r={},i={};for(const d of t)if(d.key==="folders-meta")for(const m of d.data)a[m.key]=m.name,n.push(m.key);else{if(d.key==="blackList")continue;r[d.key]=d.data.children.map(m=>m.id)}for(const d of n){s[d]=new Re(d,a[d],r[d]||[]);for(const m of r[d]||[])i[m]=!0}e(C.setState,{folders:s,sortedFolderIds:n,roomIdsInFolders:i})},async[T.fetchRoomsInFolders]({state:o,dispatch:e}){const t=Object.keys(o.roomIdsInFolders).length;for(;o.numberOfFetchedRooms<t;)await e(T.fetchRooms,{pageSize:200});const s=ps(6),n=Object.keys(o.roomIdsInFolders).filter(a=>!o.rooms[a]).map(a=>s(()=>e(T.fetchRoom,a)));await Promise.allSettled(n)},async[T.updatePref]({state:o},{key:e,value:t}){return await o.axios.post(`/me/pref/${e}`,t)},async[T.deletePref]({state:o},e){return await o.axios.delete(`/me/pref/${e}`)},async[T.updateFolder]({state:o,dispatch:e,commit:t},{folderKey:s,name:n}){const a=Object.keys(o.selectedRoomIdsForCreateFolder).filter(i=>o.selectedRoomIdsForCreateFolder[i]);await e(T.updatePref,{key:"folders-meta",value:o.sortedFolderIds.map(i=>o.folders[i]).filter(i=>!!i&&i.id!==s).map(i=>({key:i.id,name:i.name})).concat([{key:s,name:n}]).sort((i,d)=>i.key.localeCompare(d.key))}),await e(T.updatePref,{key:s,value:{children:a.map(i=>({id:i,type:"room"}))}}),o.folders[s]&&t(C.updateField,{key:"roomIdsInFolders",value:o.folders[s].roomIds.reduce((i,d)=>(i[d]=!1,i),{})});const r=new Re(s,n,a);t(C.updateField,{key:"folders",value:{[s]:r}}),t(C.updateField,{key:"roomIdsInFolders",value:a.reduce((i,d)=>(i[d]=!0,i),{})}),t(C.setState,{sortedFolderIds:[...new Set([...o.sortedFolderIds,s])],selectedRoomIdsForCreateFolder:{}}),e(T.aggregateRoomsAndFolders)},async[T.removeFolder]({state:o,dispatch:e},t){await e(T.deletePref,t),await e(T.updatePref,{key:"folders-meta",value:o.sortedFolderIds.map(s=>o.folders[s]).filter(s=>!!s&&s.id!==t).map(s=>({key:s.id,name:s.name}))}),e(T.handlePrefDeleteFromSocket)},async[T.handlePrefChangeFromSocket]({state:o,commit:e,dispatch:t},s){const{key:n,data:a}=s;if(n==="folders-meta"){const r={},i=[];for(const{key:d,name:m}of a){const g=o.folders[d]||new Re(d,m,[]);r[d]=g,i.push(d)}e(C.setState,{folders:r,sortedFolderIds:i})}else{const{id:r,name:i}=o.folders[n];if(r){const d=a.children.map(g=>g.id),m=new Re(r,i,d);e(C.updateField,{key:"folders",value:{[n]:m}}),e(C.updateField,{key:"roomIdsInFolders",value:d.reduce((g,h)=>(g[h]=!0,g),{})})}}t(T.aggregateRoomsAndFolders)},async[T.handlePrefDeleteFromSocket]({state:o,commit:e,dispatch:t},s){const n=o.folders[s];if(!n)return;const a={};for(const r of n.roomIds)a[r]=!1;e(C.deleteField,{key:"folders",value:s}),e(C.updateField,{key:"roomIdsInFolders",value:a}),e(C.setState,{sortedFolderIds:o.sortedFolderIds.filter(r=>r!==s)}),t(T.aggregateRoomsAndFolders)},async[T.aggregateRoomsAndFolders]({state:o,commit:e}){const t=Object.values(o.rooms).filter(s=>{var n;return!o.roomIdsInFolders[s.id]&&s.lastMessage!==null&&!((n=s.pref)!=null&&n.hidden)}).sort((s,n)=>{var a,r,i;return((a=s.pref)==null?void 0:a.sticky)===((r=n.pref)==null?void 0:r.sticky)?n.updatedAt-s.updatedAt:(i=s.pref)!=null&&i.sticky?-1:1});e(C.setState,{sortedRooms:t})},async[T.removeMembers]({state:o,commit:e},{roomId:t,uids:s}){var a;if(o.rooms[t]&&(await o.axios.post(`/rooms/${t}/delete/members`,{systemMessage:!0,members:s}),s.includes(o.uid))){e(C.deleteRoom,t);const r=(a=o.sortedRooms.find(i=>i.numberOfUnread===0))==null?void 0:a.id;r&&e(C.setState,{selectedRoomId:r})}},async[T.handleTypingFromSocket]({state:o,commit:e},t){const{room:s,sender:n}=t;if(s!==o.selectedRoomId||n===o.uid)return;const a=o.isTyping[n];a!==void 0&&clearTimeout(a);const r=setTimeout(()=>{e(C.deleteField,{key:"isTyping",value:n})},6e3);e(C.updateField,{key:"isTyping",value:{[n]:r}})},async[T.insertUnreadMessage]({state:o,commit:e}){var r;const t=o.rooms[o.selectedRoomId];if(!t)return;const s=t.lastReadMessageId[o.uid];if(!s)return;const n=(r=o.messageMultiList.main)==null?void 0:r.finds(s);if(!n)return;const a=ae.fromPayload({roomId:o.selectedRoomId,messageType:R.Announcement,message:me.global.t("unreadMessages"),createdAtMS:n.createdAt+1},o.uid);a&&e(C.pushMessage,a)},async[T.translate]({state:o},e){if(o.translationCache.has(e))return o.translationCache.get(e)||e;let t=navigator.language.split("-")[0];const s={am:"am",ar:"ar",eu:"eu",bn:"bn","en-gb":"en-GB","pt-br":"pt-BR",bg:"bg",ca:"ca",chr:"chr",hr:"hr",cs:"cs",da:"da",nl:"nl",en:"en",et:"et",fil:"fil",fi:"fi",fr:"fr",de:"de",el:"el",gu:"gu",iw:"iw",hi:"hi",hu:"hu",is:"is",id:"id",it:"it",ja:"ja",kn:"kn",ko:"ko",lv:"lv",lt:"lt",ms:"ms",ml:"ml",mr:"mr",no:"no",pl:"pl","pt-pt":"pt-PT",ro:"ro",ru:"ru",sr:"sr","zh-cn":"zh-CN",sk:"sk",sl:"sl",es:"es",sw:"sw",sv:"sv",ta:"ta",te:"te",th:"th","zh-tw":"zh-TW",tr:"tr",ur:"ur",uk:"uk",vi:"vi",cy:"cy"};s[navigator.language.toLowerCase()]&&(t=s[navigator.language.toLowerCase()]);const n=await fetch("https://translation.googleapis.com/language/translate/v2",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:new URLSearchParams({q:e,key:o.config.translationApiKey,target:t}),redirect:"follow"}).then(a=>a.json()).then(a=>{var r;return(r=a.data)==null?void 0:r.translations[0].translatedText});return o.translationCache.set(e,n),n},async[T.searchRooms]({state:o,commit:e},t){if(o.isRequesting[ve.Search])return;const s=Object.values(ge),{data:{result:n}}=await o.axios.post(ve.Search,{type:s,keyword:t}),a={},r={},i={};for(const g of s)n[g].forEach(h=>{a[h._id]=new ze(h,o.uid),i[g]||(i[g]=[]),i[g].push(a[h._id]);for(const v of h.members)r[v.id]||(r[v.id]=new ke(v))});for(const g of Object.values(o.folders))g.name.includes(t)&&(i[ge.RoomPrefFolder]||(i[ge.RoomPrefFolder]=[]),i[ge.RoomPrefFolder].push(g));const d=Object.keys(i),m=d.length>0?d[0]:ge.RoomName;e(C.updateField,{key:"rooms",value:a}),e(C.updateField,{key:"users",value:r}),e(C.setState,{searchRooms:i,searchType:m,searchKeyword:t})},async[T.subscribe]({state:o}){if(!o.config.firebaseConfig||!o.config.firebaseVapidKey||await Notification.requestPermission()!=="granted")return;const t=ms(o.config.firebaseConfig),s=gs(t),n=await hs(s,{vapidKey:o.config.firebaseVapidKey});if(!n)return;let a=localStorage.getItem("imkit-deviceId");a||(a=Ke(),localStorage.setItem("imkit-deviceId",a)),await o.axios.post(ve.Subscribe,{type:"fcm",token:n,deviceId:a})},async[T.unsubscribe]({state:o}){let e=localStorage.getItem("imkit-deviceId");e||(e=Ke(),localStorage.setItem("imkit-deviceId",e)),await o.axios.post(ve.Unsubscribe,{type:"fcm",deviceId:e})},async[T.removeRoomFromFolder]({state:o,commit:e,dispatch:t},s){if(!o.roomIdsInFolders[s])return;const n=o.folders[o.selectedFolderId];if(!n)return;const a=n.id,r=n.roomIds.filter(d=>d!==s);await t(T.updatePref,{key:a,value:{children:r.map(d=>({id:d,type:"room"}))}});const i=new Re(a,n.name,r);e(C.updateField,{key:"folders",value:{[a]:i}}),e(C.updateField,{key:"roomIdsInFolders",value:{[s]:!1}}),t(T.aggregateRoomsAndFolders)},async[T.addRoomToFolder]({state:o,commit:e,dispatch:t},{roomId:s,folderId:n}){const a=o.folders[n];if(!a)return;const r=Array.from(new Set([...a.roomIds,s]));await t(T.updatePref,{key:n,value:{children:r.map(d=>({id:d,type:"room"}))}});const i=new Re(n,a.name,r);e(C.updateField,{key:"folders",value:{[n]:i}}),e(C.updateField,{key:"roomIdsInFolders",value:{[s]:!0}}),t(T.aggregateRoomsAndFolders)},async[T.toggleNotification]({state:o,commit:e},t){const s=o.rooms[t];s&&(s.muted?await o.axios.delete(`/me/mute/${t}`):await o.axios.post(`/me/mute/${t}`),e(C.updateRoom,{id:t,muted:!s.muted}))},async[T.translateMessage]({state:o,commit:e,dispatch:t},s){if(o.config.translationApiKey&&s.type===R.Text&&s.senderId!==o.uid){const n=s.text;try{const a=await t(T.translate,n);s.translatedText=a!==n?a:null,e(C.replaceMessage,{message:s,targetMessageId:s.id})}catch(a){console.error(a)}}},async[T.blockUser]({state:o,commit:e},{roomId:t,uid:s}){await o.axios.post(`/blockStatus/room/${t}/${s}`),e(C.updateField,{key:"blockedUsers",value:{[s]:!0}})},async[T.unblockUser]({state:o,commit:e},{roomId:t,uid:s}){await o.axios.delete(`/blockStatus/room/${t}/${s}`),e(C.deleteField,{key:"blockedUsers",value:s})},async[T.getBlockList]({state:o,commit:e},t){const s=await o.axios.get(`/blockStatus/room/${t}`),n={};for(const a of s.data.result.data)a.blockee&&(n[a.blockee.id]=!0);e(C.updateField,{key:"blockedUsers",value:n})},async[T.hideMessagesFromUserInRoom]({state:o},e){await o.axios.post("/messages/user-delete/all-in-room",{room:e})}},Gf={doubleCount:o=>o.count*2,roomsInSelectedFolder:o=>{const{selectedFolderId:e}=o,t=o.folders[e];return t?t.roomIds.map(n=>o.rooms[n]).filter(n=>o.roomTag?n&&n.roomTags.includes(o.roomTag):n).sort((n,a)=>{var r,i,d;return((r=n.pref)==null?void 0:r.sticky)===((i=a.pref)==null?void 0:i.sticky)?a.updatedAt-n.updatedAt:(d=n.pref)!=null&&d.sticky?-1:1}):[]}},Xf={[C.increment](o){o.count++},[C.setState](o,e){Object.assign(o,e)},[C.updateField](o,e){const{key:t,value:s}=e;Object.assign(o[t],s)},[C.deleteField](o,e){const{key:t,value:s}=e;delete o[t][s]},[C.updateRoom](o,e){const{id:t}=e,s=o.rooms[t];s&&Object.assign(s,e)},[C.updateLastRead](o,e){const{roomId:t,uid:s,messageId:n}=e,a=o.rooms[t];a&&(a.lastReadMessageId[s]=n)},[C.pushMessage](o,e){var t;e.roomId===o.selectedRoomId&&((t=o.messageMultiList.main)==null||t.append(e))},[C.replaceMessage](o,e){var n;const{targetMessageId:t,message:s}=e;s.roomId===o.selectedRoomId&&((n=o.messageMultiList.main)==null||n.replace(t,s))},[C.clearChatRoom](o){o.messageMultiList=new Mt,o.numberOfTotalMessages=-1,o.replyId="",o.navigationTargetId="",o.isTyping={},o.isSearchInRoomMode=!1,o.messageSearchKeyword="",o.blockedUsers={}},[C.deleteRoom](o,e){delete o.rooms[e],delete o.roomIdsInFolders[e],delete o.selectedRoomIdsForCreateFolder[e],o.sortedRooms=o.sortedRooms.filter(t=>t.id!==e)},[C.setMap](o,e){const{mapName:t,key:s,value:n}=e;o[t].set(s,n)},[C.deleteMap](o,e){const{mapName:t,key:s}=e;o[t].delete(s)},[C.insertMessageLinkedList](o,e){o.messageMultiList.insert(e),o.messageMultiList.merge()},[C.concateMessageLinkedList](o,e){o.messageMultiList.concate(e),o.messageMultiList.merge()},[C.unshiftMessageLinkedList](o,e){o.messageMultiList.unshift(e),o.messageMultiList.merge()}},Ft={state:St,mutations:Xf,getters:Gf,actions:qf,namespaced:!0},Wf=[],xe=vs({plugins:Wf,modules:{imkit:Ft}});te.extend(ys);te.extend(ws);var R=(o=>(o.Text="text",o.Image="image",o.Sticker="sticker",o.Video="video",o.File="file",o.Template="template",o.Flex="flex",o.Location="location",o.Audio="audio",o.Recall="recall",o.JoinRoom="joinRoom",o.LeaveRoom="leaveRoom",o.AddMember="addMember",o.DeleteMember="deleteMember",o.AddMembers="addMembers",o.Announcement="announcement",o.Typing="typing",o))(R||{});class ae{constructor(e){$(this,"id");$(this,"roomId");$(this,"senderId");$(this,"type");$(this,"createdAt");$(this,"updatedAt");$(this,"groupId");$(this,"dateId");$(this,"prev",null);$(this,"next",null);const{_id:t,room:s,sender:n,messageType:a,createdAtMS:r,updatedAtMS:i,extra:d}=e;this.id=t,this.roomId=s,this.senderId=(n==null?void 0:n._id)||"",a==="line"?this.type=d.type:this.type=a,this.createdAt=r,this.updatedAt=i,this.groupId=`${te(r).startOf("minute").unix()}-${this.senderId}`,this.dateId=te.tz(r).startOf("day").unix()}_string(e,t){var n,a;let s=me.global.t("message");switch(this.type){case"image":s=me.global.t("image");break;case"sticker":s=me.global.t("sticker");break;case"video":s=me.global.t("video");break;case"file":s=me.global.t("file");break;case"location":s=me.global.t("location");break;case"audio":s=me.global.t("audio");break;case"recall":return this.senderId===e?me.global.t("youUnsentMessage"):me.global.t("someoneUnsentMessage",[((n=t[this.senderId])==null?void 0:n.nickname)??""])}return this.senderId===e?me.global.t("youSent",[s]):me.global.t("someoneSent",[((a=t[this.senderId])==null?void 0:a.nickname)??"",s])}get string(){const{state:{imkit:{uid:e,users:t}}}=xe;return this._string(e,t)}get isIncoming(){return!this.isOutgoing}get isOutgoing(){var s;const{state:{imkit:{rooms:e,uid:t}}}=xe;return this.senderId===t||((s=e[this.roomId])==null?void 0:s.isOutgoingGroupSender[this.senderId])}get isSystem(){return new Set(["recall","joinRoom","leaveRoom","addMember","deleteMember","addMembers","announcement"]).has(this.type)}static fromRaw(e){if(!e)return null;switch(e.messageType){case"text":return new He(e);case"image":return new Jf(e);case"sticker":return new vt(e);case"video":return new Yf(e);case"file":return new s3(e);case"template":return new Zf(e);case"flex":return new e3(e);case"location":return new t3(e);case"audio":return new o3(e);case"announcement":return new He(e);case"addMember":return new tt(e);case"deleteMember":return new tt(e);case"addMembers":return new tt(e);case"line":switch(e.extra!=="object"&&(e.extra=JSON.parse(e.extra)),e.extra.type){case"sticker":return new vt(e);default:return new ae(e)}default:return new ae(e)}}static fromPayload(e,t){const s=Date.now(),{roomId:n}=e,a={_id:Ke(),room:n,sender:{_id:t},createdAtMS:s,updatedAtMS:s,...e};return ae.fromRaw(a)}}const Ee=class Ee extends ae{constructor(t){super(t);$(this,"text");$(this,"translatedText");$(this,"replyId");$(this,"urls");const{message:s,reply:n}=t;this.text=s??"",this.translatedText=null,this.replyId=(n==null?void 0:n._id)??null;try{this.urls=Array.from(new Set(Ee.autolinker.parse(s).map(a=>typeof a.getUrl=="function"?a.getUrl():"").filter(a=>a!=="")))}catch(a){this.urls=[],console.log(t),console.error(a)}}get string(){return bs(this.html).text()}get html(){return Ee.autolinker.link(this.text.replaceAll(`
`,"<br>"))}static linkfy(t){try{return Ee.autolinker.link(t.replaceAll(`
`,"<br>"))}catch(s){return console.error(s),t}}};$(Ee,"autolinker",new ks({className:"underline",email:!1,phone:!1,stripPrefix:!1,stripTrailingSlash:!1,mention:"instagram",replaceFn:function(t){switch(t.getType()){case"url":return!0;case"mention":{if(!xe)return`@${t.getMention()}`;const s=t.getMention(),n=xe.state.imkit.users[s];return n?`<span class="cursor-pointer text-blue-500" data-uid="${s}">@${n.nickname}</span>`:`@${t.getMention()}`}}}}));let He=Ee;class Jf extends ae{constructor(t){super(t);$(this,"images");const{images:s,width:n,height:a,thumbnailUrl:r,originalUrl:i}=t;s&&s.length>0?this.images=s:this.images=[{id:i,width:n,height:a,thumbnailUrl:r,originalUrl:i}]}}class vt extends ae{constructor(t){super(t);$(this,"stickerId");$(this,"stickerUrl");const{sticker:s,extra:n}=t;s?As(s)?(this.stickerId="",this.stickerUrl=s):(this.stickerId=s,this.stickerUrl=""):(this.stickerId="",this.stickerUrl=`https://stickershop.line-scdn.net/stickershop/v1/sticker/${n.stickerId}/ios/sticker.png`)}}class Yf extends ae{constructor(t){super(t);$(this,"video");const{id:s,width:n,height:a,thumbnailUrl:r,originalUrl:i,duration:d,thumbnailFile:m,video:g}=t;g?this.video=g:this.video={id:s||i,width:n,height:a,thumbnailUrl:r,originalUrl:i,duration:d,thumbnailFile:m}}}var Te=(o=>(o.Buttons="buttons",o.Confirm="confirm",o.Carousel="carousel",o.ImageCarousel="image_carousel",o))(Te||{});class Zf extends ae{constructor(t){super(t);$(this,"template");$(this,"templateType");const{template:s}=t;try{this.template=typeof s=="object"?s:JSON.parse(s);const{type:n}=this.template;this.templateType=n}catch(n){console.log(t),console.error(n),this.template={},this.templateType="buttons"}}}var rt=(o=>(o.Bubble="bubble",o.Carousel="carousel",o))(rt||{});class e3 extends ae{constructor(t){super(t);$(this,"contents");$(this,"flexType");const{contents:s}=t;try{this.contents=typeof s=="object"?s:JSON.parse(s);const{type:n}=this.contents;this.flexType=n}catch(n){console.log(t),console.error(n),this.contents={},this.flexType="bubble"}}}class t3 extends ae{constructor(t){super(t);$(this,"address");$(this,"latitude");$(this,"longitude");const{message:s,latitude:n,longitude:a}=t;this.address=s,this.latitude=n,this.longitude=a}}class tt extends ae{constructor(t){super(t);$(this,"members");switch(t.messageType){case"addMember":this.members=[new ke(t.member)];break;case"deleteMember":this.members=t.extra.members.map(s=>new ke(s));break;case"addMembers":this.members=t.extra.invitees.map(s=>new ke(s));break;default:this.members=[]}}}class s3 extends ae{constructor(t){super(t);$(this,"url");$(this,"mimeType");$(this,"fileName");$(this,"bytes");$(this,"fileExtension");const{originalUrl:s,extra:n}=t;this.url=s;const{mimeType:a,fileName:r,bytes:i,fileExtension:d}=typeof n=="object"?n:JSON.parse(n);this.mimeType=a,this.fileName=r,this.bytes=i,this.fileExtension=d}}class o3 extends ae{constructor(t){super(t);$(this,"url");$(this,"mimeType");$(this,"fileName");$(this,"bytes");$(this,"fileExtension");$(this,"duration");const{originalUrl:s,extra:n,duration:a}=t;this.url=s;const{mimeType:r,fileName:i,bytes:d,fileExtension:m}=typeof n=="object"?n:JSON.parse(n);this.mimeType=r,this.fileName=i,this.bytes=d,this.fileExtension=m,this.duration=a}}var Qe=(o=>(o.Direct="direct",o.Group="group",o))(Qe||{});class ze{constructor(e,t){$(this,"id");$(this,"name");$(this,"type");$(this,"createdAt");$(this,"updatedAt");$(this,"memberIds");$(this,"isOutgoingGroupSender");$(this,"coverUrl");$(this,"lastMessage");$(this,"numberOfUnread");$(this,"lastReadMessageId");$(this,"pref");$(this,"roomTags");$(this,"extra");$(this,"muted",!1);$(this,"isSuperuser",!1);var D;const{_id:s,name:n,roomType:a,createdTimeMS:r,lastMessage:i,members:d,cover:m,unread:g,memberProperties:h,extParams:v,pref:p,roomTags:A,muted:w,isSuperuser:E}=e;if(this.id=s,this.name=n,this.type=a||"direct",this.createdAt=r,this.lastMessage=ae.fromRaw(i),this.updatedAt=((D=this.lastMessage)==null?void 0:D.createdAt)??r,this.memberIds=[],this.isOutgoingGroupSender={},d.forEach(z=>{this.memberIds.push(z._id),z.clientType==="group"&&z.members.some(L=>L._id===t)&&z.members.forEach(L=>{this.isOutgoingGroupSender[L._id]=!0})}),this.coverUrl=m??"",this.numberOfUnread=g??0,this.lastReadMessageId={},this.pref=p,this.roomTags=A??[],this.muted=w,h)for(const{client:z,lastRead:L}of h)this.lastReadMessageId[z]=L;try{this.extra=JSON.parse(v)}catch{this.extra={}}a==="custom"&&(this.type=this.extra.roomType),this.isSuperuser=E??!1}get memberIdsWithoutMeAndMyGroup(){const{state:{imkit:{uid:e,users:t}}}=W();return this.memberIds.filter(s=>s!==e&&!t[s].memberIds[e])}get displayName(){var s;const{state:{imkit:{uid:e,users:t}}}=W();if(this.name)return this.name;if(this.memberIdsWithoutMeAndMyGroup.length===0){const{t:n}=Me();return n("emptyChat")}else{if(this.type=="direct")return(s=this.memberIdsWithoutMeAndMyGroup.map(n=>t[n])[0])==null?void 0:s.nickname;if(this.type=="group")return this.memberIds.filter(n=>n!==e).map(n=>t[n].nickname).join(", ")}return""}get avatars(){const{state:{imkit:{uid:e,users:t}}}=W();return this.coverUrl&&this.coverUrl.length>0?[{url:this.coverUrl,name:this.displayName??""}]:this.memberIdsWithoutMeAndMyGroup.length===0?[{url:t[e].avatarUrl??"",name:t[e].nickname??""}]:this.type=="direct"?this.memberIdsWithoutMeAndMyGroup.map(s=>({url:t[s].avatarUrl??"",name:t[s].nickname??""})):this.type=="group"?this.memberIds.map(s=>t[s]).sort((s,n)=>s.id===e?1:n.id===e?-1:(n.avatarUrl??"").length-(s.avatarUrl??"").length).map(s=>({url:s.avatarUrl??"",name:s.nickname??""})):[{url:"",name:this.displayName??""}]}}const n3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADQUlEQVR4nO2bu2sUURSHz4CISlR8pNi4e24S151zx0ez2XMmD1gROxEVEcRHIYJYCPaCna9CBBULK/uUAUX0D1Ax4gpa2EUbg6CkMaiIyjWKSdjsIzs7z/vBVFvsnW9/587cc+8CWCwWi8ViscQL5cpu1PJQaZ5Ad3gk6vHEijwN7VCaZ5WWX+ZCkm/9mg9EPa54UK2uUFqe/5MzT9J3pfkgZB0kvrRYjpX0FyQpzyWlvqBMJ0mp6ipF8rqRnExLUsS3WpGTSUno8R6l5Wc7gjIjqVjkdUg81a6cBZKocgjSCmq+t1w5qZdUcP39ncpJraRcqbwZST4EJSh1khTJeJByUiUJtZzohpxUSCq4I32K+FM3BSVZkjPXwuiunPmSsOSPQlLALpdW/YsnICkMDpbXI/HTMAUh8QNIEoOhSuLZfvKrod6g646sNd29gpbzqPmq0nIbSS6i5tMDJdkVF0mo+VWr4wkCxywKleZHpv3ZJNJTqOUGUjkXjST+gVqueJ63MhQzWPJHkfhZ2wMl+aI0X8uVy2vCkoRa3iqqDIcixoAkZ5p1+JpPklLr18MKGknS8qRDOaZVcrfXq/ZAWKArhwP7ZYmnTTu1G0lCkveo/b0QAU67Xb4m8Z8Z8Hxu2BdqN0kk43nP3wgR4sRREmr+GKdlhBMnSUh8v9kTMpOSUMuMeWhAjHEik0T8eOv2oQIkAAc13wlKkiL+3PTppvmk+V5IEE6YkpKKY9ZggZUb8XRSSihCSfKy0bIkqThBlptZZEIKcYJLEs/mt/lbIG0Ui2O9ZrINJkV8HdIE7hzboLRMBjgXvYO0gAHL+XeZM4qQkq3jWt2b7LTcPDkFaU0OktT+zEkdTdx8AdKYHCSpmc87fgUgvglpTE7uv5yOXgGQ5DJkQM6yJSHxOUhpWS1FW+WGxPsgA8lZVj8JNX8NdXciJnJalpSYvXQMXk5Lksy5RciwnIaSzA5u7LuHfVTZ1OGE3CoLJu65E2HsQ8aT0yBJlbMQZ/rCS85iHLPNDXEmn/dXK80vIpCTDBTJ0aXkmGRB1kHPP27lNKDXq/YokjfzJE3a5NST5FaOocdHzL//uhpZi8VisVgsFosFYs5vllNJQwrDPNkAAAAASUVORK5CYII=",a3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVR4nO3WPQrCMBiA4W+yh/BcniABFyNIsrsnOPRS/kz1KlJ35SsdOkhtRaGp7wOB0pZ3CGlSEQAAAAAAAAAAJsC5sjA+bU2IZxviXUd77fTZrHrr3WFpQ7zakB6vhvGp0ndm0XOuLPpi3eiQmZx6T3SZvIt1opvce2J9ugwOhnjKvScmxHpEsM69J2OCNsRb7j35uyVtQ3Tf3BSm3pP2QK8GxKrVfr/IvdfQQ7sv+smPwpR7DZ0dXRL6HehG0WwWPh313uCZy6gHAAAAAAAAAID8wBNoenSqsgBAfQAAAABJRU5ErkJggg==",r3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEOElEQVR4nO2bz2sUSRTHe6K7/jgIiyxozFQFHZ33OojoOO+NUchRA7q7Fw9ehM0ejR7iwt7UgwcNCOqfkL/Do7/BX+BlYTHir+hZYY3rzsjrnsiYVFfPD2e6OtQXGoaZ7p6qT7/36tWr6iDw8vLy8vLy8vLy8vLyck6l0pF1KqydVkB3NfAHjdzo4fhfI73SwHOjY7QnyLtGdta2KeDHPUJJOOizBp4Jcm050C843xwXgjxKIZ8ZAJz8QlJA9wYIqKGQrgTB8TVBXqSB3g8SUBPSkyLQyW0lGnEe1qDh6EEdwB8U8h0FNB2G4Y8eEFosFuhhsTw+7C0IbVZFD7qypMxdAQcY+4BOeUBoAYR8xwNCW+Cm9x4Q2t3MA0IPqNFLoPYWhB5Qw1sQ9i8X8i6GHlDDWxB6F2tkNR/zMQg9oIa3ILSVLHhRA99QQOeL5doxPcaodh/6KZiYWDsyUtsgZVxZi9NAJzTQ1Xidj/5b9S6mgB4qpD8iGJ32MaxuUcB/KeS/Vx0gBfx4tFw9HHwfFVYNIIX0rzz1zFc9HLWaFwq4ErigrGHo5Qfw/WGobg5ckVuWQ3dLJdqU1uZKpfKDgupRDXRNId9WQO8U8Kf4oHfynQaeVbtqB4MgGFodgID+KZUO/Zy20UKX+axA6MBdF+QauTa3gBTSR40H9trbSb8poOc9WOfzUaRf8wroT0sTC7IrRCPXv8N/1SXB7Gi4zxqOBn4qMSURDvBcH/5zrm1IWQMqhvyLpW0X+ma1QOecB6SQniQ9SYk5JreSeCXTjmgPZLqlvGxOUT4afq/bHo4bgICmjW3SE+vNAZluyn7KFohTps7H39HU0nkygZVrDefNp45u2QGiz0kJoQzLpk63wmlp/2QrpObnyeXnCSSjJaVtMM0Q0M3kJHBlniOuYulDBCkJzpIU8KOV9+UFazKZoXtdNHeiejQB6KuUBz1pg9NMF94Y21I+MO4eoJCOG9sDdN1idV/jSqeSWlLifYFnndrEqSMLqu0zd4RvJ1/Di1JF7BSO1JOkfNKpu8cNkpIkDh7Q9rCiEtpjnWelxZm0IG4GT29tgKazALS1Utlobg8vplpfm5DagbN0v8SbyMZGFSVeHlCiiuXx4UFDyo2LLbOkU3Gxqf+BO6mkag3SHcJpH5IlSLsmDTyb2JGQf+/6vkhTXQ3zrkntqh3sU6IokF53nCg6qKGoTLrSJR9lMtVwURp4xhR/4reDupus7hjbXzSmEHl8G7Ikb0EizZuCaQukQrQU3Ua5Q+BopFsG93rWdTE/a0mB3VgwA16MXcUcT5YBfS3nJiSf9W6mLU7JiZKr4ypkXrTPgQqyiSF+F79nOHWNdCl3o1Y7kgK7OXC36VJI87mPOWmKlp6BZ0x5UnKs4QW5JrejVdCdhiT7jacldEsmm9HoFi8JvY1WMIAvNzPkttzpCzIGFAwMLQUoAAAAAElFTkSuQmCC",oe=(o,e)=>{const t=o.__vccOpts||o;for(const[s,n]of e)t[s]=n;return t},i3={},l3={viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",class:"text-zinc-600 dark:text-zinc-100"};function c3(o,e){return c(),u("svg",l3,e[0]||(e[0]=[l("circle",{cx:"25",cy:"25",r:"23",class:"fill-zinc-100 dark:fill-zinc-600"},null,-1),l("path",{d:`M33.71,32.29L26.42,25l7.29-7.29c0.39-0.39,0.39-1.03,0-1.42c-0.39-0.39-1.03-0.39-1.42,0L25,23.58l-7.29-7.29
        c-0.39-0.39-1.03-0.39-1.42,0c-0.39,0.39-0.39,1.03,0,1.42L23.58,25l-7.29,7.29c-0.39,0.39-0.39,1.03,0,1.42
        C16.49,33.9,16.74,34,17,34s0.51-0.1,0.71-0.29L25,26.42l7.29,7.29C32.49,33.9,32.74,34,33,34s0.51-0.1,0.71-0.29
        C34.1,33.32,34.1,32.68,33.71,32.29z`,class:"fill-current"},null,-1)]))}const Ie=oe(i3,[["render",c3]]),d3={class:"relative"},u3=["src"],m3={key:1,class:"flex h-[300px] w-[300px] items-center justify-center bg-gray-200 text-[150px] font-semibold text-gray-500 dark:bg-zinc-600 dark:text-gray-300"},Rt=B({__name:"AvatarModal",props:{url:{},name:{}},setup(o){const e=pe(),t=o,s=M(!1);s.value=t.url.length===0;const n=()=>{s.value=!0};return(a,r)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl overflow-hidden flex flex-col gap-3 max-w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",d3,[l("button",{class:"absolute right-2 top-2 ml-auto flex items-center justify-center rounded-full",onClick:r[0]||(r[0]=i=>k(e).closeAll())},[U(Ie,{class:"h-7 w-7"})]),s.value?(c(),u("div",m3,b(a.name&&a.name.length>0?a.name.charAt(0).toUpperCase():""),1)):(c(),u("img",{key:0,src:a.url,class:"h-[300px] w-[300px] object-cover",onError:n},null,40,u3))])]),_:1}))}}),g3=["src"],ue=B({__name:"AvatarView",props:{url:{},name:{}},setup(o){const e=o,t=M(!1);t.value=e.url.length===0;const s=()=>{t.value=!0};Ae(()=>[e.url,e.name],()=>{t.value=!1});const n=()=>{const{open:a}=he({component:Rt,attrs:{url:e.url,name:e.name}});a()};return(a,r)=>t.value?(c(),u("div",{key:1,class:"flex h-[50px] w-[50px] cursor-pointer items-center justify-center rounded-2xl bg-gray-200 text-xl font-semibold text-gray-500 dark:bg-zinc-600 dark:text-gray-300",onClick:de(n,["stop"])},b(a.name&&a.name.length>0?a.name.charAt(0).toUpperCase():""),1)):(c(),u("img",{key:0,src:a.url,class:"h-[50px] w-[50px] cursor-pointer rounded-2xl object-cover",onError:s,onClick:de(n,["stop"])},null,40,g3))}}),Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVR4nO3UQU7CUBSF4bcQGbsVYeAajO90A9wHa5B32YhO3BEkRgYkxggbgDTRxBGa0Nse5XzJnXXQk79pSiIicsGa6fIW5hsUP5w88037bPrrcqnbH8d+XvtsYpFni0k2X//25fu69p0a83Hng1Hqy9DjTnwZrxp8rsZ8nEtdEdZd5VJvzh4oIv8TCH5U30+DuwaCqiocCQRVVTgSCKqqcCQQVFXhSCCoqsKRQFBVhSOBoKoKRwJBVRWOBIKqKhwJBFVVOBIIqqpwJBBUVeFIIKiqwpFAUFWFI4GgqgpHgvl+6Kpfl80/4geX+kwzuNTH8MH3s8V1Nn8feizM3zB/uEp9uJsuRzB/Qqm7/sfWXVu2t7EiIiKSunIEhOq3p0W+CNEAAAAASUVORK5CYII=",h3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAEGAAABBgHN0zO8AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAoNJREFUOI2tlL9PU1EUxz/n9t1XBQelk7+ipChurp1k15TEmJLwQ9sGEwedjDvhD4AJB4mm5UdqpItC4o4TDO4oGgcjWwlGiLS3fcfh+ZpSCgnGM713bs7nfs+55xxRVf6neUcd5F/XbihmSFQHRDkPoMIWyCoSlAvD/kanOGlXmJ0nEfPctMIYYI64L0BYiHn26csM20cCs2+q103DvAeSQAV0RpEVqdmvAOq7pKBpkCdAQuGLENwujMQ3DwGz8ySM59ZDmLz1rZd7keFnx3IUOSvx+pyqDip80bpNzT2gQmtKMc9NR7Crm969VtijWboezdIV/Rdy7Fz57N0FeSfQZ6ybis4MRA/AGFDxrZebmCBoVVQ749ZqZ9xaq29igoCalwMqKPfHF6v9TaBihsJvnemUpkKvQm+7v5BjR1SfAyYwsaEmUFRvAUggy51qdpxJTFbCS0NG1IeXAGw8fM2hMqe7nVsDLgMIdAPkSy5qke971qaWMvzeD+xXH4dRLjYVhllBbQ85qcLTNoxRCRmRwh/ADfVdEuzHpQy/wd6MgnIl9wugOGJ72oGNmksioLDVVKgiHwCM6uBJFSKaDkGy2gQKwRIQqMjjfJGzh2Lgm8C3dv9oiXMgj4GGBI1yE1gY9jcQFoAEfr04OXlwhv1dm/J3barVNzmJ8anPAT0K86/G4p9CwX9H72GZnrpz6wJ9IrKsVS9byLHTKcvREudCmKaBzZi1qWhJHFgO+VL1mmLeC/QB26I6IzFZ2Q/CdjplXFIbmlaRJ0APsAnBnY7LIbLsPAlj3RTKfY5ZXwpznrXPjl1frTa+WO0Px0kHRLmggipsGWRVgkY5qlm7HQn8V/sDpc0NjXW+Pa0AAAAASUVORK5CYII=",p3={key:0},f3={class:"mb-3 flex items-center justify-between text-xl font-semibold text-gray-700 dark:text-gray-300"},v3={class:"mb-1 flex items-center justify-between text-xl text-gray-700 dark:text-gray-300"},A3=["placeholder"];const b3={class:"mb-1 mt-3 text-base"},k3={class:"divide-y rounded bg-gray-100 dark:bg-zinc-800"},y3={class:"grid grid-cols-6 gap-3 p-4"},w3=["onClick"],C3={class:"flex items-center justify-center gap-3 rounded p-3"},x3=["placeholder"],$3={class:"mt-5 flex gap-3"},T3=["disabled"],I3={key:1},M3={class:"mb-1 mb-5 flex min-w-[380px] items-center justify-between text-xl font-semibold text-gray-700 dark:text-gray-300"},S3={key:0,class:"mt-1 flex flex-wrap gap-2"},F3=["onClick"],R3={class:"flex items-center gap-3"},U3={class:"w-64 overflow-hidden truncate overflow-ellipsis whitespace-nowrap text-base text-black dark:text-[#F3F4F6]"},E3={class:"flex items-center gap-3"},B3=["onClick"],L3=["onClick"],_3={class:"mt-3"},O3={class:"text-[#60A5FA]"},z3={key:2},D3={class:"mb-2 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},P3=B({__name:"TagsModal",props:{roomId:{}},setup(o){const e=pe(),t=o,s=W(),n=M([]),a=M({}),r=M([]),i=M({}),d=M(""),m=M("#60a5fa"),g=M(!0),h=M("edit"),v=M(""),p=M(!1),A=M(""),w=M(-1),E=["#f43f5e","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#0ea5e9","#6366f1","#8b5cf6","#6b7280","#64748B","#78716c"],D=O=>{s.dispatch("imkit/updateRoomPrefs",{roomId:O,prefs:{tags:n.value,tagColors:a.value}})},z=s.state.imkit.rooms[t.roomId];z.pref&&(n.value=[...z.pref.tags],r.value=[...z.pref.tags],a.value={...z.pref.tagColors},i.value={...z.pref.tagColors},n.value.length>0&&(h.value="list",p.value=!1));const L=()=>{d.value&&(n.value.length>=5||(n.value.includes(d.value)||n.value.push(d.value),m.value.startsWith("#")&&(a.value[d.value]=m.value,d.value="")))},K=()=>{d.value&&m.value.startsWith("#")&&(n.value[w.value]=d.value,delete a.value[A.value],a.value[d.value]=m.value,d.value="")},Q=()=>{n.value=n.value.filter(O=>O!==v.value),delete a.value[v.value]},J=O=>{v.value=O,h.value="confirmDelete"},X=O=>{d.value=O,m.value=a.value[O]},V=()=>{m.value=m.value.replace(/[^#0-9a-fA-F]/g,""),m.value.charAt(0)!=="#"&&(m.value="#"+m.value)},H=()=>{h.value="edit",g.value=!0,d.value="",m.value="#60a5fa"},x=(O,_)=>{h.value="edit",g.value=!1,d.value=`${O}`,m.value=a.value[O],A.value=`${O}`,w.value=_},I=()=>{h.value="list",p.value=!1},G=()=>{p.value=!0};return(O,_)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 max-w-[420px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[h.value=="edit"?(c(),u("div",p3,[l("div",f3,[_[12]||(_[12]=l("div",null," ",-1)),ce(" "+b(g.value===!0?O.$t("createTag"):O.$t("editTag"))+" ",1),l("button",{class:"flex items-center justify-center",onClick:_[0]||(_[0]=Y=>k(e).closeAll())},[U(Ie,{class:"h-7 w-7"})])]),l("div",v3,[ne(l("input",{type:"text",class:"w-32 grow rounded-md bg-gray-100 p-2 text-base placeholder-gray-400 outline-none dark:bg-zinc-700 dark:placeholder-gray-400",placeholder:g.value===!0?O.$t("createTag"):O.$t("editTag"),onInput:_[1]||(_[1]=Y=>G()),"onUpdate:modelValue":_[2]||(_[2]=Y=>d.value=Y)},null,40,A3),[[$e,d.value]])]),(n.value.length>0,y("",!0)),l("div",null,[l("div",b3,b(O.$t("chooseColor")),1),l("div",k3,[l("div",y3,[(c(),u(j,null,re(E,Y=>l("div",{key:Y,class:"h-8 w-12 rounded",style:ee({backgroundColor:Y}),onClick:Se=>(m.value=Y,G())},null,12,w3)),64))]),l("div",C3,[l("div",{class:"h-8 w-12 rounded-md bg-white p-2 text-base",style:ee({backgroundColor:m.value})},"   ",4),ne(l("input",{type:"text",class:"w-50 h-8 grow rounded-md bg-gray-100 p-2 text-base placeholder-gray-400 outline-none dark:bg-zinc-700",placeholder:O.$t("inputTagPlaceholder"),maxlength:"7",pattern:"^#[0-9a-fA-F]{6}$","onUpdate:modelValue":_[4]||(_[4]=Y=>m.value=Y),onInput:_[5]||(_[5]=Y=>(G(),V()))},null,40,x3),[[$e,m.value]])])])]),l("div",$3,[l("button",{class:"h-10 grow rounded-lg border text-base dark:border-stone-400 dark:text-stone-400",onClick:_[6]||(_[6]=Y=>I())},b(O.$t("cancel")),1),l("button",{class:"h-10 w-[40%] grow rounded-lg bg-blue-400 text-base text-white disabled:cursor-not-allowed disabled:bg-gray-200 dark:disabled:bg-gray-700 dark:disabled:text-gray-500",disabled:!d.value||!m.value||!p.value,onClick:_[7]||(_[7]=()=>{g.value?L():K(),D(O.roomId),I()})},b(g.value==!0?O.$t("create"):O.$t("save")),9,T3)])])):y("",!0),h.value=="list"?(c(),u("div",I3,[l("div",M3,[_[13]||(_[13]=l("div",null," ",-1)),ce(" "+b(O.$t("tag"))+" ",1),l("button",{class:"flex items-center justify-center",onClick:_[8]||(_[8]=Y=>k(e).closeAll())},[U(Ie,{class:"h-7 w-7"})])]),n.value.length>0?(c(),u("div",S3,[(c(!0),u(j,null,re(n.value,(Y,Se)=>(c(),u("div",{key:Y,class:"flex min-w-[380px] items-center justify-between gap-1 overflow-hidden rounded-md bg-gray-200 p-3 text-base text-white dark:bg-zinc-600",onClick:Ve=>X(Y)},[l("div",R3,[l("div",{class:"circle-shadow h-4 w-4 rounded-full",style:ee({backgroundColor:a.value[Y]})},null,4),l("div",U3,b(Y),1)]),l("div",E3,[l("img",{width:"20",height:"20",class:"cursor-pointer",onClick:de(Ve=>x(Y,Se),["stop"]),src:"https://img.icons8.com/ios-glyphs/30/637289/pencil--v1.png"},null,8,B3),l("img",{width:"20",height:"20",src:Ut,class:"cursor-pointer",onClick:de(Ve=>J(Y),["stop"])},null,8,L3)])],8,F3))),128))])):y("",!0),l("div",_3,[l("div",{class:"flex cursor-pointer gap-2",onClick:_[9]||(_[9]=Y=>H())},[_[14]||(_[14]=l("img",{width:"20",height:"20",src:h3},null,-1)),l("div",O3,b(O.$t("createTag")),1)])])])):y("",!0),h.value=="confirmDelete"?(c(),u("div",z3,[l("div",D3,[ce(b(O.$t("confirmDeleteTag"))+" ",1),l("button",{class:"ml-2 flex items-center justify-center",onClick:_[10]||(_[10]=Y=>I())},[U(Ie,{class:"h-7 w-7"})])]),l("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) mt-3 h-10 w-full grow rounded-lg bg-blue-400 text-base text-white",onClick:_[11]||(_[11]=Y=>(Q(),D(O.roomId),I()))},b(O.$t("confirm")),1)])):y("",!0)]),_:1}))}}),N3=["width","height"],V3={__name:"AlertSvg",props:{width:{type:[Number,String],default:50},height:{type:[Number,String],default:50}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[Ne('<g clip-path="url(#ovlhak8zza)" fill="#FF4D4F"><path d="M25 0C11.215 0 0 11.215 0 25s11.215 25 25 25 25-11.215 25-25S38.785 0 25 0zm0 45.161C13.883 45.161 4.839 36.117 4.839 25S13.883 4.839 25 4.839 45.161 13.883 45.161 25 36.117 45.161 25 45.161z"></path><path d="M25 12.299a2.419 2.419 0 0 0-2.42 2.42v13.219a2.42 2.42 0 0 0 4.839 0v-13.22a2.419 2.419 0 0 0-2.42-2.42zM25 37.12a2.42 2.42 0 1 0 0-4.84 2.42 2.42 0 0 0 0 4.84z"></path></g><defs><clipPath id="ovlhak8zza"><path fill="#fff" d="M0 0h50v50H0z"></path></clipPath></defs>',2)]),8,N3))}},j3={class:"w-full"},K3={class:"text-center text-base font-medium text-stone-800 dark:text-stone-300"},H3={class:"text-sm font-normal text-stone-700 dark:text-stone-400"},Q3={class:"flex w-full gap-3"},q3=B({__name:"DeleteRoomModal",props:{roomId:{}},setup(o){const e=pe(),t=W(),s=o,n=async()=>{await t.dispatch("imkit/hideMessagesFromUserInRoom",s.roomId),await t.dispatch("imkit/updateRoomPrefs",{roomId:s.roomId,prefs:{hidden:!0}}),e.closeAll(),t.state.imkit.selectedRoomId===s.roomId&&t.commit("imkit/setState",{selectedRoomId:""})};return(a,r)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col items-center gap-5 max-w-[350px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",j3,[l("button",{class:"ml-auto flex items-center justify-center",onClick:r[0]||(r[0]=i=>k(e).closeAll())},[U(Ie,{class:"h-7 w-7"})])]),U(V3),l("div",K3,b(a.$t("chatroomDeleteConfirmationTitle")),1),l("div",H3,b(a.$t("chatroomDeleteConfirmationMessage")),1),l("div",Q3,[l("button",{class:"h-10 w-full rounded-md border text-gray-800 dark:border-stone-400 dark:text-stone-400",onClick:r[1]||(r[1]=i=>k(e).closeAll())},b(a.$t("cancel")),1),l("button",{class:"h-10 w-full rounded-md bg-red-500 text-white",onClick:n},b(a.$t("delete")),1)])]),_:1}))}}),Et="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR4nO2asUrEQBCGp7PxEbSx8VnEFzG7Bp05sJ05rS18jDsEX8Pn8CxV9ArbkVVEUEJyJrhZ838wXYr92ORLM0QAAAAAGBWVXOwG0evIuo5i3mUC2yqwXYag21SerD12Ff0xrLd1fbVFpRDSzf5W9vO2xZRKIW7wGjcL62t1qntUArGnbPZhXQe2m6OT8/1pCH+JP6UeTUf449NaTkzYXiYlHMUcwgCA/0U1mx9G0fvif0lsq+PZ/KBVOD2Y+7CDDetdq3D2Qw48BOFv5L4R3LDglXZ8w4JoOSrdRO6qotKCSjsqLai0o9JN5K4qKi2otKPSgko7Kt1E7qqi0oJKOyotfSrN/ZdaRjOsz63CaSEk+0GHm0WrcNp+SQshIzhsrwmiD/WZ7tAGq4fLtCNRnuj7mRedZQEAAABAf8UbgvvRyv0JTvIAAAAASUVORK5CYII=",G3={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},X3=["onClick"],W3=B({__name:"AddToFolderModal",props:{roomId:{}},setup(o){const e=pe(),t=o,s=W(),n=f(()=>s.state.imkit.sortedFolderIds.map(r=>s.state.imkit.folders[r]).filter(r=>r)),a=r=>{t.roomId&&s.dispatch("imkit/addRoomToFolder",{roomId:t.roomId,folderId:r})};return(r,i)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[360px] relative max-h-80vh overflow-y-auto","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",G3,[ce(b(r.$t("addToFolder"))+" ",1),l("button",{class:"flex items-center justify-center",onClick:i[0]||(i[0]=d=>k(e).closeAll())},[U(Ie,{class:"h-7 w-7"})])]),(c(!0),u(j,null,re(n.value,d=>(c(),u("div",{key:d.id,class:"group relative flex cursor-pointer items-center gap-3 rounded-lg bg-slate-200 p-2 dark:bg-slate-700",onClick:()=>{a(d.id),k(e).closeAll()}},[i[1]||(i[1]=l("img",{width:"30",height:"30",src:Et},null,-1)),ce(" "+b(d.name),1)],8,X3))),128))]),_:1}))}}),J3={},Y3={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",class:"fill-slate-700 dark:fill-slate-300"};function Z3(o,e){return c(),u("svg",Y3,e[0]||(e[0]=[l("path",{d:"M15.478,15.48c-0.976,0.976-1.468,2.25-1.468,3.528c0,1.278,0.492,2.553,1.468,3.528c1.952,1.952,5.106,1.951,7.058-0.001s1.952-5.106,0-7.058C20.586,13.529,17.431,13.529,15.478,15.48z M20.011,17.001v1h1c0.552,0,1,0.448,1,1v0c0,0.552-0.448,1-1,1h-1v1c0,0.552-0.448,1-1,1h0c-0.552,0-1-0.448-1-1v-1h-1c-0.552,0-1-0.448-1-1v0c0-0.552,0.448-1,1-1h1v-1c0-0.552,0.448-1,1-1h0C19.563,16.002,20.011,16.449,20.011,17.001z"},null,-1),l("path",{d:"M12,19c0-3.866,3.134-7,7-7c1.075,0,2.09,0.25,3,0.683h0V8c0-1.1-0.9-2-2-2h-7.172c-0.53,0-1.039-0.211-1.414-0.586l-0.828-0.828C10.211,4.211,9.702,4,9.172,4H4C2.9,4,2,4.9,2,6v12c0,1.1,0.9,2,2,2h8.08C12.033,19.673,12,19.34,12,19z"},null,-1)]))}const Bt=oe(J3,[["render",Z3]]),e4={},t4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24",class:"fill-slate-700 stroke-slate-700 dark:fill-slate-300 dark:stroke-slate-300"};function s4(o,e){return c(),u("svg",t4,e[0]||(e[0]=[l("path",{id:"XMLID_11_",style:{fill:"none","stroke-width":"2","stroke-linecap":"round","stroke-miterlimit":"10"},d:"M20,4H4"},null,-1),l("path",{d:"M15,3v1H9V3l0.429-0.429C9.795,2.205,10.29,2,10.807,2h2.386c0.517,0,1.012,0.205,1.377,0.571L15,3z"},null,-1),l("path",{d:"M4.366,7l1.527,13.264C6.025,21.254,6.877,22,7.875,22h8.249c0.998,0,1.85-0.746,1.983-1.745L19.634,7H4.366z"},null,-1)]))}const o4=oe(e4,[["render",s4]]),n4={},a4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"};function r4(o,e){return c(),u("svg",a4,e[0]||(e[0]=[Ne('<g id="Rounded" class="fill-slate-700 dark:fill-slate-300"><g><path d="M10.69,9.313C9.693,9.801,9,10.815,9,12c0,1.657,1.343,3,3,3c1.185,0,2.199-0.693,2.687-1.69L10.69,9.313z"></path></g><g><path d="M16.155,14.779c-1.033,1.542-2.899,2.478-4.956,2.159c-2.098-0.326-3.811-2.039-4.137-4.137C6.743,10.744,7.68,8.878,9.221,7.845L6.732,5.355c-2.905,1.621-4.677,4.296-5.46,5.706c-0.332,0.598-0.321,1.318,0.004,1.92C2.431,15.119,5.751,20,12,20c2.952,0,5.219-1.092,6.91-2.467L16.155,14.779z"></path><path d="M11.278,7.073C11.515,7.038,11.753,7,12,7c2.761,0,5,2.239,5,5c0,0.247-0.038,0.485-0.073,0.722l3.43,3.43c1.074-1.192,1.86-2.401,2.33-3.205c0.354-0.604,0.354-1.345,0.019-1.96C21.537,8.834,18.219,4,12,4c-1.212,0-2.295,0.199-3.284,0.511L11.278,7.073z"></path></g><line class="stroke-slate-700 dark:stroke-slate-300" style="fill:none;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;" x1="4" y1="4" x2="20" y2="20"></line></g>',1)]))}const i4=oe(n4,[["render",r4]]),l4={},c4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 30 30",class:"fill-slate-700 dark:fill-slate-300"};function d4(o,e){return c(),u("svg",c4,e[0]||(e[0]=[l("path",{d:"M29.399,13.199l-4.5-5.999C24.337,6.448,23.439,6,22.5,6H4C2.897,6,2,6.897,2,8v14c0,1.103,0.897,2,2,2h18.5c0.939,0,1.837-0.448,2.399-1.2l4.5-5.999C30.195,15.74,30.195,14.26,29.399,13.199z M25,16.5c-0.828,0-1.5-0.672-1.5-1.5c0-0.828,0.672-1.5,1.5-1.5s1.5,0.672,1.5,1.5C26.5,15.828,25.828,16.5,25,16.5z"},null,-1)]))}const u4=oe(l4,[["render",d4]]),m4={},g4={width:"512",height:"512",viewBox:"0 0 512 512",class:"fill-slate-700 dark:fill-slate-300",xmlns:"http://www.w3.org/2000/svg"};function h4(o,e){return c(),u("svg",g4,e[0]||(e[0]=[l("path",{d:"M138.24 351.289L160.853 373.618L50.9156 483.413C50.9156 483.413 41 494 29.5 483C18 472 28.4445 461.084 28.4445 461.084L138.24 351.289Z"},null,-1),l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M329.102 372.196C330.43 377.518 330.356 383.094 328.885 388.378C327.414 393.663 324.598 398.476 320.711 402.347L278.044 445.013L66.56 234.667L109.227 191.289C113.128 187.45 117.948 184.677 123.226 183.232C128.505 181.788 134.066 181.722 139.378 183.04L219.022 202.951L299.378 122.738L388.978 212.48L308.764 292.551C308.764 292.551 322.133 344.178 329.102 372.196Z"},null,-1),l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M483.556 171.947C483.556 171.947 472.32 183.04 461.227 194.276C455.618 199.804 448.183 203.091 440.32 203.52C435.912 203.734 431.509 203.022 427.394 201.43C423.278 199.838 419.542 197.401 416.427 194.276L317.724 95.7156C313.909 91.946 311.133 87.2553 309.662 82.0976C308.192 76.9399 308.079 71.49 309.333 66.2756C310.582 60.4502 313.497 55.1136 317.724 50.9156C328.818 39.68 340.053 28.4445 340.053 28.4445L483.556 171.947Z"},null,-1)]))}const p4=oe(m4,[["render",h4]]),f4={},v4={width:"512",height:"512",viewBox:"0 0 512 512",class:"fill-slate-700 dark:fill-slate-300",xmlns:"http://www.w3.org/2000/svg"};function A4(o,e){return c(),u("svg",v4,e[0]||(e[0]=[Ne('<path d="M138.24 351.289L160.854 373.618L50.9156 483.413C50.9156 483.413 41 494 29.5 483C18 472 28.4445 461.084 28.4445 461.084L138.24 351.289Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M329.102 372.196C330.43 377.518 330.356 383.094 328.885 388.378C327.414 393.663 324.598 398.476 320.711 402.347L278.044 445.013L66.56 234.667L109.227 191.289C113.128 187.45 117.948 184.677 123.226 183.232C128.505 181.788 134.066 181.722 139.378 183.04L219.022 202.951L299.378 122.738L388.978 212.48L308.764 292.551C308.764 292.551 322.133 344.178 329.102 372.196Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M483.556 171.947C483.556 171.947 472.32 183.04 461.227 194.276C455.618 199.804 448.183 203.091 440.32 203.52C435.912 203.734 431.509 203.022 427.394 201.43C423.278 199.838 419.542 197.401 416.427 194.276L317.724 95.7156C313.909 91.946 311.133 87.2553 309.662 82.0976C308.192 76.9399 308.079 71.49 309.333 66.2756C310.582 60.4502 313.497 55.1136 317.724 50.9156C328.818 39.68 340.053 28.4445 340.053 28.4445L483.556 171.947Z"></path><g clip-path="url(#clip0_4859_1096)"><path d="M463.188 394.812L378.812 479.188" class="stroke-slate-700 dark:stroke-slate-300" stroke-width="30" stroke-linecap="round" stroke-linejoin="round"></path><path d="M463.188 479.188L378.812 394.812" class="stroke-slate-700 dark:stroke-slate-300" stroke-width="30" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0_4859_1096"><rect width="150" height="150" fill="white" transform="translate(346 362)"></rect></clipPath></defs>',5)]))}const b4=oe(f4,[["render",A4]]),k4={},y4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 50 50",class:"fill-slate-700 stroke-slate-700 dark:fill-slate-300 dark:stroke-slate-300"};function w4(o,e){return c(),u("svg",y4,e[0]||(e[0]=[l("line",{"stroke-width":"2","stroke-linecap":"round","stroke-miterlimit":"10",x1:"32",y1:"20",x2:"42",y2:"30"},null,-1),l("line",{"stroke-width":"2","stroke-linecap":"round","stroke-miterlimit":"10",x1:"42",y1:"20",x2:"32",y2:"30"},null,-1),l("path",{d:"M7.01,31.754V18.247c0-0.658,0.143-1.494,0.477-2.287H3c-1.676,0-3.04,1.364-3.04,3.04v12c0,1.676,1.364,3.04,3.04,3.04h4.481C7.151,33.253,7.01,32.415,7.01,31.754z"},null,-1),l("path",{d:"M24.16,46.992c1.667,0,2.831-1.514,2.831-3.678V6.327c0-2.278-1.456-3.316-2.808-3.316c-0.91,0-1.838,0.433-2.607,1.213l-11.631,11.6c-0.64,0.566-0.934,1.648-0.934,2.422v13.507c0,0.767,0.293,1.841,0.881,2.358L21.51,45.695C22.565,46.768,23.533,46.992,24.16,46.992z"},null,-1)]))}const C4=oe(k4,[["render",w4]]),x4={},$4={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 50 50",class:"fill-slate-700 stroke-slate-700 dark:fill-slate-300 dark:stroke-slate-300"};function T4(o,e){return c(),u("svg",$4,e[0]||(e[0]=[Ne('<path d="M5,16c-1.654,0-3,1.347-3,3.001V31c0,1.654,1.346,3,3,3h5V16H5z"></path><g><path d="M46,25c0,5.508-2.992,10.318-7.428,12.927l1.124,1.654C44.66,36.609,48,31.194,48,25s-3.34-11.609-8.304-14.581l-1.124,1.654C43.008,14.682,46,19.492,46,25z"></path><path d="M42,25c0-4.135-2.295-7.74-5.676-9.619l-1.13,1.662C38.049,18.554,40,21.552,40,25s-1.951,6.446-4.806,7.957l1.13,1.662C39.705,32.74,42,29.135,42,25z"></path><path d="M31.753,27.893l1.169,1.721C34.727,28.858,36,27.076,36,25s-1.273-3.858-3.078-4.613l-1.169,1.721C33.042,22.444,34,23.607,34,25S33.042,27.556,31.753,27.893z"></path></g><path d="M26.607,2c-0.663,0-1.303,0.279-1.753,0.765L12,16v18l12.854,13.234C25.305,47.721,25.944,48,26.607,48C27.927,48,29,46.927,29,45.607V4.393C29,3.073,27.927,2,26.607,2z"></path>',3)]))}const I4=oe(x4,[["render",T4]]),M4={class:"relative flex items-center justify-center gap-1.5"},S4={class:"relative !h-[50px] !w-[50px] flex-shrink-0"},F4={key:2,class:"absolute -bottom-1 -right-1 h-5 w-5 rounded-lg bg-slate-200 p-[3px]",src:n3},R4={class:"flex w-0 min-w-0 grow flex-col text-left"},U4={class:"flex justify-between gap-2"},E4={class:"flex flex-1 items-center justify-center gap-1 overflow-hidden"},B4=["innerHTML"],L4={key:0,width:"14",height:"14",class:"mt-0.5",src:"https://img.icons8.com/ios-filled/50/4b5563/mute--v1.png",alt:"mute--v1"},_4={class:"flex-none whitespace-nowrap text-xs text-gray-500 dark:text-gray-300"},O4=["innerHTML"],z4={key:0,class:"mt-1 flex flex-wrap gap-1"},D4={key:0,class:"absolute right-3 top-[calc(50%_+_28px)] z-10 flex flex-col items-stretch gap-1 rounded-lg bg-white p-1.5 text-base text-gray-800 shadow-md dark:bg-zinc-800 dark:text-gray-200"},P4=B({__name:"RoomCell",props:{source:{}},setup(o){te.extend(lt),te.extend(Cs);const e=o,t=f(()=>n.state.imkit.config.styles),s=f(()=>{let x=te(e.source.updatedAt);return x.isSame(te(),"day")?x.format("H:mm"):x.isYesterday()?"Yesterday":x.isSame(te(),"week")?x.format("dddd"):x.isSame(te(),"year")?x.format("MMM D"):x.format("ll")}),n=W(),a=f(()=>n.state.imkit.rooms[e.source.id]),r=f(()=>n.state.imkit.searchKeyword.length>0&&n.state.imkit.searchType===ge.RoomName?a.value.displayName.replaceAll(n.state.imkit.searchKeyword,`<span class="text-blue-400">${n.state.imkit.searchKeyword}</span>`):a.value.displayName),i=f(()=>{var x;return n.state.imkit.searchKeyword.length>0&&n.state.imkit.searchType===ge.RoomMember?[`<span class="text-blue-400">${n.state.imkit.searchKeyword}</span>`,...a.value.memberIds.map(I=>n.state.imkit.users[I]).filter(I=>I).map(I=>I.nickname||I.id).filter(I=>I!==n.state.imkit.searchKeyword)].join(", "):(x=a.value.lastMessage)==null?void 0:x.string}),d=f(()=>n.state.imkit.selectedRoomId===e.source.id),m=f(()=>!!n.state.imkit.roomIdsInFolders[e.source.id]),g=f(()=>n.state.imkit.actionMenuRoomId),h=f(()=>n.state.imkit.searchKeyword),v=f(()=>{var x;return((x=a.value.pref)==null?void 0:x.sticky)??!1}),p=f(()=>{var x;return((x=a.value.pref)==null?void 0:x.hidden)??!1}),A=f(()=>n.state.imkit.sortedFolderIds),w=()=>{const{open:x}=he({component:P3,attrs:{roomId:e.source.id}});x(),n.commit("imkit/setState",{actionMenuRoomId:""})},E=()=>{g.value===e.source.id?n.commit("imkit/setState",{actionMenuRoomId:""}):n.commit("imkit/setState",{actionMenuRoomId:e.source.id})},D=()=>{n.commit("imkit/setState",{selectedRoomId:e.source.id,actionMenuRoomId:""})},z=async()=>{await n.dispatch("imkit/updateRoomPrefs",{roomId:e.source.id,prefs:{sticky:!v.value}})},L=async()=>{n.commit("imkit/setState",{actionMenuRoomId:""}),n.dispatch("imkit/updateRoomPrefs",{roomId:e.source.id,prefs:{hidden:!p.value}})},K=async()=>{const{open:x}=he({component:q3,attrs:{roomId:e.source.id}});x()},Q=async()=>{await n.dispatch("imkit/removeRoomFromFolder",e.source.id)},J=async()=>{const{open:x}=he({component:W3,attrs:{roomId:e.source.id}});x()},X=M(null);xs(X,()=>{E()},{modifiers:{prevent:!0}});const H=f(()=>n.getters["imkit/roomsInSelectedFolder"]);return(x,I)=>{var G,O;return c(),u("div",M4,[m.value&&!h.value?(c(),u("div",{key:0,class:N(["absolute left-2 h-[120%] w-1 flex-shrink-0 rounded-full bg-slate-500",{"mt-4 !h-full":H.value[0].id===e.source.id,"mb-4 !h-full":H.value[H.value.length-1].id===e.source.id}])},null,2)):y("",!0),l("div",{ref_key:"roomCellRef",ref:X,class:N(["group relative flex min-h-[66px] grow cursor-pointer select-none items-center gap-3 rounded-lg p-2 sm:hover:bg-gray-100 sm:hover:dark:bg-zinc-700",{"bg-gray-100 dark:bg-zinc-700":d.value,"ml-4":m.value&&!h.value}]),onClick:D},[l("div",S4,[a.value.avatars.length===1?(c(),P(ue,{key:0,url:a.value.avatars[0].url,name:a.value.avatars[0].name,class:"relative"},null,8,["url","name"])):(c(),u(j,{key:1},[U(ue,{url:a.value.avatars[1].url,name:a.value.avatars[1].name,class:"absolute right-0 top-0 !h-9 !w-9 text-base"},null,8,["url","name"]),U(ue,{url:a.value.avatars[0].url,name:a.value.avatars[0].name,class:N(["absolute bottom-0 left-0 !h-[38px] !w-[38px] border-2 border-white text-base group-hover:border-gray-100 dark:border-zinc-800 group-hover:dark:border-zinc-700",{"border-gray-100":d.value}])},null,8,["url","name","class"])],64)),v.value?(c(),u("img",F4)):y("",!0)]),l("div",R4,[l("div",U4,[l("div",E4,[l("div",{class:"w-full overflow-hidden overflow-ellipsis whitespace-nowrap text-base text-gray-900 dark:text-gray-100",innerHTML:r.value},null,8,B4),a.value.muted?(c(),u("img",L4)):y("",!0)]),l("div",_4,b(s.value),1)]),l("div",{class:N(["flex items-center justify-between",{"text-gray-800":a.value.numberOfUnread>0}])},[l("div",{class:"overflow-hidden overflow-ellipsis whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",innerHTML:i.value},null,8,O4),a.value.numberOfUnread>0&&!d.value?(c(),u("div",{key:0,class:"flex h-5 min-w-5 items-center justify-center rounded-full bg-blue-400 px-1.5 text-center text-xs font-semibold leading-none text-white",style:ee(t.value.roomListUnreadBadge)},b(a.value.numberOfUnread>99?"99+":a.value.numberOfUnread),5)):y("",!0)],2),(G=a.value.pref)!=null&&G.tags?(c(),u("div",z4,[(c(!0),u(j,null,re(((O=a.value.pref)==null?void 0:O.tags)??[],_=>{var Y;return c(),u("div",{key:_,class:"overflow-hidden overflow-ellipsis whitespace-nowrap rounded-md bg-blue-400 px-1 py-0.5 text-xs text-white",style:ee({backgroundColor:(((Y=a.value.pref)==null?void 0:Y.tagColors)||{})[_]})},b(_),5)}),128))])):y("",!0)]),l("div",{class:N(["absolute right-4 hidden h-8 w-8 items-center justify-center rounded-full bg-white shadow-md hover:scale-110 hover:transform hover:transition dark:bg-zinc-800 sm:group-hover:flex",{"!flex":g.value==x.source.id}]),onClick:de(E,["stop"])},I[1]||(I[1]=[l("img",{width:"20",height:"20",src:a3},null,-1)]),2),g.value==x.source.id?ne((c(),u("div",D4,[l("div",{class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:de(w,["stop"])},[U(u4,{class:"h-6 w-6"}),ce(" "+b(x.$t("tag")),1)]),l("div",{class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:de(z,["stop"])},[v.value?(c(),P(b4,{key:0,class:"h-6 w-6"})):(c(),P(p4,{key:1,class:"h-6 w-6"})),ce(" "+b(v.value?x.$t("unpin"):x.$t("pin")),1)]),l("div",{class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:de(L,["stop"])},[U(i4,{class:"h-6 w-6"}),ce(" "+b(p.value?x.$t("unhide"):x.$t("hide")),1)]),l("div",{class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:de(K,["stop"])},[U(o4,{class:"h-6 w-6"}),ce(" "+b(x.$t("delete")),1)]),m.value?(c(),u("div",{key:0,class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:de(Q,["stop"])},[I[2]||(I[2]=l("img",{width:"24",height:"24",src:r3},null,-1)),ce(" "+b(x.$t("removeFromFolder")),1)])):A.value.length>0?(c(),u("div",{key:1,class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:de(J,["stop"])},[U(Bt,{class:"h-6 w-6"}),ce(" "+b(x.$t("addToFolder")),1)])):y("",!0),l("div",{class:"flex cursor-pointer gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:I[0]||(I[0]=de(()=>{k(n).commit("imkit/setState",{actionMenuRoomId:""}),k(n).dispatch("imkit/toggleNotification",e.source.id)},["stop"]))},[a.value.muted?(c(),P(I4,{key:0,class:"h-6 w-6"})):(c(),P(C4,{key:1,class:"h-6 w-6"})),ce(" "+b(a.value.muted?x.$t("unmute"):x.$t("mute")),1)])])),[[k(Oe),()=>{k(n).commit("imkit/setState",{actionMenuRoomId:""})}]]):y("",!0)],2)])}}}),N4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR4nO2Zzy4EQRCH2wUHJ3F1IeLIwZ9n4B1wE9u9i6rhXLWLo+DGKwiReAESBw/AGxAnJEhcSFZmiUhmd3uYpvVMfcnvXl9qZnp+M0oJgiAIgvAvKeFav0Y6MECPBrmeJhr4SgNvak09KjxZvksrmhBHPq9UdrpUKOh4sz+U/SJNKhTMNy7j1sL0XFqmARUCJqPsnwfoUQMfLSzVhoshjJ/i9/HzpzjC2LiV9gsmzA+FEjbIdRG24XtDsmGUS7ou9zBmeGgJghAWRNRpkHfil2/fZ6izAN1roO3YLSHckPU94C9FI28lhfO02YQw3RZMmO+aCPNhjjd8kBAuAc3mVjjimYQwAPVq4Bffw7kPvc4j9TU9mgzSae62C3zS8iw2SJg74YihpXBlZW3Q94Cus7haG2op/LHlS99DOgvwRVvZhjDwhvdBHUUDrVuFdVSd9D2oq5SBJqzCSqkOg3Tte9jsoZvYJY2w0sB7ORDeTSX7LkzT/gfOlnJUnUotHP/IdvG71GOe5oi61XcIuUw0LQs2Qi4TTcuCjXDLRJuyYCPEMtG2LNgIsUy0LQs2QiwT1rJgwwCf+ZZIHeAzlZVSVB2PzzXvMvY8mWUaUy7QSzRqkI7/5ZfNxkx0XIbaiBNZQRAEQRDUb/EGC4sae12sFiYAAAAASUVORK5CYII=",V4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAADaUlEQVR4nO2aS2gTURSG4/sBilZxI1grghtBaF0VxKXgq6uKgiiIpJ17k2bOGUVX/neS4mPhQtSFuhUXxZVEW3HlxlU3uqgKrlTEF/jAR+ujlZvpxFaCySQzmUkyB84mZM78H+e/987cuYlEHHHE0TJxGFicsnIdhpXtikJqLVqT76DCtHsEYUSQmpCspqKUgjEuWQ0bpr2nZlApT68SrO6FDVUxPGGECG3Vw5J6GjaEd2j1uCpo0UCdLZHD3mBNuycComtKT2NasrobtuBaUxDuVASrp/kozsaegRnjABaWBTZMbAhbrF/Zl8H68nY20Rm2UN/SRGf5DlvZrtCF+pSGle2Kgf+NuMMcvjVjS3MLjGHBeG+QvV0SRpseWDDGU6a9Tes7cvzcMsl41dTABuGQq08STjV1hwVh0NWWYrtXMiabFlgwbgKYW+isia2S1VdPzrAaCZgwmkxiqdYkrFy7YLz2WsNoHGC87KPBtcVJitTDauoYDQFM+Jyi7Batpbd3aJ5k3Kq2lhF1YEHqt2TsdbVIVhdrqWcEBSxYffIJOuPqEIRUrfWMIIAF421/JrtJkjrhZcko0d1rfztr7xCkfkYUWB0oCjXR79jSKyxGAMzXNfotbPbLMUZAwB8MRncRmrBfMn5UXgNjmQxW6GuTjNWC8MwP2MCApdOhL9qGbg1B2CkY38peS+qdIGwsbh4yHvgFGyiwdMbghH70c+voh31J+Pgf2O8znDFHEq77CRs4sHTs+Usyjs7aECT1psT/JlOEg0VHsLL9hq0TsCrASMYxt54zg+P57O5CFWFN7Ktldo8AsHIszjjr1hwYwDrJeDL9+5C2cOFejG5t7SBg6w4sncnskvu2029hjWRcdT9g64/Zeg0PCjYUYOnY90YyeWXBzHuk01guGI+ChA0PmAvQeaLzS4ovBIR80LDhAnNhGbqvOytZXa4HbPjAXFirX9QLNhLAss5pxMAlIu4wN7mlZat9EE9ZuY7QhfqUwsq1lwVOpy8smj7ON9XQSep7RYdaCrZmNdz4wMgnKg19qCt0wTWmYdm7El5Cb6y1RHfd0Ac09UHN0MV7TowZJ8+sTFQTRGhrqPFMyFcNOzMkY7c+uxjJ2dvZMbntecxWEnrJ0sf5wj7676bWojVVJD6OOOJINEP8AR99+lKlJ3IWAAAAAElFTkSuQmCC",j4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVR4nO2aTU4CQRCFm5W6N7jSiEeAgxjkAO6UmQakaw5QPRCXLlzCRVRAEzd6CfUSSoIrTfET40wbZpA4hdSX1LI7703PvCbhKSUIwtpgzMWW18QDL2iVOEwtaBdI07J95rQJK77Bnm/suwb7wWmmmm60Ccuk9VdOG43zHW3sfdamkg/eVQPML2zWN/iSvYnU87yI6dxqnWz8pFO93tqEFddGvsE3H2xfA3Z9YztZzlgD2D5pcpqefNPJoICKmQV88KC9q5hBmkib43CuE21wjLjpSONXjmZnNBq4Fz1p8lCvX27MXUz3rONp9RRztMFBVHctaBfmL2xi0RECXcUc0hjT3cTi3IX0CyZ+wrajmDMJsu+6vaBVmrtQDIOcMEvklQb5ht1IaIGEFksktEBCy42EFkhosURCCyS03EhogYQWSyS0QELLjYQWSGixREILJLTcSGiBhBZLJLRAQsvN2oWWXrc/xGtBuxAvtNi+Yo5v7G1U9+kZ7q9PqQVwlKjUQoy7i47aEm2sOJoF++joal0l3sQL8OiHlttw0pbhUUybNneGzhJdMzxM8+ByVN9bfiXwj8bgIPWrUg0wT0XNzMWnHN/g0wngdmrDX6ZX6KQNDhY2GymIl6m7yLIgDjiigEr7zSaCriy627Ku/s+GtCS+egRBUP+BT4sLtV3SLOLeAAAAAElFTkSuQmCC",K4={key:1,class:"relative h-[34px] w-[34px] flex-shrink-0"},H4={class:"flex w-0 min-w-0 grow flex-col text-left"},Q4={class:"overflow-hidden overflow-ellipsis whitespace-nowrap text-sm text-gray-900 dark:text-gray-300"},q4={key:2,width:"20",height:"20",src:V4},G4={key:3,width:"20",height:"20",src:j4},Lt=B({__name:"RoomCell",props:{source:{}},setup(o){te.extend(lt);const e=o,t=W(),s=f(()=>!!t.state.imkit.selectedRoomIdsForCreateFolder[e.source.id]),n=a=>{const r=new Date;t.commit("imkit/updateField",{key:"selectedRoomIdsForCreateFolder",value:{[e.source.id]:a?r:void 0}})};return(a,r)=>(c(),u("div",{class:N(["group relative flex min-h-11 w-full cursor-pointer items-center gap-3 rounded-md p-1 px-2 sm:hover:bg-gray-100 sm:hover:dark:bg-zinc-700",{"bg-gray-100 dark:bg-zinc-700 hover:dark:bg-zinc-700":s.value}]),onClick:r[0]||(r[0]=i=>n(!s.value))},[a.source.avatars.length===1?(c(),P(ue,{key:0,url:a.source.avatars[0].url,name:a.source.avatars[0].name,class:"!h-[34px] !w-[34px] flex-shrink-0 rounded-xl text-base"},null,8,["url","name"])):(c(),u("div",K4,[U(ue,{url:a.source.avatars[1].url,name:a.source.avatars[1].name,class:"rounded-10px absolute right-0 top-0 !h-[26px] !w-[26px] text-base"},null,8,["url","name"]),U(ue,{url:a.source.avatars[0].url,name:a.source.avatars[0].name,class:N(["rounded-10px absolute bottom-0 left-0 !h-7 !w-7 border-2 border-white text-xs group-hover:border-gray-100 dark:border-zinc-800 group-hover:dark:border-zinc-700",{"border-gray-100":s.value}])},null,8,["url","name","class"])])),l("div",H4,[l("div",Q4,b(a.source.displayName),1)]),s.value?(c(),u("img",q4)):(c(),u("img",G4))],2))}}),X4={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},W4=["placeholder"],J4={class:"flex items-center justify-center gap-2"},Y4=["disabled"],_t=B({__name:"UpdateFolderModal",props:{folderId:{}},setup(o){const e=pe(),t=o,s=W(),n=M(),a=M(""),r=f(()=>n.value?n.value.roomIds.map(m=>s.state.imkit.rooms[m]).concat(s.state.imkit.sortedRooms).sort((m,g)=>{var h,v,p;return((h=m.pref)==null?void 0:h.sticky)===((v=g.pref)==null?void 0:v.sticky)?g.updatedAt-m.updatedAt:(p=m.pref)!=null&&p.sticky?-1:1}):s.state.imkit.sortedRooms),i=f(()=>a.value.length>0&&Object.keys(s.state.imkit.selectedRoomIdsForCreateFolder).length>0),d=()=>{var m;s.dispatch("imkit/updateFolder",{folderKey:((m=n.value)==null?void 0:m.id)||`folder_${Date.now()}`,name:a.value})};return n.value=s.state.imkit.folders[t.folderId],n.value&&(a.value=n.value.name,s.commit("imkit/setState",{selectedRoomIdsForCreateFolder:n.value.roomIds.reduce((m,g)=>(m[g]=!0,m),{})})),(m,g)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",X4,b(n.value?m.$t("editFolder"):m.$t("createFolder")),1),ne(l("input",{type:"text",class:"grow rounded-md bg-gray-100 p-2 placeholder-gray-400 outline-none dark:bg-zinc-700",placeholder:m.$t("folderName"),"onUpdate:modelValue":g[0]||(g[0]=h=>a.value=h)},null,8,W4),[[$e,a.value]]),U(k(qe),{class:"h-[50vh] overflow-auto","data-key":"id","data-sources":r.value,"data-component":Lt,"wrap-class":"flex flex-col gap-1.5","estimated-size":44},null,8,["data-sources"]),l("div",J4,[l("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 grow rounded-lg border text-base text-gray-800 dark:border-stone-400 dark:text-stone-400",onClick:g[1]||(g[1]=()=>{k(e).closeAll()})},b(m.$t("cancel")),1),l("button",{class:N(["h-10 grow rounded-lg bg-blue-400 text-base text-white",{"cursor-not-allowed !bg-gray-400":!i.value}]),disabled:!i.value,onClick:g[2]||(g[2]=()=>{d(),k(e).closeAll()})},b(m.$t("confirm")),11,Y4)])]),_:1}))}}),Z4={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},ev={class:"flex items-center justify-center gap-2"},tv=B({__name:"DeleteFolderConfirmModal",props:{folder:{}},setup(o){const e=pe(),t=o,s=W(),n=a=>{s.dispatch("imkit/removeFolder",a)};return(a,r)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 min-w-[200px] max-w-full rounded-xl p-5 flex flex-col gap-3 max-w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",Z4,b(a.$t("confirmToDeleteFolder")),1),l("div",ev,[l("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 w-[100px] grow rounded-lg border text-base dark:border-stone-400 dark:text-stone-400",onClick:r[0]||(r[0]=()=>{k(e).closeAll()})},b(a.$t("cancel")),1),l("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 w-[100px] grow rounded-lg bg-blue-400 text-base text-white",onClick:r[1]||(r[1]=()=>{n(t.folder.id),k(e).closeAll()})},b(a.$t("confirm")),1)])]),_:1}))}}),sv={key:0,width:"30",height:"30",src:N4},ov={key:1,width:"30",height:"30",src:Et},nv={class:"flex flex-col overflow-hidden"},av=["innerHTML"],rv={class:"overflow-hidden overflow-ellipsis whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},iv={key:2,class:"ml-auto flex h-5 min-w-5 items-center justify-center rounded-full bg-blue-400 text-center text-xs font-semibold leading-none text-white"},lv=B({__name:"FolderCell",props:{source:{}},setup(o){const e=o,t=W(),s=f(()=>t.state.imkit.searchKeyword.length>0&&t.state.imkit.searchType===ge.RoomPrefFolder?e.source.name.replaceAll(t.state.imkit.searchKeyword,`<span class="text-blue-400">${t.state.imkit.searchKeyword}</span>`):e.source.name),n=f(()=>t.state.imkit.selectedFolderId),a=f(()=>e.source.roomIds.filter(h=>t.state.imkit.selectedRoomId!==h).reduce((h,v)=>{const p=t.state.imkit.rooms[v];return p?h+p.numberOfUnread:h},0)),r=f(()=>t.state.imkit.roomTag),i=f(()=>e.source.roomIds.map(h=>t.state.imkit.rooms[h]).filter(h=>r.value?h&&h.roomTags.includes(r.value):h).length),d=()=>{t.state.imkit.selectedFolderId===e.source.id?t.commit("imkit/setState",{selectedFolderId:""}):t.commit("imkit/setState",{selectedFolderId:e.source.id})},m=()=>{const{open:h}=he({component:tv,attrs:{folder:e.source}});h()},g=()=>{const{open:h}=he({component:_t,attrs:{folderId:e.source.id}});h()};return(h,v)=>(c(),u("div",{class:"group relative flex min-h-[66px] cursor-pointer items-center gap-3 rounded-lg bg-slate-200 p-2 dark:bg-slate-700",onClick:d},[n.value===h.source.id?(c(),u("img",sv)):(c(),u("img",ov)),l("div",nv,[l("div",{class:"text-basse overflow-hidden overflow-ellipsis whitespace-nowrap text-gray-900 dark:text-gray-100",innerHTML:s.value},null,8,av),l("div",rv,b(i.value?h.$t("numberOfChatroom",i.value):h.$t("no-chatroom")),1)]),a.value>0?(c(),u("div",iv,b(a.value),1)):y("",!0),l("div",{class:"hover:(scale-110 !flex) absolute right-14 hidden h-8 w-8 transform items-center justify-center rounded-full bg-white shadow-md transition group-hover:flex dark:bg-zinc-800",onClick:de(g,["stop"])},v[0]||(v[0]=[l("img",{width:"20",height:"20",src:"https://img.icons8.com/ios-glyphs/30/637289/pencil--v1.png"},null,-1)])),l("div",{class:"hover:(scale-110 !flex) absolute right-4 hidden h-8 w-8 transform items-center justify-center rounded-full bg-white shadow-md transition group-hover:flex dark:bg-zinc-800",onClick:de(m,["stop"])},v[1]||(v[1]=[l("img",{width:"20",height:"20",src:Ut},null,-1)]))]))}}),cv=B({__name:"RoomListWrapperCell",props:{source:{}},setup(o){return(e,t)=>e.source instanceof k(ze)?(c(),P(P4,{key:0,source:e.source},null,8,["source"])):(c(),P(lv,{key:1,source:e.source},null,8,["source"]))}}),dv={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},uv=["placeholder"],mv={class:"mb-2 flex h-12 items-center gap-2 rounded-lg bg-gray-100 p-3 dark:bg-zinc-700"},gv={class:"grow overflow-hidden"},hv=["placeholder"],pv={key:0,slot:"header",class:"flex flex-col gap-1"},fv={class:"flex items-center justify-center gap-2"},vv=["disabled"],Av=B({__name:"MassTextingModal",setup(o){const e=pe(),t=W(),s=M(""),n=f(()=>t.state.imkit.searchKeyword?t.state.imkit.searchRooms[ge.RoomName]||[]:Object.values(t.state.imkit.rooms).sort((p,A)=>{const w=!!t.state.imkit.selectedRoomIdsForCreateFolder[p.id],E=!!t.state.imkit.selectedRoomIdsForCreateFolder[A.id];return w&&!E?-1:!w&&E?1:w&&E?t.state.imkit.selectedRoomIdsForCreateFolder[p.id]-t.state.imkit.selectedRoomIdsForCreateFolder[A.id]:0})),a=f(()=>s.value.length>0),r=M(""),i=M(!1),m=Ge(1e3,async()=>{r.value!==t.state.imkit.searchKeyword&&(r.value?t.dispatch("imkit/searchRooms",r.value):t.commit("imkit/setState",{searchKeyword:""}))}),g=ct(500,m,{atBegin:!1});Ae(r,g);const h=f(()=>!!t.state.imkit.isRequesting[ve.Search]),v=async()=>{await t.dispatch("imkit/batchSendMessage",{message:s.value,messageType:"text",paras:Object.keys(t.state.imkit.selectedRoomIdsForCreateFolder).map(p=>({room:p}))}),t.commit("imkit/setState",{selectedRoomIdsForCreateFolder:{},searchKeyword:""})};return(p,A)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",dv,b(p.$t("massTexting")),1),ne(l("textarea",{rows:"3",class:"grow rounded-md bg-gray-100 p-2 placeholder-gray-400 outline-none dark:bg-zinc-700",placeholder:p.$t("inputMessage"),"onUpdate:modelValue":A[0]||(A[0]=w=>s.value=w)},null,8,uv),[[$e,s.value]]),U(k(qe),{class:"h-[50vh] overflow-auto","data-key":"id","data-sources":n.value,"data-component":Lt,"wrap-class":"flex flex-col gap-1.5","estimated-size":44},{header:le(()=>[l("div",mv,[A[7]||(A[7]=l("img",{class:"h-6 w-6 cursor-pointer",src:Je},null,-1)),l("div",gv,[ne(l("input",{ref:"searchInput",class:"bg-gray-100 placeholder-gray-400 outline-none dark:bg-zinc-700","onUpdate:modelValue":A[1]||(A[1]=w=>r.value=w),placeholder:p.$t("search"),onCompositionstart:A[2]||(A[2]=w=>i.value=!0),onCompositionend:A[3]||(A[3]=w=>i.value=!1)},null,40,hv),[[$e,r.value]])]),r.value?(c(),u("img",{key:0,src:Ye,class:"h-5 w-5 cursor-pointer",onClick:A[4]||(A[4]=()=>{k(g).cancel({upcomingOnly:!0}),r.value="",k(m)()})})):y("",!0)]),h.value?(c(),u("div",pv,[(c(),u(j,null,re(10,w=>l("div",{key:w,class:"flex gap-3 p-2"},A[8]||(A[8]=[l("div",{class:"loading h-[34px] w-[34px] rounded-xl"},null,-1),l("div",{class:"flex grow flex-col justify-center gap-2"},[l("div",{class:"loading h-3 w-full rounded-md"}),l("div",{class:"loading h-3 w-4/5 rounded-md"})],-1)]))),64))])):y("",!0)]),_:1},8,["data-sources"]),l("div",fv,[l("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 grow rounded-lg border text-base dark:border-stone-400 dark:text-stone-400",onClick:A[5]||(A[5]=()=>{k(e).closeAll()})},b(p.$t("cancel")),1),l("button",{class:N(["h-10 grow rounded-lg bg-blue-400 text-base text-white",{"cursor-not-allowed !bg-gray-400":!a.value}]),disabled:!a.value,onClick:A[6]||(A[6]=()=>{v(),k(e).closeAll()})},b(p.$t("confirm")),11,vv)])]),_:1}))}}),bv=oe(Av,[["__scopeId","data-v-4c47b131"]]),kv={},yv={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 50 50",class:"fill-slate-700 dark:fill-slate-300"};function wv(o,e){return c(),u("svg",yv,e[0]||(e[0]=[l("g",null,[l("path",{d:"M17.005,15.005H7c-2.754,0-4.995,2.241-4.995,4.995v5c0,2.754,2.241,4.995,4.995,4.995h10.005V15.005z"}),l("path",{d:"M17.837,40.925c-0.271-0.427-0.704-2.805-0.812-8.93h-0.02H7c-0.123,0-0.243-0.012-0.364-0.018c1.13,3.08,2.197,8.651,2.97,12.7c0.157,0.822,0.635,3.323,3.84,3.323h3.335C19.441,47.999,20,46.368,20,45C20,43.223,19.001,42.08,17.837,40.925z"}),l("g",null,[l("path",{d:"M39.852,1.999c-1.485,0-2.395,1.359-3.655,3.241c-2.371,3.542-6.314,9.383-17.202,9.727v15.061c11.029,0.298,14.808,6.388,17.316,10.462C37.564,42.528,38.47,44,40.074,44C41.378,44,43,44,43,23C43,1.999,41.029,1.999,39.852,1.999z"}),l("path",{d:"M44.977,19.289C44.992,20.467,45,21.699,45,23c0,1.691-0.011,3.263-0.031,4.734c1.752-0.6,2.984-2.2,2.984-4.149C47.954,21.604,46.707,19.928,44.977,19.289z"})])],-1)]))}const Cv=oe(kv,[["render",wv]]),xv={class:"relative overflow-auto"},$v={class:"mb-2 flex h-12 items-center gap-2 rounded-lg bg-gray-100 p-3 dark:bg-zinc-700"},Tv={class:"grow overflow-hidden"},Iv=["placeholder"],Mv={key:0,class:"mb-2 flex items-center gap-2 overflow-auto text-sm text-gray-900 dark:text-gray-200"},Sv=["onClick"],Fv={key:1,slot:"header",class:"flex flex-col gap-1"},Rv={class:"absolute bottom-0 right-0 flex flex-col items-end gap-2 p-3"},Uv={key:0,class:"transform-gpu flex-col items-stretch gap-1 rounded-lg bg-white p-1.5 text-base text-gray-800 shadow-md dark:bg-zinc-800 dark:text-gray-200"},Ev=B({__name:"RoomList",setup(o){const e=W(),t=M(""),s=pe(),n=M(!1),a=M(),r=f(()=>e.state.imkit.sortedRooms),i=f(()=>e.state.imkit.sortedFolderIds.map(x=>e.state.imkit.folders[x]).filter(x=>x)),d=f(()=>e.state.imkit.folders[e.state.imkit.selectedFolderId]),m=f(()=>e.state.imkit.searchType),g=f(()=>e.state.imkit.searchKeyword?Object.keys(e.state.imkit.searchRooms):[]),h=f(()=>e.state.imkit.roomTag),v=f(()=>e.state.imkit.config.settings),p=f(()=>{if(e.state.imkit.searchKeyword&&s.modals.length===0){if(m.value===ge.RoomPrefFolder&&d.value){const I=[...e.state.imkit.searchRooms[m.value]],G=d.value.roomIds.map(_=>e.state.imkit.rooms[_]).filter(_=>h.value?_&&_.roomTags.includes(h.value):_),O=I.findIndex(_=>_.id===d.value.id);return O>-1&&I.splice(O+1,0,...G),I}return e.state.imkit.searchRooms[m.value]||[]}const x=[...i.value,...r.value];if(d.value){const I=e.getters["imkit/roomsInSelectedFolder"],G=i.value.findIndex(O=>O.id===d.value.id);G>-1&&x.splice(G+1,0,...I)}return x}),A=M(!1),w=M(!1),E=f(()=>s.modals.length===0&&(n.value||A.value||!!e.state.imkit.isRequesting[ve.Search]&&t.value.length>0)),D=()=>{e.dispatch("imkit/fetchRooms")},z=()=>{w.value=!w.value},L=()=>{const{open:x}=he({component:_t});x()},K=()=>{const{open:x}=he({component:bv});x()},J=Ge(1e3,async()=>{t.value!==e.state.imkit.searchKeyword&&(t.value?e.dispatch("imkit/searchRooms",t.value):(e.commit("imkit/setState",{sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0,folders:{},sortedFolderIds:[],roomIdsInFolders:{},searchKeyword:""}),V()))}),X=ct(500,J,{atBegin:!1});Ae(t,X),Ae(r,x=>{if(St.config.settings.autoSelectRoomWhenLoaded&&!e.state.imkit.selectedRoomId&&document.body.clientWidth>640){const I=Object.values(x).find(G=>G.numberOfUnread===0);I&&e.commit("imkit/setState",{selectedRoomId:I.id})}});const V=async()=>{A.value=!0,await e.dispatch("imkit/fetchPrefs"),await e.dispatch("imkit/fetchRooms"),A.value=!1,await e.dispatch("imkit/fetchRoomsInFolders")};let H=0;return xt(()=>{V(),document.addEventListener("visibilitychange",()=>{document.hidden?H=te().unix():te().unix()-H>60&&(V(),e.state.imkit.socket.connect())})}),(x,I)=>(c(),u("div",xv,[U(k(qe),{class:"h-full overflow-auto p-2 transition ease-in-out","data-key":"id","data-sources":p.value,"data-component":cv,"wrap-class":"flex flex-col gap-1.5","estimated-size":66,keeps:60,onTobottom:D},{header:le(()=>[l("div",$v,[I[4]||(I[4]=l("img",{class:"h-6 w-6 cursor-pointer",src:Je},null,-1)),l("div",Tv,[ne(l("input",{ref_key:"searchInput",ref:a,class:"w-full bg-gray-100 placeholder-gray-400 outline-none dark:bg-zinc-700","onUpdate:modelValue":I[0]||(I[0]=G=>t.value=G),placeholder:x.$t("search"),onCompositionstart:I[1]||(I[1]=G=>n.value=!0),onCompositionend:I[2]||(I[2]=G=>n.value=!1)},null,40,Iv),[[$e,t.value]])]),t.value?(c(),u("img",{key:0,src:Ye,class:"h-5 w-5 cursor-pointer",onClick:I[3]||(I[3]=()=>{k(X).cancel({upcomingOnly:!0}),t.value="",k(J)()})})):y("",!0)]),g.value.length>0&&k(s).modals.length===0?(c(),u("div",Mv,[(c(!0),u(j,null,re(g.value,G=>(c(),u("div",{key:G,class:N(["cursor-pointer whitespace-nowrap rounded-lg p-2 hover:bg-gray-100 hover:dark:bg-white hover:dark:text-gray-900",{"bg-gray-100 font-medium text-gray-800":G===m.value}]),onClick:O=>k(e).commit("imkit/setState",{searchType:G})},b(x.$t(G)),11,Sv))),128))])):y("",!0),E.value?(c(),u("div",Fv,[(c(),u(j,null,re(20,G=>l("div",{key:G,class:"flex gap-3 p-2"},I[5]||(I[5]=[l("div",{class:"loading h-[50px] w-[50px] rounded-2xl bg-white dark:bg-zinc-800"},null,-1),l("div",{class:"flex grow flex-col justify-center gap-2"},[l("div",{class:"loading h-5 w-full rounded-md bg-white dark:bg-zinc-800"}),l("div",{class:"loading h-4 w-4/5 rounded-md bg-white dark:bg-zinc-800"})],-1)]))),64))])):y("",!0)]),_:1},8,["data-sources"]),ne((c(),u("div",Rv,[U(Pe,{name:"slide-fade"},{default:le(()=>[w.value?(c(),u("div",Uv,[v.value.massTextingEnabled?(c(),u("div",{key:0,class:"flex cursor-pointer items-center justify-start gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:K},[U(Cv,{class:"h-6 w-6"}),ce(" "+b(x.$t("massTexting")),1)])):y("",!0),l("div",{class:"flex cursor-pointer items-center justify-start gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:L},[U(Bt,{class:"h-6 w-6"}),ce(" "+b(x.$t("createFolder")),1)])])):y("",!0)]),_:1}),l("button",{class:"flex h-12 w-12 cursor-pointer items-center justify-center rounded-full bg-slate-500 shadow-md hover:scale-110 hover:transform hover:transition sm:group-hover:flex",onClick:de(z,["stop"])},I[6]||(I[6]=[l("img",{width:"30",height:"30",src:qs},null,-1)]))])),[[k(Oe),()=>{w.value=!1}]])]))}}),Bv=oe(Ev,[["__scopeId","data-v-f7d4b60d"]]),Ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABKklEQVR4nO3aP0oEMRSA8SfiFl7CPu1AgpV51ovmLeQK9v45gF7Aq6jXEO/gegy1WBlhQZHNvEJQNt8P0kw1fMyEhEQEAAAAAAAAALCtaq27Ue0qqT19jry4HJ/99Xv9C6HWWVK7T2qrbyOXW+ldqHUWc3n4EUdtFdXeh/l8X3oVGnHW41AXB9Kj4IgT1Z5FZEd6ExxxUi6vUe1YOp2Q7ybjHJ0W6U0gzmbEaSBOA3EaiNNAnAbiNAzD2Z5nEZjUTqRHSe2GOA0plxdWyA0xl+XmL6i8dbmF+CqpXfOLNTBJOyNN7th7/90GIk0jkgORHIjkQCQHIjkQyYFjn986OMxl2eXB4RpHzw5cXnDg+ovDeFkq5XKRcnkcR1Q75wIVAAAAAAAAAMg2+AByUSBd2KYVoQAAAABJRU5ErkJggg==",Lv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAADnElEQVR4nM2ZX0hTYRTA1z8o6KEiooiiCCEqiCDqxTLopR6Dbnf3nO/u7l8XSvLBhx58UZo+JEEYmUYDzQ3MhCDC6bb2FqSNVIikt0gTaTMlMPpj+cU37/Squ/d+d5uuAwf2sLPz4/z7vu/M4ShQBEHYAADbZVneL0nSYUmSylwu115FUbY51lIkSdqJiJcB4C4ixhHxIwD8RERqpgAwAwAfEPEFANwihFwQBGFLUaBqa2vXI+IlDWjWCgY5lUEjYich5HQhETsFAMPFgkJj2OeiKO6zBQcAPgD4vdpwuKhTiHiOCw4Rr68hGNVF8ockSeVWaS1HxD+lAMR5TRNCduWEq6io2AgAIyWEo1okQ0Z1J5caDucB/yLikVy1N1BqOFyEvLcEThTFA4g4Z2VYV1dHn3Z306amJkoI4Xbodrvpo2CQPunqotXV1TyAE+yE0qdXtTIK1NfTVDpN05OTGY3H49Tlclk6U1WVDg0PL9h9Hh+nN6qqLO0IIcf16W2zMujp6VlwwgupLoPLamtrqyWgJEnX9ICDVgZt7e0rHKVNII3gmAYCAZ7SeKBP8TeeOnqTTHJBqiZwLBOctRvPwAmCsJW32D0eD33d35/TcSKRyED6/X46ODSU8zvRWIzKsszbySPZ9O7hBWTq8/kMI/kykTCOXCRiq/MRcTR7vJXZAcxGsn9gICdIoZHTRXA6A+h0Ok/YBbQDGc0DTtPZbIOczQeQBzKaP1xGFUXZzGrwTL4/4DdpCH3jFASYb4qt4NKFQ87m3SS8cOnCIKcygIqi7LZjaDaEe/v6uIe5lQLAJ9uDmkXu7eCgaUN4TBrHTiQB4L3+qJu2MvB6vdxD2GcyzGOxGNfABoCoHjBpZRAKhXI6jPT25nRoBtnQ0MATxfv620wwn+tWxADOCrKlpYUnglf1gF6e2/SXVMr22erz+WhSBzk6NkYrKyst7ZxO59EFQLbs0R4rpkY1NTU0HA7T242N3N2I8wOXNjc308cdHVy3ae2isG75o+mVHaerrHdyvequ/AdglC0ORFE8ZLTnW/VlEVpr0GEksiyfRMRfJYQbFwRhhyGgNhPdPG/kYisAzLAAmcLp6pHwbE+xeHATbB/psCOEkGNr0NlziBg23GhxRvM8ADxj+7sign1FxIdLhnGhwm49AHCRLcI14HfaZtSwqQDgOyKmtLO+EwBushu8qqqbigbGI8wh+yuCEHKQ7ZvZ5xUnQZ7yD8zfzl1rwXkSAAAAAElFTkSuQmCC",zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVR4nO2bsWtUQRDGV1AxWCoWWgsS7ULgbufI2RxWNlraqq34F7ybiYgaYqVFsBP/AEWFgJWQUtBCkICW0Sg2ejeTa3RlL57cJXfcnXkvu++9+cG0B/vdt9/uzts1RlEURVEURVGmYTZxh4H4rkX5DCjfLcqDBeqcnupHioxFvgMkbrD4F5A8raHUTdnpOod2CjRQb2vE1+uJO2LKyBhxXK8syRdAbs7f/nHMlIlJBYKeUMgdS/y4lnRmTRmYViDoyymL/AqQLxrnDpii8v8CSZ+r5F1hcyoNgaBXKJs+p+rJz+OmKKQqEBUwp7IQCP45in/nPqcyFYh251Rl2c2YPLFfAkFec2rfBaLBnAJqnTUxE0ogyEtOBReI+lxFvA7EN6LKqdCiwPD66rsMNuGTofWJVSDXn1PVpHVOBaKx028tSE6FdgnEnlN+FYEIBj51oWxakqSatE5kLdDH4IPdm6O2AOVRZvsp22xfCz3IdBzVnQmrVWxfSD2ngPgSkLwA4g8WuR18sHt1Fcp7S+2rmfWnKstuxu9BasRzfuXwh0x/frIkKxbluSV5M0GzP3hZlG9+P1W5xadMCBpL7mg16ZypLsqCbcoVS3wTUO4D8RNAfh2LI//up5bmVtwhEyONSIT0Ipk808hYSD/lTJ5plFWgRiRTDJDvlXPgND6kvTj1xB1MZeAVXeYHsciXAeVlLP94VBvF7iaQwg8q2qOGJf6Ua7dkfVjVdscYcuiY9f1tmOVHmDVtudIOUbRpL6Mco599IIZ8mYTQ2QL66VmGu0UvL8jIfNHrLzTMMXqByuUuXyYhk00d6iVOV4jrdZOQjmNEL5LDLmH0KYIrfL5MwrT5Ml/C51AbY8Qp94O6kU8yUZ7B4tZ5U3b8o167LdJG91EvyUN91KsoiqIoiqIoZps/5GTgdqN3Zd0AAAAASUVORK5CYII=",Dt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAClklEQVR4nO2bv4vUUBDHn6DicaViobUgnp292lnZaGmrtuJfoOV5B1ZaiJ34BygqCFaC5YEWCyIoy2XfzOzOxEIQ3MYbye3q/Yomuyb3XpL5wLQL893J900mb5wzDMMwDMMwjFno9fSwR74HKAjEKSA/GDCfmulH2oxHXgYS3R4e+adHfobIF1zXmVSO6D/iPaLc7Pf7R1wXKRBHt6pKCEjuev/tqOsSZQWCrRh74ieI6RnXBeYQSH/7FCC/8SSXVfWAayvzCgTbA+VDa32qEoHoj08NM58CgGOuLVQpELTRp2oSSKc+tdF4n6pTIMjxqSRJFlyT2DeBqKE+td8CwS6fIvq65GImoEDaCJ8KLRDsjE8w5FtR+VQEoujeqpJRNmVYFzkRWp8oBYK9PnXWBKKCqiJ5F8SnIqgSjdqnNk8RCp70XP2UR75DRMdrFQhQPodO9j/jh0d5XFs/BcA3IkiygoriDU/yGmB0qXKfQkyvAMpLT/zRo3xvgVg9GPL12uZTSZIsZD0IopzLTo7sJXNzHk3yCFBeeJK1EsP+4OFJOOunkiQ96UJARIsAchqRzwPItQHybSC574mfepK3EVXkGIhX11QPuRihaITkVddkqGYhs0fONRnqqkAUyyOGvNLNxKmESSOvqOrBShJP7JjfCeLoKpC8iugfj6dRnDaB2vSo7VXDo3wJnVzUL6s27iggggrQqAdmESSsZcJGrpQrjA3tIa9a7LOPxOEvZQjuLWifnrXAX+zyAuzyF7v+QjkVYxeopHn+UoaazHdslzipBdfrylBJxaBdJNccf7FVBGi7v5RhVn/xnVuHQoYCcbq9UPe3lUxAfj4guei6znSpd3lSSZwC8UNb6jUMwzAMwzAMN+EXe4XJ/lKRL1IAAAAASUVORK5CYII=",_v="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3csvg%20id='Layer'%20height='512'%20viewBox='0%200%2024%2024'%20width='512'%20version='1.1'%20sodipodi:docname='unsend-message.svg'%20inkscape:version='1.2%20(dc2aeda,%202022-05-15)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1053'%20/%3e%3csodipodi:namedview%20id='namedview1051'%20pagecolor='%23ffffff'%20bordercolor='%23000000'%20borderopacity='0.25'%20inkscape:showpageshadow='2'%20inkscape:pageopacity='0.0'%20inkscape:pagecheckerboard='0'%20inkscape:deskcolor='%23d1d1d1'%20showgrid='false'%20inkscape:zoom='1.7128906'%20inkscape:cx='256'%20inkscape:cy='256.58381'%20inkscape:window-width='1390'%20inkscape:window-height='847'%20inkscape:window-x='1828'%20inkscape:window-y='70'%20inkscape:window-maximized='0'%20inkscape:current-layer='Layer'%20/%3e%3cpath%20id='chat-dots-times'%20d='m13.745%2020.847a.749.749%200%200%201%20-.654.835%209.688%209.688%200%200%201%20-5.165-.835%201.189%201.189%200%200%200%20-.875-.025l-2.489.836a1.77%201.77%200%200%201%20-.557.091%201.76%201.76%200%200%201%20-1.664-2.308l.841-2.5a1.181%201.181%200%200%200%20-.027-.858%209.746%209.746%200%201%201%2018.595-4.083%208.936%208.936%200%200%201%20-.065%201.09.75.75%200%201%201%20-1.489-.181%207.585%207.585%200%200%200%20.054-.909%208.249%208.249%200%201%200%20-15.737%203.442%202.68%202.68%200%200%201%20.094%201.963l-.843%202.512a.24.24%200%200%200%20.064.255.244.244%200%200%200%20.257.064l2.5-.839a2.681%202.681%200%200%201%201.981.093%208.159%208.159%200%200%200%204.347.7.756.756%200%200%201%20.832.657zm7.785-4.377a.749.749%200%200%200%20-1.06%200l-1.47%201.469-1.47-1.469a.75.75%200%200%200%20-1.06%201.06l1.469%201.47-1.469%201.47a.75.75%200%201%200%201.06%201.06l1.47-1.469%201.47%201.469a.75.75%200%200%200%201.06-1.06l-1.469-1.47%201.469-1.47a.749.749%200%200%200%200-1.06zm-9.52-5.47a1.005%201.005%200%201%200%20.01%200zm5.01%201a1%201%200%200%200%20-1-1h-.01a1%201%200%201%200%201.01%201zm-9.01-1a1.005%201.005%200%201%200%20.01%200z'%20fill='rgb(0,0,0)'%20style='fill:%234b5563;fill-opacity:1'%20/%3e%3c/svg%3e",At="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6UlEQVR4nO2ZS0oDQRCGBwT1AD5AfN1E0KhJV1QSuzSuYqqCiOBar6AHiBHBA3gLieglfIsLcRPduFBQesKYjijCTLckWB/MIh3yd1X13wn8CQJBEP4vs8vFcUDaB6Q7hfwGyO9xHxV+nu4AqaryNOa9+OwizSjk5yRFw0+P5idYKqW8Tt5b8dhsIotro14aaNgmOnq6zGB5EhG7k2giYnd2kaZA89Wntua9wAcNrzY2McW71M6aJprDuXEjurLWB8hH0Wv7wiad/FeMnn2xg6TMFXgQkC+MYLRmezXwALjUV0iHX8U6qwFNjx3dAHwjJg38AsgJWIiFYgBiIQuxUAxALGQhFooBiIUsxEIxALGQhVgoBiAW+mUaHZVKqNZiu8I1zbe+ciFYKqWsoV0nFlSa7yPB+QINhZsgVa0I8Mps6iKZyyBPtyRzSJXkDSDXmsVSIVzL01gYwPrMRpHqTrJRhbxtebLWctTemqC6iRgDFywsr46A5pdm4Eob0XtmQuaYTYbp4v8BFepQxXkqDci71nRe7SY6golisRc0nbVMTdOJwvJKOlcejr6d2prp3PqAQj71eHGPvDeRTm/2KKQd+044eTSdmwg/+CvCi420BZqPze9E/AtMD4B0kMZS/58VLwhC0FZ8ALiaxMwFZ/dcAAAAAElFTkSuQmCC",bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACEElEQVR4nO2Xu4sUQRCHC8HHJYqgiAgmXqKpkQgqIjjTtRss9m/v9MBzqpbB9TA08MUECv4DcslhaCSYGZkoCAZiYCCoaGRwoKKooIi6K+OB2w4LB+exsyX9wUQzDPV1PbqbKBKpj2RmZqOD3GpCJ8li8OzlIUP7DF1MkO0ho8H3GdpzkFNkNfgUnTmyQBKDr4kkrnxNJP/ZyveHPl7eM+Q1Qx8x5KaDXuRjeujg7OyGWgUcZL4SbG9Zmb/E9Kvzcoe9TAOYGN8MYPnHQT8w9ErjeL6lbokeQ7vhN3yiu5lxckfa1v0OmbKX6wx9OlxEPjP0cpKcXT9WEsNoIN/JkAsMfTYkIy9cWw7QuEuUFEWxhpG1nNfHFYkfzsul8v3YS5SUgaZeOw76riJye2QT618lSprTuo293q1MrPtHkG8iKxJLZSVXK5m4V2smVnIfSNGZc15+huVUV08suindvZL/NCCnK+V0nqzdiRlybSAh38s9hSxRlD0RNraX5yPd7FaDo618+9LBsIZSWi0Y2g0EPpbHFLJWSg7y5M9U8lKQNRyydiDw1lwvFL8bWl4OplLWIms4L0W4uZE1mtDJQODT3jxfS9bgoIwakH1kDYYsBDe5c2QN5+XMYBrpDbJGis7h4GjxgKyRTOW7glPqK7JGgmxrIPCGrAFgIhilX8gaANYFAt/IGogCkUgkQiPgF1+GFsoZdsMBAAAAAElFTkSuQmCC",Ov={class:"flex gap-3"},zv={class:"flex flex-col gap-1"},Dv={class:"text-sm font-bold text-gray-600 dark:text-gray-300"},Pv={class:"multiline-ellipsis text-xs text-gray-500 dark:text-gray-300"},Nv={key:0,class:"ml-auto h-10 w-10 rounded object-cover"},Vv=["innerHTML"],jv=["innerHTML"],Kv=["innerHTML"],Hv={key:3,class:"my-1 flex flex-col gap-3"},Qv=["onClick"],qv={class:"align-center flex grow flex-col justify-center gap-0.5 overflow-hidden"},Gv={class:"ellipsis text-sm font-bold"},Xv={class:"multiline-ellipsis text-xs"},Wv=["src"],Jv=B({__name:"TextMessageContent",props:{message:{}},setup(o){const e=o,t=W(),s=f(()=>{var p;return(p=t.state.imkit.messageMultiList.main)==null?void 0:p.map.get(e.message.replyId)}),n=f(()=>{const p=s.value;return p?t.state.imkit.users[p.senderId]:null}),a=f(()=>e.message.isIncoming),r=f(()=>{const{urls:p}=e.message;return p?p.map(A=>t.state.imkit.linkPreviews[A]).filter(A=>A):[]}),i=f(()=>{if(s.value.type===R.Text)return s.value.text;if(s.value.type===R.Image){const{t:p}=Me();return{[R.Text]:p("text"),[R.Image]:p("image"),[R.Video]:p("video"),[R.Sticker]:p("sticker")}[s.value.type]}return""}),d=f(()=>{if(s.value.type===R.Image)return s.value.images[0]}),m=p=>{const A=p.target;if(A.tagName==="SPAN"&&A.dataset.uid){const w=t.state.imkit.users[A.dataset.uid];if(!w)return;const{open:E}=he({component:Rt,attrs:{url:w.avatarUrl??"",name:w.nickname??""}});E()}},g=f(()=>t.state.imkit.messageSearchKeyword?e.message.html.replace(new RegExp(t.state.imkit.messageSearchKeyword,"ig"),p=>`<span class="bg-amber-400 text-white">${p}</span>`):e.message.html),h=p=>{window.open(p,"_blank")},v=()=>{t.dispatch("imkit/navigateToMessage",e.message.replyId)};return(p,A)=>{var E,D,z;const w=Le("src");return c(),u(j,null,[s.value?(c(),u("div",{key:0,class:"flex flex-col gap-2",onClick:v},[l("div",Ov,[U(ue,{class:"row-span-2 h-6 w-6 flex-shrink-0 rounded-lg text-sm",url:((E=n.value)==null?void 0:E.avatarUrl)??"",name:((D=n.value)==null?void 0:D.nickname)??""},null,8,["url","name"]),l("div",zv,[l("div",Dv,b((z=n.value)==null?void 0:z.nickname),1),l("div",Pv,b(i.value),1)]),d.value?ne((c(),u("img",Nv,null,512)),[[w,d.value.thumbnailUrl]]):y("",!0)]),A[0]||(A[0]=l("div",{class:"-mx-4 h-px bg-gray-200 dark:bg-zinc-600"},null,-1)),l("div",{class:"break-words",innerHTML:g.value},null,8,Vv)])):(c(),u("div",{key:1,class:"break-words",innerHTML:g.value,onClick:m},null,8,jv)),a.value&&p.message.translatedText?(c(),u("div",{key:2,class:"break-words text-gray-400",innerHTML:p.$t("translation")+": "+p.message.translatedText},null,8,Kv)):y("",!0),r.value.length>0?(c(),u("div",Hv,[(c(!0),u(j,null,re(r.value,L=>(c(),u("div",{key:L.url,class:"flex cursor-pointer items-stretch justify-center gap-2",onClick:K=>h(L.url)},[A[1]||(A[1]=l("div",{class:"my-0.5 w-0.5 flex-shrink-0 rounded-full bg-blue-300"},null,-1)),l("div",qv,[l("div",Gv,b(L.title),1),l("div",Xv,b(L.description||p.$t("tapOpen")),1)]),L.images.length>0?(c(),u("img",{key:0,src:L.images[0],class:"my-auto h-12 w-12 flex-shrink-0 rounded object-cover"},null,8,Wv)):y("",!0)],8,Qv))),128))])):y("",!0)],64)}}}),Ce=oe(Jv,[["__scopeId","data-v-92fa25f5"]]),Yv="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAADNklEQVR4nO2Z20sVURTGd9r9IlLmDYxuBEmBURBSkQWF2EsvUUT17EOFb9ZbFIRBQdEfYIUUBNlDd6KgIqOrhWU3MQiiIior7QLlL9Y5a07b0eM5xzPjmYnzgXj2ntnfWt+stfdes8eYLLLIIuMARgILgU3AdmArsBZYBOSaoANYDBwBvhEfH4BGoNIEDUAJcBLotRx+ChwHDgGHgWbgiUtUMzDLBAFAFfBOHfsE7AbKBrl/NrAL+KJjPgPVw+t1f6dWAz/UoRNAYQpjp2rEBL+BLf56G9+RcqBbHdk5RI4RMlZT8hew1HtPo4bG60qzUlLC6h8FPFYRezyws1e5JEXz03bcIp4JNAHfXZOzHVgH1Gn7GpDjgb0c4IpyNnglotqaiJK7rcBV4JUlSFLhDzDXE6MmYrdCOeXhFXlB1qPOylpf4rpeqcIiS2e6zrsBnFbuWpMOgJtKtC/BvKlN+6kNzL1Z7V9Ih2SBkryUyeyph8n7UKg+fEyHpM6rVSgd8G+BGTeUwcuAe0qQmY1JAXSqHzNMspA8tyaYU9DF9otMAHijvhwA1gCjEw2YYy2pnTrRUg+nxwDaXHvXe6B+wHkLTAE69MZTwEQTEAB5wBJgo27KUroI7vSr5YBjevFSplaoFKuMW1ZlkWcXe726e5eaEAAYq+WQoMnp3K8dB02IABQDXzUIFdJxX4UsNyED0BALgr6RCSb7ZExS4K6PZwKCNmn8jPyEMT4Zi8An7nyl75LGa22UhVDIBKXvlsZlbawPoZB5Sv9CGtu0cSaEQuqVvlEaBdYbYFVYhBB9D3LqsBqnc4d2vAWmh0TIUaVukdMXpzMXOG+JWRFUIUQj4YiQTCp33zAJOOcYBs4CG4BpCUtnn4UQdX6+zgknnWRXXxVvQK7e3EXquJGqEBnD0NDSLxJxDBTo0f9F3Wec0nkwXPdRSA/wXE9yamJzYjgxmJBQgayQgCGUEQEeAA/lpSeeEH0hegTcNkEFUQedz2zFbiEqQq4JWk1QQfSI0/lOIstlqbWEFlnXngX+fIC+T935b/+ORSvwoG9kbAQ/EkmICZ8IV5q161840ilBZJL+TJ2F+U/wF9Y5UmVGwaQRAAAAAElFTkSuQmCC",Zv={key:0,class:"relative flex items-center justify-center"},e5={class:"max-w-80vw max-h-80vh",alt:""},t5={key:0,class:"max-w-80vw max-h-80vh absolute",alt:""},s5={key:1,class:"mt-4 flex gap-4"},o5=B({__name:"ImageModal",props:{image:{}},setup(o){const e=pe(),t=W(),s=f(()=>t.state.imkit.downloadProgresses),n=f(()=>t.state.imkit.imageCache),a=r=>{const i=document.createElement("a"),d=n.value.get(r.originalUrl);i.href=d;const m=d.split(";")[0].replace("data:","").split("/")[1];i.download=`download.${m}`,i.click()};return(r,i)=>{const d=Le("src");return c(),P(k(be),{class:"flex items-center justify-center","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[r.image?(c(),u("div",Zv,[ne(l("img",e5,null,512),[[d,r.image.thumbnailUrl]]),r.image.thumbnailUrl!==r.image.originalUrl?ne((c(),u("img",t5,null,512)),[[d,r.image.originalUrl]]):y("",!0),(!s.value[r.image.originalUrl]||s.value[r.image.originalUrl]<1)&&r.image.thumbnailUrl!==r.image.originalUrl?(c(),u(j,{key:1},[i[2]||(i[2]=l("div",{class:"absolute inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1)),U(k(Xe),{class:"!absolute",diameter:40,"completed-steps":s.value[r.image.originalUrl]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):y("",!0)])):y("",!0),r.image?(c(),u("div",s5,[l("button",{class:"flex grow items-center justify-center gap-1.5 rounded-lg border px-3 py-2 text-base font-normal text-white",onClick:i[0]||(i[0]=m=>a(r.image))},[i[3]||(i[3]=l("img",{class:"h-5 w-5",src:Yv},null,-1)),ce(" "+b(r.$t("download")),1)]),l("button",{class:"flex grow items-center justify-center gap-1.5 rounded-lg border px-3 py-2 text-base font-normal text-white",onClick:i[1]||(i[1]=m=>k(e).closeAll())},b(r.$t("close")),1)])):y("",!0)]),_:1})}}}),n5=["onClick"],a5=B({__name:"ImageMessageContent",props:{message:{}},setup(o){const e=o,t=W(),s=f(()=>t.state.imkit.uploadProgresses),n=(r,i)=>{if(e.message.images.length===1){const{width:m,height:g}=i;return m<g?{width:"200px",height:`${200*g/m}px`}:{width:`${200*m/g}px`,height:"200px"}}else return r===e.message.images.length-1&&r%2===0?{width:`${200*2+1}px`,height:"200px"}:{width:"200px",height:"200px"}},a=r=>{const{open:i}=he({component:o5,attrs:{image:r}});i()};return(r,i)=>{const d=Le("src");return c(),u("div",{class:N(["-mx-3 -my-2 grid gap-px",[r.message.images.length>1?"grid-cols-2":"grid-cols-1"]])},[(c(!0),u(j,null,re(r.message.images,(m,g)=>(c(),u("div",{key:m.thumbnailUrl,class:N(["relative flex items-center justify-center",{"col-span-2":r.message.images.length>1&&g===r.message.images.length-1&&g%2===0}]),onClick:h=>a(m)},[ne(l("img",{src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"border-0 object-cover transition",style:ee(n(g,m))},null,4),[[d,m.thumbnailUrl]]),m.thumbnailUrl.startsWith("data")?(c(),u(j,{key:0},[i[0]||(i[0]=l("div",{class:"absolute inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1)),U(k(Xe),{class:"!absolute",diameter:40,"completed-steps":s.value[`${m.id}-original`]===void 0?(s.value[`${m.id}-original`]+s.value[`${m.id}-thumbnail`])/2*100:s.value[`${m.id}-original`]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):y("",!0)],10,n5))),128))],2)}}}),r5=["src"],Pt=B({__name:"StickerMessageContent",props:{message:{}},setup(o){const e=o,t=f(()=>e.message.stickerUrl?e.message.stickerUrl:`/sticker/${e.message.stickerId.split("-")[0]}/${e.message.stickerId}.png`);return(s,n)=>(c(),u("img",{src:t.value,class:"h-32 w-32 border-0 object-contain"},null,8,r5))}}),Nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABpUlEQVR4nO3bP68MURzH4RMhNIobEhoJFaFCKRI6Ha/AW9DSKeUqVVqlmkQv8ScUOoVGgUSnQCM8MpFJZJmz17V398zO9ym32nwyO7O/M+eUEhERERERK4Z9OLDq79EcnMIjfPfLB9zA3jJ1OIMv/u41zpUpw0t13VV1B/vL1OCYrXuLS2VKcN6/uzeZGzku2J6PuFrWne0H6j3AkbKu/H+gzidcw66ybiwmUO8xjpd1YrGBOl9xE3vKOrD4QL1XOFvGzs4F6nzDrW6+K2NlZwP13uBiGSPLCdT5gbujG1csL1DvPS6XsbD8QL37OFhaZ3WBxjGuWG2g3sNmxxVtBGp3XNFOoN/HlROlFdoL1Na4os1Avac4nEB1z7E7V1DdlQSqu51AdZsJVJefWMWz3KSHPcGhPOb/lD+KFRk1BmRYrchyx4AsmFVkyXVAFu0H5LVPRV4cDsir54psXmh+TFgE2UBVly14c2QT5xzZBjxHNpLPgaO2bnpHETp4MSfMdA+zdHAanwfi5DhUBydnDtS9w/UcqJvRBcHG7OcREREREVEm5icELZJIi+Y1dAAAAABJRU5ErkJggg==",i5={class:"absolute bottom-2 right-2 rounded-full bg-black bg-opacity-30 px-2 py-1 text-xs font-bold text-white"},l5=B({__name:"VideoMessageContent",props:{message:{}},setup(o){const e=o,t=`vp-${Math.random()}`,s=M(),n=M(),a=M(!1),r=()=>{const{width:h,height:v}=e.message.video;return h<v?{width:"200px",height:`${200*v/h}px`}:{width:`${200*h/v}px`,height:"200px"}},i=W(),d=async()=>{if(a.value)return;a.value=!0;const g=await i.dispatch("imkit/fetchVideoBlob",e.message.video.originalUrl);s.value&&(s.value.src=URL.createObjectURL(g)),n.value=$s(t)},m=f(()=>i.state.imkit.uploadProgresses);return(g,h)=>{const v=Le("src");return c(),u("div",{class:"relative -m-2 flex cursor-pointer items-center justify-center",style:ee(r()),onClick:d},[ne(l("video",{ref_key:"videoPlayer",ref:s,id:t,class:"video-js vjs-default-skin absolute inset-0 h-full w-full",controls:"",preload:"auto",autoplay:""},null,512),[[$t,a.value]]),a.value?y("",!0):(c(),u(j,{key:0},[ne(l("img",{src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"border-0 object-cover transition",style:ee(r())},null,4),[[v,g.message.video.thumbnailUrl]]),g.message.video.thumbnailUrl.startsWith("data")?(c(),u(j,{key:0},[h[0]||(h[0]=l("div",{class:"absolute inset-0 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1)),U(k(Xe),{class:"!absolute",diameter:40,"completed-steps":m.value[g.message.video.id]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):(c(),u(j,{key:1},[h[1]||(h[1]=l("img",{class:"pointer-events-none absolute",src:Nt,width:"24",height:"24"},null,-1)),l("div",i5,b(Math.floor(g.message.video.duration/60))+":"+b(`${Math.floor(g.message.video.duration%60)}`.padStart(2,"0")),1)],64))],64))],4)}}}),c5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABV0lEQVR4nO3aMUpDQRSF4VmI1m5HtLCxkMxxA86JazAz2Ygi2LkgbVWMpQpKFCyihSZ33r0x58As4GP+F17gpaRp2sbs6GS6nUu7RGlPYHuzPrm029HJdDdFwYL1vgd0Af2Sx5MDb2/6uNnO2FBodMr4C8n6HAqN/re6t4gG62tmPfyX4PT52MRBYwBwKDQGAodBY0BwCDQGBruj4QB2RcMJ7IaGI9gFDWfwfMes+z+9kXX5w4HOYJyebS2LBuvN2oEz6/Uq6LUDY4BH4k/zBglM3bDtECBbPcPUj5bdECBbJU0lbTcEyFZJU0nbDQGyVdJU0nZDgGyVNJW03RAgWyVNJW03BMhWSVNJ2w0BslXSVNJ2Q4BslTSVtN2wcUmXvh+XrnJyaY/2YNarsGDWc3PwaDzZyaU9eOO+ndLufvupxHJfxZd2AdaZO5R1Nr/ZblhN01LEvQM/68r6Ex4bqgAAAABJRU5ErkJggg==",d5={class:"flex flex-col gap-0.5 font-normal"},u5={class:"break-words text-base"},m5=B({__name:"FileMessageContent",props:{message:{}},setup(o){const e=W(),t=o,s=f(()=>t.message.isIncoming),n=f(()=>e.state.imkit.uploadProgresses),a=f(()=>{const i=t.message.bytes;return i<1e3?i+"B":i<1e3*1e3?(i/1e3).toFixed(1)+"KB":i<1e3*1e3*1e3?(i/1e3/1e3).toFixed(1)+"MB":(i/1e3/1e3/1e3).toFixed(1)+"GB"}),r=async()=>{try{const{url:i,fileName:d,fileExtension:m}=t.message,g=await e.state.imkit.axios.get(i,{responseType:"blob",onDownloadProgress:p=>{const{total:A}=p;A&&e.commit("imkit/updateField",{key:"downloadProgresses",value:{[i]:p.loaded/A}})}}),h=window.URL.createObjectURL(g.data),v=document.createElement("a");v.href=h,v.download=`${d}.${m}`,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(h)}catch(i){console.error(i)}};return(i,d)=>(c(),u("div",{class:"relative flex cursor-pointer items-center justify-center gap-2",onClick:r},[d[1]||(d[1]=l("img",{class:"w-8 object-contain",src:c5},null,-1)),l("div",d5,[l("div",u5,b(i.message.fileName)+"."+b(i.message.fileExtension),1),l("div",{class:N(["text-sm",{"text-gray-500 dark:text-gray-300":s.value}])},b(i.$t("fileSize"))+": "+b(a.value),3)]),i.message.url===""?(c(),u(j,{key:0},[d[0]||(d[0]=l("div",{class:"absolute inset-0 -m-2 bg-gray-800 bg-opacity-50 fill-blue-300"},null,-1)),U(k(Xe),{class:"!absolute",diameter:40,"completed-steps":n.value[i.message.id]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):y("",!0)]))}}),g5=oe(m5,[["__scopeId","data-v-75757e72"]]),ye=(o,e)=>{switch(e.type){case"message":{const t={roomId:o,messageType:"text",message:e.text};xe.dispatch("imkit/sendMessage",t);break}case"uri":window.open(e.uri,"_blank");break;default:console.error(`Unsupported action type: ${e.type}`);break}},h5={class:"w-[250px] cursor-pointer overflow-hidden text-base"},p5=["src"],f5={key:1,class:"flex flex-col gap-2 border-t py-3 dark:border-gray-500"},v5=["onClick"],A5=B({__name:"TemplateMessageButtonsContent",props:{message:{}},setup(o){const e=o,t=f(()=>e.message.isIncoming),s=f(()=>!t.value);return(n,a)=>{var r;return c(),u("div",h5,[n.message.template.thumbnailImageUrl?(c(),u("img",{key:0,class:N(["object-cover text-gray-900 dark:text-gray-200",{"object-contain":n.message.template.imageSize==="contain"}]),style:ee({"background-color":n.message.template.imageBackgroundColor??"#ffffff",height:`${n.message.template.imageAspectRatio==="square"?250:250/1.51}px`}),src:n.message.template.thumbnailImageUrl,onClick:a[0]||(a[0]=i=>k(ye)(n.message.roomId,n.message.template.defaultAction))},null,14,p5)):y("",!0),l("div",{class:"flex flex-col gap-1 p-3",onClick:a[1]||(a[1]=i=>k(ye)(n.message.roomId,n.message.template.defaultAction))},[l("div",null,b((r=n.message.template.title)==null?void 0:r.substring(0,40)),1),n.message.template.text?(c(),u("div",{key:0,class:N(["text-sm",{"text-gray-500 dark:text-gray-300":t.value,"text-gray-100":s.value}])},b(!n.message.template.thumbnailImageUrl&&!n.message.template.title?n.message.template.text.substring(0,160):n.message.template.text.substring(0,60)),3)):y("",!0)]),n.message.template.actions.length>0?(c(),u("div",f5,[(c(!0),u(j,null,re(n.message.template.actions,i=>(c(),u("div",{key:i.label,class:N(["flex items-center justify-center p-0.5 text-sm",{"text-slate-500 dark:text-slate-300":t.value,"text-slate-100":s.value}]),onClick:d=>k(ye)(n.message.roomId,i)},b(i.label),11,v5))),128))])):y("",!0)])}}}),b5={class:"w-[250px] overflow-hidden text-base"},k5={class:"p-3"},y5={class:"flex divide-x border-t"},w5=["onClick"],C5=B({__name:"TemplateMessageConfirmContent",props:{message:{}},setup(o){const e=o,t=f(()=>e.message.isIncoming),s=f(()=>!t.value);return(n,a)=>(c(),u("div",b5,[l("div",k5,b(n.message.template.text.substring(0,240)),1),l("div",y5,[(c(!0),u(j,null,re(n.message.template.actions.slice(0,2),r=>(c(),u("div",{key:r.label,class:N(["flex grow cursor-pointer items-center justify-center p-2",{"text-slate-500":t.value,"text-slate-100":s.value}]),onClick:i=>k(ye)(n.message.roomId,r)},b(r.label),11,w5))),128))])]))}}),x5={class:"flex cursor-pointer gap-2 overflow-auto text-base"},$5=["src","onClick"],T5=["onClick"],I5={key:1,class:"flex flex-col gap-2 border-t py-3 dark:border-gray-500"},M5=["onClick"],S5=B({__name:"TemplateMessageCarouselContent",props:{message:{}},setup(o){const e=o,t=f(()=>e.message.isIncoming),s=f(()=>!t.value);return(n,a)=>(c(),u("div",x5,[(c(!0),u(j,null,re(n.message.template.columns,(r,i)=>{var d;return c(),u("div",{key:i,class:N(["w-[250px] cursor-pointer overflow-hidden rounded-xl text-base",[t.value?"bg-gray-100 text-gray-900 dark:bg-zinc-700 dark:text-gray-200":"bg-blue-400 text-white"]])},[r.thumbnailImageUrl?(c(),u("img",{key:0,class:N(["object-cover",{"object-contain":n.message.template.imageSize==="contain"}]),style:ee({"background-color":r.imageBackgroundColor??"#ffffff",height:`${n.message.template.imageAspectRatio==="square"?250:250/1.51}px`}),src:r.thumbnailImageUrl,onClick:m=>k(ye)(n.message.roomId,r.defaultAction)},null,14,$5)):y("",!0),l("div",{class:"flex flex-col gap-1 p-3",onClick:m=>k(ye)(n.message.roomId,r.defaultAction)},[l("div",null,b((d=r.title)==null?void 0:d.substring(0,40)),1),r.text?(c(),u("div",{key:0,class:N(["text-sm",{"text-gray-500 dark:text-gray-300":t.value,"text-gray-100":s.value}])},b(!r.thumbnailImageUrl&&!r.title?r.text.substring(0,160):r.text.substring(0,60)),3)):y("",!0)],8,T5),r.actions.length>0?(c(),u("div",I5,[(c(!0),u(j,null,re(r.actions,m=>(c(),u("div",{key:m.label,class:N(["flex items-center justify-center p-0.5 text-sm",{"text-slate-500 dark:text-slate-300":t.value,"text-slate-100":s.value}]),onClick:g=>k(ye)(n.message.roomId,m)},b(m.label),11,M5))),128))])):y("",!0)],2)}),128))]))}}),F5={class:"flex cursor-pointer gap-2 overflow-auto text-base"},R5=["src","onClick"],U5=B({__name:"TemplateMessageImageCarouselContent",props:{message:{}},setup(o){return(e,t)=>(c(),u("div",F5,[(c(!0),u(j,null,re(e.message.template.columns,(s,n)=>(c(),u("img",{key:n,src:s.imageUrl,class:"h-[250px] w-[250px] rounded-xl object-cover",onClick:a=>k(ye)(e.message.roomId,s.action)},null,8,R5))),128))]))}}),E5=B({__name:"TemplateMessageContent",props:{message:{}},setup(o){const e={[Te.Buttons]:A5,[Te.Confirm]:C5,[Te.Carousel]:S5,[Te.ImageCarousel]:U5};return(t,s)=>(c(),P(We(e[t.message.templateType]),{message:t.message},null,8,["message"]))}}),B5=B({__name:"FlexMessageBoxComponent",props:{content:{}},setup(o){const e=t=>({none:"0",xs:"2px",sm:"4px",md:"8px",lg:"12px",xl:"16px",xxl:"20px"})[t]??t;return(t,s)=>(c(),u("div",{class:N(["flex",{"flex-col":t.content.layout==="vertical","flex-row":t.content.layout==="horizontal","flex-row items-baseline":t.content.layout==="baseline"}]),style:ee({backgroundColor:t.content.backgroundColor??"#00000000",borderColor:t.content.borderColor,borderWidth:t.content.borderWidth,borderRadius:t.content.cornerRadius,width:t.content.width,maxWidth:t.content.maxWidth,height:t.content.height,maxHeight:t.content.maxHeight})},[(c(!0),u(j,null,re(t.content.contents,(n,a)=>(c(),P(_e,{key:a,content:n,style:ee(t.content.layout==="vertical"?{marginTop:n.margin?e(n.margin):a===0?0:e(t.content.spacing)}:{marginLeft:n.margin?e(n.margin):a===0?0:e(t.content.spacing)})},null,8,["content","style"]))),128))],6))}}),L5=B({__name:"FlexMessageButtonComponent",props:{content:{}},setup(o){const e=o,t=W(),s=Ts("messageId"),n=f(()=>{var i;return(i=t.state.imkit.messageMultiList.main)==null?void 0:i.map.get(s)}),a=f(()=>e.content.style==="primary"?"#ffffff":e.content.style==="secondary"?"#000000":e.content.color||"#42659a"),r=f(()=>e.content.style==="primary"?e.content.color||"#17c950":e.content.style==="secondary"?e.content.color||"#dcdfe5":"");return(i,d)=>(c(),u("button",{class:N([[i.content.size==="md"?"h-52px":"h-10"],"rounded-lg"]),style:ee({color:a.value,backgroundColor:r.value}),onClick:d[0]||(d[0]=m=>k(ye)(n.value.roomId,i.content.action))},b(i.content.action.label),7))}}),_5=["src"],O5=B({__name:"FlexMessageImageComponent",props:{content:{}},setup(o){const e=o,t=f(()=>e.content.aspectRatio?e.content.aspectRatio.replace(":","/"):"1/1");return(s,n)=>(c(),u("div",{class:N(["w-full overflow-hidden bg-gray-300",[s.content.aspectMode==="cover"?"object-cover":"object-contain"]]),style:ee({"aspect-ratio":t.value})},[l("img",{class:"h-full w-full",src:s.content.url},null,8,_5)],6))}}),z5=["src"],D5=B({__name:"FlexMessageVideoComponent",props:{content:{}},setup(o){return(e,t)=>(c(),u("video",{src:e.content.url},null,8,z5))}}),P5=B({__name:"FlexMessageIconComponent",props:{content:{}},setup(o){const e=o,t=f(()=>{const s=e.content.size;return{xxs:"12px",xs:"13px",sm:"14px",md:"16px",lg:"19px",xl:"22px",xxl:"29px","3xl":"35px","4xl":"48px","5xl":"74px"}[s]??"16px"});return(s,n)=>(c(),u("span",{style:ee({overflow:"hidden",background:"no-repeat center",backgroundSize:"contain",backgroundImage:"url("+s.content.url+")",width:t.value,height:t.value})},null,4))}}),N5=B({__name:"FlexMessageTextComponent",props:{content:{}},setup(o){const e=o,t=f(()=>{const s=e.content.size;return{xxs:"12px",xs:"13px",sm:"14px",md:"16px",lg:"19px",xl:"22px",xxl:"29px","3xl":"35px","4xl":"48px","5xl":"74px"}[s]??"16px"});return(s,n)=>(c(),u("div",{class:"basis-0",style:ee({flexGrow:s.content.flex??0})},[l("p",{class:N([s.content.weight==="bold"?"font-bold":"font-normal",s.content.wrap?"overflow-hidden overflow-clip whitespace-normal break-words":"overflow-hidden truncate whitespace-nowrap"]),style:ee({fontSize:t.value,color:s.content.color,"text-size-adjust":"100%"})},b(s.content.text),7)],4))}}),V5=B({__name:"FlexMessageSpanComponent",props:{content:{}},setup(o){return(e,t)=>(c(),u("span",null,b(e.content.text),1))}}),j5=B({__name:"FlexMessageSeparatorComponent",props:{content:{}},setup(o){return(e,t)=>(c(),u("div"))}}),_e=B({__name:"FlexMessageComponent",props:{content:{}},setup(o){const e={box:B5,button:L5,image:O5,video:D5,icon:P5,text:N5,span:V5,separator:j5},t=o,s=f(()=>t.content.type);return(n,a)=>(c(),P(We(e[s.value]),{content:n.content},null,8,["content"]))}}),Vt=B({__name:"FlexMessageBubbleComponent",props:{content:{}},setup(o){const e=o,t=f(()=>e.content.header),s=f(()=>e.content.hero),n=f(()=>e.content.body),a=f(()=>e.content.footer),r=f(()=>{var h;return(h=e.content.styles)==null?void 0:h.header}),i=f(()=>{var h;return(h=e.content.styles)==null?void 0:h.hero}),d=f(()=>{var h;return(h=e.content.styles)==null?void 0:h.body}),m=f(()=>{var h;return(h=e.content.styles)==null?void 0:h.footer}),g=f(()=>{switch(e.content.size){case"nano":return"10px";case"micro":return"13px";case"kilo":return a.value?"13px 13px 17px 13px":"13px";case"mega":return a.value?"19px 20px 10px 20px":"20px";case"giga":return a.value?"19px 20px 10px 20px":"20px";default:return"20px"}});return(h,v)=>{var p,A,w,E,D,z,L,K,Q,J,X,V;return c(),u("div",{class:N(["overflow-hidden rounded-xl bg-gray-100 text-[#444444] dark:bg-zinc-700",{"w-[120px]":h.content.size==="nano","w-[160px]":h.content.size==="micro","w-[260px]":h.content.size==="kilo","w-[300px]":h.content.size==="mega"||!h.content.size,"w-[386px]":h.content.size==="giga"}])},[t.value?(c(),P(_e,{key:0,content:t.value,style:ee({backgroundColor:(p=r.value)==null?void 0:p.backgroundColor,borderBottom:(A=r.value)!=null&&A.separator?`1px solid ${(w=r.value)==null?void 0:w.separatorColor}`:"none"})},null,8,["content","style"])):y("",!0),s.value?(c(),P(_e,{key:1,content:s.value,style:ee({backgroundColor:(E=i.value)==null?void 0:E.backgroundColor,borderBottom:(D=i.value)!=null&&D.separator?`1px solid ${(z=i.value)==null?void 0:z.separatorColor}`:"none"})},null,8,["content","style"])):y("",!0),n.value?(c(),P(_e,{key:2,content:n.value,style:ee({backgroundColor:(L=d.value)==null?void 0:L.backgroundColor,borderBottom:(K=d.value)!=null&&K.separator?`1px solid ${(Q=d.value)==null?void 0:Q.separatorColor}`:"none",padding:g.value})},null,8,["content","style"])):y("",!0),a.value?(c(),P(_e,{key:3,content:a.value,class:"p-2.5",style:ee({backgroundColor:(J=m.value)==null?void 0:J.backgroundColor,borderBottom:(X=m.value)!=null&&X.separator?`1px solid ${(V=m.value)==null?void 0:V.separatorColor}`:"none"})},null,8,["content","style"])):y("",!0)],2)}}}),K5=B({__name:"FlexMessageBubbleContent",props:{message:{}},setup(o){return(e,t)=>(c(),P(Vt,{content:e.message.contents},null,8,["content"]))}}),H5={class:"flex items-start gap-2 overflow-auto"},Q5=B({__name:"FlexMessageCarouselContent",props:{message:{}},setup(o){return(e,t)=>(c(),u("div",H5,[(c(!0),u(j,null,re(e.message.contents.contents,(s,n)=>(c(),P(Vt,{key:n,content:s},null,8,["content"]))),128))]))}}),q5=B({__name:"FlexMessageContent",props:{message:{}},setup(o){const e={[rt.Bubble]:K5,[rt.Carousel]:Q5};return(t,s)=>(c(),P(We(e[t.message.flexType]),{message:t.message},null,8,["message"]))}}),G5={class:"w-[250px] p-2 underline sm:w-[300px]"},X5=B({__name:"LocationMessageContent",props:{message:{}},setup(o){const e=o,s=W().state.imkit.config.mapApiKey,n=f(()=>({lat:e.message.latitude,lng:e.message.longitude})),a=()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${e.message.address}`,"_blank")};return(r,i)=>(c(),u("div",{class:"relative -mx-3 -my-2 flex cursor-pointer flex-col",onClick:a},[U(k(It),{"api-key":k(s),center:n.value,zoom:15,disableDefaultUi:!0,class:"h-[150px] w-[250px] sm:h-[200px] sm:w-[300px]"},{default:le(()=>[U(k(Tt),{options:{position:n.value}},null,8,["options"])]),_:1},8,["api-key","center"]),l("div",G5,b(r.message.address),1),i[0]||(i[0]=l("div",{class:"absolute inset-0"},null,-1))]))}}),W5=oe(X5,[["__scopeId","data-v-b091599d"]]),J5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACS0lEQVR4nO2bPYsUQRCGG1E0MRAFTQSNTjRSQxE0M9NfoGCwOv3O3k7XKpxR9e7hdyRGlxoan2B+4AcamBmYGKhgZqAmoitzB87eMh93595uz877QCcbLQ9dNV3V1cYQQgghhBBCpswV1T3Anf3T/h/BYZP+Cev0uXX+N8QPIPoFzt9qtx/tNk0HiZ6C+B9rYtYv6/z7OOmdMU0GTt/myRmSlO6qx1dv3t9rmkbcXTxaJmfdcvrROr1gmkSc9M5uWFAm6kljEjm6em7TglYl+a+R08tm1sFWBWW7aTmSxcNmVsH/ClqT9A3iO6q6w8waGIegLOxWrnf6c2aWwDgFpUcC0Z9w6lutpV1mFsCYBQ2Jehd1+6dN3cE2CVqV5PwvK3ovre9MXcE2ChpaHyLXO2/qCCYjKC1+/1jnl2pXrmBigv6F3Web9C6auoAJCxpK4k9bogdM6GBKgmpTrmCagrL1LNhyBWEICrdcQSiCsrBbiUWPmVBAaIJCK1cQoKBMlH9pb+ghCpJSSa9VdSd3kBRLikUvUZCU7CLnH1KQlOUjfUBBwhAbbO1cpK+YpKXwPPRifv72QX7mhQfFwcZDiqXGoCDXsFhF8c5huwP54cSGGYq/UGy5Ir9sYNMe+eUCr31QnIR5cYj8cOLVM4qTMIcXEHo/eRyAA1TlcASvAg5xVsAx4Ao4SF7BtY4e2UT7s3lPEVKs+DcV1y7NfcyS0pb+Sev0e4EcPodKaXf1+MiDuk9WdIEP6kZIhUQLd/eN/k4IIYQQQggxDeMvr6MHGaopSLgAAAAASUVORK5CYII=",Y5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4klEQVR4nO2bzy5DQRTGJ8GaDQ+ANZ4FXbDxZ9HoGTc1p01scA5SGmshfQLBAu+gkYgXYqEyjUhEae/0Ti/y/ZJZ3vnO/e733d0xBgAAAAAAgFhsVGSCKrJoK1L8cpwsJ9XDqaw1ycm0v7uz5v5CktTGTd6IyLBlObEsL5a19f2RV8t6WS7LWL+a/g7r9PpnPW2R02fr9NjPaPKCnDa6DfrpOG32M3Cx2Bgh1od0mnJm8oDKMveejN6H9V+WZTVYk2U9rZ6fsVSVGTNorJO99MO2B74N1SSndyGaxLqb7dv3MizreZBBTh5DNf2zgQadm1///+EPg55CNf2zQQY5bZhBQzAIBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAYhQTEhVAwGIUExIVQMBiFBMSFUDAb1lyDGKkKUZRZyemMGvcziZMcMmk13MBuyDmW3dCVU0zpd+zPrUCE1I5b7fhbq2huOTpsp03Nq8kJEhoml3l5/7PIVifWiuF0fzWIlk1iueqjyM7EcFQpXQyZvkqQ2XqrIfKcFW2JdKm3JZNaa/k5/dydNP8uvWOoFAAAAAADm3/IGGLsxyp+ApQ8AAAAASUVORK5CYII=",Z5="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVR4nO3bTy5DYRSG8ZuosU5qAWWMtZQJE38GVkGHiHGj6QoEA+yBSJpuiIFXGtesvPee77sp+vwS057zPcXsFAUAAADQFEmrknYkHc/42ZO01sDM9fKzZ83cltTJPTOyZEvSpaQ3/exd0o2kdoaZbUl38l4lnU93zPPa2LIj1fOcsrCkZUkvNWde5X119WW3yt+Mug4SZh4F5k133Mj7+mrL9hXzkDDzMTjzNO/rqy07DC47Tpg5Ds4c5n19M/9/vkwSZk4UM8r7+mrLjoLLEsggkEEgg0AGgQwCGQQyCGQQyCCQQSCDQAaBDAIZBDIIZBDIIJBBIINABoEMAhkEMghkEMggkEEgg0AGgQwCGQQyCGQQyCCQQSCDQAaBDAIZBDIIZCxMoGFw2YU5RegHl72fwzHLSd7XV1t2M3gOtZ8w8/DPnEMF/8yeEg/qWuVRXh2DYl70ufBFef7ovsVrSSuZTjJvK4SZ7nQmaSnPa9OW7kjqfXNguyup28DMbvnZs2b2fsVRLwAAAIp/6wPxkEFCV8mUxgAAAABJRU5ErkJggg==",e9={key:0,src:J5,width:"24",height:"24"},t9={key:1,src:Nt,width:"24",height:"24"},s9={key:1,class:"flex h-5 items-center justify-center"},o9={key:0,src:Y5,width:"24",height:"24"},n9={key:1,src:Z5,width:"24",height:"24"},a9={class:"rounded-full bg-black bg-opacity-30 px-2 py-1 text-xs font-bold text-white"},r9=B({__name:"AudioMessageContent",props:{message:{}},setup(o){const e=o,t=W(),s=M(0),n=M(),a=M(0),r=M(),i=f(()=>e.message.isIncoming),d=()=>{n.value&&(a.value=n.value.seek()/n.value.duration()*100,n.value.playing()&&requestAnimationFrame(d))},m=async()=>{var h,v;switch(s.value){case 0:{const p=new Is.Howl({src:e.message.url,format:["m4a","mp3","wav","aac","webm"],onload:()=>{p.play(),s.value=3},onplay:()=>{requestAnimationFrame(d)},onend:()=>{s.value=2},onloaderror:(A,w)=>console.log(2,A,w),xhr:{headers:{"IM-Authorization":t.state.imkit.config.token,"IM-Client-Key":t.state.imkit.config.clientKey}}});n.value=p,s.value=1;break}case 2:case 4:(h=n.value)==null||h.play(),s.value=3;break;case 3:(v=n.value)==null||v.pause(),s.value=4;break}},g=async h=>{if(!n.value||!r.value)return;const{x:v,width:p}=r.value.getBoundingClientRect();a.value=(h.clientX-v)/p*100,n.value.seek(n.value.duration()*a.value/100)};return(h,v)=>(c(),u(j,null,[l("div",{class:N(["pointer-events-none absolute bottom-0 left-0 top-0",[i.value?"bg-gray-300":"bg-blue-300"]]),style:ee({width:`${a.value}%`})},null,6),l("div",{ref_key:"container",ref:r,class:"relative -m-2 flex w-[250px] items-center justify-between p-3",onClick:g},[l("button",{onClick:de(m,["stop"])},[new Set([0,2,4]).has(s.value)?(c(),u(j,{key:0},[i.value?(c(),u("img",e9)):(c(),u("img",t9))],64)):s.value===1?(c(),u("div",s9,[(c(),u("svg",{class:N(["h-5 w-5 animate-spin",[i.value?"fill-gray-100 text-gray-400":"fill-blue-400 text-gray-200 dark:fill-sky-700 dark:text-gray-700"]]),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},v[0]||(v[0]=[l("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),l("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)]),2))])):s.value===3?(c(),u(j,{key:2},[i.value?(c(),u("img",o9)):(c(),u("img",n9))],64)):y("",!0)]),l("div",a9,b(Math.floor(h.message.duration/60))+":"+b(`${Math.floor(h.message.duration%60)}`.padStart(2,"0")),1)],512)],64))}}),i9={class:"flex items-center justify-center"},l9={class:"my-3 rounded-lg bg-gray-100 px-2 py-1.5 text-sm text-gray-700 dark:bg-zinc-700 dark:text-gray-200 dark:text-gray-300"},c9=B({__name:"SystemMessageContent",props:{message:{}},setup(o){const e=o,t=W(),s=f(()=>t.state.imkit.users),{t:n}=Me(),a=f(()=>{var i;const r=(i=s.value[e.message.senderId])==null?void 0:i.nickname;switch(e.message.type){case R.Recall:return e.message.senderId===t.state.imkit.uid?n("youUnsentMessage"):n("someoneUnsentMessage",[r]);case R.JoinRoom:return n("someoneJoinedTheChat",[r]);case R.LeaveRoom:return n("someoneLeftTheChat",[r]);case R.AddMember:return n("someoneInvited",[r,e.message.members.map(d=>d.nickname).join(", ")]);case R.DeleteMember:return n("someoneKicked",[r,e.message.members.map(d=>d.nickname).join(", ")]);case R.AddMembers:return n("someoneInvited",[r,e.message.members.map(d=>d.nickname).join(", ")]);case R.Announcement:return e.message.text;default:return""}});return(r,i)=>(c(),u("div",i9,[l("div",l9,b(a.value),1)]))}}),d9={},u9={class:"flex h-4 items-center"};function m9(o,e){return c(),u("div",u9,[(c(),u(j,null,re(3,t=>l("div",{key:t,class:N(["mr-0.5 h-1 w-1 rounded-full bg-gray-400",[`animate-bounce-${t}`]])},null,2)),64))])}const g9=oe(d9,[["render",m9],["__scopeId","data-v-40e5e96c"]]),h9=(o,e,t=te())=>{const s=te(o);if(s.isSame(t,"day"))return e("today");if(s.isSame(t.subtract(1,"day"),"day"))return e("yesterday");const n=Ms.fromMillis(o);return s.isSame(t,"week")?n.toLocaleString({month:"numeric",day:"numeric",weekday:"short"}):s.isSame(t,"year")?n.toLocaleString({month:"numeric",day:"numeric"}):n.toLocaleString({month:"numeric",day:"numeric",year:"numeric"})},p9=["width","height"],f9={__name:"TranslateSvg",props:{width:{type:[Number,String],default:19},height:{type:[Number,String],default:19}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,"stroke-linejoin":"round","stroke-miterlimit":"2",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[Ne('<g id="Icon"><path d="m23.25 3.75v7c0 .729-.29 1.429-.805 1.945-.516.515-1.216.805-1.945.805h-.773l-2.811 1.874c-.23.153-.526.168-.77.037-.244-.13-.396-.384-.396-.661v-1.25h-2.25c-.729 0-1.429-.29-1.945-.805-.515-.516-.805-1.216-.805-1.945v-7c0-.729.29-1.429.805-1.945.516-.515 1.216-.805 1.945-.805h7c.729 0 1.429.29 1.945.805.515.516.805 1.216.805 1.945zm-1.5 0c0-.332-.132-.649-.366-.884-.235-.234-.552-.366-.884-.366h-7c-.332 0-.649.132-.884.366-.234.235-.366.552-.366.884v7c0 .332.132.649.366.884.235.234.552.366.884.366h3c.414 0 .75.336.75.75v.599l1.834-1.223c.123-.082.268-.126.416-.126h1c.332 0 .649-.132.884-.366.234-.235.366-.552.366-.884z"></path><path d="m11.75 12.482c0-.414.336-.75.75-.75s.75.336.75.75v5.768c0 .729-.29 1.429-.805 1.945-.516.515-1.216.805-1.945.805h-2.25v1.25c0 .277-.152.531-.396.661-.244.131-.54.116-.77-.037l-2.811-1.874h-.773c-.729 0-1.429-.29-1.945-.805-.515-.516-.805-1.216-.805-1.945v-7c0-.729.29-1.429.805-1.945.516-.515 1.216-.805 1.945-.805h8c.414 0 .75.336.75.75s-.336.75-.75.75h-8c-.332 0-.649.132-.884.366-.234.235-.366.552-.366.884v7c0 .332.132.649.366.884.235.234.552.366.884.366h1c.148 0 .293.044.416.126 0 0 1.834 1.223 1.834 1.223v-.599c0-.414.336-.75.75-.75h3c.332 0 .649-.132.884-.366.234-.235.366-.552.366-.884z"></path><path d="m17.75 5.75c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-1.5c0-.414.336-.75.75-.75s.75.336.75.75z"></path><path d="m14.5 6.5c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h5c.414 0 .75.336.75.75s-.336.75-.75.75z"></path><path d="m17.75 5.75c0-.414.336-.75.75-.75s.75.336.75.75c0 2.623-2.127 4.75-4.75 4.75-.414 0-.75-.336-.75-.75s.336-.75.75-.75c1.795 0 3.25-1.455 3.25-3.25z"></path><path d="m14.75 5.75c0-.414.336-.75.75-.75s.75.336.75.75c0 1.795 1.455 3.25 3.25 3.25.414 0 .75.336.75.75s-.336.75-.75.75c-2.623 0-4.75-2.127-4.75-4.75z"></path><path d="m5.696 17.529c-.153.384-.59.571-.975.417-.384-.153-.571-.59-.417-.975l2-5c.114-.284.389-.471.696-.471s.582.187.696.471l2 5c.154.385-.033.822-.417.975-.385.154-.822-.033-.975-.417l-1.304-3.26z"></path><path d="m6 17c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h2c.414 0 .75.336.75.75s-.336.75-.75.75z"></path></g>',1)]),8,p9))}},v9={key:0,class:"mb-2 mt-4 flex items-center justify-center"},A9={class:"rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-600 dark:bg-zinc-700 dark:text-gray-400"},b9={key:3,class:"flex flex-col items-end self-end text-xs text-gray-500 dark:text-gray-300"},k9={key:0},y9={key:5,class:"w-[30px]"},w9={class:"flex max-w-[75%] flex-col items-start sm:max-w-[60%]"},C9={key:0,class:"mb-1 ml-1 text-xs font-medium text-gray-500 dark:text-gray-300"},x9={class:"flex max-w-full gap-2"},$9={key:0,class:"self-end text-xs text-gray-500 dark:text-gray-300"},T9={key:1,class:"flex shrink-0 items-center justify-center gap-2"},I9=B({inheritAttrs:!1,__name:"MessageCell",props:{source:{}},setup(o){const e=o;Ss("messageId",e.source.id);const t=Me(),s=f(()=>e.source),n={[R.Text]:Ce,[R.Image]:a5,[R.Sticker]:Pt,[R.Video]:l5,[R.File]:g5,[R.Template]:E5,[R.Flex]:q5,[R.Location]:W5,[R.Audio]:r9,[R.Recall]:Ce,[R.JoinRoom]:Ce,[R.LeaveRoom]:Ce,[R.AddMember]:Ce,[R.DeleteMember]:Ce,[R.AddMembers]:Ce,[R.Announcement]:Ce,[R.Typing]:g9},a=W(),r=f(()=>{if(a.state.imkit.uid!==e.source.senderId)return 0;const{rooms:V,uid:H,messageMultiList:x}=a.state.imkit,I=V[e.source.roomId];return I?Object.keys(I.lastReadMessageId).filter(G=>G!==H).map(G=>{var _;const O=I.lastReadMessageId[G];return(_=x.main)==null?void 0:_.finds(O)}).reduce((G,O)=>O&&O.createdAt>=e.source.createdAt?G+1:G,0):0}),i=f(()=>e.source.isIncoming),d=f(()=>!i.value),m=f(()=>{var x,I;if(s.value.type===R.Typing)return!0;const H=(((x=a.state.imkit.messageMultiList.main)==null?void 0:x.messageGroups)??new Map).get(s.value.groupId);return H?H[0].id===s.value.id||((I=s.value.prev)==null?void 0:I.senderId)!==s.value.senderId:!1}),g=f(()=>{var x,I;if(s.value.type===R.Typing)return!0;const H=(((x=a.state.imkit.messageMultiList.main)==null?void 0:x.messageGroups)??new Map).get(s.value.groupId);return H?H[H.length-1].id===s.value.id||((I=s.value.next)==null?void 0:I.senderId)!==s.value.senderId:!1}),h=M(!1),v=V=>{h.value=!0,V.preventDefault()},p=()=>{a.commit("imkit/setState",{replyId:e.source.id})},A=()=>{let V="";switch(e.source.type){case R.Text:V=e.source.text;break;case R.Location:V=e.source.address;break}navigator.clipboard.writeText(V)},w=()=>{a.dispatch("imkit/recallMessage",{roomId:e.source.roomId,_id:e.source.id,messageType:"recall"})},E=f(()=>{const V=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;if(e.source.type===R.Text){const H=e.source.text;for(let x=0;x<H.length;x++)if(!V.test(H[x]))return!1;return!0}return!1}),D=f(()=>e.source),z=f(()=>e.source.isSystem),L=f(()=>a.state.imkit.config.styles),K=f(()=>a.state.imkit.config.translationApiKey),Q=f(()=>a.state.imkit.users[e.source.senderId]),J=f(()=>{var H,x;return((x=(((H=a.state.imkit.messageMultiList.main)==null?void 0:H.firstMessageOfDate)??new Map).get(e.source.dateId))==null?void 0:x.id)===e.source.id}),X=()=>{a.dispatch("imkit/translateMessage",e.source)};return(V,H)=>{var x,I,G;return c(),u(j,null,[J.value?(c(),u("div",v9,[l("div",A9,b(k(h9)(V.source.createdAt,k(t).t)),1)])):y("",!0),z.value?(c(),P(c9,{key:1,message:V.source},null,8,["message"])):(c(),u("div",{key:2,class:N(["flex gap-2",[i.value?"justify-start":"justify-end",m.value?"mt-1":"mt-[0.0625rem]",g.value?"mb-1":"mb-[0.0625rem]"]]),onMouseleave:H[1]||(H[1]=O=>h.value=!1),onClick:H[2]||(H[2]=O=>h.value=!1)},[d.value&&h.value?(c(),u("img",{key:0,src:_v,class:"my-auto h-5 w-5 cursor-pointer",onClick:w})):y("",!0),d.value&&h.value?(c(),u("img",{key:1,src:At,class:"my-auto h-5 w-5 cursor-pointer",onClick:A})):y("",!0),d.value&&h.value?(c(),u("img",{key:2,src:bt,class:"my-auto h-5 w-5 cursor-pointer",onClick:p})):y("",!0),d.value&&g.value&&!h.value?(c(),u("div",b9,[r.value>0?(c(),u("div",k9,b(V.$t("read"))+" "+b(r.value),1)):y("",!0),l("div",null,b(k(te)(V.source.createdAt).format("H:mm")),1)])):y("",!0),i.value&&m.value?(c(),P(ue,{key:4,url:((x=Q.value)==null?void 0:x.avatarUrl)??"",name:((I=Q.value)==null?void 0:I.nickname)??"",class:"!h-[30px] !w-[30px] rounded-full text-xs"},null,8,["url","name"])):i.value?(c(),u("div",y9)):y("",!0),l("div",w9,[i.value&&m.value?(c(),u("div",C9,b(((G=Q.value)==null?void 0:G.nickname)??""),1)):y("",!0),l("div",x9,[l("div",{class:N(["relative overflow-hidden rounded bg-gray-100 text-gray-900 dark:bg-zinc-700 dark:text-gray-100",[i.value?"rounded-r-xl":"rounded-l-xl",d.value&&m.value?"rounded-tr-xl":"",d.value&&g.value?"rounded-br-xl":"",i.value&&m.value?"rounded-tl-xl":"",i.value&&g.value?"rounded-bl-xl":"",[k(R).Sticker,k(R).Image].includes(V.source.type)?"!bg-white dark:!bg-zinc-800":"",E.value?"!bg-white !text-3xl dark:!bg-zinc-800":"",[k(R).Template,k(R).Flex].includes(V.source.type)?"!rounded-none !bg-white dark:!bg-zinc-800":"px-3 py-2",[k(Te).ImageCarousel,k(Te).Carousel].includes(D.value.templateType)?"!rounded-none !bg-white dark:bg-zinc-800":""]]),style:ee([i.value?L.value.incomingMessageCell:L.value.outgoingMessageCell]),onContextmenu:v,onMouseenter:H[0]||(H[0]=O=>h.value=!0)},[(c(),P(We(n[V.source.type]),{message:s.value},null,8,["message"]))],38),i.value&&g.value&&!h.value&&s.value.type!==k(R).Typing?(c(),u("div",$9,b(k(te)(V.source.createdAt).format("H:mm")),1)):y("",!0),i.value&&h.value?(c(),u("div",T9,[l("img",{src:bt,class:N(["my-auto h-5 w-5 cursor-pointer",m.value?"ml-1":"ml-2"]),onClick:p},null,2),l("img",{src:At,class:"my-auto h-5 w-5 cursor-pointer",onClick:A}),K.value?(c(),P(f9,{key:0,class:"cursor-pointer fill-gray-600",onClick:X})):y("",!0)])):y("",!0)])])],34))],64)}}}),M9=oe(I9,[["__scopeId","data-v-006c5cb5"]]),S9={class:"absolute bottom-[110%] right-0 flex h-80 w-80 max-w-full flex-col divide-y overflow-auto rounded-xl border bg-white dark:bg-zinc-800"},F9={class:"grid grow grid-cols-3 items-center justify-center gap-4 overflow-y-auto p-4 sm:grid-cols-4"},R9=["src","onClick"],U9={key:0,class:"flex h-14 w-full flex-shrink-0 gap-4 overflow-x-auto p-3"},E9=["src","onClick"],B9=B({__name:"StickerPanel",emits:["close"],setup(o,{emit:e}){const t=W(),s=[{name:"FunFunFamily",number:40}],n=M(s[0]),a=f(()=>t.state.imkit.rooms[t.state.imkit.selectedRoomId]),r=e,i=async d=>{const m={roomId:a.value.id,messageType:"sticker",sticker:d};await t.dispatch("imkit/sendMessage",m),r("close")};return(d,m)=>(c(),u("div",S9,[l("div",F9,[(c(!0),u(j,null,re(n.value.number,g=>(c(),u("img",{src:`/sticker/${n.value.name}/${n.value.name}-${g}.png`,key:g,class:"cursor-pointer border-0 object-contain",onClick:h=>i(`${n.value.name}-${g}`)},null,8,R9))),128))]),s.length>1?(c(),u("div",U9,[(c(),u(j,null,re(s,g=>l("img",{src:`/sticker/${g.name}/${g.name}-1.png`,key:g.name,class:"h-full cursor-pointer border-0 object-contain",onClick:h=>n.value=g},null,8,E9)),64))])):y("",!0)]))}}),st=o=>new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{const n=new Image;n.src=s.result,n.onload=async()=>{e({id:await nt(n.src),width:n.width,height:n.height,thumbnailUrl:n.src,originalUrl:n.src})},n.onerror=()=>t},s.onerror=()=>{t(s.error)},s.readAsDataURL(o)}),L9=o=>new Promise((e,t)=>{const s=document.createElement("canvas"),n=s.getContext("2d");if(!n){t(new Error("Could not get canvas context"));return}const a=document.createElement("video");a.src=URL.createObjectURL(o),a.autoplay=!0,a.onloadedmetadata=()=>{s.width=a.videoWidth,s.height=a.videoHeight},a.onloadeddata=()=>{n.drawImage(a,0,0,s.width,s.height),s.toBlob(async r=>{if(!r){t(new Error("Could not create blob"));return}const i=new File([r],"snapshot.jpg",{type:"image/jpeg"}),d=new FileReader;d.readAsDataURL(r),d.onloadend=async()=>{e({id:await nt(a.src),width:s.width,height:s.height,duration:a.duration,thumbnailUrl:d.result,originalUrl:"",thumbnailFile:{id:await nt(s.toDataURL()),file:i}})}},"image/jpeg")},a.onerror=()=>t}),_9={key:0,class:"mb-3 flex gap-2 rounded-lg bg-gray-200 p-2 dark:bg-zinc-600"},O9={class:"flex flex-col gap-1"},z9={class:"text-sm font-bold text-gray-600 dark:text-gray-300"},D9={class:"multiline-ellipsis text-xs text-gray-500 dark:text-gray-300"},P9={class:"ml-auto flex flex-shrink-0 gap-2"},N9={key:0},V9={key:1},j9={src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"h-[2.8rem] w-[2.8rem] border-0 object-contain"},K9={key:2,class:"h-10 w-10 rounded object-cover"},H9=B({__name:"ReplyMessagePreview",setup(o){const e=W(),t=f(()=>{var g;const{replyId:m}=e.state.imkit;return(g=e.state.imkit.messageMultiList.main)==null?void 0:g.map.get(m)}),s=f(()=>{const m=t.value;if(m)return e.state.imkit.users[m.senderId]}),n=f(()=>{if(t.value.type===R.Text)return t.value.text;if(t.value.type===R.Image||t.value.type===R.Sticker||t.value.type===R.Video){const{t:m}=Me();return{[R.Image]:m("image"),[R.Video]:m("video"),[R.Sticker]:m("sticker")}[t.value.type]}return""}),a=f(()=>{if(t.value.type===R.Image)return t.value.images[0]}),r=f(()=>t.value),i=f(()=>t.value),d=()=>{e.commit("imkit/setState",{replyId:""})};return(m,g)=>{var v,p,A;const h=Le("src");return t.value?(c(),u("div",_9,[U(ue,{class:"row-span-2 h-6 w-6 flex-shrink-0 rounded-lg bg-gray-300 text-sm",url:((v=s.value)==null?void 0:v.avatarUrl)??"",name:((p=s.value)==null?void 0:p.nickname)??""},null,8,["url","name"]),l("div",O9,[l("div",z9,b((A=s.value)==null?void 0:A.nickname),1),l("div",D9,b(n.value),1)]),l("div",P9,[t.value.type===k(R).Sticker?(c(),u("div",N9,[U(Pt,{class:N({"h-[2.8rem] w-[2.8rem]":!0}),message:r.value},null,8,["message"])])):y("",!0),t.value.type===k(R).Video?(c(),u("div",V9,[ne(l("img",j9,null,512),[[h,i.value.video.thumbnailUrl]])])):y("",!0),a.value?ne((c(),u("img",K9,null,512)),[[h,a.value.thumbnailUrl]]):y("",!0),l("img",{src:Ye,class:"h-5 w-5 cursor-pointer text-gray-400",onClick:d})])])):y("",!0)}}}),Q9=oe(H9,[["__scopeId","data-v-f7b8c39c"]]),q9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXElEQVR4nO2Zv2sUQRTHH4qKhYWFiljYSqLVFbl9M3aiQbAzWFgGrA0Wlrvz7oKKRLAMWomN9w8o2AdLG7EJgj8awUKy995GRFcWklxiSLxzf8zMMh/49vtlZt/37XcBAoFAIBAIBAL7oyidVsRGGXnUpfQCtBF8kB9TSTaviFcUSb4lwxLF6XloC2gkQuKnSJzuMLpNSPwQfEYvrp1A4gUkfreXyb9OOQHviPMDupddQuJnxTUdy+iW0mnwhW6fz2iSu2j4w2QmN8Ur4DpTcX5YGb6GJAMk/vl/RjeUZPPgKlG8fg4N31ckX0uZHA2rtJje4BLdpfyoNjKHhl8rw7+rMDoaVvIEXEETd5BkWRleq9TkdvW5a9fkve/HNfEtNPK2NpOjYfXewziRMu/vgmdxImVO90exnPgVJ1TmdGXgVZyokorM8EotRjGRG7u+TiwLiT8Wc6N6szS8attcox8KiuSOdXO7xL+inpytxfDF/vC0Mrxq3+QOvYK6p7LeXAvtm82LZ4GmV0UkzqwYNvJt9nF+BJpmZjE9VSwciuRzw+/vEthkqvHr7lCroWu/7o62GjN1XXeXW42qr7uTrcZ+IMmb1rQa44CJ3PS61ZiUznJ+SBn54lerUZJi4fei1aiKKE5PouF1J1uNulDEzyc6XcMvwGc0cWciw73sMvgOjhlRaPjT3CA/CL6DY0YUksTQBjpjRVSNrYaLEYVGXkKbiP4RURHxdWgbaq+IstVq2Isoy61G8xHlUKtRf0Q52mpU/GNu1UoFa4uNsv+27g1nrT1EIBAIBAJghT+Mm9s2KhDbfwAAAABJRU5ErkJggg==",jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACy0lEQVR4nO1Zu24TQRRdAaGg5FHx+AsQfIgFgj5NZOeeSQGi2Y7QWiQKiCaW0iFCAaHhD1JEAoUPIKQiMRKR7Jld4wy66weOsbUzuzO7RvKRrmTJo/U5O/feOXMdBHPMMUdu6ErlfHt5+Z4ieiqBt5LoqyT6KYE4id7nff6O17SAuzoMzwVloy3ETUn0XBEdKkBbxncJrLaq1RuFEz+pVq8p4JUkijIQPxOy94yNEyGuFkI+Ah5KomZe4hPiOAIeeCOuFxcXFPDaA3F9Johe8m+5Jn9JAh+9k8cwrXb4N12RXyiSvPobn3QYXswtoJC0wdTYyEW+TfSoRPKaIxLifibyv5aWriiio7IFSKJmphbLfb5s8moQROtW5Pl0tDqkhNBxvW5MKFkrhM0uRO1a7ZaxgMQeWJD/vburdberO1tb6eQ3N5O13b09rVZWzEUAq0bk2WSxT7EiP0CKiAH54fI9CxFEh2waUwUkrtIiFUYJDUTEjca/axuNyWvrFqkH3EkVwHbXpsDG3+qknZi2JjZIubFdeGKS/9tWD00R4Yw8kjp4ky4A2Ld98FQRp6e9cEBe9brRF5MdyGyVJ4pwRF71UujIRECuS0oiYvyt93cjF3kkKaRKFdApSEDTZwp1vKcQ/Bdxx3MRbzsh3y9Yk3NCuWyjrg6y0YJ1KOJxqgAeOs2slajVbpuZOaKDrGYu9mXmgG/G0zy2rlnsdOzTThM9MyI/kxcaQLWA64ENeCJgWWD+guhFYAsNXJ6FS70CjjPPTXlWWbaASIhKkAc8qyxRwFqQF3wPlcC7oslL4IMOwwu5BQyHu0Q7hZEneu9suDs2Xi+iM605e/OTwLNKT93pR+6CtZybrvMB4yDXFfd5bttB0eDTMbEdpt5pNIgO2B5Yn7A+wCaLh048t2HPzhcPvtmxHelHUwKf+Tu2xOwqZ+Jv1jnmCP5//AFGuxmMzLZJIgAAAABJRU5ErkJggg==",G9={class:"relative flex justify-center"},X9={key:0,class:"absolute bottom-2 flex items-center gap-1 rounded-full bg-white bg-opacity-85 p-2 text-xs shadow-lg transition duration-150 ease-in-out dark:bg-zinc-800"},W9=["disabled"],J9={key:0,class:"h-10.5 flex w-full items-center justify-center"},Y9={class:"text-base font-semibold"},Z9={class:"text-xs"},e8=B({__name:"LocationModal",setup(o){class e{constructor(K,Q,J=null){$(this,"lat");$(this,"lng");$(this,"address");this.lat=K,this.lng=Q,this.address=J}get isValid(){return this.address!==null}}const t=pe(),{t:s}=Me(),n=W(),a=n.state.imkit.config.mapApiKey,r=M(),i=M(new e(21.30895,-157.826182)),d=M({lat:i.value.lat,lng:i.value.lng}),m=f(()=>({position:{lat:i.value.lat,lng:i.value.lng}})),g=M(""),h=M(!1),v=M(10),p=M(!1),A=M(""),w=()=>new Promise((L,K)=>{h.value=!0,navigator.geolocation.getCurrentPosition(Q=>{let{latitude:J,longitude:X}=Q.coords;A.value="",h.value=!1,L({lat:J,lng:X})},Q=>{switch(h.value=!1,Q.code){case Q.PERMISSION_DENIED:A.value=s("noAccessLocationPermission");break;case Q.POSITION_UNAVAILABLE:A.value=s("locationInfoUnavailable");break;case Q.TIMEOUT:A.value=s("requestLocationTimeout");break}K(Q)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),E=async(L,K)=>{try{const{data:Q}=await De.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${L},${K}&key=${a}`);if(Q.error_message)throw new Error(Q.error_message);return Q.results[0].formatted_address}catch(Q){throw A.value=s("addressUnavailable"),Q}},D=Ge(700,async L=>{var K,Q;try{if(L===0){const V=(K=r.value)==null?void 0:K.map.getCenter();if(V){const{lat:H,lng:x}=V;i.value=new e(H(),x())}}else if(L===1){const{lat:V,lng:H}=await w();i.value=new e(V,H),v.value=17,(Q=r.value)==null||Q.map.panTo({lat:V,lng:H})}let{lat:J,lng:X}=i.value;X=((X+180)%360+360)%360-180,J=Math.max(Math.min(J,90),-90),g.value=await E(J,X),i.value=new e(J,X,g.value)}catch(J){console.error(J)}},{noLeading:!1,noTrailing:!1}),z=async()=>{p.value=!0;const L={roomId:n.state.imkit.selectedRoomId,messageType:"location",message:g.value,latitude:m.value.position.lat,longitude:m.value.position.lng};t.closeAll(),await n.dispatch("imkit/sendMessage",L),p.value=!1};return D(1),(L,K)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"flex flex-col bg-white dark:bg-zinc-800 rounded-lg overflow-hidden sm:w-[450px] w-[350px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[l("div",G9,[U(k(It),{ref_key:"mapRef",ref:r,"api-key":k(a),center:d.value,zoom:v.value,disableDefaultUi:!0,onCenter_changed:K[0]||(K[0]=Q=>k(D)(0)),class:"h-[250px] w-[350px] sm:h-[350px] sm:w-[450px]"},{default:le(()=>[U(k(Tt),{options:m.value},null,8,["options"])]),_:1},8,["api-key","center","zoom"]),l("button",{class:"absolute right-2 top-2 flex items-center justify-center rounded-full shadow-lg",onClick:K[1]||(K[1]=Q=>k(t).closeAll())},[U(Ie,{class:"h-9 w-9"})]),l("button",{class:"absolute bottom-2 right-2 flex h-9 w-9 items-center justify-center rounded-full bg-white shadow-lg dark:bg-zinc-800",onClick:K[2]||(K[2]=Q=>k(D)(1))},[l("img",{class:N(["h-5 w-5",{"animate-pulse":h.value}]),src:q9},null,2)]),U(Pe,null,{default:le(()=>[A.value?(c(),u("div",X9,[K[3]||(K[3]=l("img",{class:"h-4 w-4",src:jt},null,-1)),ce(" "+b(A.value),1)])):y("",!0)]),_:1})]),l("button",{class:"disabled:( cursor-not-allowed) m-2 flex flex-col items-center gap-0.5 rounded-lg bg-blue-400 p-2 text-white",disabled:h.value||p.value||!i.value.isValid,onClick:z},[p.value?(c(),u("div",J9,K[4]||(K[4]=[l("svg",{class:"h-6 w-6 animate-spin fill-blue-300 text-gray-200",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),l("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)]))):(c(),u(j,{key:1},[l("div",Y9,b(L.$t("sendCurrentLocation")),1),l("div",Z9,b(g.value),1)],64))],8,W9)]),_:1}))}}),t8=oe(e8,[["__scopeId","data-v-c9c51bc0"]]),Kt="1.83.1",s8=B({__name:"VersionModal",setup(o){const e=pe(),t=()=>{e.closeAll()};return(s,n)=>(c(),P(k(be),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 max-w-[420px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:le(()=>[ce(" IMKIT version: "+b(k(Kt))+" ",1),l("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 grow rounded-lg bg-blue-400 text-base text-white",onClick:t},b(s.$t("confirm")),1)]),_:1}))}}),o8={class:"flex grow items-center gap-1"},n8={class:"relative flex h-12 w-0 min-w-0 grow items-center gap-3 rounded-xl bg-gray-100 px-3 dark:bg-zinc-700"},a8={key:0,class:"flex items-center gap-1 rounded-xl bg-white p-2 text-xs text-gray-600 transition duration-150 ease-in-out dark:bg-zinc-800"},r8={class:"volumes"},i8={class:"ml-auto rounded-full bg-black bg-opacity-30 px-2 py-1 text-xs font-bold text-white"},l8={key:1,class:"ml-2 mr-1 h-6 w-6 cursor-not-allowed",src:Dt},kt="audio/webm",c8=180,d8=B({__name:"AudioInput",setup(o){const{t:e}=Me(),t=W(),s=M(3),n=M(),a=M(),r=M(0),i=M(0),d=M(),m=M(),g=Fs([]),h=M(""),v=f(()=>r.value>1),p=async()=>{var w,E;try{switch(s.value){case 3:{s.value=0,g.splice(0),r.value=0,i.value=0,n.value=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),a.value=new Us.RecordRTCPromisesHandler(n.value,{type:"audio",mimeType:kt});let D=new AudioContext,z=D.createAnalyser();z.fftSize=64,z.smoothingTimeConstant=0,D.createMediaStreamSource(n.value).connect(z),m.value=window.setInterval(()=>{let K=new Uint8Array(z.frequencyBinCount);z.getByteFrequencyData(K);let Q=K.reduce((X,V)=>X+V)/K.length;const J=Math.min(1,Q/128);g.unshift(J)},100),await a.value.startRecording(),i.value=Date.now(),d.value=window.setInterval(()=>{r.value=(Date.now()-i.value)/1e3,r.value>=c8&&p()},1e3),s.value=1;break}case 1:s.value=2,await((w=a.value)==null?void 0:w.stopRecording()),(E=n.value)==null||E.getTracks().forEach(D=>D.stop()),clearInterval(d.value),clearInterval(m.value),s.value=3;break;default:break}}catch(D){console.error(D),h.value=e("noAccessMicrophonePermission")}},A=async()=>{var E;s.value!==3&&await p(),g.splice(0),r.value=0,i.value=0;let w=await((E=a.value)==null?void 0:E.getBlob());if(w){const D=await Es(w),z=new File([w],`${Ke()}.webm`),L={roomId:t.state.imkit.selectedRoomId,messageType:"audio",file:z,duration:D,originalUrl:"",extra:{mimeType:kt,fileName:z.name.split(".").slice(0,-1).join("."),bytes:z.size,fileExtension:z.name.split(".").pop()}};await t.dispatch("imkit/sendMessage",L)}};return Rs(()=>{clearInterval(d.value),clearInterval(m.value)}),(w,E)=>(c(),u("div",o8,[l("div",n8,[l("div",{class:"flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full border-2 border-gray-300",onClick:p},[l("div",{class:N(["h-6 w-6 rounded-full bg-red-500 transition-all duration-200 ease-in",{"h-3.5 w-3.5 rounded":s.value==1,"cursor-not-allowed bg-red-300":h.value}])},null,2)]),U(Pe,null,{default:le(()=>[h.value?(c(),u("div",a8,[E[0]||(E[0]=l("img",{class:"h-4 w-4",src:jt},null,-1)),ce(" "+b(h.value),1)])):y("",!0)]),_:1}),l("div",r8,[(c(!0),u(j,null,re(g,(D,z)=>(c(),u("div",{key:z,class:"!min-h-0.5 w-0.5 flex-shrink-0 rounded bg-gray-400",style:ee({height:`${D*28}px`})},null,4))),128))]),l("div",i8,b(Math.floor(r.value/60))+":"+b(`${Math.floor(r.value%60)}`.padStart(2,"0")),1)]),v.value?(c(),u("img",{key:0,class:"ml-2 mr-1 h-6 w-6 cursor-pointer",src:zt,onClick:A})):(c(),u("img",l8))]))}}),u8=oe(d8,[["__scopeId","data-v-d7ca8ae1"]]),dt=()=>{const o=window.location.href,e=o.substring(o.indexOf("?"));return new URLSearchParams(e.lastIndexOf("#/")==-1?e:e.substring(0,e.lastIndexOf("#/")))},m8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHElEQVR4nO3UMU7DQBCF4ZEo4Aq0nICCKg03oMJpOIOVN1Nlx4UPAJcDypwgdInoiAJaCB3YG7IQ1nmftJJlWWP9XnlFiIiIiIiIiIhoR8D0DPA71XAbr2XIzJqRalio+uvHCot4Tw4j1t8X4M+q4VIOIVaHGG09sYOKtsTYQUSbNSPAl1+HhZe4voleFneQWffOroDmBgjXHdHl7LQlxH4+W3y0bRFbfLT9ILbYaNshtrhowC96TuNx+qww7jq947t+tyYB4I85YtOiw4PsU9u2JzljE6LXdV0f563YUvzqOWN7ou9l3yYTPwd8tomdm02vcs2Os1T9afMPz+K75L8A/LSqqqPcc+PMODv3XCIiIiIiIiIiIiIi+QNvk5r+mltEG0oAAAAASUVORK5CYII=",g8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABG0lEQVR4nO3UMU7DMBiGYUsMcAVWTsDA1IUbdEIsHIlejrKlQ5r8H07SjYqtiCCrRUxNU2ooTt9HsmQp0W+9iWTnAAAAAAAAcKCiqK/MqolZ9Rj2bsikZmTmX6WqDWu9b0buFGL1Hf1Wlv7WnUKshhitHbGDilbP2EFEax273BK2CmvLs2VyF5k6/qyZfy/Llwczf9cRnc6fVo/Yr3eTj9YesclH6wexyUbrgNjkoovC33TdxlJ133dWeLfr9g5n/W5ND5J/jhHbJ1ryU3dMeZ5fxIzdFW3mP7IsO49bsafw1WPGdkf7J3dskq4lP9vENlI9jje7HptVi03sLJzl/ov5fHHZtu1Z7LlhZpgdey4AAAAAAAAAAO4PfAKuTjfhZH9KRQAAAABJRU5ErkJggg==",h8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLElEQVR4nO3UMU7DMBTGcSMGOAMbnICBBRZuwES6cIbIn1NFynOG7NwOWOECMBWxgQA91EqA2iRtLCW2vp/k0c/5x5KNISIiIiIiIiIiIiKKz15ZlkdZlu2HHqwzdbaeYabAWn/qnH9yzn8555+LoroKNVtnAfKiswF51LPM2AD/sIz9WYC8AzIbPldmOuvf7HszpqZpDn9/UKjodbHL9Znn+UHYii3pXw8Z3RKr686MDfBngH8NEd0Wq2foWWYKrK3OnZPFhlv5AOqbrhmAXLfEvjknl2ZK7IDo6GKHREcbu0t09LHbRCcTu1IU9UXH673xNda9Jka2/abTuNldo5OI7RudVGxXdJKxK/oY/Y2WRbQPVF9AdQLIra75vD7uvZGIiIiIiIiIiMx632C5/lbO/M2+AAAAAElFTkSuQmCC",p8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVR4nO3UMU7DMBTGcVcd4AxscAIGFli4QSfUhRtxO2CLQJHzPp5TOoHYQBiZhEqgNk0To8bR95MiZcmz/7FkY4iIiIiIiIiIiIiIEuO9n1i7PPLeT/9h9rSePTFDAOAU0EfAeRH3DJSzeLPLmYhbhtmAPoS1Ys3uDND7akPVI6LvgJv3n+vm9azVbEDvzD7leX74e0NxotfHfs/9zLLsIG7FjsJfjxm9KbY+4Vuzb9bqmYi+xohuig1rhLXMEADluYi+bNjoR1E8XW+bIaJXDbFvRaGXZkjQIzq52D7RycZ2iU4+dpfo0cT+ABYXTbd3020cvjUpQsNJj+Zku0aPIrZt9Khit0WPMvbPRbaKrt4TvaDasrY8EdGb8Djnjlt/SEREREREREREZr0vWIQ93o81LZQAAAAASUVORK5CYII=",f8={class:"flex grow items-center gap-2 rounded-lg bg-gray-100 p-3 dark:bg-zinc-700"},v8={key:0,class:"flex h-6 w-6 items-center justify-center"},A8={key:1,class:"h-5 w-5 cursor-pointer",src:Je},b8=["placeholder"],k8={class:"pb-0.5 text-sm font-medium text-gray-500 dark:text-gray-300"},y8={key:1,width:"20",height:"20",src:g8,alt:"collapse-arrow"},w8={key:3,width:"20",height:"20",src:p8,alt:"expand-arrow"},C8=B({__name:"SearchPanel",setup(o){const e=W(),t=M(""),s=M(0),n=M([]),a=M(!1),r=M(!1),i=async()=>{var p;if(!a.value&&t.value){r.value=!0;const{data:{result:A}}=await e.state.imkit.axios.post(ve.Search,{type:["messages"],room:e.state.imkit.selectedRoomId,keyword:t.value});n.value=((p=A.messages[0])==null?void 0:p.messages)??[],r.value=!1,n.value.length>0?(s.value=n.value.length,await e.commit("imkit/setState",{messageSearchKeyword:t.value}),await e.dispatch("imkit/navigateToMessage",n.value[s.value-1])):s.value=0}},d=p=>{p>0&&p<=n.value.length&&(s.value=p,e.dispatch("imkit/navigateToMessage",n.value[p-1]))},m=Ge(1e3,i),g=ct(500,m,{atBegin:!1}),h=f(()=>e.state.imkit.config.styles);Ae(t,g);const v=()=>{e.commit("imkit/setState",{isSearchInRoomMode:!1})};return(p,A)=>(c(),u("div",{class:"flex h-[60px] items-center justify-center border-b border-solid p-2 dark:border-zinc-700",style:ee(h.value.chatRoomHeader)},[l("div",f8,[r.value?(c(),u("div",v8,A[6]||(A[6]=[l("svg",{class:"h-5 w-5 animate-spin fill-blue-400 text-gray-200 dark:fill-sky-700 dark:text-gray-700",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),l("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)]))):(c(),u("img",A8)),ne(l("input",{class:"h-5 grow bg-gray-100 placeholder-gray-400 outline-none dark:bg-zinc-700","onUpdate:modelValue":A[0]||(A[0]=w=>t.value=w),placeholder:p.$t("searchInConversation"),onCompositionstart:A[1]||(A[1]=w=>a.value=!0),onCompositionend:A[2]||(A[2]=w=>a.value=!1)},null,40,b8),[[$e,t.value]]),!r.value&&t.value.length>0?(c(),u(j,{key:2},[l("div",k8,b(s.value)+"/"+b(n.value.length),1),s.value>1?(c(),u("img",{key:0,class:"cursor-pointer",width:"20",height:"20",src:m8,alt:"collapse-arrow",onClick:A[3]||(A[3]=w=>d(s.value-1))})):(c(),u("img",y8)),s.value<n.value.length?(c(),u("img",{key:2,class:"cursor-pointer",width:"20",height:"20",src:h8,alt:"expand-arrow",onClick:A[4]||(A[4]=w=>d(s.value+1))})):(c(),u("img",w8))],64)):y("",!0),l("img",{src:Ye,class:"h-5 w-5 cursor-pointer",onClick:A[5]||(A[5]=()=>{k(g).cancel({upcomingOnly:!0}),t.value="",k(m)(),v()})})])],4))}}),x8=["width","height"],$8={__name:"StickerSvg",props:{width:{type:[Number,String],default:22},height:{type:[Number,String],default:22}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[l("path",{d:"M480 336V160C479.961 126.064 466.463 93.5296 442.467 69.5334C418.47 45.5371 385.936 32.039 352 32H160C126.064 32.039 93.5296 45.5371 69.5334 69.5334C45.5371 93.5296 32.039 126.064 32 160V352C32.039 385.936 45.5371 418.47 69.5334 442.467C93.5296 466.463 126.064 479.961 160 480H320C323.919 480 327.703 478.564 330.634 475.962L474.634 347.962C477.371 345.395 479.105 341.938 479.528 338.21L479.566 338.026C479.756 337.361 479.901 336.684 480 336ZM336 428.07V392C336.014 380.971 340.401 370.398 348.199 362.599C355.998 354.801 366.571 350.414 377.6 350.4H422.304L336 428.07ZM64 352V160C64.028 134.548 74.1512 110.146 92.1486 92.1486C110.146 74.1512 134.548 64.028 160 64H352C377.452 64.028 401.854 74.1512 419.851 92.1486C437.849 110.146 447.972 134.548 448 160V318.4H377.6C358.087 318.422 339.379 326.183 325.581 339.981C311.783 353.779 304.022 372.487 304 392V448H160C134.548 447.972 110.146 437.849 92.1486 419.851C74.1512 401.854 64.028 377.452 64 352Z"},null,-1),l("path",{d:"M208 176V168C208 157.391 203.786 147.217 196.284 139.716C188.783 132.214 178.609 128 168 128C157.391 128 147.217 132.214 139.716 139.716C132.214 147.217 128 157.391 128 168V176C128 180.243 129.686 184.313 132.686 187.314C135.687 190.314 139.757 192 144 192C148.243 192 152.313 190.314 155.314 187.314C158.314 184.313 160 180.243 160 176V168C160 165.878 160.843 163.843 162.343 162.343C163.843 160.843 165.878 160 168 160C170.122 160 172.157 160.843 173.657 162.343C175.157 163.843 176 165.878 176 168V176C176 180.243 177.686 184.313 180.686 187.314C183.687 190.314 187.757 192 192 192C196.243 192 200.313 190.314 203.314 187.314C206.314 184.313 208 180.243 208 176Z"},null,-1),l("path",{d:"M320 192C324.243 192 328.313 190.314 331.314 187.314C334.314 184.313 336 180.243 336 176V168C336 165.878 336.843 163.843 338.343 162.343C339.843 160.843 341.878 160 344 160C346.122 160 348.157 160.843 349.657 162.343C351.157 163.843 352 165.878 352 168V176C352 180.243 353.686 184.313 356.686 187.314C359.687 190.314 363.757 192 368 192C372.243 192 376.313 190.314 379.314 187.314C382.314 184.313 384 180.243 384 176V168C384 157.391 379.786 147.217 372.284 139.716C364.783 132.214 354.609 128 344 128C333.391 128 323.217 132.214 315.716 139.716C308.214 147.217 304 157.391 304 168V176C304 180.243 305.686 184.313 308.686 187.314C311.687 190.314 315.757 192 320 192Z"},null,-1),l("path",{d:"M328 264V240C328 235.757 326.314 231.687 323.314 228.686C320.313 225.686 316.243 224 312 224H200C195.757 224 191.687 225.686 188.686 228.686C185.686 231.687 184 235.757 184 240V264C184 283.096 191.586 301.409 205.088 314.912C218.591 328.414 236.904 336 256 336C275.096 336 293.409 328.414 306.912 314.912C320.414 301.409 328 283.096 328 264ZM216 264V256H296V264C296 274.609 291.786 284.783 284.284 292.284C276.783 299.786 266.609 304 256 304C245.391 304 235.217 299.786 227.716 292.284C220.214 284.783 216 274.609 216 264Z"},null,-1)]),8,x8))}},T8=["width","height"],I8={__name:"EmojiSvg",props:{width:{type:[Number,String],default:22},height:{type:[Number,String],default:22}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[l("path",{d:"M256 32C211.697 32 168.389 45.1374 131.552 69.7508C94.7158 94.3642 66.0051 129.348 49.0511 170.279C32.0971 211.21 27.6611 256.248 36.3042 299.7C44.9473 343.152 66.2812 383.065 97.6082 414.392C128.935 445.719 168.848 467.053 212.3 475.696C255.752 484.339 300.791 479.903 341.721 462.949C382.652 445.995 417.636 417.284 442.249 380.448C466.863 343.611 480 300.303 480 256C479.933 196.612 456.312 139.676 414.318 97.682C372.324 55.6883 315.388 32.0669 256 32ZM256 448C218.026 448 180.905 436.739 149.331 415.642C117.756 394.545 93.1473 364.559 78.6152 329.475C64.0832 294.392 60.281 255.787 67.6893 218.543C75.0977 181.298 93.3839 147.087 120.236 120.235C147.087 93.3838 181.298 75.0976 218.543 67.6892C255.787 60.2809 294.392 64.0831 329.475 78.6151C364.559 93.1472 394.545 117.756 415.642 149.331C436.739 180.905 448 218.026 448 256C447.942 306.904 427.695 355.706 391.701 391.7C355.706 427.695 306.904 447.942 256 448Z"},null,-1),l("path",{d:"M352 268.531C347.757 268.531 343.687 270.217 340.686 273.218C337.686 276.218 336 280.288 336 284.531C336 314.821 302.984 339.469 262.4 339.469H249.6C209.014 339.469 176 314.829 176 284.531C176 280.288 174.314 276.218 171.314 273.218C168.313 270.217 164.243 268.531 160 268.531C155.757 268.531 151.687 270.217 148.686 273.218C145.686 276.218 144 280.288 144 284.531C144 332.469 191.374 371.469 249.6 371.469H262.4C320.627 371.469 368 332.469 368 284.531C368 280.288 366.314 276.218 363.314 273.218C360.313 270.217 356.243 268.531 352 268.531Z"},null,-1),l("path",{d:"M176 224C180.243 224 184.313 222.314 187.314 219.314C190.314 216.313 192 212.243 192 208V200C192 197.878 192.843 195.843 194.343 194.343C195.843 192.843 197.878 192 200 192C202.122 192 204.157 192.843 205.657 194.343C207.157 195.843 208 197.878 208 200V208C208 212.243 209.686 216.313 212.686 219.314C215.687 222.314 219.757 224 224 224C228.243 224 232.313 222.314 235.314 219.314C238.314 216.313 240 212.243 240 208V200C240 189.391 235.786 179.217 228.284 171.716C220.783 164.214 210.609 160 200 160C189.391 160 179.217 164.214 171.716 171.716C164.214 179.217 160 189.391 160 200V208C160 212.243 161.686 216.313 164.686 219.314C167.687 222.314 171.757 224 176 224Z"},null,-1),l("path",{d:"M288 224C292.243 224 296.313 222.314 299.314 219.314C302.314 216.313 304 212.243 304 208V200C304 197.878 304.843 195.843 306.343 194.343C307.843 192.843 309.878 192 312 192C314.122 192 316.157 192.843 317.657 194.343C319.157 195.843 320 197.878 320 200V208C320 212.243 321.686 216.313 324.686 219.314C327.687 222.314 331.757 224 336 224C340.243 224 344.313 222.314 347.314 219.314C350.314 216.313 352 212.243 352 208V200C352 189.391 347.786 179.217 340.284 171.716C332.783 164.214 322.609 160 312 160C301.391 160 291.217 164.214 283.716 171.716C276.214 179.217 272 189.391 272 200V208C272 212.243 273.686 216.313 276.686 219.314C279.687 222.314 283.757 224 288 224Z"},null,-1)]),8,T8))}},M8=["width","height"],S8={__name:"FileSvg",props:{width:{type:[Number,String],default:20},height:{type:[Number,String],default:20}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[l("g",{"clip-path":"url(#clip0_4129_855)"},[l("path",{d:"M87.6177 316.621L87.6236 316.615L352.802 48.4514C352.803 48.4503 352.804 48.4493 352.805 48.4482C374.902 26.3552 413.467 26.3563 435.561 48.4514L436.622 47.3907L435.561 48.4514C458.376 71.2656 458.376 108.383 435.561 131.197L435.555 131.203L180.985 388.774C180.984 388.775 180.983 388.776 180.982 388.777C173.07 396.686 159.194 396.685 151.282 388.774C143.091 380.584 143.091 367.247 151.282 359.055L151.288 359.049L395.235 112.102C395.236 112.101 395.237 112.1 395.238 112.099C398.132 109.202 399.469 104.729 399.469 100.434C399.469 96.1361 398.131 91.6612 395.235 88.7642L394.174 89.8248L395.235 88.7641C388.788 82.3173 378.343 82.3173 371.896 88.7641L371.89 88.7706L127.944 335.718C127.943 335.719 127.942 335.721 127.94 335.722C106.874 356.793 106.875 391.044 127.944 412.112C148.37 432.538 183.929 432.508 204.324 412.112L204.33 412.106L458.9 154.536C458.901 154.535 458.902 154.534 458.903 154.533C494.311 119.121 494.31 60.5257 458.9 25.1141L457.839 26.1747L458.9 25.1141C441.6 7.81479 418.608 -1.50024 394.175 -1.50024C369.742 -1.50024 346.747 7.81473 329.463 25.1135L329.457 25.119L64.2793 293.284C13.9626 343.601 13.9625 425.447 64.2783 475.762C114.595 526.079 196.455 526.079 246.772 475.762L436.683 285.852C443.129 279.406 443.129 268.961 436.683 262.514C430.236 256.067 419.791 256.067 413.344 262.514L223.435 452.424C223.435 452.424 223.434 452.424 223.434 452.424C187.155 488.674 123.897 488.674 87.6177 452.424C50.1805 414.987 50.1805 354.059 87.6177 316.621Z","stroke-width":"3"})],-1)]),8,M8))}},F8=["width","height"],R8={__name:"AddSvg",props:{width:{type:[Number,String],default:24},height:{type:[Number,String],default:24}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,"enable-background":"new 0 0 512 512",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[l("g",null,[l("g",null,[l("path",{d:"m256 439.98c-13.81 0-25-11.19-25-25v-317.96c0-13.81 11.19-25 25-25s25 11.19 25 25v317.96c0 13.81-11.19 25-25 25z"})]),l("g",null,[l("path",{d:"m414.98 281h-317.96c-13.81 0-25-11.19-25-25s11.19-25 25-25h317.96c13.81 0 25 11.19 25 25s-11.19 25-25 25z"})])],-1)]),8,F8))}},U8=["width","height"],E8={__name:"LocationSvg",props:{width:{type:[Number,String],default:24},height:{type:[Number,String],default:24}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[l("path",{d:"M255.999 0C153.754 0 70.572 83.182 70.572 185.426C70.572 312.314 236.511 498.593 243.576 506.461C250.212 513.852 261.798 513.839 268.422 506.461C275.487 498.593 441.426 312.314 441.426 185.426C441.424 83.182 358.243 0 255.999 0ZM255.999 469.729C200.152 403.391 103.964 272.512 103.964 185.428C103.964 101.594 172.166 33.392 255.999 33.392C339.832 33.392 408.034 101.594 408.034 185.427C408.033 272.515 311.86 403.37 255.999 469.729Z"},null,-1),l("path",{d:"M255.999 92.1338C204.557 92.1338 162.707 133.985 162.707 185.427C162.707 236.869 204.558 278.72 255.999 278.72C307.44 278.72 349.29 236.869 349.29 185.427C349.29 133.985 307.44 92.1338 255.999 92.1338ZM255.999 245.328C222.969 245.328 196.099 218.457 196.099 185.427C196.099 152.397 222.97 125.526 255.999 125.526C289.028 125.526 315.899 152.397 315.899 185.427C315.899 218.457 289.028 245.328 255.999 245.328Z"},null,-1)]),8,U8))}},B8=["width","height"],L8={__name:"RecordSvg",props:{width:{type:[Number,String],default:24},height:{type:[Number,String],default:24}},setup(o){const e=o;return(t,s)=>(c(),u("svg",{width:e.width,height:e.height,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},s[0]||(s[0]=[l("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M223.999 48C188.653 48 159.999 76.6538 159.999 112V192V272C159.999 307.346 188.653 336 223.999 336H255.999H287.999C323.345 336 351.999 307.346 351.999 272V192V112C351.999 76.6538 323.345 48 287.999 48H255.999H223.999ZM191.999 112C191.999 94.3272 206.326 80 223.999 80H255.999H287.999C305.672 80 319.999 94.3272 319.999 112V192V272C319.999 289.673 305.672 304 287.999 304H255.999H223.999C206.326 304 191.999 289.673 191.999 272V192V112ZM127.999 224C127.999 215.163 120.836 208 111.999 208C103.162 208 95.999 215.163 95.999 224V272C95.999 342.693 153.306 400 223.999 400H239.999V464H191.999C183.162 464 175.999 471.163 175.999 480C175.999 488.837 183.162 496 191.999 496H255.999H319.999C328.836 496 335.999 488.837 335.999 480C335.999 471.163 328.836 464 319.999 464H271.999V400H287.999C358.692 400 415.999 342.693 415.999 272V224C415.999 215.163 408.836 208 399.999 208C391.162 208 383.999 215.163 383.999 224V272C383.999 325.019 341.018 368 287.999 368H255.999H223.999C170.98 368 127.999 325.019 127.999 272V224Z"},null,-1)]),8,B8))}};function ot(o,e){if(typeof o!="object")return;if(o.getRangeAt){if(o.rangeCount===0)return;o=o.getRangeAt(0)}if(o.cloneRange){let s=o.cloneRange();s.collapse(!0),o=s.startContainer,o.nodeType===1&&(o=o.childNodes[s.startOffset])}if(!o)return;let t=o;for(;t&&t.nodeType!==1;)t=t.previousSibling;o=t||o.parentNode,o&&_8(o,e)}function _8(o,e){if(o.scrollIntoViewIfNeeded)o.scrollIntoViewIfNeeded(!1);else{e=e||o.parentElement;const t=o.offsetTop-e.scrollTop;(t<0||t>e.offsetHeight-o.offsetHeight)&&(e.scrollTop=o.offsetTop)}}function Ue(o){const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(o))}function it(){const o=window.getSelection();if(o&&o.rangeCount>0)return o.getRangeAt(0)}function Be(o,e){return e.map(t=>({at:t,index:o.lastIndexOf(t)})).reduce((t,s)=>t.index>s.index?t:s)}function O8(o,e){e=e||window;for(var t={top:o.offsetTop,left:o.offsetLeft},s=o.offsetParent;s!=null&&s!=e;)t.left+=s.offsetLeft,t.top+=s.offsetTop,s=s.offsetParent;return t}function z8(o,e){do if(e(o))return o;while(o=o&&o.parentNode)}function yt(){const o=it();if(o){const e=o.cloneRange();return e.collapse(!0),e.setStart(e.endContainer,0),e}}const D8={name:"VueAt",emits:["update:value","at","insert"],props:{value:{type:String,default:null},at:{type:String,default:null},ats:{type:Array,default:()=>["@"]},suffix:{type:String,default:" "},loop:{type:Boolean,default:!0},allowSpaces:{type:Boolean,default:!0},tabSelect:{type:Boolean,default:!1},avoidEmail:{type:Boolean,default:!0},showUnique:{type:Boolean,default:!0},hoverSelect:{type:Boolean,default:!0},members:{type:Array,default:()=>[]},nameKey:{type:String,default:""},filterMatch:{type:Function,default:(o,e)=>o.toLowerCase().indexOf(e.toLowerCase())>-1},deleteMatch:{type:Function,default:(o,e,t)=>e===o+t},scrollRef:{type:String,default:""}},data(){return{bindsValue:this.value!=null,customsEmbedded:!1,hasComposition:!1,atwho:null}},computed:{atItems(){return this.at?[this.at]:this.ats},currentItem(){return this.atwho?this.atwho.list[this.atwho.cur]:""},style(){if(this.atwho){const{x:o,y:e}=this.atwho,{wrap:t}=this.$refs;if(t){const s=O8(t),n=this.scrollRef?document.querySelector(this.scrollRef).scrollLeft:0,a=this.scrollRef?document.querySelector(this.scrollRef).scrollTop:0,r=o+n+window.pageXOffset-s.left+"px",i=e+a+window.pageYOffset-s.top+"px";return{left:r,top:i}}}return null}},watch:{"atwho.cur"(o){o!=null&&this.$nextTick(()=>{this.scrollToCur()})},members(){this.handleInput(!0)},value(o){this.bindsValue&&this.handleValueUpdate(o)}},mounted(){this.$slots.embeddedItem&&(this.customsEmbedded=!0),this.bindsValue&&this.handleValueUpdate(this.value)},methods:{itemName(o){const{nameKey:e}=this;return e?o[e]:o},isCur(o){return o===this.atwho.cur},handleValueUpdate(o){const e=this.$el.querySelector("[contenteditable]");o!==e.innerHTML&&(e.innerHTML=o,this.dispatchInput())},dispatchInput(){let o=this.$el.querySelector("[contenteditable]"),e=new Event("input",{bubbles:!0});o.dispatchEvent(e)},handleItemHover(o){this.hoverSelect&&this.selectByMouse(o)},handleItemClick(o){this.selectByMouse(o),this.insertItem()},handleDelete(o){const e=yt();if(e){if(this.customsEmbedded&&e.endOffset>=1){let g=e.endContainer.childNodes[e.endOffset]||e.endContainer.childNodes[e.endOffset-1];if(!g||g.nodeType===Node.TEXT_NODE&&!/^\s?$/.test(g.data))return;g.nodeType===Node.TEXT_NODE?g.previousSibling&&(g=g.previousSibling):g.previousElementSibling&&(g=g.previousElementSibling);let h=[].slice.call(g.childNodes);h=[].reverse.call(h),h.unshift(g);let v;if([].some.call(h,p=>{if(p.getAttribute&&p.getAttribute("data-at-embedded")!=null)return v=p,!0}),v){o.preventDefault(),o.stopPropagation();const p=it();p&&(p.setStartBefore(v),p.deleteContents(),Ue(p),this.handleInput())}return}const{atItems:t,members:s,suffix:n,deleteMatch:a,itemName:r}=this,i=e.toString(),{at:d,index:m}=Be(i,t);if(m>-1){const g=i.slice(m+d.length);if(s.some(v=>{const p=r(v);return a(p,g,n)})){o.preventDefault(),o.stopPropagation();const v=it();v&&(v.setStart(v.endContainer,m),v.deleteContents(),Ue(v),this.handleInput())}}}},handleKeyDown(o){const{atwho:e}=this;if(e){if(o.keyCode===38||o.keyCode===40){o.metaKey||o.ctrlKey||(o.preventDefault(),o.stopPropagation(),this.selectByKeyboard(o));return}if(o.keyCode===13||this.tabSelect&&o.keyCode===9){o.preventDefault(),o.stopPropagation(),this.insertItem();return}if(o.keyCode===27){this.closePanel();return}}(o.keyCode>=48&&o.keyCode<=90||o.keyCode===8)&&setTimeout(()=>{this.handleInput()},50),o.keyCode===8&&this.handleDelete(o)},handleCompositionStart(){this.hasComposition=!0},handleCompositionEnd(){this.hasComposition=!1,this.handleInput()},handleInput(o){if(this.hasComposition)return;const e=this.$el.querySelector("[contenteditable]");this.$emit("update:value",e.innerHTML);const t=yt();if(t){const{atItems:s,avoidEmail:n,allowSpaces:a,showUnique:r}=this;let i=!0;const d=t.toString(),{at:m,index:g}=Be(d,s);g<0&&(i=!1);const h=d[g-1],v=d.slice(g+m.length,d.length);if(n&&/^[a-z0-9]$/i.test(h)&&(i=!1),!a&&/\s/.test(v)&&(i=!1),/^\s/.test(v)&&(i=!1),!i)this.closePanel();else{const{members:p,filterMatch:A,itemName:w}=this;!o&&v&&this.$emit("at",v);const E=p.filter(D=>{const z=w(D);return A(z,v,m)});if(i=!1,E.length&&(i=!0,!r)){let D=E[0];v===w(D)&&(i=!1)}i?this.openPanel(E,t,g,m):this.closePanel()}}},closePanel(){this.atwho&&(this.atwho=null)},openPanel(o,e,t,s){const n=()=>{const a=e.cloneRange();a.setStart(a.endContainer,t+s.length);const r=a.getClientRects()[0];this.atwho={range:e,offset:t,list:o,x:r.left,y:r.top-4,cur:0}};this.atwho?n():setTimeout(n,10)},scrollToCur(){let{wrap:o}=this.$refs,{cur:e}=this.atwho;const t=o.querySelector(`.atwho-li[data-index="${e}"]`),s=t.parentElement.parentElement;ot(t,s)},selectByMouse(o){const t=+z8(o.target,s=>s.getAttribute("data-index")).getAttribute("data-index");this.atwho={...this.atwho,cur:t}},selectByKeyboard(o){const e=o.keyCode===38?-1:1,{cur:t,list:s}=this.atwho,n=this.loop?(t+e+s.length)%s.length:Math.max(0,Math.min(t+e,s.length-1));this.atwho={...this.atwho,cur:n}},insertText(o,e){e.deleteContents();const t=e.endContainer;if(t.nodeType===Node.TEXT_NODE){const s=e.endOffset;t.data=t.data.slice(0,s)+o+t.data.slice(s),e.setEnd(t,s+o.length)}else{const s=document.createTextNode(o);e.insertNode(s),e.setEndAfter(s)}e.collapse(!1),Ue(e),this.dispatchInput()},insertHtml(o,e){e.deleteContents();const t=e.endContainer,s=document.createElement("span");if(s.appendChild(document.createTextNode(" ")),s.appendChild(this.htmlToElement(o)),s.appendChild(document.createTextNode(" ")),s.setAttribute("data-at-embedded",""),s.setAttribute("contenteditable",!1),t.nodeType===Node.TEXT_NODE){const n=e.endOffset;let a=t.splitText(n);t.parentNode.insertBefore(s,a),e.setEndBefore(a)}else{const n=document.createTextNode(this.suffix);e.insertNode(s),e.setEndAfter(s),e.insertNode(n),e.setEndAfter(n)}e.collapse(!1),Ue(e)},insertItem(){const{range:o,list:e,cur:t}=this.atwho,{suffix:s,atItems:n,itemName:a,customsEmbedded:r}=this,i=o.cloneRange(),d=o.toString(),{at:m,index:g}=Be(d,n),h=r?g:g+m.length;i.setStart(i.endContainer,h),Ue(i),Ue(i);const v=e[t];if(r){const p=this.$refs.embeddedItem.firstElementChild.innerHTML;this.insertHtml(p,i)}else{const p=a(v)+s;this.insertText(p,i)}ot(window.getSelection()),this.$emit("insert",v),this.handleInput(),ot(i)},htmlToElement(o){const e=document.createElement("template");return o=o.trim(),e.innerHTML=o,e.content.firstChild}}},P8={class:"atwho-inner"},N8={class:"atwho-view"},V8={class:"atwho-ul"},j8=["data-index"],K8=["textContent"],H8={ref:"embeddedItem"};function Q8(o,e,t,s,n,a){return c(),u("div",{ref:"wrap",class:"atwho-wrap",onCompositionstart:e[2]||(e[2]=(...r)=>a.handleCompositionStart&&a.handleCompositionStart(...r)),onCompositionend:e[3]||(e[3]=(...r)=>a.handleCompositionEnd&&a.handleCompositionEnd(...r)),onInput:e[4]||(e[4]=r=>a.handleInput()),onKeydownCapture:e[5]||(e[5]=(...r)=>a.handleKeyDown&&a.handleKeyDown(...r))},[n.atwho?(c(),u("div",{key:0,class:"atwho-panel",style:ee(a.style)},[l("div",P8,[l("div",N8,[l("ul",V8,[(c(!0),u(j,null,re(n.atwho.list,(r,i)=>(c(),u("li",{class:N(["atwho-li",a.isCur(i)&&"atwho-cur"]),key:i,"data-index":i,onMouseenter:e[0]||(e[0]=(...d)=>a.handleItemHover&&a.handleItemHover(...d)),onClick:e[1]||(e[1]=(...d)=>a.handleItemClick&&a.handleItemClick(...d))},[et(o.$slots,"item",{item:r},()=>[l("span",{textContent:b(a.itemName(r))},null,8,K8)])],42,j8))),128))])])])],4)):y("",!0),ne(l("span",H8,[et(o.$slots,"embeddedItem",{current:a.currentItem})],512),[[$t,!1]]),et(o.$slots,"default")],544)}const q8=oe(D8,[["render",Q8]]),G8={extends:q8,name:"AtTextarea",emits:["update:value","at","insert"],computed:{style(){if(this.atwho){const{x:o,y:e}=this.atwho,{wrap:t}=this.$refs,s=this.$el.querySelector("textarea");if(t){const n=o+s.offsetLeft-s.scrollLeft+"px",a=e+s.offsetTop-s.scrollTop+"px";return{left:n,top:a}}}return null}},methods:{handleValueUpdate(o){const e=this.$el.querySelector("textarea");o!==e.value&&(e.value=o,this.dispatchInput())},dispatchInput(){let o=this.$el.querySelector("textarea"),e=new Event("input",{bubbles:!0});o.dispatchEvent(e)},handleDelete(){const o=this.$el.querySelector("textarea");if(o.selectionEnd-o.selectionStart>0)return;const t=o.value.slice(0,o.selectionEnd);if(t){const{atItems:s,members:n,suffix:a,deleteMatch:r,itemName:i}=this,{at:d,index:m}=Be(t,s);if(m>-1){const g=t.slice(m+d.length);n.some(v=>{const p=i(v);return r(p,g,a)})&&(o.value=o.value.slice(0,m)+o.value.slice(o.selectionEnd-1),o.selectionStart=m+1,o.selectionEnd=m+1,this.handleInput())}}},handleInput(o){if(this.hasComposition)return;const e=this.$el.querySelector("textarea");this.$emit("update:value",e.value);const t=e.value.slice(0,e.selectionEnd);if(t){const{atItems:s,avoidEmail:n,allowSpaces:a}=this;let r=!0;const{at:i,index:d}=Be(t,s);d<0&&(r=!1);const m=t[d-1],g=t.slice(d+i.length,t.length);if(n&&/^[a-z0-9]$/i.test(m)&&(r=!1),!a&&/\s/.test(g)&&(r=!1),/^\s/.test(g)&&(r=!1),!r)this.closePanel();else{const{members:h,filterMatch:v,itemName:p}=this;o||this.$emit("at",g);const A=h.filter(w=>{const E=p(w);return v(E,g,i)});A.length?this.openPanel(A,g,d,i,o):this.closePanel()}}else this.closePanel()},openPanel(o,e,t,s){const n=()=>{const a=this.$el.querySelector("textarea"),r=t+s.length,i=Bs(a,r);this.atwho={chunk:e,offset:t,list:o,atEnd:r,x:i.left,y:i.top-4,cur:0}};this.atwho?n():setTimeout(n,10)},insertText(o,e){const t=e.selectionStart,s=e.selectionEnd;e.value=e.value.slice(0,t)+o+e.value.slice(s);const n=t+o.length;e.selectionStart=n,e.selectionEnd=n,this.dispatchInput()},insertItem(){const{list:o,cur:e,atEnd:t}=this.atwho,{suffix:s,atItems:n,itemName:a}=this,r=this.$el.querySelector("textarea"),i=r.value.slice(0,t),{at:d,index:m}=Be(i,n),g=m+d.length;r.selectionStart=g,r.focus();const h=o[e],v=a(h)+s;this.insertText(v,r),this.$emit("insert",h),this.handleInput()}}},X8={},W8={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"};function J8(o,e){return c(),u("svg",W8,e[0]||(e[0]=[l("path",{d:"M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18Z",stroke:"currentColor","stroke-width":"2.13333","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M10.0003 7.22672C10.5894 7.22672 11.0669 6.74915 11.0669 6.16005C11.0669 5.57095 10.5894 5.09338 10.0003 5.09338C9.41116 5.09338 8.93359 5.57095 8.93359 6.16005C8.93359 6.74915 9.41116 7.22672 10.0003 7.22672Z",fill:"currentColor"},null,-1),l("path",{d:"M10 9.78662V14.0533",stroke:"currentColor","stroke-width":"2.13333","stroke-linecap":"round"},null,-1)]))}const Y8=oe(X8,[["render",J8]]),Z8={key:2,class:"relative h-10 w-10"},e6={class:"overflow-hidden overflow-ellipsis whitespace-nowrap text-base text-gray-900 dark:text-gray-100"},t6={key:0,slot:"header",class:"flex h-12 w-full items-center justify-center"},s6={class:"relative flex items-end justify-center gap-3 p-2 pl-3"},o6={key:2,class:"absolute bottom-16 left-2 z-10 flex items-stretch gap-1 rounded-lg bg-white p-1.5 text-gray-900 shadow-md dark:bg-zinc-800 dark:text-gray-100"},n6={class:"text-xs"},a6={class:"whitespace-nowrap text-xs"},r6={key:4,class:"relative flex grow flex-col items-stretch rounded-lg bg-gray-100 p-3 dark:bg-zinc-700"},i6={class:"flex items-center gap-3 bg-gray-100 dark:bg-zinc-700"},l6={class:"flex w-0 min-w-0 grow flex-col items-stretch justify-center gap-3"},c6=["disabled","placeholder"],d6={key:0,class:"flex gap-3"},u6=["src"],m6=["onClick"],g6=B({__name:"ChatRoom",setup(o){const e=W(),{open:t}=he({component:t8}),s=f(()=>e.state.imkit.rooms[e.state.imkit.selectedRoomId]),n=f(()=>e.state.imkit.selectedRoomId),a=f(()=>!!e.state.imkit.isRequesting[`/rooms/${e.state.imkit.selectedRoomId}/messages`]),r=f(()=>{var F;const S=Object.keys(e.state.imkit.isTyping).map(q=>new ae({_id:q,messageType:"typing",sender:{_id:q}}));return((F=e.state.imkit.messageMultiList.main)==null?void 0:F.array().concat(S))??[]}),i=f(()=>dt().has("roomId")),d=f(()=>at.value?"dark":"light"),m=f(()=>r.value.at(-1)),g=f(()=>e.state.imkit.isRoomInfoVisible),h=f(()=>e.state.imkit.navigationTargetId),v=M(null),p=M(""),A=M(!1),w=M(!1),E=M(!1),D=M(!1),z=M(),L=M([]),K=M([]),Q=M(!1),J=M(!1),X=M(),V=M(te().subtract(5,"second")),H=M(!1),x=f(()=>e.state.imkit.replyId),I=f(()=>e.state.imkit.config.settings),G=f(()=>e.state.imkit.isSearchInRoomMode),O=f(()=>e.state.imkit.config.styles),_=async()=>{const S=async()=>{if(p.value){const{replyId:q}=e.state.imkit;let ie=p.value.trim(),se=[];if(ie.includes("@"))for(const we of s.value.memberIds){const Z=e.state.imkit.users[we];ie.includes(`@${Z.nickname}`)&&(se.push(Z.id),ie=ie.replace(`@${Z.nickname}`,`@${Z.id}`))}const fe={roomId:s.value.id,messageType:"text",message:ie,reply:q||null,mentions:se};p.value="",await Os(),X.value&&(X.value.style.height="auto",X.value.style.height=Math.min(X.value.scrollHeight,64)+"px"),await e.dispatch("imkit/sendMessage",fe),e.commit("imkit/setState",{replyId:null})}},F=async()=>{if(L.value.length>0){const q={roomId:s.value.id,messageType:"image",images:L.value,files:K.value};L.value=[],K.value=[],await e.dispatch("imkit/sendMessage",q)}};await Promise.all([F(),S()])},Y=async()=>{var F,q;if(r.value.length>=e.state.imkit.numberOfTotalMessages)return;const S=await e.dispatch("imkit/loadMessages",{roomId:s.value.id,beforeMessageId:(F=r.value[0])==null?void 0:F.id});S&&S.length>0&&((q=v.value)==null||q.scrollToIndex(S.length))},Se=async()=>{var S;J.value=!1,e.state.imkit.messageMultiList.main!=e.state.imkit.messageMultiList.tail&&await e.dispatch("imkit/loadMessages",{roomId:s.value.id,afterMessageId:(S=r.value[r.value.length-1])==null?void 0:S.id})},Ve=S=>{p.value+=S.i,E.value=!1},Ht=()=>{var S;(S=z.value)==null||S.click()},Qt=async S=>{var we;const q=Array.from(((we=S==null?void 0:S.target)==null?void 0:we.files)||[]).filter(Z=>Z.size<2e7);if(q.length===0||q.length>10)return;const ie=q.filter(Z=>Z.type.startsWith("image")),se=q.filter(Z=>Z.type.startsWith("video")),fe=q.filter(Z=>!Z.type.startsWith("image")&&!Z.type.startsWith("video"));if(ie.length>0){const Z=await Promise.all(ie.map(st)),Fe={roomId:s.value.id,messageType:"image",images:Z,files:Array.from(q)};await e.dispatch("imkit/sendMessage",Fe)}if(se.length>0)for(const Z of se){const Fe=await L9(Z),{width:os,height:ns,duration:as}=Fe,rs={roomId:s.value.id,messageType:"video",video:Fe,file:Z,width:os,height:ns,duration:as};await e.dispatch("imkit/sendMessage",rs)}if(fe.length>0)for(const Z of fe){const Fe={roomId:s.value.id,messageType:"file",file:Z,originalUrl:"",extra:{mimeType:Z.type,fileName:Z.name.split(".").slice(0,-1).join("."),bytes:Z.size,fileExtension:Z.name.split(".").pop()}};await e.dispatch("imkit/sendMessage",Fe)}z.value&&(z.value.value="")},qt=async S=>{const F=((S==null?void 0:S.dataTransfer)||{}).files||[];if(F.length===0||F.length>10)return;const q=await Promise.all(Array.from(F).map(st)),ie={roomId:s.value.id,messageType:"image",images:q,files:Array.from(F)};await e.dispatch("imkit/sendMessage",ie)},ut=S=>{S.preventDefault()},Gt=async S=>{const q=(S.clipboardData||{}).files;q.length===0||q.length>10||(S.preventDefault(),L.value=L.value.concat(await Promise.all(Array.from(q).map(st))),K.value=K.value.concat(Array.from(q)))},Xt=()=>{e.commit("imkit/setState",{selectedRoomId:""})},Wt=S=>{L.value.splice(S,1),K.value.splice(S,1)},Jt=()=>{setTimeout(()=>{A.value=!1},0)},Yt=S=>{!A.value&&S.keyCode==13&&!S.shiftKey&&!I.value.sendButtonEnabled&&(S.preventDefault(),_())},Zt=()=>{X.value&&(X.value.style.height="auto",X.value.style.height=Math.min(X.value.scrollHeight,64)+"px")},es=()=>{e.commit("imkit/setState",{isSearchInRoomMode:!0})};let mt=0;const gt=async S=>{Q.value=!1,e.commit("imkit/clearChatRoom"),Promise.all([e.dispatch("imkit/loadMessages",{roomId:S}),e.dispatch("imkit/fetchRoom",S)]).finally(()=>{var F,q,ie;(((F=s.value)==null?void 0:F.numberOfUnread)??0)>0&&(e.dispatch("imkit/updateLastRead",S),e.dispatch("imkit/insertUnreadMessage")),(q=s.value)!=null&&q.isSuperuser&&e.dispatch("imkit/getBlockList",s.value.id);for(const se of e.state.imkit.deliveringMessages.values())se.roomId===S&&e.commit("imkit/pushMessage",se);(ie=v.value)==null||ie.scrollToBottom(),Q.value=!0})};xt(()=>{Ae(n,async(S,F)=>{S!==F&&S&&gt(S)},{immediate:!0}),Ae([()=>r.value.length,()=>m.value],([S],[F])=>{var q,ie,se,fe,we,Z;((q=v.value)==null?void 0:q.getOffset())!==void 0&&(S-F>1||(((ie=v.value)==null?void 0:ie.getOffset())+((se=v.value)==null?void 0:se.getClientSize())==((fe=v.value)==null?void 0:fe.getScrollSize())||((we=r.value[r.value.length-1])==null?void 0:we.senderId)===e.state.imkit.uid?(J.value=!1,(Z=v.value)==null||Z.scrollToBottom()):J.value=!0))}),Ae(h,S=>{var q;if(!S)return;const F=r.value.findIndex(ie=>ie.id===S);F!==-1&&((q=v.value)==null||q.scrollToIndex(F)),e.commit("imkit/setState",{navigationTargetId:""})}),Ae(x,()=>{x.value&&(D.value=!1,setTimeout(()=>{var S;(S=X.value)==null||S.focus()},0))}),Ae(p,()=>{if(V.value.add(5,"second")>te())return;V.value=te();const{socket:S,selectedRoomId:F}=e.state.imkit;S.emit("typing",F)}),document.addEventListener("visibilitychange",()=>{document.hidden?mt=te().unix():te().unix()-mt>60&&(e.state.imkit.socket.connect(),gt(n.value))})});const ts=()=>{const{open:S}=he({component:s8});S()},ss=f(()=>s.value.memberIds.map(S=>{var F;return(F=e.state.imkit.users[S])==null?void 0:F.nickname})),Ze=f(()=>{var S;return!((S=s.value)!=null&&S.isSuperuser)||s.value.memberIds.length<=1?!1:s.value.memberIds.filter(F=>F!==e.state.imkit.uid).reduce((F,q)=>F&&e.state.imkit.blockedUsers[q],!0)});return(S,F)=>{var ie;const q=Le("touch");return s.value?(c(),u("div",{key:0,class:"flex h-dvh flex-col bg-white dark:bg-zinc-800",onDrop:de(qt,["prevent"]),onDragenter:ut,onDragover:ut},[G.value?(c(),P(C8,{key:0})):ne((c(),u("div",{key:1,class:"flex h-[60px] select-none items-center gap-3 border-b border-solid px-3 py-2.5 dark:border-zinc-700",style:ee(O.value.chatRoomHeader)},[i.value?y("",!0):(c(),u("img",{key:0,src:Ot,class:"flex cursor-pointer sm:!hidden",width:"36",height:"36",onClick:Xt})),s.value.avatars.length===1?(c(),P(ue,{key:1,url:s.value.avatars[0].url,name:s.value.avatars[0].name,class:"!h-10 !w-10 !text-lg"},null,8,["url","name"])):(c(),u("div",Z8,[U(ue,{url:s.value.avatars[1].url,name:s.value.avatars[1].name,class:"absolute right-0 top-0 !h-7 !w-7 rounded-xl !text-base"},null,8,["url","name"]),U(ue,{url:s.value.avatars[0].url,name:s.value.avatars[0].name,class:"absolute bottom-0 left-0 !h-[30px] !w-[30px] rounded-xl border-2 border-white !text-base group-hover:border-gray-100 dark:border-zinc-800"},null,8,["url","name"])])),l("div",e6,b(s.value.displayName),1),F[10]||(F[10]=l("div",{class:"flex-grow"},null,-1)),I.value.showDarkModeSwitch?(c(),P(k(Ls),{key:3,round:""})):y("",!0),I.value.searchInRoomEnabled?(c(),u("img",{key:4,class:"h-6 w-6 cursor-pointer",src:Je,onClick:es})):y("",!0),s.value.type===k(Qe).Group&&I.value.showGroupChatRoomInfoButton||s.value.type===k(Qe).Direct&&I.value.showDirectChatRoomInfoButton?(c(),u("div",{key:5,class:"h-6 w-6 cursor-pointer",onClick:F[0]||(F[0]=se=>k(e).commit("imkit/setState",{isRoomInfoVisible:!g.value}))},[U(Y8,{class:"info-svg-gary"})])):y("",!0)],4)),[[q,ts,"longtap"]]),U(k(qe),{class:N(["grow overflow-auto p-2",{"opacity-0":!Q.value&&!a.value}]),ref_key:"vl",ref:v,"data-key":"id","data-sources":r.value,"data-component":M9,"wrap-class":"flex flex-col","estimated-size":66,keeps:50,onTotop:Y,onTobottom:Se},{header:le(()=>[a.value?(c(),u("div",t6,F[11]||(F[11]=[l("svg",{class:"h-6 w-6 animate-spin fill-blue-400 text-gray-200 dark:fill-sky-700 dark:text-gray-700",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),l("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)]))):y("",!0)]),_:1},8,["class","data-sources"]),l("div",s6,[J.value?(c(),u("div",{key:0,class:"absolute -top-10 flex h-10 w-full cursor-pointer items-center bg-gray-200 bg-opacity-90 px-3 dark:bg-zinc-600",onClick:F[1]||(F[1]=(...se)=>v.value.scrollToBottom&&v.value.scrollToBottom(...se))},b((ie=s.value.lastMessage)==null?void 0:ie.string),1)):y("",!0),I.value.locationInputEnabled||I.value.audioInputEnabled?(c(),P(R8,{key:1,class:N(["h-12 w-5 flex-shrink-0 transform cursor-pointer fill-slate-500 object-contain transition dark:fill-slate-400",{"rotate-45":D.value}]),onClick:F[2]||(F[2]=()=>{D.value?D.value=!1:H.value=!0})},null,8,["class"])):y("",!0),H.value?ne((c(),u("div",o6,[I.value.locationInputEnabled?(c(),u("div",{key:0,class:"flex min-w-16 cursor-pointer flex-col items-center justify-center gap-1 p-2",onClick:F[3]||(F[3]=(...se)=>k(t)&&k(t)(...se))},[U(E8,{class:"fill-slate-500 dark:fill-slate-400"}),l("div",n6,b(S.$t("location")),1)])):y("",!0),I.value.audioInputEnabled?(c(),u("div",{key:1,class:"flex min-w-16 cursor-pointer flex-col items-center justify-center gap-1 p-2",onClick:F[4]||(F[4]=()=>{H.value=!1,D.value=!0})},[U(L8,{class:"fill-slate-500 dark:fill-slate-400"}),l("div",a6,b(S.$t("audio")),1)])):y("",!0)])),[[k(Oe),()=>{H.value=!1}]]):y("",!0),I.value.audioInputEnabled&&D.value?(c(),P(u8,{key:3})):(c(),u("div",r6,[U(Q9),l("div",i6,[l("div",l6,[U(G8,{members:ss.value},{default:le(()=>[ne(l("textarea",{disabled:Ze.value,ref_key:"input",ref:X,type:"text",rows:"1","onUpdate:modelValue":F[5]||(F[5]=se=>p.value=se),class:N(["w-full resize-none bg-gray-100 placeholder-gray-400 outline-none dark:bg-zinc-700",{"cursor-not-allowed":Ze.value}]),placeholder:Ze.value?S.$t("textareaBlockedHint"):S.$t("TypeMessage"),onCompositionstart:F[6]||(F[6]=se=>A.value=!0),onCompositionend:Jt,onKeydown:_s(Yt,["enter"]),onInput:Zt,onPaste:Gt},null,42,c6),[[$e,p.value]])]),_:1},8,["members"]),L.value.length>0?(c(),u("div",d6,[(c(!0),u(j,null,re(L.value,(se,fe)=>(c(),u("div",{key:`${se.id}-${fe}`,class:"group relative h-12 w-12"},[l("img",{src:se.thumbnailUrl,class:"absolute bottom-0 left-0 h-full w-full rounded-lg bg-gray-200 object-cover dark:bg-zinc-600"},null,8,u6),l("img",{src:Lv,class:"absolute -right-2 -top-2 hidden h-5 w-5 cursor-pointer group-hover:block",onClick:we=>Wt(fe)},null,8,m6)]))),128))])):y("",!0)]),I.value.stickerInputEnabled?(c(),u("button",{key:0,class:"flex-shrink-0",onClick:F[7]||(F[7]=se=>w.value=!0)},[U($8,{class:"fill-slate-500 dark:fill-slate-400"})])):y("",!0),I.value.emojiInputEnabled?(c(),u("button",{key:1,class:"flex-shrink-0",onClick:F[8]||(F[8]=se=>E.value=!0)},[U(I8,{class:"fill-slate-500 dark:fill-slate-400"})])):y("",!0),I.value.fileInputEnabled?(c(),u("button",{key:2,class:"flex-shrink-0",onClick:Ht},[U(S8,{class:"fill-slate-500 dark:fill-slate-400"}),l("input",{ref_key:"fileInput",ref:z,type:"file",multiple:"true",onChange:Qt,class:"hidden"},null,544)])):y("",!0)]),I.value.stickerInputEnabled&&w.value?ne((c(),P(B9,{key:0,onClose:F[9]||(F[9]=()=>{w.value=!1})},null,512)),[[k(Oe),()=>{w.value=!1}]]):y("",!0)])),I.value.emojiInputEnabled&&E.value?ne((c(),P(k(zs),{key:5,class:N(["absolute bottom-16 right-2.5 overflow-auto",k(at)?"is-dark":"is-light"]),native:!0,theme:d.value,onSelect:Ve},null,8,["class","theme"])),[[k(Oe),()=>{E.value=!1}]]):y("",!0),D.value?y("",!0):(c(),u(j,{key:6},[p.value.length>0?(c(),u("img",{key:0,class:N(["my-auto ml-0.5 mr-1 h-6 w-6 cursor-pointer",{"sm:hidden":!I.value.sendButtonEnabled}]),src:zt,onClick:_},null,2)):(c(),u("img",{key:1,class:N(["my-auto ml-0.5 mr-1 h-6 w-6 cursor-not-allowed",{"sm:hidden":!I.value.sendButtonEnabled}]),src:Dt},null,2))],64))])],32)):y("",!0)}}}),wt=oe(g6,[["__scopeId","data-v-5362cda1"]]),h6={class:"flex flex-col divide-y bg-white dark:divide-zinc-700 dark:bg-zinc-800"},p6={class:"flex h-[59px] items-center gap-4 px-3"},f6={key:1,class:"relative h-10 w-10"},v6={class:"overflow-hidden overflow-ellipsis whitespace-nowrap text-base text-gray-900 dark:text-gray-200"},A6={class:"flex flex-col gap-4 overflow-auto p-2"},b6={class:"mb-2 text-base text-gray-500 dark:text-gray-300"},k6={class:"flex flex-col gap-3"},y6={class:"relative h-[50px] w-[50px]"},w6={class:"flex flex-col overflow-hidden overflow-ellipsis whitespace-nowrap text-base"},C6={class:"text-base text-gray-900 dark:text-gray-100"},x6={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},$6={key:0,class:"ml-auto"},T6=["onClick"],I6={key:1,class:"ml-auto"},M6=["onClick"],S6={class:"text-gray-500 dark:text-gray-300"},F6={class:"text-gray-500 dark:text-gray-300"},R6=["src"],U6=B({__name:"ChatRoomInfo",setup(o){te.extend(lt);const e=W(),t=f(()=>e.state.imkit.rooms[e.state.imkit.selectedRoomId]),s=f(()=>e.state.imkit.users),n=f(()=>e.state.imkit.uid),a=f(()=>e.state.imkit.config.settings),r=f(()=>e.state.imkit.config.settings.customRoomInfoIframeUrl),i=f(()=>e.state.imkit.config.settings.customRoomInfoIframeUrl+`?roomId=${e.state.imkit.selectedRoomId}`),d=f(()=>e.state.imkit.blockedUsers),m=()=>{e.commit("imkit/setState",{isRoomInfoVisible:!1})},g=p=>{e.dispatch("imkit/blockUser",{roomId:t.value.id,uid:p})},h=p=>{e.dispatch("imkit/unblockUser",{roomId:t.value.id,uid:p})},v=f(()=>!!e.state.imkit.isRequesting[`/blockStatus/room/${t.value.id}`]);return(p,A)=>(c(),u("div",h6,[l("div",p6,[l("img",{src:Ot,class:"cursor-pointer sm:hidden",width:"36",height:"36",onClick:m}),t.value.avatars.length===1?(c(),P(ue,{key:0,url:t.value.avatars[0].url,name:t.value.avatars[0].name,class:"!h-10 !w-10 !text-lg"},null,8,["url","name"])):(c(),u("div",f6,[U(ue,{url:t.value.avatars[1].url,name:t.value.avatars[1].name,class:"absolute right-0 top-0 !h-7 !w-7 rounded-xl !text-base"},null,8,["url","name"]),U(ue,{url:t.value.avatars[0].url,name:t.value.avatars[0].name,class:"absolute bottom-0 left-0 !h-[30px] !w-[30px] rounded-xl border-2 border-white !text-base group-hover:border-gray-100 dark:border-zinc-800"},null,8,["url","name"])])),l("div",v6,b(t.value.displayName),1)]),l("div",A6,[l("div",null,[l("div",b6,b(p.$t("members")),1),l("div",k6,[(c(!0),u(j,null,re(t.value.memberIds,w=>(c(),u("div",{key:w,class:"flex items-center gap-4"},[l("div",y6,[U(ue,{url:s.value[w].avatarUrl??"",name:s.value[w].nickname,class:"relative h-[50px] w-[50px] text-lg"},null,8,["url","name"])]),l("div",w6,[l("div",C6,b(s.value[w].nickname),1),s.value[w].city&&s.value[w].country?(c(),u("div",x6,b(s.value[w].city)+", "+b(s.value[w].country),1)):y("",!0)]),t.value.isSuperuser&&w!=n.value&&!v.value?(c(),u(j,{key:0},[d.value[w]?(c(),u("div",$6,[l("button",{onClick:E=>h(w),class:"whitespace-nowrap rounded-md bg-blue-100 px-4 py-2 text-blue-800 transition duration-300 ease-in-out hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 dark:bg-blue-800 dark:text-blue-100 dark:hover:bg-blue-700"},b(p.$t("unblock")),9,T6)])):(c(),u("div",I6,[l("button",{onClick:E=>g(w),class:"whitespace-nowrap rounded-md bg-red-100 px-4 py-2 text-red-800 transition duration-300 ease-in-out hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 dark:bg-red-800 dark:text-red-100 dark:hover:bg-red-700"},b(p.$t("block")),9,M6)]))],64)):y("",!0)]))),128))])]),l("div",null,[l("div",S6,b(p.$t("createdAt"))+" "+b(k(te)(t.value.createdAt).format("lll")),1),l("div",F6,b(p.$t("updatedAt"))+" "+b(k(te)(t.value.updatedAt).format("lll")),1)]),t.value.type===k(Qe).Group&&a.value.showLeaveRoomButton?(c(),u("button",{key:0,class:"w-full rounded-lg border p-2 text-gray-500 dark:text-gray-300",onClick:A[0]||(A[0]=w=>k(e).dispatch("imkit/removeMembers",{roomId:t.value.id,uids:[n.value]}))},b(p.$t("leaveGroup")),1)):y("",!0),r.value?(c(),u("iframe",{key:1,src:i.value,frameborder:"0"},null,8,R6)):y("",!0)])]))}}),E6=B({__name:"MainView",setup(o){const e=W(),t=f(()=>e.state.imkit.selectedRoomId),s=f(()=>e.state.imkit.isRoomInfoVisible),n=f(()=>dt()),a=f(()=>n.value.has("roomId"));return e.commit("imkit/setState",{roomTag:n.value.get("roomTag")??"",selectedRoomId:n.value.get("roomId")??""}),(r,i)=>(c(),u("div",{class:N([{dark:k(at)},"relative flex h-screen divide-x divide-gray-200 bg-white dark:divide-zinc-700 dark:bg-zinc-800"])},[a.value?(c(),u(j,{key:0},[t.value?(c(),P(wt,{key:0,class:"absolute inset-0 w-full sm:relative sm:flex"})):y("",!0)],64)):(c(),u(j,{key:1},[U(Bv,{class:"w-full min-w-[300px] bg-white dark:bg-zinc-800 sm:w-1/4"}),U(Pe,{name:"slide-fade"},{default:le(()=>[t.value?(c(),P(wt,{key:0,class:"absolute inset-0 w-full sm:relative sm:flex sm:w-3/4"})):y("",!0)]),_:1})],64)),U(Pe,{name:"slide-fade"},{default:le(()=>[t.value&&s.value?(c(),P(U6,{key:0,class:"absolute inset-0 w-full sm:relative sm:w-1/4 sm:min-w-[300px]"})):y("",!0)]),_:1})],2))}}),B6=oe(E6,[["__scopeId","data-v-7e7e9d68"]]);function je(o,e,t){const{url:s}=e,n=s==null?void 0:s.split("?")[0];if(!n)return;const a={};a[n]=o==0?new Date:null,t.commit("imkit/updateField",{key:"isRequesting",value:a})}const L6=async o=>{localStorage.getItem("imkit-token")&&(localStorage.removeItem("imkit-token"),window.location.reload())};function _6(o,e){const{domain:t}=o,s=De.create({baseURL:t});return s.interceptors.request.use(n=>{je(0,n,e);const a=new pt({"IM-Authorization":e.state.imkit.config.token,"IM-Client-Key":e.state.imkit.config.clientKey});return n.headers=a,n},n=>{const{config:a}=n;return je(1,a,e),Promise.reject(n)}),s.interceptors.response.use(n=>{const{config:a}=n;return je(1,a,e),n},async n=>{const{config:a}=n;if(je(1,a,e),n.response.status===401){await L6();const r=new pt({"IM-Authorization":e.state.imkit.config.token,"IM-Client-Key":e.state.imkit.config.clientKey});return a.headers=r,De.request(a)}return Promise.reject(n)}),s}function O6(o,e){const{domain:t,clientKey:s,token:n}=o,a=Ct(t,{forceBase64:!0,transports:["websocket","webtransport"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3});return a.on("connect",()=>{a.emit("auth2",n,{CLIENT_KEY:s,Authorization:n},r=>{console.log(r)})}),a.on("disconnect",r=>{console.log(r)}),a.on("chat message",r=>{const i=ae.fromRaw(r),d={},m=new ke(r.sender);e.state.imkit.config.callbacks.onMessageReceived(i,m),d[m.id]=m,e.commit("imkit/updateField",{key:"users",value:d}),e.dispatch("imkit/handleMessageFromSocket",i)}),a.on("room",r=>{const i=new ze(r,e.state.uid);if(!i.id)return;const d={};for(const m of r.members)d[m.id]||(d[m.id]=new ke(m));e.dispatch("imkit/handleRoomFromSocket",i),e.commit("imkit/updateField",{key:"users",value:d})}),a.on("lastRead",r=>{const{roomID:i,memberID:d,messageID:m}=r;e.dispatch("imkit/handleLastReadFromSocket",{roomId:i,uid:d,messageId:m})}),a.on("roomPref",r=>{const{room:i,...d}=r;i&&(e.commit("imkit/updateRoom",{id:i,pref:d}),d.sticky!==void 0&&e.dispatch("imkit/aggregateRoomsAndFolders"))}),a.on("myPrefChange",r=>{e.dispatch("imkit/handlePrefChangeFromSocket",r)}),a.on("myPrefDelete",r=>{e.dispatch("imkit/handlePrefDeleteFromSocket",r)}),a.on("typing",r=>{e.dispatch("imkit/handleTypingFromSocket",r)}),a}const z6={install:async(o,e)=>{console.log("IMKIT version:",Kt);const{store:t,config:s}=e;t.hasModule("imkit")||t.registerModule("imkit",Ft);let n="";try{const{id:i,_id:d}=Ds(s.token);n=i||d}catch(i){console.log(i)}const a=_6(s,t),r=O6(s,t);t.commit("imkit/setState",{config:s,uid:n,axios:a,socket:r}),o.use(Ps()),o.use(me),o.use(Ns,{disableClick:!1}),o.directive("src",async(i,d)=>{const{value:m,oldValue:g}=d;if(m.startsWith("data:")){i.src=m;return}const{imageCache:h}=t.state.imkit;if(g===void 0||m!==g){if(h.has(m)){i.src=h.get(m);return}try{i.classList.add("opacity-0");const v=await a.get(m,{responseType:"arraybuffer",onDownloadProgress:w=>{const{total:E}=w;E&&t.commit("imkit/updateField",{key:"downloadProgresses",value:{[m]:w.loaded/E}})}}),p=btoa(new Uint8Array(v.data).reduce((w,E)=>w+String.fromCharCode(E),"")),A=`data:${v.headers["content-type"]};base64,${p}`;h.set(m,A),i.src=A}catch{i.src=m}i.classList.remove("opacity-0")}})}},D6=async()=>{const o=Vs(Qs);o.use(xe);const e=js({history:Ks(),routes:[{path:"/",component:B6}]});o.use(e);const t=dt(),n=await(await fetch("/config.json")).json();if(n.token=t.get("token")||n.token,Hs("localStorage"))if(t.has("token")){localStorage.setItem("imkit-token",n.token);const a=new URL(window.location.href);a.searchParams.delete("token"),window.history.replaceState(null,"",a.toString())}else localStorage.getItem("imkit-token")&&(n.token=localStorage.getItem("imkit-token")||"");o.use(z6,{store:xe,config:n}),o.mount("#app"),xe.dispatch("imkit/subscribe")};D6();
