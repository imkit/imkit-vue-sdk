var ko=Object.defineProperty;var xo=(t,e,o)=>e in t?ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var O=(t,e,o)=>xo(t,typeof e!="symbol"?e+"":e,o);import{c as wo,a as N,u as Es,b as Co,e as Z,w as pe,f as Us,o as xt,h as ns,r as at,i as g,j as d,k as v,l as m,W as Mo,F as V,m as c,K as Se,n as S,p as A,q as D,t as f,R as ze,s as ve,G as Ce,x as To,y as vs,z as Ls,A as mt,B as Le,v as _t,C as Io,D as Ro,E as So,H as Fo,I as Ao,J as _o,d as he,L as js,M as zo,N as Do,O as Oo,P as No,Q as Po,S as Eo,T as $,U as ft,V as I,X as de,Y as ne,Z as Ot,_ as K,$ as as,a0 as B,a1 as re,a2 as Bs,a3 as rs,a4 as Uo,a5 as Xt,a6 as wt,a7 as Lo,a8 as Vs,a9 as qs,aa as jo,ab as Bo,ac as Vo,ad as Hs,ae as qo,af as St,ag as Ks,ah as Ho,ai as is,aj as Ve,ak as bt,al as Ko,am as bs,an as $s,ao as je,ap as Go,aq as ys,ar as ks,as as Wo,at as Zt,au as ee,av as Jo,aw as Yo,ax as Xo,ay as Zo,az as ls,aA as Qo,aB as en,aC as tn,aD as sn,aE as on,aF as nn,aG as an,aH as Gs,aI as $t,aJ as rn,aK as ln,aL as cn,aM as Nt,aN as cs,aO as Pt,aP as ot,aQ as xs,aR as Qt,aS as dn,aT as Ws,aU as un,aV as ds,aW as Js,aX as Et,aY as yt,aZ as mn,a_ as gn,a$ as hn,b0 as fn,b1 as pn,b2 as ws,b3 as vn,b4 as Ut,b5 as bn,b6 as Ys,b7 as $n,b8 as yn,b9 as Xs,ba as kn,bb as Cs,bc as Ms,bd as xn,be as wn,bf as Cn,bg as Mn,bh as Zs,bi as Tn,bj as In,bk as Rn,bl as Sn,bm as Fn,bn as An,bo as _n,bp as zn,bq as Dn,br as On,bs as Nn,bt as Pn,bu as En,bv as Ts,bw as Un,bx as Ln,by as jn,bz as Bn,bA as Vn,bB as qn,bC as Hn,bD as Kn,bE as Is,bF as Ht,bG as Gn,bH as Wn,bI as Jn,bJ as Yn,bK as Kt,bL as Xn,bM as Zn,bN as Qn,bO as ea}from"./vendor-D-9R8z4Q.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=o(n);fetch(n.href,a)}})();const Qs=t=>typeof t=="string"?t:Array.isArray(t)?t.map(e=>Qs(e)).filter(e=>!!e).join(" "):t&&typeof t=="object"?Object.entries(t).filter(([,e])=>!!e).map(([e])=>e).join(" "):"",ke=(...t)=>t.map(e=>Qs(e)).filter(e=>e&&e.trim().length>0).join(" "),ta=t=>{try{return JSON.parse(JSON.stringify(t))}catch(e){console.warn("postMessageToParent: Failed to serialize payload",e);const o={};for(const[s,n]of Object.entries(t))if(n===null||typeof n=="string"||typeof n=="number"||typeof n=="boolean"||Array.isArray(n))o[s]=n;else if(typeof n=="object")try{o[s]=JSON.parse(JSON.stringify(n))}catch{console.warn(`postMessageToParent: Skipping non-serializable key: ${s}`)}return o}},dt=(t,e)=>{if(typeof window>"u"||!window.parent){console.warn("postMessageToParent: window.parent is not available");return}const o=e?ta(e):{},s={type:"TRIBO_IFRAME_EVENT",eventType:t,payload:o,timestamp:new Date().toISOString()};console.log("postMessageToParent",s),window.parent.postMessage(s,"*")},sa=(t,e)=>{if(typeof window>"u")return console.warn("listenToParentMessages: window is not available"),()=>{};const o="TRIBO_IFRAME_EVENT",s=n=>{if(!n.data||typeof n.data!="object"||n.data.type!==o)return;const{eventType:a,payload:r}=n.data;a&&(console.log("listenToParentMessages: Received message",{eventType:a,payload:r,origin:n.origin}),t(a,r||{},n))};return window.addEventListener("message",s),()=>{window.removeEventListener("message",s)}},oa="Schließen",na="Bestätigen",aa="Ordnername",ra="Ordner erstellen",ia="Tag",la="Tag-Namen eingeben",ca="Bitte benutzerdefinierte Farbe eingeben, z. B. #02B13F",da="Herunterladen",ua="{0} hat die Nachricht zurückgezogen",ma="Gelesen",ga="Anheften",ha="Lösen",fa="Keine Mitglieder",pa="Mitglieder",va="Erstellt am",ba="Aktualisiert am",$a="Gruppe verlassen",ya="Text",ka="Bild",xa="Video",wa="Sticker",Ca="Nachricht",Ma="{0} gesendet",Ta="{0} hat Ihnen {1} gesendet",Ia="Hier tippen, um den Link zu öffnen.",Ra="Nachricht eingeben...",Sa="{0} tippt...",Fa="{0} ist dem Chat beigetreten",Aa="{0} hat den Chat verlassen",_a="{0} hat {1} eingeladen",za="{0} hat {1} entfernt",Da="Sie haben die Nachricht zurückgezogen",Oa="Dateigröße",Na="Datei",Pa="Übersetzung",Ea="Suche",Ua="Standort",La="Aktuellen Standort senden",ja="Kein Zugriff auf Standortberechtigung",Ba="Standortinformationen nicht verfügbar",Va="Standortanfrage abgelaufen",qa="Adresse nicht verfügbar",Ha="Sprachnachricht",Ka="Kein Zugriff auf Mikrofonberechtigung",Ga="Aus Ordner entfernen",Wa="Ordner bearbeiten",Ja="Zum Ordner hinzufügen",Ya="{n} Chaträume",Xa="Chatraum-Name",Za="Mitglieder",Qa="Tags",er="Ordner",tr="Eigenschaften",sr="Massenversand",or="Bitte Nachricht eingeben",nr="In Unterhaltung suchen",ar="Gestern",rr="Heute",ir="Ordner löschen?",lr="Ausblenden",cr="Einblenden",dr="Bearbeiten",ur="Abbrechen",mr="Erstellen",gr="Speichern",hr="Tag-Namen eingeben",fr="Tag wirklich löschen?",pr="Tag bearbeiten",vr="Farbe wählen",br="Tag existiert bereits. Anderen Namen wählen.",$r="Blockieren",yr="Entblocken",kr="Dieser Benutzer wurde blockiert.",xr="Benachrichtigungen stummschalten",wr="Benachrichtigungen aktivieren",Cr="Chatraum wirklich löschen?",Mr="Nach dem Löschen des Chatraums können Sie den vorherigen Chatverlauf nicht mehr einsehen. Der Chatraum aus der Perspektive der anderen Person wird nicht beeinträchtigt und sie können Ihnen weiterhin neue Nachrichten senden.",Tr="Unten sind ungelesene Nachrichten",Ir="Wie möchten Sie diese Nachricht löschen?",Rr="Für alle löschen",Sr="Nur für mich löschen",Fr="Nachricht löschen bestätigen?",Ar="Die von Ihnen ausgewählte Nachricht wird aus allen Chaträumen gelöscht. Diese Aktion kann nicht rückgängig gemacht werden.",_r="Die von Ihnen ausgewählte Nachricht wird nur aus Ihrem Chatraum gelöscht. Die andere Person kann die Nachricht weiterhin im Chatraum sehen. Diese Aktion kann nicht rückgängig gemacht werden.",zr="Nachrichten",Dr="Gefundene Nachrichten {0}",Or="Entfernen",Nr="Möchten Sie {0} wirklich aus der Gruppe entfernen?",Pr="Nach dem Entfernen kann das Mitglied keine Gruppen­nachrichten mehr sehen.",Er="Aus der Gruppe ausgehen",Ur="Die Mitglieder des Tretens scheiterten",Lr="Der Kick-out-Betrieb kann derzeit nicht abgeschlossen werden. Bitte bestätigen Sie die Netzwerkverbindung oder versuchen Sie es später erneut.",jr="Datei zu groß",Br="Die ausgewählte Datei überschreitet die maximale erlaubte Größe von {0}. Bitte wählen Sie eine kleinere Datei.",Vr="Keine Chatrooms verfügbar",qr="Authentifizierung fehlgeschlagen",Hr="Ihre Sitzung ist abgelaufen. Bitte melden Sie sich erneut an.",Kr="Zeit",Gr="Name",Wr="Ungelesen",Jr="Aufsteigend",Yr="Absteigend",Xr="Mitglied einladen",Zr="Chatraum-Informationen",Qr="Mitglieder zum Chatraum einladen",ei="Keine Mitglieder zum Einladen verfügbar",ti="Mitglieder, die bereits im Chatraum sind, können nicht ausgewählt werden",si="Mitglieder erfolgreich eingeladen!",oi="Mitglieder wurden erfolgreich zum Chatraum eingeladen",ni="Neuen Chatraum erstellen",ai="Raumname eingeben...",ri="Raum erstellen",ii="Chatraum erfolgreich erstellt!",li="Der Chatraum wurde erfolgreich erstellt",ci="Erstellung fehlgeschlagen",di="Chatraum konnte nicht erstellt werden, bitte versuchen Sie es später erneut",ui="Vorschau",mi="Absender",gi="Tribo-Menü öffnen",hi="Einstellungen",fi="Mitglieder verwalten",pi="Arbeitsbereich wechseln",vi="Neues Team erstellen",bi="Abmelden",$i="Einladen",yi="Chatraum verlassen",ki="Chatraum-Inhalt",xi="Fotos & Videos",wi="Keine Fotos oder Videos",Ci="Keine Dateien",Mi="Dieser Monat",Ti="Letzter Monat",Ii={close:oa,confirm:na,folderName:aa,createFolder:ra,tag:ia,inputTag:la,inputTagPlaceholder:ca,download:da,someoneUnsentMessage:ua,read:ma,pin:ga,unpin:ha,emptyChat:fa,members:pa,createdAt:va,updatedAt:ba,leaveGroup:$a,text:ya,image:ka,video:xa,sticker:wa,message:Ca,youSent:Ma,someoneSent:Ta,tapOpen:Ia,TypeMessage:Ra,isTyping:Sa,someoneJoinedTheChat:Fa,someoneLeftTheChat:Aa,someoneInvited:_a,someoneKicked:za,youUnsentMessage:Da,fileSize:Oa,file:Na,translation:Pa,search:Ea,location:Ua,sendCurrentLocation:La,noAccessLocationPermission:ja,locationInfoUnavailable:Ba,requestLocationTimeout:Va,addressUnavailable:qa,audio:Ha,noAccessMicrophonePermission:Ka,removeFromFolder:Ga,editFolder:Wa,addToFolder:Ja,numberOfChatroom:Ya,roomName:Xa,roomMember:Za,roomPrefTags:Qa,roomPrefFolder:er,roomTags:tr,massTexting:sr,inputMessage:or,searchInConversation:nr,yesterday:ar,today:rr,confirmToDeleteFolder:ir,hide:lr,unhide:cr,edit:dr,delete:"Löschen",cancel:ur,create:mr,save:gr,createTag:hr,confirmDeleteTag:fr,editTag:pr,chooseColor:vr,duplicateTagName:br,block:$r,unblock:yr,textareaBlockedHint:kr,mute:xr,unmute:wr,chatroomDeleteConfirmationTitle:Cr,chatroomDeleteConfirmationMessage:Mr,unreadMessages:Tr,deleteMessageConfirmation:Ir,deleteForEveryone:Rr,deleteForMe:Sr,confirmDeleteMessage:Fr,deleteForEveryoneWarning:Ar,deleteForMeWarning:_r,messages:zr,foundMessages:Dr,moveOut:Or,kickOutConfirmTitle:Nr,kickOutConfirmTip:Pr,kickOutGroup:Er,kickOutErrorTitle:Ur,kickOutErrorDesc:Lr,fileSizeLimitTitle:jr,fileSizeLimitMessage:Br,noRoomsAvailable:Vr,unauthorizedTitle:qr,unauthorizedMessage:Hr,sortByTime:Kr,sortByName:Gr,sortByUnread:Wr,sortAscending:Jr,sortDescending:Yr,inviteMember:Xr,chatRoomInfo:Zr,inviteMemberToRoom:Qr,noMembersToInvite:ei,memberAlreadyInRoomHint:ti,inviteMemberSuccess:si,inviteMemberSuccessDescription:oi,createNewRoom:ni,inputRoomNamePlaceholder:ai,createRoom:ri,createRoomSuccess:ii,createRoomSuccessDescription:li,createRoomFailed:ci,createRoomFailedDescription:di,preview:ui,sender:mi,openMenu:gi,settings:hi,manageMembers:fi,switchWorkspace:pi,createTeam:vi,logout:bi,invite:$i,leaveChatRoom:yi,chatRoomContent:ki,photosVideos:xi,noPhotosVideos:wi,noFiles:Ci,thisMonth:Mi,lastMonth:Ti,"leave-room-title":"Chatraum verlassen bestätigen","leave-room-message":"Sind Sie sicher, dass Sie den Chatraum „{ roomName }“ verlassen möchten? Nach dem Verlassen können Sie die Nachrichten dieses Chatraums nicht mehr einsehen, es sei denn, Sie werden erneut eingeladen.","leave-room-confirm":"Verlassen bestätigen","remove-member-title":"Mitglied entfernen bestätigen","remove-member-message":"Sind Sie sicher, dass Sie „{ memberName }“ aus diesem Chatraum entfernen möchten? Diese Aktion kann nicht rückgängig gemacht werden. Das entfernte Mitglied kann die Nachrichten in diesem Chatraum nicht mehr einsehen.","remove-member-confirm":"Entfernen bestätigen"},Ri="Close",Si="Confirm",Fi="Folder Name",Ai="Create Folder",_i="Tag",zi="Input Tag",Di="Input Tag Color #02B13F",Oi="Download",Ni="{0} unsent a message",Pi="Read",Ei="Pin",Ui="Unpin",Li="Empty Chat",ji="Members",Bi="Created At",Vi="Updated At",qi="Leave Group",Hi="Text",Ki="Image",Gi="Video",Wi="Sticker",Ji="Message",Yi="{0} sent",Xi="{0} sent a {1}",Zi="Tap here to open the link.",Qi="Type a message...",el="{0} is typing...",tl="{0} joined the chat",sl="{0} left the chat",ol="{0} invited {1}",nl="{0} kicked {1}",al="You unsent a message",rl="File size",il="File",ll="Translation",cl="Search",dl="Location",ul="Send Current Location",ml="No access location permission.",gl="The request to get location timed out.",hl="The address is unavailable.",fl="Audio Message",pl="No access microphone permission.",vl="Remove from folder",bl="Edit Folder",$l="Add to Folder",yl="{n} Chatrooms",kl="Room Name",xl="Member",wl="Tag",Cl="Folder",Ml="Attribute",Tl="Mass Texting",Il="Input Message",Rl="Search in Conversation",Sl="Yesterday",Fl="Today",Al="Confirm Delete Folder",_l="Hide",zl="Unhide",Dl="Edit",Ol="Cancel",Nl="Create",Pl="Save",El="Enter tag name",Ul="Confirm Delete Tag?",Ll="Edit Tag",jl="Choose Color",Bl="Tag already exists. Try another name.",Vl="Block",ql="Unblock",Hl="This user has been blocked",Kl="Mute",Gl="Unmute",Wl="Are you sure you want to delete this chatroom?",Jl="After deleting this chatroom, you will not be able to view the chat history in the chatroom. For the other user in the chatroom, their chat history will not be affected, and they can still send you new messages.",Yl="Below are unread messages",Xl="How do you want to delete this message?",Zl="Delete for everyone",Ql="Delete for me only",ec="Confirm Delete Message?",tc="The message you selected will be deleted from all chatrooms. This action cannot be undone.",sc="The message you selected will be deleted from your chatroom. The other user will still be able to see the message in the chatroom. This action cannot be undone.",oc="Messages",nc="Found {0} messages",ac="Remove",rc="Are you sure you want to remove {0} from the group?",ic="Once removed, the member will no longer be able to view group messages.",lc="Kick out of the group",cc="Kicking out members failed",dc="The kick-out operation cannot be completed at present. Please confirm the network connection or try again later.",uc="File too large",mc="The selected file exceeds the maximum allowed size of {0}. Please choose a smaller file.",gc="No chat rooms available",hc="Authentication Failed",fc="Your session has expired. Please log in again.",pc="Time",vc="Name",bc="Unread",$c="Ascending",yc="Descending",kc="Invite Member",xc="Chat Room Info",wc="Invite Members to Chat Room",Cc="No members available to invite",Mc="Members already in the chat room cannot be selected",Tc="Members invited successfully!",Ic="Members have been successfully invited to the chat room",Rc="Create New Chat Room",Sc="Enter room name...",Fc="Create Room",Ac="Chat room created successfully!",_c="The chat room has been created successfully",zc="Creation Failed",Dc="Unable to create chat room, please try again later",Oc="Preview",Nc="Sender",Pc="Open Tribo Menu",Ec="Settings",Uc="Manage Members",Lc="Switch Workspace",jc="Create New Team",Bc="Logout",Vc="Invite",qc="Leave Chat Room",Hc="Chat Room Content",Kc="Photos & Videos",Gc="No photos or videos",Wc="No files",Jc="This Month",Yc="Last Month",Xc={close:Ri,confirm:Si,folderName:Fi,createFolder:Ai,tag:_i,inputTag:zi,inputTagPlaceholder:Di,download:Oi,someoneUnsentMessage:Ni,read:Pi,pin:Ei,unpin:Ui,emptyChat:Li,members:ji,createdAt:Bi,updatedAt:Vi,leaveGroup:qi,text:Hi,image:Ki,video:Gi,sticker:Wi,message:Ji,youSent:Yi,someoneSent:Xi,tapOpen:Zi,TypeMessage:Qi,isTyping:el,someoneJoinedTheChat:tl,someoneLeftTheChat:sl,someoneInvited:ol,someoneKicked:nl,youUnsentMessage:al,fileSize:rl,file:il,translation:ll,search:cl,location:dl,sendCurrentLocation:ul,noAccessLocationPermission:ml,"locationInfoUnavailable.":"Location information is unavailable.",requestLocationTimeout:gl,addressUnavailable:hl,audio:fl,noAccessMicrophonePermission:pl,removeFromFolder:vl,editFolder:bl,addToFolder:$l,numberOfChatroom:yl,"no-chatroom":"No chatroom",roomName:kl,roomMember:xl,roomPrefTags:wl,roomPrefFolder:Cl,roomTags:Ml,massTexting:Tl,inputMessage:Il,searchInConversation:Rl,yesterday:Sl,today:Fl,confirmToDeleteFolder:Al,hide:_l,unhide:zl,edit:Dl,delete:"Delete",cancel:Ol,create:Nl,save:Pl,createTag:El,confirmDeleteTag:Ul,editTag:Ll,chooseColor:jl,duplicateTagName:Bl,block:Vl,unblock:ql,textareaBlockedHint:Hl,mute:Kl,unmute:Gl,chatroomDeleteConfirmationTitle:Wl,chatroomDeleteConfirmationMessage:Jl,unreadMessages:Yl,deleteMessageConfirmation:Xl,deleteForEveryone:Zl,deleteForMe:Ql,confirmDeleteMessage:ec,deleteForEveryoneWarning:tc,deleteForMeWarning:sc,messages:oc,foundMessages:nc,moveOut:ac,kickOutConfirmTitle:rc,kickOutConfirmTip:ic,kickOutGroup:lc,kickOutErrorTitle:cc,kickOutErrorDesc:dc,fileSizeLimitTitle:uc,fileSizeLimitMessage:mc,noRoomsAvailable:gc,unauthorizedTitle:hc,unauthorizedMessage:fc,sortByTime:pc,sortByName:vc,sortByUnread:bc,sortAscending:$c,sortDescending:yc,inviteMember:kc,chatRoomInfo:xc,inviteMemberToRoom:wc,noMembersToInvite:Cc,memberAlreadyInRoomHint:Mc,inviteMemberSuccess:Tc,inviteMemberSuccessDescription:Ic,createNewRoom:Rc,inputRoomNamePlaceholder:Sc,createRoom:Fc,createRoomSuccess:Ac,createRoomSuccessDescription:_c,createRoomFailed:zc,createRoomFailedDescription:Dc,preview:Oc,sender:Nc,openMenu:Pc,settings:Ec,manageMembers:Uc,switchWorkspace:Lc,createTeam:jc,logout:Bc,invite:Vc,leaveChatRoom:qc,chatRoomContent:Hc,photosVideos:Kc,noPhotosVideos:Gc,noFiles:Wc,thisMonth:Jc,lastMonth:Yc,"leave-room-title":"Confirm Leave Chat Room","leave-room-message":"Are you sure you want to leave “{ roomName }”? After leaving, you will no longer be able to view the messages in this chat room unless someone invites you again.","leave-room-confirm":"Confirm Leave","remove-member-title":"Confirm Remove Member","remove-member-message":"Are you sure you want to remove “{ memberName }” from this chat room? This action cannot be undone. The removed member will no longer be able to view messages in this chat room.","remove-member-confirm":"Confirm Remove"},Zc="Cerrar",Qc="Confirmar",ed="Nombre de la carpeta",td="Crear carpeta",sd="Etiqueta",od="Ingresar nombre de etiqueta",nd="Por favor ingrese un color personalizado como #02B13F",ad="Descargar",rd="{0} ha retirado un mensaje",id="Leído",ld="Fijar",cd="Desfijar",dd="No hay miembros",ud="Miembros",md="Creado el",gd="Actualizado el",hd="Salir del grupo",fd="Texto",pd="Imagen",vd="Video",bd="Sticker",$d="Mensaje",yd="{0} enviado",kd="{0} te ha enviado {1}",xd="Toca aquí para abrir este enlace.",wd="Escribe un mensaje...",Cd="{0} está escribiendo...",Md="{0} se unió al chat",Td="{0} abandonó el chat",Id="{0} invitó a {1}",Rd="{0} expulsó a {1}",Sd="Has retirado un mensaje",Fd="Tamaño del archivo",Ad="Archivo",_d="Traducción",zd="Buscar",Dd="Ubicación",Od="Enviar ubicación actual",Nd="Sin permiso de acceso a la ubicación",Pd="Tiempo de espera para solicitud de ubicación",Ed="Dirección no disponible",Ud="Mensaje de voz",Ld="Sin permiso de acceso al micrófono",jd="Eliminar de la carpeta",Bd="Editar carpeta",Vd="Añadir a carpeta",qd="{n} salas de chat",Hd="Nombre de la sala",Kd="Miembro",Gd="Etiquetas",Wd="Carpeta",Jd="Atributos",Yd="Mensaje masivo",Xd="Por favor, ingresa el contenido del mensaje",Zd="Buscar en la conversación",Qd="Ayer",eu="Hoy",tu="¿Eliminar carpeta?",su="Ocultar",ou="Mostrar",nu="Editar",au="Cancelar",ru="Crear",iu="Guardar",lu="Ingresar nombre de etiqueta",cu="¿Confirmar eliminación de etiqueta?",du="Editar etiqueta",uu="Elegir color",mu="Etiqueta ya existe. Usa otro nombre.",gu="Bloquear",hu="Desbloquear",fu="Este usuario ha sido bloqueado.",pu="Silenciar notificaciones",vu="Activar notificaciones",bu="¿Confirmar eliminación de la sala de chat?",$u="Después de eliminar la sala de chat, no podrás ver el historial de chat anterior. La sala de chat desde la perspectiva de la otra persona no se verá afectada y aún podrán enviarte nuevos mensajes.",yu="Mensajes no leídos a continuación",ku="¿Cómo deseas eliminar este mensaje?",xu="Eliminar para todos",wu="Eliminar solo para mí",Cu="¿Confirmar eliminación del mensaje?",Mu="El mensaje que seleccionaste se eliminará de todas las salas de chat. Esta acción no se puede deshacer.",Tu="El mensaje que seleccionaste solo se eliminará de tu sala de chat. La otra persona aún podrá ver el mensaje en la sala de chat. Esta acción no se puede deshacer.",Iu="Mensajes",Ru="Mensajes encontrados {0}",Su="Echar",Fu="¿Estás seguro de que deseas expulsar a {0} del grupo?",Au="Una vez expulsado, el miembro no podrá ver los mensajes del grupo.",_u="Compilarse del grupo",zu="Patear a los miembros falló",Du="La operación de inicio no se puede completar en la actualidad. Confirme la conexión de red o vuelva a intentarlo más tarde.",Ou="Archivo demasiado grande",Nu="El archivo seleccionado excede el tamaño máximo permitido de {0}. Por favor, elija un archivo más pequeño.",Pu="No hay salas de chat disponibles",Eu="Error de autenticación",Uu="Su sesión ha expirado. Por favor, inicie sesión nuevamente.",Lu="Tiempo",ju="Nombre",Bu="No leído",Vu="Ascendente",qu="Descendente",Hu="Invitar miembro",Ku="Información de la sala",Gu="Invitar miembros a la sala de chat",Wu="No hay miembros disponibles para invitar",Ju="Los miembros que ya están en la sala de chat no pueden ser seleccionados",Yu="¡Miembros invitados con éxito!",Xu="Los miembros han sido invitados exitosamente a la sala de chat",Zu="Crear nueva sala de chat",Qu="Ingrese el nombre de la sala...",em="Crear sala",tm="¡Sala de chat creada con éxito!",sm="La sala de chat se ha creado exitosamente",om="Error al crear",nm="No se pudo crear la sala de chat, por favor intente más tarde",am="Vista previa",rm="Remitente",im="Abrir menú de Tribo",lm="Configuración",cm="Gestionar miembros",dm="Cambiar espacio de trabajo",um="Crear nuevo equipo",mm="Cerrar sesión",gm="Invitar",hm="Salir de la sala de chat",fm="Contenido de la sala",pm="Fotos y videos",vm="No hay fotos ni videos",bm="No hay archivos",$m="Este mes",ym="Mes pasado",km={close:Zc,confirm:Qc,folderName:ed,createFolder:td,tag:sd,inputTag:od,inputTagPlaceholder:nd,download:ad,someoneUnsentMessage:rd,read:id,pin:ld,unpin:cd,emptyChat:dd,members:ud,createdAt:md,updatedAt:gd,leaveGroup:hd,text:fd,image:pd,video:vd,sticker:bd,message:$d,youSent:yd,someoneSent:kd,tapOpen:xd,TypeMessage:wd,isTyping:Cd,someoneJoinedTheChat:Md,someoneLeftTheChat:Td,someoneInvited:Id,someoneKicked:Rd,youUnsentMessage:Sd,fileSize:Fd,file:Ad,translation:_d,search:zd,location:Dd,sendCurrentLocation:Od,noAccessLocationPermission:Nd,"locationInfoUnavailable.":"Información de ubicación no disponible",requestLocationTimeout:Pd,addressUnavailable:Ed,audio:Ud,noAccessMicrophonePermission:Ld,removeFromFolder:jd,editFolder:Bd,addToFolder:Vd,numberOfChatroom:qd,roomName:Hd,roomMember:Kd,roomPrefTags:Gd,roomPrefFolder:Wd,roomTags:Jd,massTexting:Yd,inputMessage:Xd,searchInConversation:Zd,yesterday:Qd,today:eu,confirmToDeleteFolder:tu,hide:su,unhide:ou,edit:nu,delete:"Eliminar",cancel:au,create:ru,save:iu,createTag:lu,confirmDeleteTag:cu,editTag:du,chooseColor:uu,duplicateTagName:mu,block:gu,unblock:hu,textareaBlockedHint:fu,mute:pu,unmute:vu,chatroomDeleteConfirmationTitle:bu,chatroomDeleteConfirmationMessage:$u,unreadMessages:yu,deleteMessageConfirmation:ku,deleteForEveryone:xu,deleteForMe:wu,confirmDeleteMessage:Cu,deleteForEveryoneWarning:Mu,deleteForMeWarning:Tu,messages:Iu,foundMessages:Ru,moveOut:Su,kickOutConfirmTitle:Fu,kickOutConfirmTip:Au,kickOutGroup:_u,kickOutErrorTitle:zu,kickOutErrorDesc:Du,fileSizeLimitTitle:Ou,fileSizeLimitMessage:Nu,noRoomsAvailable:Pu,unauthorizedTitle:Eu,unauthorizedMessage:Uu,sortByTime:Lu,sortByName:ju,sortByUnread:Bu,sortAscending:Vu,sortDescending:qu,inviteMember:Hu,chatRoomInfo:Ku,inviteMemberToRoom:Gu,noMembersToInvite:Wu,memberAlreadyInRoomHint:Ju,inviteMemberSuccess:Yu,inviteMemberSuccessDescription:Xu,createNewRoom:Zu,inputRoomNamePlaceholder:Qu,createRoom:em,createRoomSuccess:tm,createRoomSuccessDescription:sm,createRoomFailed:om,createRoomFailedDescription:nm,preview:am,sender:rm,openMenu:im,settings:lm,manageMembers:cm,switchWorkspace:dm,createTeam:um,logout:mm,invite:gm,leaveChatRoom:hm,chatRoomContent:fm,photosVideos:pm,noPhotosVideos:vm,noFiles:bm,thisMonth:$m,lastMonth:ym,"leave-room-title":"Confirmar salida del chat","leave-room-message":"¿Está seguro de que desea salir de «{ roomName }»? Después de salir, no podrá ver los mensajes de este chat a menos que alguien lo invite nuevamente.","leave-room-confirm":"Confirmar salida","remove-member-title":"Confirmar eliminación del miembro","remove-member-message":"¿Está seguro de que desea eliminar a «{ memberName }» de este chat? Esta acción no se puede deshacer. El miembro eliminado ya no podrá ver los mensajes de este chat.","remove-member-confirm":"Confirmar eliminación"},xm="Fermer",wm="Confirmer",Cm="Nom du dossier",Mm="Créer un dossier",Tm="Étiquette",Im="Saisir le nom de l'étiquette",Rm="Veuillez saisir une couleur personnalisée comme #02B13F",Sm="Télécharger",Fm="{0} a retiré un message",Am="Lu",_m="Épingler",zm="Désépingler",Dm="Pas de membres",Om="Membres",Nm="Créé le",Pm="Mis à jour le",Em="Quitter le groupe",Um="Texte",Lm="Image",jm="Vidéo",Bm="Autocollant",Vm="Message",qm="{0} envoyé",Hm="{0} vous a envoyé {1}",Km="Appuyez ici pour ouvrir ce lien.",Gm="Écrivez un message...",Wm="{0} est en train d'écrire...",Jm="{0} a rejoint le chat",Ym="{0} a quitté le chat",Xm="{0} a invité {1}",Zm="{0} a expulsé {1}",Qm="Vous avez retiré un message",eg="Taille du fichier",tg="Fichier",sg="Traduction",og="Rechercher",ng="Localisation",ag="Envoyer la position actuelle",rg="Pas d'autorisation d'accès à la localisation",ig="Délai d'attente de la demande de localisation dépassé",lg="Adresse non disponible",cg="Message vocal",dg="Pas d'autorisation d'accès au microphone",ug="Retirer du dossier",mg="Modifier le dossier",gg="Ajouter au dossier",hg="{n} salons de discussion",fg="Nom du salon",pg="Membre",vg="Étiquettes",bg="Dossier",$g="Attributs",yg="Message de masse",kg="Veuillez saisir le contenu du message",xg="Rechercher dans la conversation",wg="Hier",Cg="Aujourd'hui",Mg="Supprimer le dossier ?",Tg="Masquer",Ig="Afficher",Rg="Éditer",Sg="Annuler",Fg="Créer",Ag="Enregistrer",_g="Saisir le nom de l'étiquette",zg="Confirmer la suppression de l'étiquette ?",Dg="Modifier l'étiquette",Og="Choisir une couleur",Ng="Étiquette existante. Choisissez un autre nom.",Pg="Bloquer",Eg="Débloquer",Ug="Cet utilisateur a été bloqué.",Lg="Désactiver les notifications",jg="Activer les notifications",Bg="Confirmer la suppression du salon de discussion ?",Vg="Après avoir supprimé le salon de discussion, vous ne pourrez plus consulter l'historique des conversations précédentes. Le salon de discussion du point de vue de l'autre personne ne sera pas affecté et elle pourra toujours vous envoyer de nouveaux messages.",qg="Ci-dessous les messages non lus",Hg="Comment souhaitez-vous supprimer ce message ?",Kg="Supprimer pour tout le monde",Gg="Supprimer uniquement pour moi",Wg="Confirmer la suppression du message ?",Jg="Le message que vous avez sélectionné sera supprimé de tous les salons de discussion. Cette action ne peut pas être annulée.",Yg="Le message que vous avez sélectionné sera supprimé uniquement de votre salon de discussion. L'autre personne pourra toujours voir le message dans le salon de discussion. Cette action ne peut pas être annulée.",Xg="Messages",Zg="Messages trouvés {0}",Qg="Retirer",eh="Êtes-vous sûr de vouloir retirer {0} du groupe ?",th="Une fois retiré, le membre ne pourra plus voir les messages du groupe.",sh="Sortir du groupe",oh="Les membres ont échoué",nh="L'opération de lancement ne peut pas être achevée à l'heure actuelle. Veuillez confirmer la connexion réseau ou réessayer plus tard.",ah="Fichier trop grand",rh="Le fichier sélectionné dépasse la taille maximale autorisée de {0}. Veuillez choisir un fichier plus petit.",ih="Aucune salle de discussion disponible",lh="Échec de l'authentification",ch="Votre session a expiré. Veuillez vous reconnecter.",dh="Temps",uh="Nom",mh="Non lu",gh="Croissant",hh="Décroissant",fh="Inviter un membre",ph="Informations du salon",vh="Inviter des membres au salon de discussion",bh="Aucun membre disponible à inviter",$h="Les membres déjà dans le salon de discussion ne peuvent pas être sélectionnés",yh="Membres invités avec succès !",kh="Les membres ont été invités avec succès au salon de discussion",xh="Créer un nouveau salon de discussion",wh="Entrez le nom du salon...",Ch="Créer le salon",Mh="Salon de discussion créé avec succès !",Th="Le salon de discussion a été créé avec succès",Ih="Échec de la création",Rh="Impossible de créer le salon de discussion, veuillez réessayer plus tard",Sh="Aperçu",Fh="Expéditeur",Ah="Ouvrir le menu Tribo",_h="Paramètres",zh="Gérer les membres",Dh="Changer d'espace de travail",Oh="Créer une nouvelle équipe",Nh="Déconnexion",Ph="Inviter",Eh="Quitter le salon de discussion",Uh="Contenu du salon",Lh="Photos et vidéos",jh="Aucune photo ou vidéo",Bh="Aucun fichier",Vh="Ce mois",qh="Mois dernier",Hh={close:xm,confirm:wm,folderName:Cm,createFolder:Mm,tag:Tm,inputTag:Im,inputTagPlaceholder:Rm,download:Sm,someoneUnsentMessage:Fm,read:Am,pin:_m,unpin:zm,emptyChat:Dm,members:Om,createdAt:Nm,updatedAt:Pm,leaveGroup:Em,text:Um,image:Lm,video:jm,sticker:Bm,message:Vm,youSent:qm,someoneSent:Hm,tapOpen:Km,TypeMessage:Gm,isTyping:Wm,someoneJoinedTheChat:Jm,someoneLeftTheChat:Ym,someoneInvited:Xm,someoneKicked:Zm,youUnsentMessage:Qm,fileSize:eg,file:tg,translation:sg,search:og,location:ng,sendCurrentLocation:ag,noAccessLocationPermission:rg,"locationInfoUnavailable.":"Informations de localisation non disponibles",requestLocationTimeout:ig,addressUnavailable:lg,audio:cg,noAccessMicrophonePermission:dg,removeFromFolder:ug,editFolder:mg,addToFolder:gg,numberOfChatroom:hg,roomName:fg,roomMember:pg,roomPrefTags:vg,roomPrefFolder:bg,roomTags:$g,massTexting:yg,inputMessage:kg,searchInConversation:xg,yesterday:wg,today:Cg,confirmToDeleteFolder:Mg,hide:Tg,unhide:Ig,edit:Rg,delete:"Supprimer",cancel:Sg,create:Fg,save:Ag,createTag:_g,confirmDeleteTag:zg,editTag:Dg,chooseColor:Og,duplicateTagName:Ng,block:Pg,unblock:Eg,textareaBlockedHint:Ug,mute:Lg,unmute:jg,chatroomDeleteConfirmationTitle:Bg,chatroomDeleteConfirmationMessage:Vg,unreadMessages:qg,deleteMessageConfirmation:Hg,deleteForEveryone:Kg,deleteForMe:Gg,confirmDeleteMessage:Wg,deleteForEveryoneWarning:Jg,deleteForMeWarning:Yg,messages:Xg,foundMessages:Zg,moveOut:Qg,kickOutConfirmTitle:eh,kickOutConfirmTip:th,kickOutGroup:sh,kickOutErrorTitle:oh,kickOutErrorDesc:nh,fileSizeLimitTitle:ah,fileSizeLimitMessage:rh,noRoomsAvailable:ih,unauthorizedTitle:lh,unauthorizedMessage:ch,sortByTime:dh,sortByName:uh,sortByUnread:mh,sortAscending:gh,sortDescending:hh,inviteMember:fh,chatRoomInfo:ph,inviteMemberToRoom:vh,noMembersToInvite:bh,memberAlreadyInRoomHint:$h,inviteMemberSuccess:yh,inviteMemberSuccessDescription:kh,createNewRoom:xh,inputRoomNamePlaceholder:wh,createRoom:Ch,createRoomSuccess:Mh,createRoomSuccessDescription:Th,createRoomFailed:Ih,createRoomFailedDescription:Rh,preview:Sh,sender:Fh,openMenu:Ah,settings:_h,manageMembers:zh,switchWorkspace:Dh,createTeam:Oh,logout:Nh,invite:Ph,leaveChatRoom:Eh,chatRoomContent:Uh,photosVideos:Lh,noPhotosVideos:jh,noFiles:Bh,thisMonth:Vh,lastMonth:qh,"leave-room-title":"Confirmer la sortie du salon","leave-room-message":"Êtes-vous sûr de vouloir quitter « { roomName } » ? Après avoir quitté le salon, vous ne pourrez plus voir les messages, sauf si quelqu’un vous invite à nouveau.","leave-room-confirm":"Confirmer la sortie","remove-member-title":"Confirmer la suppression du membre","remove-member-message":"Êtes-vous sûr de vouloir retirer « { memberName } » de ce salon ? Cette action est irréversible. Le membre retiré ne pourra plus consulter les messages de ce salon.","remove-member-confirm":"Confirmer la suppression"},Kh="閉じる",Gh="確認",Wh="フォルダ名",Jh="フォルダを作成",Yh="タグ",Xh="タグを入力",Zh="カスタムカラーを入力してください（例：#02B13F）",Qh="ダウンロード",ef="{0}がメッセージを取り消しました",tf="既読",sf="ピン留め",of="ピン留めを解除",nf="チャットが空です",af="メンバー",rf="作成日",lf="更新日",cf="グループを退出",df="テキスト",uf="画像",mf="ビデオ",gf="スティッカー",hf="メッセージ",ff="{0}が送信しました",pf="{0}が{1}を送信しました",vf="リンクを開くにはこちらをタップしてください。",bf="メッセージを入力...",$f="{0}が入力中...",yf="{0}がチャットに参加しました",kf="{0}がチャットを退出しました",xf="{0}が{1}を招待しました",wf="{0}が{1}をキックしました",Cf="あなたはメッセージを取り消しました",Mf="ファイルサイズ",Tf="ファイル",If="翻訳",Rf="検索",Sf="位置",Ff="現在の位置を送信",Af="位置情報のアクセス許可がありません。",_f="位置情報のリクエストがタイムアウトしました。",zf="アドレスが利用できません。",Df="オーディオメッセージ",Of="マイクのアクセス許可がありません。",Nf="フォルダから削除",Pf="フォルダを編集",Ef="フォルダに追加",Uf="{n}のチャットルーム",Lf="チャットルーム名",jf="メンバー",Bf="タグ",Vf="フォルダ",qf="属性",Hf="一斉送信",Kf="メッセージを入力",Gf="チャット内を検索",Wf="昨日",Jf="今日",Yf="フォルダを削除しますか？",Xf="非表示",Zf="非表示を解除",Qf="編集",ep="キャンセル",tp="作成",sp="保存",op="タグ名を入力してください",np="タグを削除してよろしいですか？",ap="タグを編集",rp="色を選択",ip="このタグは既にあります。他の名前にしてください。",lp="ブロック",cp="ブロック解除​",dp="このユーザーはブロックされました。",up="通知をミュート",mp="通知をオンにする",gp="チャットルームの削除を確認？",hp="チャットルームを削除すると、過去のチャット履歴を見ることができなくなります。相手の視点からのチャットルームは影響を受けず、引き続き新しいメッセージを送信することができます。",fp="以下は未読メッセージです",pp="このメッセージをどのように削除しますか？",vp="全員に対して削除",bp="自分だけに対して削除",$p="メッセージの削除を確認しますか？",yp="選択したメッセージはすべてのチャットルームから削除されます。この操作は元に戻せません。",kp="選択したメッセージはあなたのチャットルームからのみ削除されます。相手はチャットルームでメッセージを見ることができます。この操作は元に戻せません。",xp="メッセージ",wp="見つかったメッセージ {0} 件",Cp="削除する",Mp="{0} をグループから削除してもよろしいですか？",Tp="メンバーが削除されると、グループメッセージを閲覧できなくなります。",Ip="グループからキックアウト",Rp="メンバーを蹴るには失敗しました",Sp="現在、キックアウト操作は完了できません。ネットワーク接続を確認するか、後で再試行してください。",Fp="ファイルが大きすぎます",Ap="選択したファイルは、{0} の最大許容サイズを超えています。より小さいファイルを選択してください。",_p="チャットルームがありません",zp="認証失敗",Dp="セッションの有効期限が切れました。もう一度ログインしてください。",Op="時間",Np="名前",Pp="未読",Ep="昇順",Up="降順",Lp="メンバーを招待",jp="チャットルーム情報",Bp="メンバーをチャットルームに招待",Vp="招待できるメンバーがいません",qp="チャットルームに既にいるメンバーは選択できません",Hp="メンバーの招待に成功しました！",Kp="メンバーがチャットルームに正常に招待されました",Gp="新しいチャットルームを作成",Wp="チャットルーム名を入力...",Jp="チャットルームを作成",Yp="チャットルームの作成に成功しました！",Xp="チャットルームが正常に作成されました",Zp="作成に失敗しました",Qp="チャットルームを作成できませんでした。後でもう一度お試しください",ev="プレビュー",tv="送信者",sv="Tribo メニューを開く",ov="設定",nv="メンバー管理",av="ワークスペースを切り替え",rv="新しいチームを作成",iv="ログアウト",lv="招待",cv="チャットルームを退出",dv="チャットルームのコンテンツ",uv="写真・動画",mv="写真や動画がありません",gv="ファイルがありません",hv="今月",fv="先月",pv={close:Kh,confirm:Gh,folderName:Wh,createFolder:Jh,tag:Yh,inputTag:Xh,inputTagPlaceholder:Zh,download:Qh,someoneUnsentMessage:ef,read:tf,pin:sf,unpin:of,emptyChat:nf,members:af,createdAt:rf,updatedAt:lf,leaveGroup:cf,text:df,image:uf,video:mf,sticker:gf,message:hf,youSent:ff,someoneSent:pf,tapOpen:vf,TypeMessage:bf,isTyping:$f,someoneJoinedTheChat:yf,someoneLeftTheChat:kf,someoneInvited:xf,someoneKicked:wf,youUnsentMessage:Cf,fileSize:Mf,file:Tf,translation:If,search:Rf,location:Sf,sendCurrentLocation:Ff,noAccessLocationPermission:Af,"locationInfoUnavailable.":"位置情報を取得できません。",requestLocationTimeout:_f,addressUnavailable:zf,audio:Df,noAccessMicrophonePermission:Of,removeFromFolder:Nf,editFolder:Pf,addToFolder:Ef,numberOfChatroom:Uf,"no-chatroom":"チャットルームがありません",roomName:Lf,roomMember:jf,roomPrefTags:Bf,roomPrefFolder:Vf,roomTags:qf,massTexting:Hf,inputMessage:Kf,searchInConversation:Gf,yesterday:Wf,today:Jf,confirmToDeleteFolder:Yf,hide:Xf,unhide:Zf,edit:Qf,delete:"削除",cancel:ep,create:tp,save:sp,createTag:op,confirmDeleteTag:np,editTag:ap,chooseColor:rp,duplicateTagName:ip,block:lp,unblock:cp,textareaBlockedHint:dp,mute:up,unmute:mp,chatroomDeleteConfirmationTitle:gp,chatroomDeleteConfirmationMessage:hp,unreadMessages:fp,deleteMessageConfirmation:pp,deleteForEveryone:vp,deleteForMe:bp,confirmDeleteMessage:$p,deleteForEveryoneWarning:yp,deleteForMeWarning:kp,messages:xp,foundMessages:wp,moveOut:Cp,kickOutConfirmTitle:Mp,kickOutConfirmTip:Tp,kickOutGroup:Ip,kickOutErrorTitle:Rp,kickOutErrorDesc:Sp,fileSizeLimitTitle:Fp,fileSizeLimitMessage:Ap,noRoomsAvailable:_p,unauthorizedTitle:zp,unauthorizedMessage:Dp,sortByTime:Op,sortByName:Np,sortByUnread:Pp,sortAscending:Ep,sortDescending:Up,inviteMember:Lp,chatRoomInfo:jp,inviteMemberToRoom:Bp,noMembersToInvite:Vp,memberAlreadyInRoomHint:qp,inviteMemberSuccess:Hp,inviteMemberSuccessDescription:Kp,createNewRoom:Gp,inputRoomNamePlaceholder:Wp,createRoom:Jp,createRoomSuccess:Yp,createRoomSuccessDescription:Xp,createRoomFailed:Zp,createRoomFailedDescription:Qp,preview:ev,sender:tv,openMenu:sv,settings:ov,manageMembers:nv,switchWorkspace:av,createTeam:rv,logout:iv,invite:lv,leaveChatRoom:cv,chatRoomContent:dv,photosVideos:uv,noPhotosVideos:mv,noFiles:gv,thisMonth:hv,lastMonth:fv,"leave-room-title":"チャットルーム退出の確認","leave-room-message":"「{ roomName }」を退出しますか？退出後、このチャットルームのメッセージは再招待されない限り閲覧できません。","leave-room-confirm":"退出を確認","remove-member-title":"メンバー削除の確認","remove-member-message":"「{ memberName }」をこのチャットルームから削除しますか？この操作は元に戻せません。削除されたメンバーは、このチャットルームのメッセージを閲覧できなくなります。","remove-member-confirm":"削除を確認"},vv="닫기",bv="확인",$v="폴더 이름",yv="폴더 만들기",kv="태그",xv="태그 이름 입력",wv="#02B13F와 같은 사용자 지정 색상을 입력하세요",Cv="다운로드",Mv="{0}님이 메시지를 삭제했습니다",Tv="읽음",Iv="고정",Rv="고정 해제",Sv="멤버 없음",Fv="멤버",Av="생성 시간",_v="업데이트 시간",zv="그룹 나가기",Dv="텍스트",Ov="이미지",Nv="비디오",Pv="스티커",Ev="메시지",Uv="{0} 보냄",Lv="{0}님이 {1}을(를) 보냈습니다",jv="이 링크를 열려면 여기를 탭하세요.",Bv="메시지 입력...",Vv="{0}님이 입력 중...",qv="{0}님이 채팅에 참여했습니다",Hv="{0}님이 채팅방을 나갔습니다",Kv="{0}님이 {1}님을 초대했습니다",Gv="{0}님이 {1}님을 강제 퇴장시켰습니다",Wv="메시지를 삭제했습니다",Jv="파일 크기",Yv="파일",Xv="번역",Zv="검색",Qv="위치",e0="현재 위치 보내기",t0="위치 접근 권한 없음",s0="위치 요청 시간 초과",o0="주소를 사용할 수 없음",n0="음성 메시지",a0="마이크 접근 권한 없음",r0="폴더에서 제거",i0="폴더 편집",l0="폴더에 추가",c0="채팅방 {n}개",d0="방 이름",u0="멤버",m0="태그",g0="폴더",h0="속성",f0="대량 메시지",p0="메시지 내용을 입력하세요",v0="대화에서 검색",b0="어제",$0="오늘",y0="폴더를 삭제하시겠습니까?",k0="숨기기",x0="숨기기 취소",w0="편집",C0="취소",M0="만들기",T0="저장",I0="태그 이름 입력",R0="태그를 삭제하시겠습니까?",S0="태그 편집",F0="색상 선택",A0="이미 존재하는 태그입니다. 다른 이름을 입력하세요.",_0="차단",z0="차단 해제",D0="이 사용자는 차단되었습니다.",O0="알림 끄기",N0="알림 켜기",P0="채팅방을 삭제하시겠습니까?",E0="채팅방을 삭제하면 이전 채팅 기록을 볼 수 없게 됩니다. 상대방 시점에서의 채팅방은 영향을 받지 않으며 여전히 새 메시지를 보낼 수 있습니다.",U0="아래는 읽지 않은 메시지입니다",L0="이 메시지를 어떻게 삭제하시겠습니까?",j0="모두에게 삭제",B0="나만 삭제",V0="메시지를 삭제하시겠습니까?",q0="선택한 메시지가 모든 채팅방에서 삭제됩니다. 이 작업은 취소할 수 없습니다.",H0="선택한 메시지가 내 채팅방에서만 삭제됩니다. 상대방은 여전히 채팅방에서 메시지를 볼 수 있습니다. 이 작업은 취소할 수 없습니다.",K0="메시지",G0="찾은 메시지 {0}개",W0="내보내기",J0="{0}님을 그룹에서 내보내시겠습니까?",Y0="내보낸 후에는 해당 사용자가 그룹 메시지를 더 이상 볼 수 없습니다.",X0="그룹에서 쫓아냅니다",Z0="퇴장 멤버가 실패했습니다",Q0="킥아웃 작업은 현재 완료 될 수 없습니다. 네트워크 연결을 확인하거나 나중에 다시 시도하십시오.",eb="파일이 너무 큽니다",tb="선택한 파일이 {0}의 최대 허용 크기를 초과했습니다. 더 작은 파일을 선택하세요.",sb="채팅방이 없습니다",ob="인증 실패",nb="세션이 만료되었습니다. 다시 로그인하세요.",ab="시간",rb="이름",ib="읽지 않음",lb="오름차순",cb="내림차순",db="멤버 초대",ub="채팅방 정보",mb="멤버를 채팅방에 초대",gb="초대할 수 있는 멤버가 없습니다",hb="이미 채팅방에 있는 멤버는 선택할 수 없습니다",fb="멤버 초대 성공!",pb="멤버가 채팅방에 성공적으로 초대되었습니다",vb="새 채팅방 만들기",bb="채팅방 이름 입력...",$b="채팅방 만들기",yb="채팅방 생성 성공!",kb="채팅방이 성공적으로 생성되었습니다",xb="생성 실패",wb="채팅방을 생성할 수 없습니다. 나중에 다시 시도해주세요",Cb="미리보기",Mb="발신자",Tb="Tribo 메뉴 열기",Ib="설정",Rb="멤버 관리",Sb="작업 공간 전환",Fb="새 팀 만들기",Ab="로그아웃",_b="초대",zb="채팅방 나가기",Db="채팅방 콘텐츠",Ob="사진 및 동영상",Nb="사진이나 동영상이 없습니다",Pb="파일이 없습니다",Eb="이번 달",Ub="지난 달",Lb={close:vv,confirm:bv,folderName:$v,createFolder:yv,tag:kv,inputTag:xv,inputTagPlaceholder:wv,download:Cv,someoneUnsentMessage:Mv,read:Tv,pin:Iv,unpin:Rv,emptyChat:Sv,members:Fv,createdAt:Av,updatedAt:_v,leaveGroup:zv,text:Dv,image:Ov,video:Nv,sticker:Pv,message:Ev,youSent:Uv,someoneSent:Lv,tapOpen:jv,TypeMessage:Bv,isTyping:Vv,someoneJoinedTheChat:qv,someoneLeftTheChat:Hv,someoneInvited:Kv,someoneKicked:Gv,youUnsentMessage:Wv,fileSize:Jv,file:Yv,translation:Xv,search:Zv,location:Qv,sendCurrentLocation:e0,noAccessLocationPermission:t0,"locationInfoUnavailable.":"위치 정보를 사용할 수 없습니다",requestLocationTimeout:s0,addressUnavailable:o0,audio:n0,noAccessMicrophonePermission:a0,removeFromFolder:r0,editFolder:i0,addToFolder:l0,numberOfChatroom:c0,roomName:d0,roomMember:u0,roomPrefTags:m0,roomPrefFolder:g0,roomTags:h0,massTexting:f0,inputMessage:p0,searchInConversation:v0,yesterday:b0,today:$0,confirmToDeleteFolder:y0,hide:k0,unhide:x0,edit:w0,delete:"삭제",cancel:C0,create:M0,save:T0,createTag:I0,confirmDeleteTag:R0,editTag:S0,chooseColor:F0,duplicateTagName:A0,block:_0,unblock:z0,textareaBlockedHint:D0,mute:O0,unmute:N0,chatroomDeleteConfirmationTitle:P0,chatroomDeleteConfirmationMessage:E0,unreadMessages:U0,deleteMessageConfirmation:L0,deleteForEveryone:j0,deleteForMe:B0,confirmDeleteMessage:V0,deleteForEveryoneWarning:q0,deleteForMeWarning:H0,messages:K0,foundMessages:G0,moveOut:W0,kickOutConfirmTitle:J0,kickOutConfirmTip:Y0,kickOutGroup:X0,kickOutErrorTitle:Z0,kickOutErrorDesc:Q0,fileSizeLimitTitle:eb,fileSizeLimitMessage:tb,noRoomsAvailable:sb,unauthorizedTitle:ob,unauthorizedMessage:nb,sortByTime:ab,sortByName:rb,sortByUnread:ib,sortAscending:lb,sortDescending:cb,inviteMember:db,chatRoomInfo:ub,inviteMemberToRoom:mb,noMembersToInvite:gb,memberAlreadyInRoomHint:hb,inviteMemberSuccess:fb,inviteMemberSuccessDescription:pb,createNewRoom:vb,inputRoomNamePlaceholder:bb,createRoom:$b,createRoomSuccess:yb,createRoomSuccessDescription:kb,createRoomFailed:xb,createRoomFailedDescription:wb,preview:Cb,sender:Mb,openMenu:Tb,settings:Ib,manageMembers:Rb,switchWorkspace:Sb,createTeam:Fb,logout:Ab,invite:_b,leaveChatRoom:zb,chatRoomContent:Db,photosVideos:Ob,noPhotosVideos:Nb,noFiles:Pb,thisMonth:Eb,lastMonth:Ub,"leave-room-title":"채팅방 나가기 확인","leave-room-message":"정말로 '{ roomName }' 채팅방에서 나가시겠습니까? 나간 후에는 다시 초대받지 않는 한 이 채팅방의 메시지를 볼 수 없습니다.","leave-room-confirm":"나가기 확인","remove-member-title":"멤버 제거 확인","remove-member-message":"정말로 '{ memberName }' 님을 이 채팅방에서 제거하시겠습니까? 이 작업은 되돌릴 수 없습니다. 제거된 멤버는 이 채팅방의 메시지를 더 이상 볼 수 없습니다.","remove-member-confirm":"제거 확인"},jb="Fechar",Bb="Confirmar",Vb="Nome da pasta",qb="Criar pasta",Hb="Etiqueta",Kb="Inserir nome da etiqueta",Gb="Por favor, insira uma cor personalizada como #02B13F",Wb="Descarregar",Jb="{0} retirou uma mensagem",Yb="Lido",Xb="Fixar",Zb="Desafixar",Qb="Sem membros",e1="Membros",t1="Criado em",s1="Atualizado em",o1="Sair do grupo",n1="Texto",a1="Imagem",r1="Vídeo",i1="Autocolante",l1="Mensagem",c1="{0} enviado",d1="{0} enviou-lhe {1}",u1="Toque aqui para abrir este link.",m1="Escreva uma mensagem...",g1="{0} está a escrever...",h1="{0} entrou no chat",f1="{0} saiu do chat",p1="{0} convidou {1}",v1="{0} expulsou {1}",b1="Retirou uma mensagem",$1="Tamanho do ficheiro",y1="Ficheiro",k1="Tradução",x1="Pesquisar",w1="Localização",C1="Enviar localização atual",M1="Sem permissão de acesso à localização",T1="Tempo esgotado para pedido de localização",I1="Endereço indisponível",R1="Mensagem de voz",S1="Sem permissão de acesso ao microfone",F1="Remover da pasta",A1="Editar pasta",_1="Adicionar à pasta",z1="{n} salas de chat",D1="Nome da sala",O1="Membro",N1="Etiquetas",P1="Pasta",E1="Atributos",U1="Mensagem em massa",L1="Por favor, insira o conteúdo da mensagem",j1="Pesquisar na conversa",B1="Ontem",V1="Hoje",q1="Eliminar pasta?",H1="Ocultar",K1="Mostrar",G1="Editar",W1="Cancelar",J1="Criar",Y1="Guardar",X1="Inserir nome da etiqueta",Z1="Confirmar eliminação da etiqueta?",Q1="Editar etiqueta",e$="Escolher cor",t$="Tag existente. Use outro nome.",s$="Bloquear",o$="Desbloquear",n$="Este utilizador foi bloqueado.",a$="Silenciar notificações",r$="Ativar notificações",i$="Confirmar eliminação da sala de chat?",l$="Depois de apagar a sala de chat, não poderá mais ver o histórico de chat anterior. A sala de chat da perspectiva da outra pessoa não será afetada e ainda poderão enviar-lhe novas mensagens.",c$="Abaixo estão mensagens não lidas",d$="Como deseja apagar esta mensagem?",u$="Apagar para todos",m$="Apagar apenas para mim",g$="Confirmar a eliminação da mensagem?",h$="A mensagem que selecionou será apagada de todas as salas de chat. Esta ação não pode ser desfeita.",f$="A mensagem que selecionou será apagada apenas da sua sala de chat. A outra pessoa ainda poderá ver a mensagem na sala de chat. Esta ação não pode ser desfeita.",p$="Mensagem",v$="Encontrado {0} mensagens",b$="Remover",$$="Tem certeza de que deseja remover {0} do grupo?",y$="Após a remoção, o membro não poderá mais ver as mensagens do grupo.",k$="Chutar do grupo",x$="Os membros do chutes falharam",w$="A operação de chute não pode ser concluída no momento. Confirme a conexão de rede ou tente novamente mais tarde.",C$="Ficheiro demasiado grande",M$="O ficheiro selecionado excede o tamanho máximo permitido de {0}. Por favor, escolha um ficheiro mais pequeno.",T$="Não há salas de chat disponíveis",I$="Falha na autenticação",R$="A sua sessão expirou. Por favor, inicie sessão novamente.",S$="Tempo",F$="Nome",A$="Não lido",_$="Ascendente",z$="Descendente",D$="Convidar membro",O$="Informações da sala",N$="Convidar membros para a sala de chat",P$="Não há membros disponíveis para convidar",E$="Os membros que já estão na sala de chat não podem ser selecionados",U$="Membros convidados com sucesso!",L$="Os membros foram convidados com sucesso para a sala de chat",j$="Criar nova sala de chat",B$="Digite o nome da sala...",V$="Criar sala",q$="Sala de chat criada com sucesso!",H$="A sala de chat foi criada com sucesso",K$="Falha ao criar",G$="Não foi possível criar a sala de chat, por favor tente novamente mais tarde",W$="Pré-visualização",J$="Remetente",Y$="Abrir menu Tribo",X$="Configurações",Z$="Gerir membros",Q$="Mudar espaço de trabalho",ey="Criar nova equipa",ty="Terminar sessão",sy="Convidar",oy="Sair da sala de chat",ny="Conteúdo da sala",ay="Fotos e vídeos",ry="Sem fotos ou vídeos",iy="Sem ficheiros",ly="Este mês",cy="Mês passado",dy={close:jb,confirm:Bb,folderName:Vb,createFolder:qb,tag:Hb,inputTag:Kb,inputTagPlaceholder:Gb,download:Wb,someoneUnsentMessage:Jb,read:Yb,pin:Xb,unpin:Zb,emptyChat:Qb,members:e1,createdAt:t1,updatedAt:s1,leaveGroup:o1,text:n1,image:a1,video:r1,sticker:i1,message:l1,youSent:c1,someoneSent:d1,tapOpen:u1,TypeMessage:m1,isTyping:g1,someoneJoinedTheChat:h1,someoneLeftTheChat:f1,someoneInvited:p1,someoneKicked:v1,youUnsentMessage:b1,fileSize:$1,file:y1,translation:k1,search:x1,location:w1,sendCurrentLocation:C1,noAccessLocationPermission:M1,"locationInfoUnavailable.":"Informação de localização indisponível",requestLocationTimeout:T1,addressUnavailable:I1,audio:R1,noAccessMicrophonePermission:S1,removeFromFolder:F1,editFolder:A1,addToFolder:_1,numberOfChatroom:z1,roomName:D1,roomMember:O1,roomPrefTags:N1,roomPrefFolder:P1,roomTags:E1,massTexting:U1,inputMessage:L1,searchInConversation:j1,yesterday:B1,today:V1,confirmToDeleteFolder:q1,hide:H1,unhide:K1,edit:G1,delete:"Eliminar",cancel:W1,create:J1,save:Y1,createTag:X1,confirmDeleteTag:Z1,editTag:Q1,chooseColor:e$,duplicateTagName:t$,block:s$,unblock:o$,textareaBlockedHint:n$,mute:a$,unmute:r$,chatroomDeleteConfirmationTitle:i$,chatroomDeleteConfirmationMessage:l$,unreadMessages:c$,deleteMessageConfirmation:d$,deleteForEveryone:u$,deleteForMe:m$,confirmDeleteMessage:g$,deleteForEveryoneWarning:h$,deleteForMeWarning:f$,messages:p$,foundMessages:v$,moveOut:b$,kickOutConfirmTitle:$$,kickOutConfirmTip:y$,kickOutGroup:k$,kickOutErrorTitle:x$,kickOutErrorDesc:w$,fileSizeLimitTitle:C$,fileSizeLimitMessage:M$,noRoomsAvailable:T$,unauthorizedTitle:I$,unauthorizedMessage:R$,sortByTime:S$,sortByName:F$,sortByUnread:A$,sortAscending:_$,sortDescending:z$,inviteMember:D$,chatRoomInfo:O$,inviteMemberToRoom:N$,noMembersToInvite:P$,memberAlreadyInRoomHint:E$,inviteMemberSuccess:U$,inviteMemberSuccessDescription:L$,createNewRoom:j$,inputRoomNamePlaceholder:B$,createRoom:V$,createRoomSuccess:q$,createRoomSuccessDescription:H$,createRoomFailed:K$,createRoomFailedDescription:G$,preview:W$,sender:J$,openMenu:Y$,settings:X$,manageMembers:Z$,switchWorkspace:Q$,createTeam:ey,logout:ty,invite:sy,leaveChatRoom:oy,chatRoomContent:ny,photosVideos:ay,noPhotosVideos:ry,noFiles:iy,thisMonth:ly,lastMonth:cy,"leave-room-title":"Confirmar saída da sala","leave-room-message":"Tem a certeza de que deseja sair de “{ roomName }”? Depois de sair, já não poderá ver as mensagens desta sala, a menos que seja convidado novamente.","leave-room-confirm":"Confirmar saída","remove-member-title":"Confirmar remoção do membro","remove-member-message":"Tem a certeza de que deseja remover “{ memberName }” desta sala de chat? Esta ação não pode ser revertida. O membro removido deixará de poder ver as mensagens desta sala.","remove-member-confirm":"Confirmar remoção"},uy="Închide",my="Confirmă",gy="Nume dosar",hy="Creare dosar",fy="Etichetă",py="Introduceți numele etichetei",vy="Vă rugăm să introduceți o culoare personalizată ca #02B13F",by="Descarcă",$y="{0} a retras un mesaj",yy="Citit",ky="Fixează",xy="Anulează fixarea",wy="Nu există membri",Cy="Membri",My="Creat la",Ty="Actualizat la",Iy="Părăsește grupul",Ry="Text",Sy="Imagine",Fy="Video",Ay="Autocolant",_y="Mesaj",zy="{0} trimis",Dy="{0} v-a trimis {1}",Oy="Atingeți aici pentru a deschide acest link.",Ny="Scrieți un mesaj...",Py="{0} scrie...",Ey="{0} s-a alăturat conversației",Uy="{0} a părăsit conversația",Ly="{0} l-a invitat pe {1}",jy="{0} l-a eliminat pe {1}",By="Ați retras un mesaj",Vy="Dimensiune fișier",qy="Fișier",Hy="Traducere",Ky="Caută",Gy="Locație",Wy="Trimite locația curentă",Jy="Fără permisiune de acces la locație",Yy="Timpul pentru solicitarea locației a expirat",Xy="Adresa nu este disponibilă",Zy="Mesaj vocal",Qy="Fără permisiune de acces la microfon",ek="Elimină din dosar",tk="Editează dosar",sk="Adaugă la dosar",ok="{n} camere de chat",nk="Nume cameră",ak="Membru",rk="Etichete",ik="Dosar",lk="Atribute",ck="Mesaj în masă",dk="Vă rugăm să introduceți conținutul mesajului",uk="Caută în conversație",mk="Ieri",gk="Astăzi",hk="Ștergeți dosarul?",fk="Ascunde",pk="Afișează",vk="Editează",bk="Anulează",$k="Crează",yk="Salvează",kk="Introduceți numele etichetei",xk="Confirmați ștergerea etichetei?",wk="Editează eticheta",Ck="Alegeți culoarea",Mk="Eticheta există deja. Folosiți alt nume.",Tk="Blochează",Ik="Deblochează",Rk="Acest utilizator a fost blocat.",Sk="Dezactivează notificările",Fk="Activează notificările",Ak="Confirmați ștergerea camerei de chat?",_k="După ștergerea camerei de chat, nu veți mai putea vizualiza istoricul conversațiilor anterioare. Camera de chat din perspectiva celeilalte persoane nu va fi afectată și aceasta va putea în continuare să vă trimită mesaje noi.",zk="Mai jos sunt mesajele necitite",Dk="Cum doriți să ștergeți acest mesaj?",Ok="Șterge pentru toată lumea",Nk="Șterge doar pentru mine",Pk="Confirmați ștergerea mesajului?",Ek="Mesajul selectat va fi șters din toate camerele de chat. Această acțiune nu poate fi anulată.",Uk="Mesajul selectat va fi șters doar din camera dvs. de chat. Cealaltă persoană va putea în continuare să vadă mesajul în camera de chat. Această acțiune nu poate fi anulată.",Lk="Mesaj",jk="A fost găsit {0} mesaj",Bk="Elimină",Vk="Sigur doriți să îl eliminați pe {0} din grup?",qk="Odată eliminat, membrul nu va mai putea vedea mesajele din grup.",Hk="Da afară din grup",Kk="Introducerea membrilor nu a reușit",Gk="Operația de declanșare nu poate fi finalizată în prezent. Vă rugăm să confirmați conexiunea de rețea sau să încercați din nou mai târziu.",Wk="Fișier prea mare",Jk="Fișierul selectat depășește dimensiunea maximă permisă de {0}. Vă rugăm să alegeți un fișier mai mic.",Yk="Nu sunt disponibile camere de chat",Xk="Autentificare eșuată",Zk="Sesiunea dvs. a expirat. Vă rugăm să vă autentificați din nou.",Qk="Timp",ex="Nume",tx="Necitit",sx="Crescător",ox="Descrescător",nx="Invită membru",ax="Informații cameră",rx="Invită membri în camera de chat",ix="Nu există membri disponibili pentru invitație",lx="Membrii care sunt deja în camera de chat nu pot fi selectați",cx="Membri invitați cu succes!",dx="Membrii au fost invitați cu succes în camera de chat",ux="Creează cameră de chat nouă",mx="Introduceți numele camerei...",gx="Creează cameră",hx="Camera de chat a fost creată cu succes!",fx="Camera de chat a fost creată cu succes",px="Crearea a eșuat",vx="Nu s-a putut crea camera de chat, vă rugăm să încercați din nou mai târziu",bx="Previzualizare",$x="Expeditor",yx="Deschide meniul Tribo",kx="Setări",xx="Gestionează membri",wx="Schimbă spațiul de lucru",Cx="Creează echipă nouă",Mx="Deconectare",Tx="Invită",Ix="Părăsește camera de chat",Rx="Conținut cameră",Sx="Fotografii și videoclipuri",Fx="Fără fotografii sau videoclipuri",Ax="Fără fișiere",_x="Luna aceasta",zx="Luna trecută",Dx={close:uy,confirm:my,folderName:gy,createFolder:hy,tag:fy,inputTag:py,inputTagPlaceholder:vy,download:by,someoneUnsentMessage:$y,read:yy,pin:ky,unpin:xy,emptyChat:wy,members:Cy,createdAt:My,updatedAt:Ty,leaveGroup:Iy,text:Ry,image:Sy,video:Fy,sticker:Ay,message:_y,youSent:zy,someoneSent:Dy,tapOpen:Oy,TypeMessage:Ny,isTyping:Py,someoneJoinedTheChat:Ey,someoneLeftTheChat:Uy,someoneInvited:Ly,someoneKicked:jy,youUnsentMessage:By,fileSize:Vy,file:qy,translation:Hy,search:Ky,location:Gy,sendCurrentLocation:Wy,noAccessLocationPermission:Jy,"locationInfoUnavailable.":"Informațiile despre locație nu sunt disponibile",requestLocationTimeout:Yy,addressUnavailable:Xy,audio:Zy,noAccessMicrophonePermission:Qy,removeFromFolder:ek,editFolder:tk,addToFolder:sk,numberOfChatroom:ok,roomName:nk,roomMember:ak,roomPrefTags:rk,roomPrefFolder:ik,roomTags:lk,massTexting:ck,inputMessage:dk,searchInConversation:uk,yesterday:mk,today:gk,confirmToDeleteFolder:hk,hide:fk,unhide:pk,edit:vk,delete:"Șterge",cancel:bk,create:$k,save:yk,createTag:kk,confirmDeleteTag:xk,editTag:wk,chooseColor:Ck,duplicateTagName:Mk,block:Tk,unblock:Ik,textareaBlockedHint:Rk,mute:Sk,unmute:Fk,chatroomDeleteConfirmationTitle:Ak,chatroomDeleteConfirmationMessage:_k,unreadMessages:zk,deleteMessageConfirmation:Dk,deleteForEveryone:Ok,deleteForMe:Nk,confirmDeleteMessage:Pk,deleteForEveryoneWarning:Ek,deleteForMeWarning:Uk,messages:Lk,foundMessages:jk,moveOut:Bk,kickOutConfirmTitle:Vk,kickOutConfirmTip:qk,kickOutGroup:Hk,kickOutErrorTitle:Kk,kickOutErrorDesc:Gk,fileSizeLimitTitle:Wk,fileSizeLimitMessage:Jk,noRoomsAvailable:Yk,unauthorizedTitle:Xk,unauthorizedMessage:Zk,sortByTime:Qk,sortByName:ex,sortByUnread:tx,sortAscending:sx,sortDescending:ox,inviteMember:nx,chatRoomInfo:ax,inviteMemberToRoom:rx,noMembersToInvite:ix,memberAlreadyInRoomHint:lx,inviteMemberSuccess:cx,inviteMemberSuccessDescription:dx,createNewRoom:ux,inputRoomNamePlaceholder:mx,createRoom:gx,createRoomSuccess:hx,createRoomSuccessDescription:fx,createRoomFailed:px,createRoomFailedDescription:vx,preview:bx,sender:$x,openMenu:yx,settings:kx,manageMembers:xx,switchWorkspace:wx,createTeam:Cx,logout:Mx,invite:Tx,leaveChatRoom:Ix,chatRoomContent:Rx,photosVideos:Sx,noPhotosVideos:Fx,noFiles:Ax,thisMonth:_x,lastMonth:zx,"leave-room-title":"Confirmare ieșire din cameră","leave-room-message":"Sunteți sigur că doriți să părăsiți „{ roomName }”? După ce ieșiți, nu veți mai putea vedea mesajele acestei camere, decât dacă cineva vă invită din nou.","leave-room-confirm":"Confirmă ieșirea","remove-member-title":"Confirmare eliminare membru","remove-member-message":"Sunteți sigur că doriți să eliminați „{ memberName }” din acest chat? Această acțiune nu poate fi anulată. Membrul eliminat nu va mai putea vedea mesajele din acest chat.","remove-member-confirm":"Confirmă eliminarea"},Ox="ปิด",Nx="ยืนยัน",Px="ชื่อโฟลเดอร์",Ex="สร้างโฟลเดอร์",Ux="แท็ก",Lx="ป้อนชื่อแท็ก",jx="กรุณาป้อนสีที่กำหนดเอง เช่น #02B13F",Bx="ดาวน์โหลด",Vx="{0} ได้ถอนข้อความ",qx="อ่านแล้ว",Hx="ปักหมุด",Kx="ถอนหมุด",Gx="ไม่มีสมาชิก",Wx="สมาชิก",Jx="สร้างเมื่อ",Yx="อัปเดตเมื่อ",Xx="ออกจากกลุ่ม",Zx="ข้อความ",Qx="รูปภาพ",e2="วิดีโอ",t2="สติกเกอร์",s2="ข้อความ",o2="ส่ง{0}แล้ว",n2="{0}ได้ส่ง{1}ถึงคุณ",a2="แตะที่นี่เพื่อเปิดลิงก์นี้",r2="พิมพ์ข้อความ...",i2="{0} กำลังพิมพ์...",l2="{0}เข้าร่วมการแชท",c2="{0}ออกจากการแชท",d2="{0}เชิญ{1}",u2="{0}เตะ{1}ออก",m2="คุณได้ถอนข้อความ",g2="ขนาดไฟล์",h2="ไฟล์",f2="การแปล",p2="ค้นหา",v2="ตำแหน่ง",b2="ส่งตำแหน่งปัจจุบัน",$2="ไม่มีสิทธิ์เข้าถึงตำแหน่ง",y2="การขอตำแหน่งหมดเวลา",k2="ที่อยู่ไม่พร้อมใช้งาน",x2="ข้อความเสียง",w2="ไม่มีสิทธิ์เข้าถึงไมโครโฟน",C2="นำออกจากโฟลเดอร์",M2="แก้ไขโฟลเดอร์",T2="เพิ่มลงในโฟลเดอร์",I2="ห้องแชท {n} ห้อง",R2="ชื่อห้อง",S2="สมาชิก",F2="แท็ก",A2="โฟลเดอร์",_2="คุณลักษณะ",z2="ส่งข้อความหมู่",D2="กรุณาป้อนเนื้อหาข้อความ",O2="ค้นหาในการสนทนา",N2="เมื่อวาน",P2="วันนี้",E2="ลบโฟลเดอร์?",U2="ซ่อน",L2="ยกเลิกการซ่อน",j2="แก้ไข",B2="ยกเลิก",V2="สร้าง",q2="บันทึก",H2="ป้อนชื่อแท็ก",K2="ยืนยันการลบแท็ก?",G2="แก้ไขแท็ก",W2="เลือกสี",J2="แท็กนี้มีอยู่แล้ว ใช้ชื่ออื่น",Y2="บล็อก",X2="ยกเลิกการบล็อก",Z2="ผู้ใช้นี้ถูกบล็อกแล้ว",Q2="ปิดการแจ้งเตือน",ew="เปิดการแจ้งเตือน",tw="ยืนยันการลบห้องแชท?",sw="หลังจากลบห้องแชทแล้ว คุณจะไม่สามารถดูประวัติการแชทก่อนหน้านี้ได้ ห้องแชทจากมุมมองของอีกฝ่ายจะไม่ได้รับผลกระทบและพวกเขายังคงสามารถส่งข้อความใหม่ถึงคุณได้",ow="ด้านล่างนี้คือข้อความที่ยังไม่ได้อ่าน",nw="คุณต้องการลบข้อความนี้อย่างไร?",aw="ลบสำหรับทุกคน",rw="ลบสำหรับฉันเท่านั้น",iw="ยืนยันการลบข้อความ?",lw="ข้อความที่คุณเลือกจะถูกลบออกจากห้องแชททั้งหมด การกระทำนี้ไม่สามารถเรียกคืนได้",cw="ข้อความที่คุณเลือกจะถูกลบออกจากห้องแชทของคุณ อีกฝ่ายจะยังคงสามารถเห็นข้อความในห้องแชทได้ การกระทำนี้ไม่สามารถเรียกคืนได้",dw="ข้อความ",uw="พบ {0} ข้อความ",mw="ลบออก",gw="คุณแน่ใจหรือไม่ว่าต้องการลบ {0} ออกจากกลุ่ม",hw="เมื่อถูกลบออก สมาชิกจะไม่สามารถดูข้อความในกลุ่มได้อีก",fw="เตะออกจากกลุ่ม",pw="การเตะสมาชิกล้มเหลว",vw="การดำเนินการเตะออกไม่สามารถเสร็จสิ้นได้ในปัจจุบัน โปรดยืนยันการเชื่อมต่อเครือข่ายหรือลองอีกครั้งในภายหลัง",bw="ไฟล์ใหญ่เกินไป",$w="ไฟล์ที่เลือกมีขนาดเกินขีดจำกัดสูงสุดที่อนุญาต {0} กรุณาเลือกไฟล์ที่เล็กกว่า",yw="ไม่มีห้องแชทที่พร้อมใช้งาน",kw="การยืนยันตัวตนล้มเหลว",xw="เซสชันของคุณหมดอายุแล้ว กรุณาเข้าสู่ระบบอีกครั้ง",ww="เวลา",Cw="ชื่อ",Mw="ยังไม่ได้อ่าน",Tw="จากน้อยไปมาก",Iw="จากมากไปน้อย",Rw="เชิญสมาชิก",Sw="ข้อมูลห้องแชท",Fw="เชิญสมาชิกเข้าร่วมห้องแชท",Aw="ไม่มีสมาชิกที่สามารถเชิญได้",_w="สมาชิกที่อยู่ในห้องแชทแล้วจะไม่สามารถเลือกได้",zw="เชิญสมาชิกสำเร็จ!",Dw="เชิญสมาชิกเข้าร่วมห้องแชทสำเร็จแล้ว",Ow="สร้างห้องแชทใหม่",Nw="ใส่ชื่อห้องแชท...",Pw="สร้างห้องแชท",Ew="สร้างห้องแชทสำเร็จ!",Uw="สร้างห้องแชทสำเร็จแล้ว",Lw="สร้างล้มเหลว",jw="ไม่สามารถสร้างห้องแชทได้ กรุณาลองใหม่อีกครั้งในภายหลัง",Bw="ตัวอย่าง",Vw="ผู้ส่ง",qw="เปิดเมนู Tribo",Hw="การตั้งค่า",Kw="จัดการสมาชิก",Gw="เปลี่ยนพื้นที่ทำงาน",Ww="สร้างทีมใหม่",Jw="ออกจากระบบ",Yw="เชิญ",Xw="ออกจากห้องแชท",Zw="เนื้อหาห้องแชท",Qw="รูปภาพและวิดีโอ",eC="ไม่มีรูปภาพหรือวิดีโอ",tC="ไม่มีไฟล์",sC="เดือนนี้",oC="เดือนที่แล้ว",nC={close:Ox,confirm:Nx,folderName:Px,createFolder:Ex,tag:Ux,inputTag:Lx,inputTagPlaceholder:jx,download:Bx,someoneUnsentMessage:Vx,read:qx,pin:Hx,unpin:Kx,emptyChat:Gx,members:Wx,createdAt:Jx,updatedAt:Yx,leaveGroup:Xx,text:Zx,image:Qx,video:e2,sticker:t2,message:s2,youSent:o2,someoneSent:n2,tapOpen:a2,TypeMessage:r2,isTyping:i2,someoneJoinedTheChat:l2,someoneLeftTheChat:c2,someoneInvited:d2,someoneKicked:u2,youUnsentMessage:m2,fileSize:g2,file:h2,translation:f2,search:p2,location:v2,sendCurrentLocation:b2,noAccessLocationPermission:$2,"locationInfoUnavailable.":"ข้อมูลตำแหน่งไม่พร้อมใช้งาน",requestLocationTimeout:y2,addressUnavailable:k2,audio:x2,noAccessMicrophonePermission:w2,removeFromFolder:C2,editFolder:M2,addToFolder:T2,numberOfChatroom:I2,roomName:R2,roomMember:S2,roomPrefTags:F2,roomPrefFolder:A2,roomTags:_2,massTexting:z2,inputMessage:D2,searchInConversation:O2,yesterday:N2,today:P2,confirmToDeleteFolder:E2,hide:U2,unhide:L2,edit:j2,delete:"ลบ",cancel:B2,create:V2,save:q2,createTag:H2,confirmDeleteTag:K2,editTag:G2,chooseColor:W2,duplicateTagName:J2,block:Y2,unblock:X2,textareaBlockedHint:Z2,mute:Q2,unmute:ew,chatroomDeleteConfirmationTitle:tw,chatroomDeleteConfirmationMessage:sw,unreadMessages:ow,deleteMessageConfirmation:nw,deleteForEveryone:aw,deleteForMe:rw,confirmDeleteMessage:iw,deleteForEveryoneWarning:lw,deleteForMeWarning:cw,messages:dw,foundMessages:uw,moveOut:mw,kickOutConfirmTitle:gw,kickOutConfirmTip:hw,kickOutGroup:fw,kickOutErrorTitle:pw,kickOutErrorDesc:vw,fileSizeLimitTitle:bw,fileSizeLimitMessage:$w,noRoomsAvailable:yw,unauthorizedTitle:kw,unauthorizedMessage:xw,sortByTime:ww,sortByName:Cw,sortByUnread:Mw,sortAscending:Tw,sortDescending:Iw,inviteMember:Rw,chatRoomInfo:Sw,inviteMemberToRoom:Fw,noMembersToInvite:Aw,memberAlreadyInRoomHint:_w,inviteMemberSuccess:zw,inviteMemberSuccessDescription:Dw,createNewRoom:Ow,inputRoomNamePlaceholder:Nw,createRoom:Pw,createRoomSuccess:Ew,createRoomSuccessDescription:Uw,createRoomFailed:Lw,createRoomFailedDescription:jw,preview:Bw,sender:Vw,openMenu:qw,settings:Hw,manageMembers:Kw,switchWorkspace:Gw,createTeam:Ww,logout:Jw,invite:Yw,leaveChatRoom:Xw,chatRoomContent:Zw,photosVideos:Qw,noPhotosVideos:eC,noFiles:tC,thisMonth:sC,lastMonth:oC,"leave-room-title":"ยืนยันการออกจากห้องแชท","leave-room-message":"คุณแน่ใจหรือไม่ว่าต้องการออกจาก “{ roomName }”? หลังจากออกแล้ว คุณจะไม่สามารถดูข้อความในห้องแชทนี้ได้ เว้นแต่จะมีคนเชิญคุณกลับเข้ามาอีกครั้ง","leave-room-confirm":"ยืนยันการออก","remove-member-title":"ยืนยันการลบสมาชิก","remove-member-message":"คุณแน่ใจหรือไม่ว่าต้องการลบ “{ memberName }” ออกจากห้องแชทนี้? การดำเนินการนี้ไม่สามารถย้อนกลับได้ สมาชิกที่ถูกลบจะไม่สามารถดูข้อความในห้องแชทนี้ได้อีก","remove-member-confirm":"ยืนยันการลบ"},aC="Đóng",rC="Xác nhận",iC="Tên thư mục",lC="Tạo thư mục",cC="Thẻ",dC="Nhập tên thẻ",uC="Vui lòng nhập màu tùy chỉnh như #02B13F",mC="Tải xuống",gC="{0} đã thu hồi một tin nhắn",hC="Đã đọc",fC="Ghim",pC="Bỏ ghim",vC="Không có thành viên",bC="Thành viên",$C="Được tạo lúc",yC="Được cập nhật lúc",kC="Rời nhóm",xC="Văn bản",wC="Hình ảnh",CC="Video",MC="Nhãn dán",TC="Tin nhắn",IC="{0} đã gửi",RC="{0} đã gửi cho bạn {1}",SC="Nhấn vào đây để mở liên kết này.",FC="Nhập tin nhắn...",AC="{0} đang nhập...",_C="{0} đã tham gia cuộc trò chuyện",zC="{0} đã rời cuộc trò chuyện",DC="{0} đã mời {1}",OC="{0} đã đuổi {1}",NC="Bạn đã thu hồi một tin nhắn",PC="Kích thước tệp",EC="Tệp",UC="Dịch",LC="Tìm kiếm",jC="Vị trí",BC="Gửi vị trí hiện tại",VC="Không có quyền truy cập vị trí",qC="Yêu cầu vị trí đã hết thời gian",HC="Địa chỉ không khả dụng",KC="Tin nhắn thoại",GC="Không có quyền truy cập micrô",WC="Xóa khỏi thư mục",JC="Chỉnh sửa thư mục",YC="Thêm vào thư mục",XC="{n} phòng trò chuyện",ZC="Tên phòng",QC="Thành viên",eM="Thẻ",tM="Thư mục",sM="Thuộc tính",oM="Nhắn tin hàng loạt",nM="Vui lòng nhập nội dung tin nhắn",aM="Tìm kiếm trong cuộc trò chuyện",rM="Hôm qua",iM="Hôm nay",lM="Xóa thư mục?",cM="Ẩn",dM="Hiện",uM="Chỉnh sửa",mM="Hủy",gM="Tạo",hM="Lưu",fM="Nhập tên thẻ",pM="Xác nhận xóa thẻ?",vM="Chỉnh sửa thẻ",bM="Chọn màu",$M="Thẻ đã tồn tại. Dùng tên khác.",yM="Chặn",kM="Bỏ chặn",xM="Người dùng này đã bị chặn.",wM="Tắt thông báo",CM="Bật thông báo",MM="Xác nhận xóa phòng trò chuyện?",TM="Sau khi xóa phòng trò chuyện, bạn sẽ không thể xem lịch sử trò chuyện trước đó. Phòng trò chuyện từ góc nhìn của người kia sẽ không bị ảnh hưởng và họ vẫn có thể gửi tin nhắn mới cho bạn.",IM="Dưới đây là tin nhắn chưa đọc",RM="Bạn muốn xóa tin nhắn này như thế nào?",SM="Xóa cho tất cả mọi người",FM="Chỉ xóa cho tôi",AM="Xác nhận xóa tin nhắn?",_M="Tin nhắn bạn đã chọn sẽ bị xóa khỏi tất cả các phòng trò chuyện. Hành động này không thể hoàn tác.",zM="Tin nhắn bạn đã chọn sẽ chỉ bị xóa khỏi phòng trò chuyện của bạn. Người kia vẫn có thể thấy tin nhắn trong phòng trò chuyện. Hành động này không thể hoàn tác.",DM="Tin nhắn",OM="Tìm thấy {0} tin nhắn",NM="Bạn có chắc muốn xóa {0} khỏi nhóm không?",PM="Sau khi bị xóa, thành viên sẽ không thể xem tin nhắn nhóm nữa.",EM="Xóa",UM="Đá ra khỏi nhóm",LM="Khởi động các thành viên không thành công",jM="Các hoạt động kick-out không thể được hoàn thành hiện tại. Vui lòng xác nhận kết nối mạng hoặc thử lại sau.",BM="Tệp quá lớn",VM="Tệp bạn chọn vượt quá kích thước tối đa cho phép {0}. Vui lòng chọn tệp nhỏ hơn.",qM="Không có phòng chat nào",HM="Xác thực thất bại",KM="Phiên của bạn đã hết hạn. Vui lòng đăng nhập lại.",GM="Thời gian",WM="Tên",JM="Chưa đọc",YM="Tăng dần",XM="Giảm dần",ZM="Mời thành viên",QM="Thông tin phòng chat",e3="Mời thành viên tham gia phòng chat",t3="Không có thành viên nào có thể mời",s3="Các thành viên đã có trong phòng chat sẽ không thể được chọn",o3="Mời thành viên thành công!",n3="Thành viên đã được mời tham gia phòng chat thành công",a3="Tạo phòng chat mới",r3="Nhập tên phòng chat...",i3="Tạo phòng chat",l3="Tạo phòng chat thành công!",c3="Phòng chat đã được tạo thành công",d3="Tạo thất bại",u3="Không thể tạo phòng chat, vui lòng thử lại sau",m3="Xem trước",g3="Người gửi",h3="Mở menu Tribo",f3="Cài đặt",p3="Quản lý thành viên",v3="Chuyển không gian làm việc",b3="Tạo nhóm mới",$3="Đăng xuất",y3="Mời",k3="Rời phòng chat",x3="Nội dung phòng chat",w3="Ảnh và video",C3="Không có ảnh hoặc video",M3="Không có tệp",T3="Tháng này",I3="Tháng trước",R3={close:aC,confirm:rC,folderName:iC,createFolder:lC,tag:cC,inputTag:dC,inputTagPlaceholder:uC,download:mC,someoneUnsentMessage:gC,read:hC,pin:fC,unpin:pC,emptyChat:vC,members:bC,createdAt:$C,updatedAt:yC,leaveGroup:kC,text:xC,image:wC,video:CC,sticker:MC,message:TC,youSent:IC,someoneSent:RC,tapOpen:SC,TypeMessage:FC,isTyping:AC,someoneJoinedTheChat:_C,someoneLeftTheChat:zC,someoneInvited:DC,someoneKicked:OC,youUnsentMessage:NC,fileSize:PC,file:EC,translation:UC,search:LC,location:jC,sendCurrentLocation:BC,noAccessLocationPermission:VC,"locationInfoUnavailable.":"Thông tin vị trí không khả dụng",requestLocationTimeout:qC,addressUnavailable:HC,audio:KC,noAccessMicrophonePermission:GC,removeFromFolder:WC,editFolder:JC,addToFolder:YC,numberOfChatroom:XC,roomName:ZC,roomMember:QC,roomPrefTags:eM,roomPrefFolder:tM,roomTags:sM,massTexting:oM,inputMessage:nM,searchInConversation:aM,yesterday:rM,today:iM,confirmToDeleteFolder:lM,hide:cM,unhide:dM,edit:uM,delete:"Xóa",cancel:mM,create:gM,save:hM,createTag:fM,confirmDeleteTag:pM,editTag:vM,chooseColor:bM,duplicateTagName:$M,block:yM,unblock:kM,textareaBlockedHint:xM,mute:wM,unmute:CM,chatroomDeleteConfirmationTitle:MM,chatroomDeleteConfirmationMessage:TM,unreadMessages:IM,deleteMessageConfirmation:RM,deleteForEveryone:SM,deleteForMe:FM,confirmDeleteMessage:AM,deleteForEveryoneWarning:_M,deleteForMeWarning:zM,messages:DM,foundMessages:OM,kickOutConfirmTitle:NM,kickOutConfirmTip:PM,moveOut:EM,kickOutGroup:UM,kickOutErrorTitle:LM,kickOutErrorDesc:jM,fileSizeLimitTitle:BM,fileSizeLimitMessage:VM,noRoomsAvailable:qM,unauthorizedTitle:HM,unauthorizedMessage:KM,sortByTime:GM,sortByName:WM,sortByUnread:JM,sortAscending:YM,sortDescending:XM,inviteMember:ZM,chatRoomInfo:QM,inviteMemberToRoom:e3,noMembersToInvite:t3,memberAlreadyInRoomHint:s3,inviteMemberSuccess:o3,inviteMemberSuccessDescription:n3,createNewRoom:a3,inputRoomNamePlaceholder:r3,createRoom:i3,createRoomSuccess:l3,createRoomSuccessDescription:c3,createRoomFailed:d3,createRoomFailedDescription:u3,preview:m3,sender:g3,openMenu:h3,settings:f3,manageMembers:p3,switchWorkspace:v3,createTeam:b3,logout:$3,invite:y3,leaveChatRoom:k3,chatRoomContent:x3,photosVideos:w3,noPhotosVideos:C3,noFiles:M3,thisMonth:T3,lastMonth:I3,"leave-room-title":"Xác nhận rời phòng chat","leave-room-message":"Bạn có chắc chắn muốn rời “{ roomName }” không? Sau khi rời, bạn sẽ không thể xem các tin nhắn trong phòng chat này trừ khi ai đó mời bạn tham gia lại.","leave-room-confirm":"Xác nhận rời phòng","remove-member-title":"Xác nhận xóa thành viên","remove-member-message":"Bạn có chắc chắn muốn xóa “{ memberName }” khỏi phòng chat này không? Hành động này không thể hoàn tác. Thành viên bị xóa sẽ không thể xem các tin nhắn trong phòng chat.","remove-member-confirm":"Xác nhận xóa"},S3="关闭",F3="确认",A3="资料夹名称",_3="建立资料夹",z3="标签",D3="输入标签名称",O3="请输入自订色彩例如 #02B13F",N3="下载",P3="{0} 已收回讯息",E3="已读",U3="置顶",L3="取消置顶",j3="没有成员",B3="成员",V3="创建时间",q3="更新时间",H3="退出群组",K3="文字",G3="图片",W3="影片",J3="贴图",Y3="讯息",X3="{0}已传送",Z3="{0}向您传送了{1}",Q3="点选此处以开启此连结。",e4="输入讯息...",t4="{0} 正在输入...",s4="{0}加入聊天",o4="{0}离开聊天",n4="{0}邀请{1}加入",a4="{0}将{1}踢出",r4="您已收回讯息",i4="档案大小",l4="档案",c4="翻译",d4="搜寻",u4="位置",m4="传送目前位置",g4="无存取位置权限",h4="请求位置逾时",f4="无法取得地址",p4="语音讯息",v4="无存取麦克风权限",b4="从资料夹中移除",$4="编辑资料夹",y4="新增至资料夹",k4="{n} 个聊天室",x4="聊天室名称",w4="成员",C4="标签",M4="资料夹",T4="属性",I4="群发讯息",R4="请输入讯息内容",S4="搜寻对话",F4="昨天",A4="今天",_4="删除资料夹？",z4="隐藏",D4="取消隐藏",O4="编辑",N4="取消",P4="建立",E4="储存",U4="输入标签名称",L4="确认删除标签?",j4="编辑标签",B4="选择颜色",V4="标签已存在，请换个名称",q4="封锁",H4="解封锁",K4="此用户已被封锁。",G4="关闭通知",W4="开启通知",J4="确认要删除聊天室吗？",Y4="删除聊天室后，您将无法再查看此聊天室过去的聊天记录。对方视角下的聊天室将不受任何影响，且还是可以发送新消息给您。",X4="以下为尚未阅读的消息",Z4="您想如何删除消息？",Q4="为所有人删除",eT="只为自己删除",tT="确认要删除这条消息吗？",sT="您选择的消息会从所有人的聊天室中删除。此操作无法恢复。",oT="您选择的消息只会从您的聊天室删除，对方还是可以在聊天室内看到消息。此操作无法恢复。",nT="消息",aT="找到 {0} 条消息",rT="踢出",iT="确定要将 {0} 移出群组吗？",lT="成员被移出后，将无法再查看群组消息。",cT="踢出群组",dT="踢出成员失败",uT="目前无法完成踢出操作，请确认网路连线或稍后再试。",mT="文件过大",gT="所选文件超过 {0} 的大小限制。请选择较小的文件。",hT="目前没有任何聊天室",fT="身份验证失败",pT="您的登录已过期，请重新登录。",vT="时间",bT="名称",$T="未读",yT="升序",kT="降序",xT="邀请成员",wT="聊天室信息",CT="邀请成员加入聊天室",MT="目前没有可邀请的成员",TT="已在聊天室的成员将无法被选择",IT="成员邀请成功！",RT="成员已成功邀请加入聊天室",ST="创建新聊天室",FT="输入聊天室名称...",AT="创建聊天室",_T="聊天室创建成功！",zT="聊天室已成功创建",DT="创建失败",OT="无法创建聊天室，请稍后再试",NT="预览",PT="发送者",ET="打开 Tribo 菜单",UT="设置",LT="管理成员",jT="切换 Workspace",BT="建立新团队",VT="登出",qT="邀请",HT="退出聊天室",KT="聊天室内容",GT="照片影片",WT="尚无照片与影片",JT="尚无档案",YT="本月",XT="上个月",ZT={close:S3,confirm:F3,folderName:A3,createFolder:_3,tag:z3,inputTag:D3,inputTagPlaceholder:O3,download:N3,someoneUnsentMessage:P3,read:E3,pin:U3,unpin:L3,emptyChat:j3,members:B3,createdAt:V3,updatedAt:q3,leaveGroup:H3,text:K3,image:G3,video:W3,sticker:J3,message:Y3,youSent:X3,someoneSent:Z3,tapOpen:Q3,TypeMessage:e4,isTyping:t4,someoneJoinedTheChat:s4,someoneLeftTheChat:o4,someoneInvited:n4,someoneKicked:a4,youUnsentMessage:r4,fileSize:i4,file:l4,translation:c4,search:d4,location:u4,sendCurrentLocation:m4,noAccessLocationPermission:g4,"locationInfoUnavailable.":"无法取得位置资讯",requestLocationTimeout:h4,addressUnavailable:f4,audio:p4,noAccessMicrophonePermission:v4,removeFromFolder:b4,editFolder:$4,addToFolder:y4,numberOfChatroom:k4,roomName:x4,roomMember:w4,roomPrefTags:C4,roomPrefFolder:M4,roomTags:T4,massTexting:I4,inputMessage:R4,searchInConversation:S4,yesterday:F4,today:A4,confirmToDeleteFolder:_4,hide:z4,unhide:D4,edit:O4,delete:"删除",cancel:N4,create:P4,save:E4,createTag:U4,confirmDeleteTag:L4,editTag:j4,chooseColor:B4,duplicateTagName:V4,block:q4,unblock:H4,textareaBlockedHint:K4,mute:G4,unmute:W4,chatroomDeleteConfirmationTitle:J4,chatroomDeleteConfirmationMessage:Y4,unreadMessages:X4,deleteMessageConfirmation:Z4,deleteForEveryone:Q4,deleteForMe:eT,confirmDeleteMessage:tT,deleteForEveryoneWarning:sT,deleteForMeWarning:oT,messages:nT,foundMessages:aT,moveOut:rT,kickOutConfirmTitle:iT,kickOutConfirmTip:lT,kickOutGroup:cT,kickOutErrorTitle:dT,kickOutErrorDesc:uT,fileSizeLimitTitle:mT,fileSizeLimitMessage:gT,noRoomsAvailable:hT,unauthorizedTitle:fT,unauthorizedMessage:pT,sortByTime:vT,sortByName:bT,sortByUnread:$T,sortAscending:yT,sortDescending:kT,inviteMember:xT,chatRoomInfo:wT,inviteMemberToRoom:CT,noMembersToInvite:MT,memberAlreadyInRoomHint:TT,inviteMemberSuccess:IT,inviteMemberSuccessDescription:RT,createNewRoom:ST,inputRoomNamePlaceholder:FT,createRoom:AT,createRoomSuccess:_T,createRoomSuccessDescription:zT,createRoomFailed:DT,createRoomFailedDescription:OT,preview:NT,sender:PT,openMenu:ET,settings:UT,manageMembers:LT,switchWorkspace:jT,createTeam:BT,logout:VT,invite:qT,leaveChatRoom:HT,chatRoomContent:KT,photosVideos:GT,noPhotosVideos:WT,noFiles:JT,thisMonth:YT,lastMonth:XT,"leave-room-title":"确认退出聊天室","leave-room-message":"您确定要退出“{ roomName }”吗？退出后，除非有人再次邀请您加入，否则您将无法查看此聊天室的消息。","leave-room-confirm":"确认退出","remove-member-title":"确认移除成员","remove-member-message":"您确定要将「{ memberName }」从此聊天室移除吗？此操作无法恢复，被移除的成员将无法查看此聊天室的消息。","remove-member-confirm":"确认移除"},QT="關閉",e5="確認",t5="資料夾名稱",s5="建立資料夾",o5="標籤",n5="輸入標籤名稱",a5="請輸入自訂色彩例如 #02B13F",r5="下載",i5="{0} 已收回訊息",l5="已讀",c5="置頂",d5="取消置頂",u5="沒有成員",m5="成員",g5="創建時間",h5="更新時間",f5="退出群組",p5="文字",v5="圖片",b5="影片",$5="貼圖",y5="訊息",k5="{0}已傳送",x5="{0}向您傳送了{1}",w5="點選此處以開啟此連結。",C5="輸入訊息...",M5="{0} 正在輸入...",T5="{0}加入聊天",I5="{0}離開聊天",R5="{0}邀請{1}加入",S5="{0}將{1}踢出",F5="您已收回訊息",A5="檔案大小",_5="檔案",z5="翻譯",D5="搜尋",O5="位置",N5="傳送目前位置",P5="無存取位置權限",E5="請求位置逾時",U5="無法取得地址",L5="語音訊息",j5="無存取麥克風權限",B5="從資料夾中移除",V5="編輯資料夾",q5="新增至資料夾",H5="{n} 個聊天室",K5="聊天室名稱",G5="成員",W5="標籤",J5="資料夾",Y5="屬性",X5="群發訊息",Z5="請輸入訊息內容",Q5="搜尋對話",e8="昨天",t8="今天",s8="刪除資料夾？",o8="隱藏",n8="取消隱藏",a8="編輯",r8="取消",i8="建立",l8="儲存",c8="輸入標籤名稱",d8="確認刪除標籤?",u8="編輯標籤",m8="選擇顏色",g8="此標籤已存在，請改用其他名稱",h8="封鎖",f8="解封鎖",p8="此用戶已被封鎖。",v8="關閉通知",b8="開啟通知",$8="確認要刪除聊天室嗎？",y8="刪除聊天室後，您將無法再檢視此聊天室過去的聊天記錄。對方視角下的聊天室將不受任何影響，且還是可以傳新訊息給您。",k8="以下為尚未閱讀的訊息",x8="您想如何刪除訊息？",w8="為所有人刪除",C8="只為自己刪除",M8="確認要刪除這則訊息嗎？",T8="您選擇的訊息會從所有人的聊天室中刪除。此操作無法復原。",I8="您選擇的訊息只會從您的聊天室刪除，對方還是可以在聊天室內看到訊息。此操作無法復原。",R8="訊息",S8="找到 {0} 則訊息",F8="移出",A8="確定要將 {0} 踢出群組嗎？",_8="成員被移出後，將無法再查看群組訊息。",z8="踢出群組",D8="踢出成員失敗",O8="目前無法完成踢出操作，請確認網路連線或稍後再試。",N8="檔案過大",P8="所選檔案超過 {0} 的大小限制。請選擇較小的檔案。",E8="目前沒有任何聊天室",U8="身份驗證失敗",L8="您的登入已過期，請重新登入。",j8="時間",B8="名稱",V8="未讀",q8="升序",H8="降序",K8="邀請成員",G8="聊天室資訊",W8="邀請成員加入聊天室",J8="目前沒有可邀請的成員",Y8="已在聊天室的成員將無法被選擇",X8="成員邀請成功！",Z8="成員已成功邀請加入聊天室",Q8="創建新聊天室",eI="輸入聊天室名稱...",tI="創建聊天室",sI="聊天室創建成功！",oI="聊天室已成功創建",nI="創建失敗",aI="無法創建聊天室，請稍後再試",rI="預覽",iI="發送者",lI="開啟 Tribo 選單",cI="設定",dI="管理成員",uI="切換 Workspace",mI="建立新團隊",gI="登出",hI="邀請",fI="退出聊天室",pI="聊天室內容",vI="照片影片",bI="尚無照片與影片",$I="尚無檔案",yI="本月",kI="上個月",xI={close:QT,confirm:e5,folderName:t5,createFolder:s5,tag:o5,inputTag:n5,inputTagPlaceholder:a5,download:r5,someoneUnsentMessage:i5,read:l5,pin:c5,unpin:d5,emptyChat:u5,members:m5,createdAt:g5,updatedAt:h5,leaveGroup:f5,text:p5,image:v5,video:b5,sticker:$5,message:y5,youSent:k5,someoneSent:x5,tapOpen:w5,TypeMessage:C5,isTyping:M5,someoneJoinedTheChat:T5,someoneLeftTheChat:I5,someoneInvited:R5,someoneKicked:S5,youUnsentMessage:F5,fileSize:A5,file:_5,translation:z5,search:D5,location:O5,sendCurrentLocation:N5,noAccessLocationPermission:P5,"locationInfoUnavailable.":"無法取得位置資訊",requestLocationTimeout:E5,addressUnavailable:U5,audio:L5,noAccessMicrophonePermission:j5,removeFromFolder:B5,editFolder:V5,addToFolder:q5,numberOfChatroom:H5,"no-chatroom":"沒有聊天室",roomName:K5,roomMember:G5,roomPrefTags:W5,roomPrefFolder:J5,roomTags:Y5,massTexting:X5,inputMessage:Z5,searchInConversation:Q5,yesterday:e8,today:t8,confirmToDeleteFolder:s8,hide:o8,unhide:n8,edit:a8,delete:"刪除",cancel:r8,create:i8,save:l8,createTag:c8,confirmDeleteTag:d8,editTag:u8,chooseColor:m8,duplicateTagName:g8,block:h8,unblock:f8,textareaBlockedHint:p8,mute:v8,unmute:b8,chatroomDeleteConfirmationTitle:$8,chatroomDeleteConfirmationMessage:y8,unreadMessages:k8,deleteMessageConfirmation:x8,deleteForEveryone:w8,deleteForMe:C8,confirmDeleteMessage:M8,deleteForEveryoneWarning:T8,deleteForMeWarning:I8,messages:R8,foundMessages:S8,moveOut:F8,kickOutConfirmTitle:A8,kickOutConfirmTip:_8,kickOutGroup:z8,kickOutErrorTitle:D8,kickOutErrorDesc:O8,fileSizeLimitTitle:N8,fileSizeLimitMessage:P8,noRoomsAvailable:E8,unauthorizedTitle:U8,unauthorizedMessage:L8,sortByTime:j8,sortByName:B8,sortByUnread:V8,sortAscending:q8,sortDescending:H8,inviteMember:K8,chatRoomInfo:G8,inviteMemberToRoom:W8,noMembersToInvite:J8,memberAlreadyInRoomHint:Y8,inviteMemberSuccess:X8,inviteMemberSuccessDescription:Z8,createNewRoom:Q8,inputRoomNamePlaceholder:eI,createRoom:tI,createRoomSuccess:sI,createRoomSuccessDescription:oI,createRoomFailed:nI,createRoomFailedDescription:aI,preview:rI,sender:iI,openMenu:lI,settings:cI,manageMembers:dI,switchWorkspace:uI,createTeam:mI,logout:gI,invite:hI,leaveChatRoom:fI,chatRoomContent:pI,photosVideos:vI,noPhotosVideos:bI,noFiles:$I,thisMonth:yI,lastMonth:kI,"leave-room-title":"確認退出聊天室","leave-room-message":"您確定要退出「{ roomName }」嗎？退出後，您將無法查看此聊天室的訊息，除非有人重新邀請您加入。","leave-room-confirm":"確認退出","remove-member-title":"確認移除成員","remove-member-message":"您確定要將「{ memberName }」從此聊天室移除嗎？此操作無法復原，被移除的成員將無法查看此聊天室的訊息。","remove-member-confirm":"確認移除"},st={"de-DE":Ii,"en-US":Xc,"es-ES":km,"fr-FR":Hh,"ja-JP":pv,"ko-KR":Lb,"pt-PT":dy,"ro-RO":Dx,"th-TH":nC,"vi-VN":R3,"zh-CN":ZT,"zh-TW":xI},wI={"zh-TW":"zh-TW","zh-CN":"zh-CN",en:"en-US",ja:"ja-JP",ko:"ko-KR",fr:"fr-FR","en-US":"en-US","ja-JP":"ja-JP","ko-KR":"ko-KR","fr-FR":"fr-FR","de-DE":"de-DE","es-ES":"es-ES","pt-PT":"pt-PT","ro-RO":"ro-RO","th-TH":"th-TH","vi-VN":"vi-VN"};function Ft(t){if(t in st)return t;const e=wI[t];return e&&e in st?e:t}function CI(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search),e=t.get("locale")||t.get("lang");if(e){const s=Ft(e);if(s in st)return s}try{const s=localStorage.getItem("imkit-locale");if(s){const n=Ft(s);if(n in st)return n}}catch(s){console.warn("Failed to read locale from localStorage",s)}const o=Ft(navigator.language);if(o in st)return o}return"en-US"}const _e=wo({legacy:!1,locale:CI(),messages:st});function Rs(t){const e=Ft(t);if(e in st){_e.global.locale.value=e;try{localStorage.setItem("imkit-locale",e)}catch(o){console.warn("Failed to save locale to localStorage",o)}}else console.warn(`Locale "${t}" is not supported. Available locales:`,Object.keys(st))}const MI=N({__name:"App",setup(t){const e=Es(),o=Co(),s=Z();pe(()=>e.query.token,a=>{if(!a)return;let r="";try{const{id:l,_id:u}=Us(a);r=l||u}catch(l){console.log(l);return}let i=JSON.parse(JSON.stringify(e.query));delete i.token,localStorage.setItem("imkit-token",a),o.replace({query:i}),s.commit("imkit/setState",{uid:r,rooms:{},sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0,folders:{},sortedFolderIds:[],roomIdsInFolders:{},searchKeyword:""}),s.commit("imkit/updateField",{key:"config",value:{token:a}}),s.state.imkit.socket.disconnect(),s.state.imkit.socket.connect()}),pe(()=>e.query.locale||e.query.lang,a=>{a&&typeof a=="string"&&Rs(a)},{immediate:!0});let n=null;return xt(()=>{n=sa((a,r)=>{console.log("App.vue: Received message from parent",{eventType:a,payload:r}),a==="TEAMS_LIST_UPDATE"&&(console.log("App.vue: Teams list updated",r),s.dispatch("tribo/setTeams",r.teams)),a==="TEAM_ID_UPDATE"&&(console.log("App.vue: Team id updated",r),r.teamId&&typeof r.teamId=="string"&&(s.dispatch("tribo/setCurrentTeamId",r.teamId),s.commit("imkit/setState",{roomTag:r.teamId,rooms:{},sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0}),s.dispatch("imkit/fetchRooms"))),(a==="LOCALE_UPDATE"||a==="LANGUAGE_UPDATE")&&(console.log("App.vue: Locale updated",r),r.locale&&typeof r.locale=="string"&&Rs(r.locale))})}),ns(()=>{n&&(n(),n=null)}),(a,r)=>{const i=at("router-view");return d(),g(V,null,[v(i),v(m(Mo))],64)}}}),Me=(t,e)=>{const o=t.__vccOpts||t;for(const[s,n]of e)o[s]=n;return o},TI={},II={viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",class:"text-zinc-600 dark:text-zinc-100"};function RI(t,e){return d(),g("svg",II,[...e[0]||(e[0]=[c("circle",{cx:"25",cy:"25",r:"23",class:"fill-zinc-100 dark:fill-zinc-600"},null,-1),c("path",{d:`M33.71,32.29L26.42,25l7.29-7.29c0.39-0.39,0.39-1.03,0-1.42c-0.39-0.39-1.03-0.39-1.42,0L25,23.58l-7.29-7.29
        c-0.39-0.39-1.03-0.39-1.42,0c-0.39,0.39-0.39,1.03,0,1.42L23.58,25l-7.29,7.29c-0.39,0.39-0.39,1.03,0,1.42
        C16.49,33.9,16.74,34,17,34s0.51-0.1,0.71-0.29L25,26.42l7.29,7.29C32.49,33.9,32.74,34,33,34s0.51-0.1,0.71-0.29
        C34.1,33.32,34.1,32.68,33.71,32.29z`,class:"fill-current"},null,-1)])])}const We=Me(TI,[["render",RI]]),SI={class:"relative"},FI=["src"],AI={key:1,class:"flex h-[300px] w-[300px] items-center justify-center bg-gray-200 text-[150px] font-semibold text-gray-500 dark:bg-zinc-600 dark:text-gray-300"},eo=N({__name:"AvatarModal",props:{url:{},name:{}},setup(t){const e=Se(),o=t,s=S(!1);s.value=o.url.length===0;const n=()=>{s.value=!0};return(a,r)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl overflow-hidden flex flex-col gap-3 max-w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",SI,[c("button",{class:"absolute top-2 right-2 ml-auto flex items-center justify-center rounded-full",onClick:r[0]||(r[0]=i=>m(e).closeAll())},[v(We,{class:"h-7 w-7"})]),s.value?(d(),g("div",AI,f(t.name&&t.name.length>0?t.name.charAt(0).toUpperCase():""),1)):(d(),g("img",{key:0,src:t.url,class:"h-[300px] w-[300px] object-cover",onError:n},null,40,FI))])]),_:1}))}}),_I=["src"],Pe=N({__name:"AvatarView",props:{url:{},name:{}},setup(t){const e=t,o=S(!1);o.value=e.url.length===0;const s=()=>{o.value=!0};pe(()=>[e.url,e.name],()=>{o.value=!1});const n=()=>{const{open:a}=Ce({component:eo,attrs:{url:e.url,name:e.name}});a()};return(a,r)=>o.value?(d(),g("div",{key:1,class:"flex h-[50px] w-[50px] cursor-pointer items-center justify-center rounded-2xl bg-gray-200 text-xl font-semibold text-gray-500 dark:bg-zinc-600 dark:text-gray-300",onClick:ve(n,["stop"])},f(t.name&&t.name.length>0?t.name.charAt(0).toUpperCase():""),1)):(d(),g("img",{key:0,src:t.url,class:"h-[50px] w-[50px] cursor-pointer rounded-2xl object-cover",onError:s,onClick:ve(n,["stop"])},null,40,_I))}});var we=(t=>(t.RoomName="roomName",t.RoomMember="roomMember",t.RoomPrefTags="roomPrefTags",t.RoomPrefFolder="roomPrefFolder",t.RoomTags="roomTags",t.Messages="messages",t))(we||{});const zI={count:0,config:{},uid:"",axios:mt,isRequesting:{},socket:Ls({autoConnect:!1}),imageCache:vs(),translationCache:vs(),users:{},rooms:{},sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0,uploadProgresses:{},downloadProgresses:{},linkPreviews:{},actionMenuRoomId:"",actionMenuFolderId:"",folders:{},sortedFolderIds:[],roomIdsInFolders:{},selectedRoomIdsForCreateFolder:{},selectedFolderId:"",searchKeyword:"",searchType:we.RoomName,searchRooms:{},roomTag:"",sortBy:"-lastMessage",sortUnreadFirst:0,deliveringMessages:new Map,processingMessages:new Map,rwlock:new To,selectedRoomId:"",messageMultiLists:new Map,numberOfTotalMessages:new Map,replyId:"",navigationTargetId:"",isRoomInfoVisible:!1,isRoomContentVisible:!1,isTyping:{},isSearchInRoomMode:!1,messageSearchKeyword:"",searchedMessageIds:new Map,blockedUsers:{},chatRoomContent:[]};class it{constructor(e,o,s){O(this,"id");O(this,"name");O(this,"roomIds");this.id=e,this.name=o,this.roomIds=s}get payload(){return{children:this.roomIds.map(e=>({id:e,type:"room"}))}}}class DI{constructor(e){O(this,"head");O(this,"tail");O(this,"length");O(this,"map");O(this,"messageGroups");O(this,"firstMessageOfDate");O(this,"prev",null);O(this,"next",null);this.head=null,this.tail=null,this.length=0,this.map=new Map,this.messageGroups=new Map,this.firstMessageOfDate=new Map;const o=s=>{const n=fe.createReactive(s);return n?[n].concat(o(s.reply)):[]};for(const s of e.reverse()){const n=fe.createReactive(s);n&&this.append(n);for(const a of o(s.reply))this.map.set(a.id,a)}}append(e){if(!this.contains(e.id)){if(this.tail){let o=this.tail;for(;o&&o.createdAt>e.createdAt;)o=o.prev;o?(o===this.tail&&(this.tail=e),e.next=o.next,o.next=e,e.prev=o):(e.next=this.head,this.head=e),e.next&&(e.next.prev=e)}else this.head=this.tail=e;this.map.set(e.id,e),this.length++,this.insertMessageToGroup(e)}}insertMessageToGroup(e){if(e.isSystem)return;if(this.messageGroups.has(e.groupId)){const s=this.messageGroups.get(e.groupId);if(s){let n=!1;for(let a=s.length-1;a>=0;a--)if(s[a].createdAt<e.createdAt){a==s.length-1?s.push(e):s.splice(a+1,0,e),n=!0;break}n||s.unshift(e)}}else this.messageGroups.set(e.groupId,[e]);const o=this.firstMessageOfDate.get(e.dateId);(!o||o.createdAt>e.createdAt)&&this.firstMessageOfDate.set(e.dateId,e)}remove(e){var n,a;const o=this.finds(e);if(!o)return;o.prev?o.prev.next=o.next:this.head=o.next,o.next?o.next.prev=o.prev:this.tail=o.prev,this.map.delete(e),this.length--;const s=this.messageGroups.get(o.groupId);if(s){const r=s.indexOf(o);r>=0&&(s.splice(r,1),s.length===0&&this.messageGroups.delete(o.groupId))}((n=this.firstMessageOfDate.get(o.dateId))==null?void 0:n.id)===o.id&&(o.dateId===((a=o.next)==null?void 0:a.dateId)?this.firstMessageOfDate.set(o.dateId,o.next):this.firstMessageOfDate.delete(o.dateId))}replace(e,o){var n;const s=this.finds(e);if(s){s.prev?s.prev.next=o:this.head=o,s.next?s.next.prev=o:this.tail=o,o.prev=s.prev,o.next=s.next,this.map.delete(e),this.map.set(o.id,o);const a=this.messageGroups.get(s.groupId);if(a){const r=a.indexOf(s);r>=0&&(o.isSystem?a.splice(r,1):a[r]=o)}((n=this.firstMessageOfDate.get(s.dateId))==null?void 0:n.id)===s.id&&this.firstMessageOfDate.set(s.dateId,o)}}concate(e){if(e.length!==0){this.tail?(this.tail.next=e.head,e.head&&(e.head.prev=this.tail),this.tail=e.tail):(this.head=e.head,this.tail=e.tail);for(const[o,s]of e.map)this.map.set(o,s);this.length+=e.length;for(const[o,s]of e.messageGroups)if(this.messageGroups.has(o)){if(this.messageGroups.get(o))for(const a of s)this.insertMessageToGroup(a)}else this.messageGroups.set(o,s);for(const[o,s]of e.firstMessageOfDate){const n=this.firstMessageOfDate.get(o);n!==void 0?n.createdAt>s.createdAt&&this.firstMessageOfDate.set(o,s):this.firstMessageOfDate.set(o,s)}}}unshift(e){if(e.length!==0){this.head?(this.head.prev=e.tail,e.tail&&(e.tail.next=this.head),this.head=e.head):(this.head=e.head,this.tail=e.tail);for(const[o,s]of e.map)this.map.set(o,s);this.length+=e.length;for(const[o,s]of e.messageGroups)if(this.messageGroups.has(o)){if(this.messageGroups.get(o))for(const a of s)this.insertMessageToGroup(a)}else this.messageGroups.set(o,s);for(const[o,s]of e.firstMessageOfDate){const n=this.firstMessageOfDate.get(o);n!==void 0?n.createdAt>s.createdAt&&this.firstMessageOfDate.set(o,s):this.firstMessageOfDate.set(o,s)}}}resetHead(e){if(this.head&&this.head.id===e)return;const o=this.finds(e);if(o){this.head=o,o.prev=null;let s=0,n=o;for(;n;)s++,n=n.next;this.length=s}}resetTail(e){if(this.tail&&this.tail.id===e)return;const o=this.finds(e);if(o){this.tail=o,o.next=null;let s=0,n=o;for(;n;)s++,n=n.prev;this.length=s}}canCombine(e){var o,s;return e.length===0||!e.head||!e.tail?!1:this.contains(e.tail.id)||this.contains(e.head.id)||e.contains(((o=this.head)==null?void 0:o.id)??"")&&e.contains(((s=this.tail)==null?void 0:s.id)??"")}combine(e){var n,a,r,i;if(e.length===0||!e.head||!e.tail)return;const o=this.contains(e.head.id),s=this.contains(e.tail.id);if(!(o&&s)){if(!o&&!s)e.contains(((n=this.head)==null?void 0:n.id)??"")&&e.contains(((a=this.tail)==null?void 0:a.id)??"")&&(this.head=e.head,this.tail=e.tail,this.length=e.length,this.map=e.map);else if(s){const l=(r=this.finds(e.tail.id))==null?void 0:r.next;l?this.resetHead(l.id):(this.head=null,this.tail=null,this.length=0),this.unshift(e)}else if(o){const l=(i=this.finds(e.head.id))==null?void 0:i.prev;l?this.resetTail(l.id):(this.head=null,this.tail=null,this.length=0),this.concate(e)}}}array(){const e=[];let o=this.head;for(;o;)e.push(o),o=o.next;return e}finds(e){const o=this.map.get(e);if(o)return o.next||o.prev||this.head===o&&this.tail===o?o:void 0}contains(e){return this.finds(e)!==void 0}isValid(){if(this.head&&this.head.prev||this.tail&&this.tail.next)return!1;let e=0,o=this.head;for(;o;){if(o.prev&&o.prev.next!==o||o.next&&o.next.prev!==o)return!1;e++,o=o.next}return e===this.length}}var Je=(t=>(t.Direct="direct",t.Group="group",t))(Je||{});class ct{constructor(e,o){O(this,"id");O(this,"name");O(this,"type");O(this,"createdAt");O(this,"updatedAt");O(this,"memberIds");O(this,"isOutgoingGroupSender");O(this,"coverUrl");O(this,"lastMessage");O(this,"numberOfUnread");O(this,"lastReadMessageId");O(this,"pref");O(this,"roomTags");O(this,"extra");O(this,"muted",!1);O(this,"isSuperuser",!1);var y;const{_id:s,name:n,roomType:a,createdTimeMS:r,lastMessage:i,members:l,cover:u,unread:h,memberProperties:p,extParams:b,pref:k,roomTags:C,muted:w,isSuperuser:x}=e;if(this.id=s,this.name=n,this.type=a||"direct",this.createdAt=r,this.lastMessage=fe.createReactive(i),this.updatedAt=((y=this.lastMessage)==null?void 0:y.createdAt)??r,this.memberIds=[],this.isOutgoingGroupSender={},l.forEach(T=>{this.memberIds.push(T._id),T.clientType==="group"&&T.members.some(M=>M._id===o)&&T.members.forEach(M=>{this.isOutgoingGroupSender[M._id]=!0})}),this.coverUrl=u??"",this.numberOfUnread=h??0,this.lastReadMessageId={},this.pref=k,this.roomTags=C??[],this.muted=w,p)for(const{client:T,lastRead:M}of p)M&&(this.lastReadMessageId[T]=M);try{this.extra=JSON.parse(b)}catch{this.extra={}}a==="custom"&&(this.type=this.extra.roomType),this.isSuperuser=x??!1}get memberIdsWithoutMeAndMyGroup(){const{state:{imkit:{uid:e,users:o}}}=Z();return this.memberIds.filter(s=>s!==e&&!o[s].memberIds[e])}get displayName(){var s;const{state:{imkit:{uid:e,users:o}}}=Z();if(this.name)return this.name;if(this.memberIdsWithoutMeAndMyGroup.length===0){const{t:n}=Le();return n("emptyChat")}else{if(this.type=="direct")return(s=this.memberIdsWithoutMeAndMyGroup.map(n=>o[n])[0])==null?void 0:s.nickname;if(this.type=="group")return this.memberIds.filter(n=>n!==e).map(n=>o[n].nickname).join(", ")}return""}get avatars(){const{state:{imkit:{uid:e,users:o}}}=Z();return this.coverUrl&&this.coverUrl.length>0?[{url:this.coverUrl,name:this.displayName??""}]:this.memberIdsWithoutMeAndMyGroup.length===0?[{url:o[e].avatarUrl??"",name:o[e].nickname??""}]:this.type=="direct"?this.memberIdsWithoutMeAndMyGroup.map(s=>({url:o[s].avatarUrl??"",name:o[s].nickname??""})):this.type=="group"?this.memberIds.map(s=>o[s]).sort((s,n)=>s.id===e?1:n.id===e?-1:(n.avatarUrl??"").length-(s.avatarUrl??"").length).map(s=>({url:s.avatarUrl??"",name:s.nickname??""})):[{url:"",name:this.displayName??""}]}}class Be{constructor(e){O(this,"id");O(this,"nickname");O(this,"avatarUrl");O(this,"country");O(this,"city");O(this,"clientType");O(this,"memberIds");const{_id:o,nickname:s,avatarUrl:n,country:a,city:r,clientType:i,members:l}=e;this.id=o,this.nickname=s??o,this.avatarUrl=n,this.country=a??null,this.city=r??null,this.clientType=i??null,this.memberIds={},l==null||l.forEach(u=>{this.memberIds[u._id]=!0})}}var He=(t=>(t.FetchRooms="/rooms",t.Search="/search",t.Subscribe="/me/subscribe",t.Unsubscribe="/me/unsubscribe",t))(He||{}),z=(t=>(t.increment="increment",t.fetchRooms="fetchRooms",t.fetchRoom="fetchRoom",t.loadMessages="loadMessages",t.updateLastRead="updateLastRead",t.handleMessageFromSocket="handleMessageFromSocket",t.handleRoomFromSocket="handleRoomFromSocket",t.handleLastReadFromSocket="handleLastReadFromSocket",t.sendMessage="sendMessage",t.retryMessage="retryMessage",t.recallMessage="recallMessage",t.hideMessage="hideMessage",t.deleteMessage="deleteMessage",t.uploadMedia="uploadMedia",t.fetchLinkPreview="fetchLinkPreview",t.handleLinkPreviews="handleLinkPreviews",t.fetchVideoBlob="fetchVideoBlob",t.navigateToMessage="navigateToMessage",t.uploadImage="uploadImage",t.updateRoomPrefs="updateRoomPrefs",t.fetchPrefs="fetchPrefs",t.updatePref="updatePref",t.deletePref="deletePref",t.updateFolder="updateFolder",t.removeFolder="removeFolder",t.handlePrefChangeFromSocket="handlePrefChangeFromSocket",t.handlePrefDeleteFromSocket="handlePrefDeleteFromSocket",t.aggregateRoomsAndFolders="aggregateRoomsAndFolders",t.removeMembers="removeMembers",t.handleTypingFromSocket="handleTypingFromSocket",t.insertUnreadMessage="insertUnreadMessage",t.translate="translate",t.searchRooms="searchRooms",t.subscribe="subscribe",t.unsubscribe="unsubscribe",t.removeRoomFromFolder="removeRoomFromFolder",t.addRoomToFolder="addRoomToFolder",t.fetchRoomsInFolders="fetchRoomsInFolders",t.batchSendMessage="batchSendMessage",t.toggleNotification="toggleNotification",t.translateMessage="translateMessage",t.blockUser="blockUser",t.unblockUser="unblockUser",t.getBlockList="getBlockList",t.hideMessagesFromUserInRoom="hideMessagesFromUserInRoom",t.sendReaction="sendReaction",t.deleteReaction="deleteReaction",t.handleAIStreamingFromSocket="handleAIStreamingFromSocket",t.fetchRoomContent="fetchRoomContent",t.fetchPresignedUrl="fetchPresignedUrl",t))(z||{}),R=(t=>(t.increment="increment",t.setState="setState",t.updateField="updateField",t.deleteField="deleteField",t.updateRoom="updateRoom",t.updateMessage="updateMessage",t.updateLastRead="updateLastRead",t.pushMessage="pushMessage",t.replaceMessage="replaceMessage",t.deleteMessages="deleteMessages",t.clearChatRoom="clearChatRoom",t.deleteRoom="deleteRoom",t.setMap="setMap",t.deleteMap="deleteMap",t.insertMessageLinkedList="insertMessageLinkedList",t.concateMessageLinkedList="concateMessageLinkedList",t.unshiftMessageLinkedList="unshiftMessageLinkedList",t.fetchRoomContent="fetchRoomContent",t))(R||{});const OI={[z.increment]({commit:t}){t(R.increment)},async[z.fetchRooms]({state:t,commit:e,dispatch:o},{pageSize:s}={pageSize:void 0}){if(t.isRequesting[He.FetchRooms]||!t.roomTag)return;const{numberOfFetchedRooms:n,uid:a}=t;if(n===t.numberOfTotalRooms&&n>0)return;const r=s!==void 0?s:Math.min(Math.max(30,n),120),{data:{result:i}}=await t.axios.get(He.FetchRooms,{params:{skip:n,limit:r,q:t.roomTag?`{ "members": "${a}", "roomTags": "${t.roomTag}" }`:`{ "members": "${a}" }`,sort:t.sortBy,sortUnreadFirst:t.sortUnreadFirst}}),{data:l,totalCount:u}=i,h={},p={},b=[];for(const k of l){const C=new ct(k,t.uid);h[k._id]=C,b.push(C);for(const w of k.members)p[w.id]||(p[w.id]=new Be(w))}e(R.updateField,{key:"rooms",value:h}),e(R.updateField,{key:"users",value:p}),e(R.setState,{numberOfTotalRooms:u,numberOfFetchedRooms:n+r,sortedRooms:[...t.sortedRooms,...b]}),o(z.aggregateRoomsAndFolders)},async[z.handleMessageFromSocket]({state:t,commit:e,dispatch:o},s){var a,r,i;let n=t.rooms[s.roomId];if(n){const{id:l,numberOfUnread:u}=n;if(s.roomId===t.selectedRoomId){t.config.settings.linkPreviewEnabled&&await o(z.handleLinkPreviews,[s]),await t.rwlock.writeLock();const h=(r=(a=t.messageMultiLists.get(s.roomId))==null?void 0:a.main)==null?void 0:r.finds(s.id);h?h.type===E.AIStreaming&&s.type!==E.AIStreaming?e(R.replaceMessage,{targetMessageId:s.id,message:s}):h.type!==E.AIStreaming&&e(R.replaceMessage,{targetMessageId:s.id,message:s}):e(R.pushMessage,s),t.rwlock.unlock(),e(R.updateRoom,{id:l,updatedAt:s.createdAt,lastMessage:s,numberOfUnread:0}),s.senderId!==t.uid&&o(z.updateLastRead,l),e(R.setMap,{mapName:"numberOfTotalMessages",key:l,value:(t.numberOfTotalMessages.get(l)??0)+1})}else e(R.updateRoom,{id:l,updatedAt:s.createdAt,lastMessage:s,numberOfUnread:s.senderId!==t.uid?u+1:u});(i=n.pref)!=null&&i.hidden&&o(z.updateRoomPrefs,{roomId:l,prefs:{hidden:!1}}),o(z.aggregateRoomsAndFolders)}else await o(z.fetchRoom,s.roomId),n=t.rooms[s.roomId]},async[z.loadMessages]({state:t,commit:e,dispatch:o},{roomId:s,beforeMessageId:n,afterMessageId:a,targetMessageId:r}){const i=`/rooms/${s}/messages/v3`;if(t.isRequesting[i])return;const l=t.messageMultiLists.get(s),u=t.numberOfTotalMessages.get(s)??-1;if(u!==-1&&((l==null?void 0:l.numberOfMessages())??0)>=u)return;const p={limit:30};n&&(p.beforeMessage=n,p.sortOrder="desc"),(a||r)&&(p.afterMessage=a||r,p.sortOrder="asc");const{data:{result:b}}=await t.axios.get(i,{params:p}),{data:k,totalCount:C}=b;a&&k.shift(),n&&k.shift();const w={};for(const M of k){const U=M.sender,_=U==null?void 0:U._id;_&&!w[_]&&U&&(w[_]=new Be(U))}e(R.updateField,{key:"users",value:w});const x=new DI(k),y=x.array();t.config.settings.linkPreviewEnabled&&await o(z.handleLinkPreviews,y),e(n?R.unshiftMessageLinkedList:a?R.concateMessageLinkedList:R.insertMessageLinkedList,x);const T=t.numberOfTotalMessages.get(s)??-1;return C>T&&e(R.setMap,{mapName:"numberOfTotalMessages",key:s,value:C}),k},async[z.fetchRoom]({state:t,commit:e},o){const{data:{result:s}}=await t.axios.get(`/rooms/${o}`),n=new ct(s,t.uid),a={};a[n.id]=n,e(R.updateField,{key:"rooms",value:a});const r={};s.members.flatMap(i=>Array.isArray(i.members)?[...i.members,i]:[i]).forEach(i=>{r[i.id]||(r[i.id]=new Be(i))}),e(R.updateField,{key:"users",value:r})},async[z.updateLastRead]({state:t,commit:e},o){var r;const s=`/rooms/${o}/lastRead`;if(t.isRequesting[s])return;const n=t.rooms[o],{data:{result:a}}=await t.axios.put(s,{message:(r=n.lastMessage)==null?void 0:r.id});a&&e(R.updateRoom,{id:o,numberOfUnread:0})},async[z.handleRoomFromSocket]({state:t,commit:e,dispatch:o},s){const n=new ct(s,t.uid),a=t.rooms[n.id];a&&(s.unread===void 0&&(n.numberOfUnread=a.numberOfUnread),s.pref===void 0&&(n.pref=a.pref),s.isSuperuser===void 0&&a.isSuperuser!==void 0&&(n.isSuperuser=a.isSuperuser),s.muted===void 0&&a.muted!==void 0&&(n.muted=a.muted));const r={};r[n.id]=n,e(R.updateField,{key:"rooms",value:r});const i={};s.members.flatMap(l=>Array.isArray(l.members)?[...l.members,l]:[l]).forEach(l=>{i[l.id]||(i[l.id]=new Be(l))}),e(R.updateField,{key:"users",value:i}),o(z.aggregateRoomsAndFolders)},async[z.handleLastReadFromSocket]({commit:t},e){t(R.updateLastRead,e)},async[z.sendMessage]({state:t,commit:e,dispatch:o},s){var i;const{roomId:n,teamId:a}=s;if(!n)return;const r=fe.fromPayload(s,t.uid);if(r){r.status=Ue.Sending,e(R.setMap,{mapName:"deliveringMessages",key:r.id,value:r}),e(R.pushMessage,r);try{if(s.messageType===E.Image){const{files:p,teamId:b}=s,k=await Promise.all(s.images.map((w,x)=>o(z.uploadImage,{image:w,file:p[x],roomId:n,teamId:b}))),C=[];s.images.forEach((w,x)=>{t.imageCache.set(k[x].thumbnailUrl,w.thumbnailUrl);const{id:y,width:T,height:M}=w;C.push({originalUrl:k[x].originalUrl,thumbnailUrl:k[x].thumbnailUrl,width:T,height:M}),e(R.deleteField,{key:"uploadProgresses",value:`${y}-original`}),e(R.deleteField,{key:"uploadProgresses",value:`${y}-thumbnail`})}),s.images=C,delete s.files}else if(s.messageType===E.Video){const{file:p,video:b}=s,k=b.thumbnailFile;if(!k)return;const C=await Promise.all([o(z.uploadMedia,{id:k.id,file:k.file,roomId:n,teamId:a}),o(z.uploadMedia,{id:b.id,file:p,roomId:n,teamId:a})]);s.width=b.width,s.height=b.height,s.duration=b.duration,s.thumbnailUrl=C[0],s.originalUrl=C[1],t.imageCache.set(C[0],b.thumbnailUrl),delete s.file,e(R.deleteField,{key:"uploadProgresses",value:b.id})}else if(s.messageType===E.File){const{file:p}=s,b=await o(z.uploadMedia,{id:r.id,file:p,roomId:n,teamId:a});s.originalUrl=b,delete s.file,e(R.deleteField,{key:"uploadProgresses",value:r.id})}else if(s.messageType===E.Audio){const{file:p}=s,b=await o(z.uploadMedia,{id:r.id,file:p,roomId:n,teamId:a});s.originalUrl=b,delete s.file,e(R.deleteField,{key:"uploadProgresses",value:r.id})}await t.rwlock.readLock();const{data:{result:l}}=await t.axios.post(`/rooms/${n}/message`,s),u=fe.createReactive(l);if(!u)return;e(R.setMap,{mapName:"processingMessages",key:u.id,value:u}),e(R.deleteMap,{mapName:"deliveringMessages",key:r.id}),t.config.settings.linkPreviewEnabled&&await o(z.handleLinkPreviews,[u]),u.roomId===t.selectedRoomId&&e(R.replaceMessage,{message:u,targetMessageId:r.id}),e(R.updateRoom,{id:u.roomId,updatedAt:u.createdAt,lastMessage:u}),o(z.aggregateRoomsAndFolders),e(R.deleteMap,{mapName:"processingMessages",key:u.id});const h=t.config.callbacks;return(i=h==null?void 0:h.onMessageSent)==null||i.call(h,u),u}catch(l){throw r.status=Ue.Failed,e(R.updateMessage,r),e(R.deleteMap,{mapName:"deliveringMessages",key:r.id}),l}finally{t.rwlock.unlock()}}},async[z.retryMessage]({state:t,commit:e,dispatch:o},s){s.status=Ue.Sending,e(R.updateMessage,s),e(R.setMap,{mapName:"deliveringMessages",key:s.id,value:s});try{await t.rwlock.readLock();const{data:{result:n}}=await t.axios.post(`/rooms/${s.roomId}/message`,s.payload),a=fe.createReactive(n);return a?(e(R.setMap,{mapName:"processingMessages",key:a.id,value:a}),e(R.deleteMap,{mapName:"deliveringMessages",key:s.id}),t.config.settings.linkPreviewEnabled&&await o(z.handleLinkPreviews,[a]),a.roomId===t.selectedRoomId&&e(R.replaceMessage,{message:a,targetMessageId:s.id}),e(R.updateRoom,{id:a.roomId,updatedAt:a.createdAt,lastMessage:a}),o(z.aggregateRoomsAndFolders),e(R.deleteMap,{mapName:"processingMessages",key:a.id}),a):void 0}catch(n){throw s.status=Ue.Failed,e(R.updateMessage,s),e(R.deleteMap,{mapName:"deliveringMessages",key:s.id}),n}finally{t.rwlock.unlock()}},async[z.batchSendMessage]({state:t},e){await t.axios.post("/messages/batch",e)},async[z.recallMessage]({state:t,commit:e},o){var i;const{roomId:s}=o;if(!s)return;const{data:{result:n}}=await t.axios.post(`/rooms/${s}/message`,o),a=fe.createReactive(n);if(!a)return;const r=t.rooms[`${s}`];r&&((i=r.lastMessage)==null?void 0:i.id)===a.id&&e(R.updateRoom,{id:s,lastMessage:a}),e(R.replaceMessage,{targetMessageId:a.id,message:a})},async[z.hideMessage]({state:t,commit:e},o){const{roomId:s,messageIds:n}=o;!s||!n||n.length===0||(await t.axios.post("/messages/user-delete",{room:s,messages:n}),e(R.deleteMessages,n))},async[z.deleteMessage]({state:t,commit:e},o){const{roomId:s,messageId:n}=o;!s||!n||(await t.axios.delete(`/rooms/${s}/messages/${n}`),e(R.deleteMessages,[n]))},async[z.uploadMedia]({state:t,commit:e},{id:o,file:s,roomId:n,teamId:a}){const r=new FormData;r.append("file",s),r.append("extra",JSON.stringify({roomID:n,teamID:a}));const{data:{result:{_id:i}}}=await t.axios.post(`/files/${n}`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:l=>{const{total:u}=l;u&&e(R.updateField,{key:"uploadProgresses",value:{[o]:l.loaded/u}})}});return`${t.config.domain}/files/${n}/${i}`},async[z.uploadImage]({dispatch:t},{image:e,file:o,roomId:s,teamId:n}){if(o.size>1024*1024)try{const r=await Ao(o,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),i=await Promise.all([t(z.uploadMedia,{id:`${e.id}-original`,file:o,roomId:s,teamId:n}),t(z.uploadMedia,{id:`${e.id}-thumbnail`,file:r,roomId:s,teamId:n})]);return{originalUrl:i[0],thumbnailUrl:i[1]}}catch(r){console.error(r)}const a=await t(z.uploadMedia,{id:`${e.id}-original`,file:o,roomId:s,teamId:n});return{originalUrl:a,thumbnailUrl:a}},async[z.fetchLinkPreview](t,e){const{data:o}=await mt.get(encodeURI(`https://url.imkit.io/?url=${e}`));return o},async[z.handleLinkPreviews]({state:t,commit:e,dispatch:o},s){const n=Array.from(new Set(s.flatMap(i=>(i==null?void 0:i.urls)||[]).filter(i=>!t.linkPreviews[i])));if(n.length===0)return;const a={};(await Promise.allSettled(n.map(i=>o(z.fetchLinkPreview,i)))).forEach((i,l)=>{i.status==="fulfilled"&&(a[n[l]]=i.value)}),e(R.updateField,{key:"linkPreviews",value:a})},async[z.fetchVideoBlob]({state:t},e){const{data:o}=await t.axios.get(e,{responseType:"blob"});return o},async[z.navigateToMessage]({state:t,commit:e,dispatch:o},s){var a;const n=t.messageMultiLists.get(t.selectedRoomId);if((a=n==null?void 0:n.main)!=null&&a.contains(s))e(R.setState,{navigationTargetId:s});else{const r=t.selectedRoomId;if(!r)return;await o(z.loadMessages,{roomId:r,targetMessageId:s}),await e(R.setState,{navigationTargetId:s})}},async[z.updateRoomPrefs]({state:t,commit:e,dispatch:o},{roomId:s,prefs:n}){await t.axios.post(`/roomPrefs/${s}`,n);const a=t.rooms[s];a&&(e(R.updateRoom,{id:s,pref:{...a.pref,...n}}),o(z.aggregateRoomsAndFolders))},async[z.fetchPrefs]({state:t,commit:e}){const{data:{result:o}}=await t.axios.get("/me/pref"),s={},n=[],a={},r={},i={};for(const l of o)if(l.key==="folders-meta")for(const u of l.data)a[u.key]=u.name,n.push(u.key);else{if(l.key==="blackList")continue;r[l.key]=l.data.children.map(u=>u.id)}for(const l of n){s[l]=new it(l,a[l],r[l]||[]);for(const u of r[l]||[])i[u]=!0}e(R.setState,{folders:s,sortedFolderIds:n,roomIdsInFolders:i})},async[z.fetchRoomsInFolders]({state:t,dispatch:e}){const o=Object.keys(t.roomIdsInFolders).length;for(;t.numberOfFetchedRooms<o;)await e(z.fetchRooms,{pageSize:200});const s=Fo(6),n=Object.keys(t.roomIdsInFolders).filter(a=>!t.rooms[a]).map(a=>s(()=>e(z.fetchRoom,a)));await Promise.allSettled(n)},async[z.updatePref]({state:t},{key:e,value:o}){return await t.axios.post(`/me/pref/${e}`,o)},async[z.deletePref]({state:t},e){return await t.axios.delete(`/me/pref/${e}`)},async[z.updateFolder]({state:t,dispatch:e,commit:o},{folderKey:s,name:n}){const a=Object.keys(t.selectedRoomIdsForCreateFolder).filter(i=>t.selectedRoomIdsForCreateFolder[i]);await e(z.updatePref,{key:"folders-meta",value:t.sortedFolderIds.map(i=>t.folders[i]).filter(i=>!!i&&i.id!==s).map(i=>({key:i.id,name:i.name})).concat([{key:s,name:n}]).sort((i,l)=>i.key.localeCompare(l.key))}),await e(z.updatePref,{key:s,value:{children:a.map(i=>({id:i,type:"room"}))}}),t.folders[s]&&o(R.updateField,{key:"roomIdsInFolders",value:t.folders[s].roomIds.reduce((i,l)=>(i[l]=!1,i),{})});const r=new it(s,n,a);o(R.updateField,{key:"folders",value:{[s]:r}}),o(R.updateField,{key:"roomIdsInFolders",value:a.reduce((i,l)=>(i[l]=!0,i),{})}),o(R.setState,{sortedFolderIds:[...new Set([...t.sortedFolderIds,s])],selectedRoomIdsForCreateFolder:{}}),e(z.aggregateRoomsAndFolders)},async[z.removeFolder]({state:t,dispatch:e},o){await e(z.deletePref,o),await e(z.updatePref,{key:"folders-meta",value:t.sortedFolderIds.map(s=>t.folders[s]).filter(s=>!!s&&s.id!==o).map(s=>({key:s.id,name:s.name}))}),e(z.handlePrefDeleteFromSocket)},async[z.handlePrefChangeFromSocket]({state:t,commit:e,dispatch:o},s){const{key:n,data:a}=s;if(n==="folders-meta"){const r={},i=[];for(const{key:l,name:u}of a){const h=t.folders[l]||new it(l,u,[]);r[l]=h,i.push(l)}e(R.setState,{folders:r,sortedFolderIds:i})}else{const{id:r,name:i}=t.folders[n];if(r){const l=a.children.map(h=>h.id),u=new it(r,i,l);e(R.updateField,{key:"folders",value:{[n]:u}}),e(R.updateField,{key:"roomIdsInFolders",value:l.reduce((h,p)=>(h[p]=!0,h),{})})}}o(z.aggregateRoomsAndFolders)},async[z.handlePrefDeleteFromSocket]({state:t,commit:e,dispatch:o},s){const n=t.folders[s];if(!n)return;const a={};for(const r of n.roomIds)a[r]=!1;e(R.deleteField,{key:"folders",value:s}),e(R.updateField,{key:"roomIdsInFolders",value:a}),e(R.setState,{sortedFolderIds:t.sortedFolderIds.filter(r=>r!==s)}),o(z.aggregateRoomsAndFolders)},async[z.aggregateRoomsAndFolders]({state:t,commit:e}){const o=new Set(Object.keys(t.rooms));let s=Array.from(o).map(r=>t.rooms[r]).filter(r=>{var i;return r&&!t.roomIdsInFolders[r.id]&&!((i=r.pref)!=null&&i.hidden)});const n=t.sortBy,a=t.sortUnreadFirst;s=s.sort((r,i)=>{var p,b,k;if(a!==0){const C=r.numberOfUnread>0,w=i.numberOfUnread>0;if(C!==w)return a===1?w?1:-1:C?1:-1}if(!!((p=r.pref)!=null&&p.sticky)!=!!((b=i.pref)!=null&&b.sticky))return(k=r.pref)!=null&&k.sticky?-1:1;const l=n.startsWith("-"),u=l?n.substring(1):n;let h=0;if(u==="lastMessage")h=r.updatedAt-i.updatedAt;else if(u==="name"){const C=r.name||"",w=i.name||"";h=C.localeCompare(w)}return l?-h:h}),e(R.setState,{sortedRooms:s})},async[z.removeMembers]({state:t,commit:e},{roomId:o,uids:s}){var a;if(t.rooms[o]&&(await t.axios.post(`/rooms/${o}/delete/members`,{systemMessage:!0,members:s}),s.includes(t.uid))){e(R.deleteRoom,o);const r=(a=t.sortedRooms.find(i=>i.numberOfUnread===0))==null?void 0:a.id;r&&e(R.setState,{selectedRoomId:r})}},async[z.handleTypingFromSocket]({state:t,commit:e},o){const{room:s,sender:n,senderInfo:a}=o;if(s!==t.selectedRoomId||n===t.uid)return;e(R.updateField,{key:"users",value:{[a._id]:new Be(a)}});const r=t.isTyping[n];r!==void 0&&clearTimeout(r);const i=setTimeout(()=>{e(R.deleteField,{key:"isTyping",value:n})},6e3);e(R.updateField,{key:"isTyping",value:{[n]:i}})},async[z.insertUnreadMessage]({state:t,commit:e}){var r,i,l,u,h,p;const o=t.rooms[t.selectedRoomId];if(!o)return;const s=o.lastReadMessageId[t.uid];if(!s)return;const n=(i=(r=t.messageMultiLists.get(t.selectedRoomId))==null?void 0:r.main)==null?void 0:i.finds(s);if(!n||n.senderId===t.uid||((l=o.lastMessage)==null?void 0:l.id)===s||((p=(h=(u=t.messageMultiLists.get(t.selectedRoomId))==null?void 0:u.main)==null?void 0:h.tail)==null?void 0:p.id)===s)return;const a=fe.fromPayload({roomId:t.selectedRoomId,messageType:E.Announcement,message:_e.global.t("unreadMessages"),createdAtMS:n.createdAt+1},t.uid);a&&e(R.pushMessage,a)},async[z.translate]({state:t},e){if(t.translationCache.has(e))return t.translationCache.get(e)||e;let o=navigator.language.split("-")[0];const s={am:"am",ar:"ar",eu:"eu",bn:"bn","en-gb":"en-GB","pt-br":"pt-BR",bg:"bg",ca:"ca",chr:"chr",hr:"hr",cs:"cs",da:"da",nl:"nl",en:"en",et:"et",fil:"fil",fi:"fi",fr:"fr",de:"de",el:"el",gu:"gu",iw:"iw",hi:"hi",hu:"hu",is:"is",id:"id",it:"it",ja:"ja",kn:"kn",ko:"ko",lv:"lv",lt:"lt",ms:"ms",ml:"ml",mr:"mr",no:"no",pl:"pl","pt-pt":"pt-PT",ro:"ro",ru:"ru",sr:"sr","zh-cn":"zh-CN",sk:"sk",sl:"sl",es:"es",sw:"sw",sv:"sv",ta:"ta",te:"te",th:"th","zh-tw":"zh-TW",tr:"tr",ur:"ur",uk:"uk",vi:"vi",cy:"cy"};s[navigator.language.toLowerCase()]&&(o=s[navigator.language.toLowerCase()]);const n=await fetch("https://translation.googleapis.com/language/translate/v2",{method:"POST",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded"}),body:new URLSearchParams({q:e,key:t.config.translationApiKey,target:o}),redirect:"follow"}).then(a=>a.json()).then(a=>{var r;return(r=a.data)==null?void 0:r.translations[0].translatedText});return t.translationCache.set(e,n),n},async[z.searchRooms]({state:t,commit:e},o){if(t.isRequesting[He.Search])return;const s=Object.values(we),{data:{result:n}}=await t.axios.post(He.Search,{type:s,keyword:o}),a={},r={},i={},l=new Map;for(const p of s)n[p].forEach(b=>{p===we.Messages&&(l.set(b.room._id,b.messages),b=b.room),a[b._id]=new ct(b,t.uid),i[p]||(i[p]=[]),i[p].push(a[b._id]);for(const k of b.members)r[k.id]||(r[k.id]=new Be(k))});for(const p of Object.values(t.folders))p.name.includes(o)&&(i[we.RoomPrefFolder]||(i[we.RoomPrefFolder]=[]),i[we.RoomPrefFolder].push(p));const u=Object.keys(i),h=u.length>0?u[0]:we.RoomName;e(R.updateField,{key:"rooms",value:a}),e(R.updateField,{key:"users",value:r}),e(R.setState,{searchRooms:i,searchType:h,searchKeyword:o,searchedMessageIds:l})},async[z.subscribe]({state:t}){if(!t.config.firebaseConfig||!t.config.firebaseVapidKey||await Notification.requestPermission()!=="granted")return;const o=Io(t.config.firebaseConfig),s=Ro(o),n=await So(s,{vapidKey:t.config.firebaseVapidKey});if(!n)return;let a=localStorage.getItem("imkit-deviceId");a||(a=_t(),localStorage.setItem("imkit-deviceId",a)),await t.axios.post(He.Subscribe,{type:"fcm",token:n,deviceId:a})},async[z.unsubscribe]({state:t}){let e=localStorage.getItem("imkit-deviceId");e||(e=_t(),localStorage.setItem("imkit-deviceId",e)),await t.axios.post(He.Unsubscribe,{type:"fcm",deviceId:e})},async[z.removeRoomFromFolder]({state:t,commit:e,dispatch:o},s){if(!t.roomIdsInFolders[s])return;const n=t.folders[t.selectedFolderId];if(!n)return;const a=n.id,r=n.roomIds.filter(l=>l!==s);await o(z.updatePref,{key:a,value:{children:r.map(l=>({id:l,type:"room"}))}});const i=new it(a,n.name,r);e(R.updateField,{key:"folders",value:{[a]:i}}),e(R.updateField,{key:"roomIdsInFolders",value:{[s]:!1}}),o(z.aggregateRoomsAndFolders)},async[z.addRoomToFolder]({state:t,commit:e,dispatch:o},{roomId:s,folderId:n}){const a=t.folders[n];if(!a)return;const r=Array.from(new Set([...a.roomIds,s]));await o(z.updatePref,{key:n,value:{children:r.map(l=>({id:l,type:"room"}))}});const i=new it(n,a.name,r);e(R.updateField,{key:"folders",value:{[n]:i}}),e(R.updateField,{key:"roomIdsInFolders",value:{[s]:!0}}),o(z.aggregateRoomsAndFolders)},async[z.toggleNotification]({state:t,commit:e},o){const s=t.rooms[o];s&&(s.muted?await t.axios.delete(`/me/mute/${o}`):await t.axios.post(`/me/mute/${o}`),e(R.updateRoom,{id:o,muted:!s.muted}))},async[z.translateMessage]({state:t,commit:e,dispatch:o},s){if(t.config.translationApiKey&&s.type===E.Text&&s.senderId!==t.uid){const n=s.text;try{const a=await o(z.translate,n);s.translatedText=a!==n?a:null,e(R.replaceMessage,{message:s,targetMessageId:s.id})}catch(a){console.error(a)}}},async[z.blockUser]({state:t,commit:e},{roomId:o,uid:s}){await t.axios.post(`/blockStatus/room/${o}/${s}`),e(R.updateField,{key:"blockedUsers",value:{[s]:!0}})},async[z.unblockUser]({state:t,commit:e},{roomId:o,uid:s}){await t.axios.delete(`/blockStatus/room/${o}/${s}`),e(R.deleteField,{key:"blockedUsers",value:s})},async[z.getBlockList]({state:t,commit:e},o){const s=await t.axios.get(`/blockStatus/room/${o}`),n={};for(const a of s.data.result.data)!a.blockee||a.unblockAt||(n[a.blockee.id]=!0);e(R.updateField,{key:"blockedUsers",value:n})},async[z.hideMessagesFromUserInRoom]({state:t},e){await t.axios.post("/messages/user-delete/all-in-room",{room:e})},async[z.sendReaction]({state:t},{messageId:e,reaction:o}){await t.axios.post(`/messages/${e}/reaction`,{reaction:o})},async[z.deleteReaction]({state:t},{messageId:e,reaction:o}){const s={reaction:o};await t.axios.delete(`/messages/${e}/reaction`,{params:s})},async[z.handleAIStreamingFromSocket]({state:t,commit:e},o){var l;const{messageId:s,room:n,sender:a,text:r,senderInfo:i}=o;if(!s||!n||!r){console.warn("Invalid AI streaming payload:",o);return}if(n===t.selectedRoomId){await t.rwlock.writeLock();try{const u=t.messageMultiLists.get(n),h=(l=u==null?void 0:u.main)==null?void 0:l.finds(s);if(h&&h.type===E.AIStreaming){const p=h,b=new es({_id:s,messageType:E.AIStreaming,sender:i||{_id:a},room:n,text:p.text+r,createdAtMS:p.createdAt,updatedAtMS:Date.now()});e(R.replaceMessage,{targetMessageId:s,message:b})}else{const p=new es({_id:s,messageType:E.AIStreaming,sender:i||{_id:a},room:n,text:r,createdAtMS:Date.now(),updatedAtMS:Date.now()});e(R.pushMessage,p)}}finally{t.rwlock.unlock()}}},async[z.fetchRoomContent]({state:t,commit:e},{roomId:o,fileTypes:s}){const{data:n}=await t.axios.get(`/files/room/${o}?fileTypes=${s}`);e(R.setState,{chatRoomContent:n.result.data??[]})},async[z.fetchPresignedUrl]({state:t},{bucketName:e,fileId:o}){const{data:s}=await t.axios.get(`/files/${e}/${o}?signedUrlOnly=true`);return s.result.url}},NI={doubleCount:t=>t.count*2,roomsInSelectedFolder:t=>{const{selectedFolderId:e}=t,o=t.folders[e];return o?o.roomIds.map(n=>t.rooms[n]).filter(n=>t.roomTag?n&&n.roomTags.includes(t.roomTag):n).sort((n,a)=>{var r,i,l;return!!((r=n.pref)!=null&&r.sticky)==!!((i=a.pref)!=null&&i.sticky)?a.updatedAt-n.updatedAt:(l=n.pref)!=null&&l.sticky?-1:1}):[]}};class Gt{constructor(e=null){O(this,"head");O(this,"tail");O(this,"main");O(this,"length");this.head=e,this.tail=e,this.main=e,this.length=e?1:0}numberOfMessages(){let e=0,o=this.head;for(;o;)e+=o.length,o=o.next;return e}concate(e){var o;(o=this.main)==null||o.concate(e)}unshift(e){var o;(o=this.main)==null||o.unshift(e)}insert(e){if(this.length===0){this.head=this.tail=this.main=e,this.length=1;return}if(e.length===0)return;let o=this.tail;for(;o&&o.head.createdAt>e.head.createdAt;)o=o.prev;o?(o===this.tail&&(this.tail=e),e.next=o.next,e.next&&(e.next.prev=e),o.next=e,e.prev=o):(e.next=this.head,e.next&&(e.next.prev=e),this.head=e),this.main=e,this.length++}merge(){if(this.length<=1)return;let e=this.tail;for(;e;){if(e.prev&&e.canCombine(e.prev)){e.combine(e.prev),e.prev===this.main&&(this.main=e),e.prev=e.prev.prev,e.prev?e.prev.next=e:this.head=e,this.length--;break}e=e.prev}e&&this.merge()}isValid(){if(this.head&&this.head.prev||this.tail&&this.tail.next)return!1;let e=0,o=this.head;for(;o;){if(o.prev&&o.prev.next!==o||o.next&&o.next.prev!==o)return!1;e++,o=o.next}return e===this.length}}const PI={[R.increment](t){t.count++},[R.setState](t,e){Object.assign(t,e)},[R.updateField](t,e){const{key:o,value:s}=e;Object.assign(t[o],s)},[R.deleteField](t,e){const{key:o,value:s}=e;delete t[o][s]},[R.updateRoom](t,e){const{id:o}=e,s=t.rooms[o];s&&Object.assign(s,e)},[R.updateMessage](t,e){var n,a;const{id:o}=e,s=(a=(n=t.messageMultiLists.get(e.roomId))==null?void 0:n.main)==null?void 0:a.finds(o);s&&Object.assign(s,e)},[R.updateLastRead](t,e){const{roomId:o,uid:s,messageId:n}=e,a=t.rooms[o];a&&(a.lastReadMessageId[s]=n)},[R.pushMessage](t,e){var o,s;e.roomId===t.selectedRoomId&&((s=(o=t.messageMultiLists.get(e.roomId))==null?void 0:o.main)==null||s.append(e))},[R.replaceMessage](t,e){var n,a,r,i;const{targetMessageId:o,message:s}=e;s.roomId===t.selectedRoomId&&((a=(n=t.messageMultiLists.get(s.roomId))==null?void 0:n.main)==null||a.remove(o),(i=(r=t.messageMultiLists.get(s.roomId))==null?void 0:r.main)==null||i.append(s))},[R.deleteMessages](t,e){e.forEach(o=>{var s,n;(n=(s=t.messageMultiLists.get(t.selectedRoomId))==null?void 0:s.main)==null||n.remove(o)})},[R.clearChatRoom](t){t.replyId="",t.navigationTargetId="",t.isTyping={},t.isSearchInRoomMode=!1,t.messageSearchKeyword="",t.blockedUsers={}},[R.deleteRoom](t,e){delete t.rooms[e],delete t.roomIdsInFolders[e],delete t.selectedRoomIdsForCreateFolder[e],t.sortedRooms=t.sortedRooms.filter(o=>o.id!==e)},[R.setMap](t,e){const{mapName:o,key:s,value:n}=e;t[o].set(s,n)},[R.deleteMap](t,e){const{mapName:o,key:s}=e;t[o].delete(s)},[R.insertMessageLinkedList](t,e){const o=t.selectedRoomId;let s=t.messageMultiLists.get(o);s?(s.insert(e),s.merge()):(s=new Gt(e),t.messageMultiLists.set(o,s))},[R.concateMessageLinkedList](t,e){const o=t.selectedRoomId;let s=t.messageMultiLists.get(o);s?(s.concate(e),s.merge()):(s=new Gt(e),t.messageMultiLists.set(o,s))},[R.unshiftMessageLinkedList](t,e){const o=t.selectedRoomId;let s=t.messageMultiLists.get(o);s?(s.unshift(e),s.merge()):(s=new Gt(e),t.messageMultiLists.set(o,s))}},to={state:zI,mutations:PI,getters:NI,actions:OI,namespaced:!0};var At=(t=>(t.updateTeams="updateTeams",t.setTeams="setTeams",t.setCurrentTeamId="setCurrentTeamId",t))(At||{}),Ke=(t=>(t.setTeams="setTeams",t.updateTeams="updateTeams",t.setCurrentTeamId="setCurrentTeamId",t.setTeamMembers="setTeamMembers",t))(Ke||{});const EI={[At.updateTeams]({commit:t},e){t(Ke.updateTeams,e)},[At.setTeams]({commit:t},e){t(Ke.setTeams,e)},[At.setCurrentTeamId]({commit:t},e){t(Ke.setCurrentTeamId,e)}},UI={[Ke.setTeams](t,e){t.teams=e},[Ke.updateTeams](t,e){t.teams=e},[Ke.setCurrentTeamId](t,e){t.currentTeamId=e},[Ke.setTeamMembers](t,e){t.teamMembers=e}},LI={teams:[],currentTeamId:"",teamMembers:[]},jI={state:LI,mutations:UI,actions:EI,namespaced:!0},BI=[],nt=_o({plugins:BI,modules:{imkit:to,tribo:jI}});he.extend(Po);he.extend(Eo);var E=(t=>(t.Text="text",t.Image="image",t.Sticker="sticker",t.Video="video",t.File="file",t.Template="template",t.Flex="flex",t.Location="location",t.Audio="audio",t.Recall="recall",t.JoinRoom="joinRoom",t.LeaveRoom="leaveRoom",t.AddMember="addMember",t.DeleteMember="deleteMember",t.AddMembers="addMembers",t.Announcement="announcement",t.Typing="typing",t.AIStreaming="ai_streaming",t))(E||{}),Ue=(t=>(t.Sending="sending",t.Delivered="delivered",t.Failed="failed",t))(Ue||{});class fe{constructor(e){O(this,"id");O(this,"roomId");O(this,"senderId");O(this,"type");O(this,"status");O(this,"createdAt");O(this,"updatedAt");O(this,"groupId");O(this,"dateId");O(this,"reactions");O(this,"prev",null);O(this,"next",null);O(this,"payload",null);const{_id:o,room:s,sender:n,messageType:a,createdAtMS:r,updatedAtMS:i,extra:l,reactions:u}=e;this.id=o,this.roomId=s,this.senderId=(n==null?void 0:n._id)||"",a==="line"?this.type=l.type:this.type=a,this.status="delivered",this.createdAt=r,this.updatedAt=i,this.groupId=`${he(r).startOf("minute").unix()}-${this.senderId}`,this.dateId=he.tz(r).startOf("day").unix(),this.reactions=u??[]}_string(e,o){var n,a;let s=_e.global.t("message");switch(this.type){case"image":s=_e.global.t("image");break;case"sticker":s=_e.global.t("sticker");break;case"video":s=_e.global.t("video");break;case"file":s=_e.global.t("file");break;case"location":s=_e.global.t("location");break;case"audio":s=_e.global.t("audio");break;case"recall":return this.senderId===e?_e.global.t("youUnsentMessage"):_e.global.t("someoneUnsentMessage",[((n=o[this.senderId])==null?void 0:n.nickname)??""])}return this.senderId===e?_e.global.t("youSent",[s]):_e.global.t("someoneSent",[((a=o[this.senderId])==null?void 0:a.nickname)??"",s])}get string(){const{state:{imkit:{uid:e,users:o}}}=nt;return this._string(e,o)}get isIncoming(){return!this.isOutgoing}get isOutgoing(){var s;const{state:{imkit:{rooms:e,uid:o}}}=nt;return this.senderId===o||((s=e[this.roomId])==null?void 0:s.isOutgoingGroupSender[this.senderId])}get isSystem(){return new Set(["recall","joinRoom","leaveRoom","addMember","deleteMember","addMembers","announcement"]).has(this.type)}static create(e){if(!e)return null;switch(e.messageType){case"text":return new zt(e);case"image":return new VI(e);case"sticker":return new Ss(e);case"video":return new qI(e);case"file":return new WI(e);case"template":return new HI(e);case"flex":return new KI(e);case"location":return new GI(e);case"audio":return new JI(e);case"ai_streaming":return new es(e);case"announcement":return new zt(e);case"addMember":return new Wt(e);case"deleteMember":return new Wt(e);case"addMembers":return new Wt(e);case"line":switch(e.extra!=="object"&&(e.extra=JSON.parse(e.extra)),e.extra.type){case"sticker":return new Ss(e);default:return new fe(e)}default:return new fe(e)}}static createReactive(e){const o=fe.create(e);return o?js(o):null}static fromPayload(e,o){const s=Date.now(),{roomId:n}=e,a={_id:_t(),room:n,sender:{_id:o},createdAtMS:s,updatedAtMS:s,...e},r=fe.createReactive(a);return r&&(r.payload=e),r}}const tt=class tt extends fe{constructor(o){super(o);O(this,"text");O(this,"translatedText");O(this,"replyId");O(this,"urls");const{message:s,reply:n}=o;this.text=s??"",this.translatedText=null,this.replyId=(n==null?void 0:n._id)??null;try{this.urls=Array.from(new Set(tt.autolinker.parse(s).map(a=>typeof a.getUrl=="function"?a.getUrl():"").filter(a=>a!=="")))}catch(a){this.urls=[],console.log(o),console.error(a)}}get string(){return Do(this.html).text()}get html(){return tt.autolinker.link(tt.md.render(this.text))}static linkfy(o){try{return tt.autolinker.link(o.replaceAll(`
`,"<br>"))}catch(s){return console.error(s),o}}};O(tt,"autolinker",new Oo({className:"underline",email:!1,phone:!1,stripPrefix:!1,stripTrailingSlash:!1,mention:"imkit",replaceFn:function(o){switch(o.getType()){case"url":return!0;case"mention":{if(!nt)return`@${o.getMention()}`;const s=o.getMention(),n=nt.state.imkit.users[s];return n?`<span class="cursor-pointer text-blue-500" data-uid="${s}">@${n.nickname}</span>`:`@${o.getMention()}`}}}})),O(tt,"md",(()=>{const o=new No({html:!0,breaks:!0}),s=o.renderer.rules.link_open||function(n,a,r,i,l){return l.renderToken(n,a,r)};return o.renderer.rules.link_open=function(n,a,r,i,l){return n[a].attrSet("target","_blank"),s(n,a,r,i,l)},o})());let zt=tt;class es extends fe{constructor(o){super(o);O(this,"text");const{text:s}=o;this.text=s}}class VI extends fe{constructor(o){super(o);O(this,"images");const{images:s,width:n,height:a,thumbnailUrl:r,originalUrl:i}=o;s&&s.length>0?this.images=s:this.images=[{id:i,width:n,height:a,thumbnailUrl:r,originalUrl:i}]}}class Ss extends fe{constructor(o){super(o);O(this,"stickerId");O(this,"stickerUrl");const{sticker:s,extra:n}=o;s?zo(s)?(this.stickerId="",this.stickerUrl=s):(this.stickerId=s,this.stickerUrl=""):(this.stickerId="",this.stickerUrl=`https://stickershop.line-scdn.net/stickershop/v1/sticker/${n.stickerId}/ios/sticker.png`)}}class qI extends fe{constructor(o){super(o);O(this,"video");const{id:s,width:n,height:a,thumbnailUrl:r,originalUrl:i,duration:l,thumbnailFile:u,video:h}=o;h?this.video=h:this.video={id:s||i,width:n,height:a,thumbnailUrl:r,originalUrl:i,duration:l,thumbnailFile:u}}}var Ge=(t=>(t.Buttons="buttons",t.Confirm="confirm",t.Carousel="carousel",t.ImageCarousel="image_carousel",t))(Ge||{});class HI extends fe{constructor(o){super(o);O(this,"template");O(this,"templateType");const{template:s}=o;try{this.template=typeof s=="object"?s:JSON.parse(s);const{type:n}=this.template;this.templateType=n}catch(n){console.log(o),console.error(n),this.template={},this.templateType="buttons"}}}var ts=(t=>(t.Bubble="bubble",t.Carousel="carousel",t))(ts||{});class KI extends fe{constructor(o){super(o);O(this,"contents");O(this,"flexType");const{contents:s}=o;try{this.contents=typeof s=="object"?s:JSON.parse(s);const{type:n}=this.contents;this.flexType=n}catch(n){console.log(o),console.error(n),this.contents={},this.flexType="bubble"}}}class GI extends fe{constructor(o){super(o);O(this,"address");O(this,"latitude");O(this,"longitude");const{message:s,latitude:n,longitude:a}=o;this.address=s,this.latitude=n,this.longitude=a}}class Wt extends fe{constructor(o){super(o);O(this,"members");switch(o.messageType){case"addMember":this.members=[new Be(o.member)];break;case"deleteMember":this.members=o.extra.members.map(s=>new Be(s));break;case"addMembers":this.members=o.extra.invitees.map(s=>new Be(s));break;default:this.members=[]}}}class WI extends fe{constructor(o){super(o);O(this,"url");O(this,"mimeType");O(this,"fileName");O(this,"bytes");O(this,"fileExtension");const{originalUrl:s,extra:n}=o;this.url=s;const{mimeType:a,fileName:r,bytes:i,fileExtension:l}=typeof n=="object"?n:JSON.parse(n);this.mimeType=a,this.fileName=r,this.bytes=i,this.fileExtension=l}}class JI extends fe{constructor(o){super(o);O(this,"url");O(this,"mimeType");O(this,"fileName");O(this,"bytes");O(this,"fileExtension");O(this,"duration");const{originalUrl:s,extra:n,duration:a}=o;this.url=s;const{mimeType:r,fileName:i,bytes:l,fileExtension:u}=typeof n=="object"?n:JSON.parse(n);this.mimeType=r,this.fileName=i,this.bytes=l,this.fileExtension=u,this.duration=a}}const YI={class:"flex gap-3"},XI={class:"flex flex-col gap-1"},ZI={class:"text-sm font-bold text-gray-600 dark:text-gray-300"},QI={class:"multiline-ellipsis text-xs text-gray-500 dark:text-gray-300"},eR={key:0,class:"ml-auto h-10 w-10 rounded-sm object-cover"},tR=["innerHTML"],sR=["innerHTML"],oR={key:2,class:"mt-1 break-words text-gray-400"},nR={key:3,class:"my-1 flex flex-col gap-3"},aR=["onClick"],rR={class:"align-center flex grow flex-col justify-center gap-0.5 overflow-hidden"},iR={class:"ellipsis text-sm font-bold"},lR={class:"multiline-ellipsis text-xs"},cR=["src"],dR=N({__name:"TextMessageContent",props:{message:{}},setup(t){const e=(w,x)=>{if(!x)return w;const y=p(x),T=new RegExp(`(?<![a-zA-Z0-9_])${y}(?![a-zA-Z0-9_])`,"uig");return w.replace(/>(.*?)</g,(M,U)=>`>${U.replace(T,P=>`<span class="bg-amber-400 text-white">${P}</span>`)}<`)},o=t,s=Z(),n=$(()=>{var w,x;return(x=(w=s.state.imkit.messageMultiLists.get(s.state.imkit.selectedRoomId))==null?void 0:w.main)==null?void 0:x.map.get(o.message.replyId)}),a=$(()=>{const w=n.value;return w?s.state.imkit.users[w.senderId]:null}),r=$(()=>o.message.isIncoming),i=$(()=>{if(!s.state.imkit.config.settings.linkPreviewEnabled)return[];const{urls:w}=o.message;return w?w.map(x=>s.state.imkit.linkPreviews[x]).filter(x=>x):[]}),l=$(()=>{if(n.value.type===E.Text)return n.value.text;if(n.value.type===E.Image){const{t:w}=Le();return{[E.Text]:w("text"),[E.Image]:w("image"),[E.Video]:w("video"),[E.Sticker]:w("sticker")}[n.value.type]}return""}),u=$(()=>{if(n.value.type===E.Image)return n.value.images[0]}),h=w=>{const x=w.target;if(x.tagName==="SPAN"&&x.dataset.uid){const y=s.state.imkit.users[x.dataset.uid];if(!y)return;const{open:T}=Ce({component:eo,attrs:{url:y.avatarUrl??"",name:y.nickname??""}});T()}};function p(w){return w.replace(/[.*+?^${}()|[\\]\\\\]/g,"\\\\$&")}const b=$(()=>{const w=s.state.imkit.messageSearchKeyword;return e(o.message.html,w)}),k=w=>{window.open(w,"_blank")},C=()=>{s.dispatch("imkit/navigateToMessage",o.message.replyId)};return(w,x)=>{var T,M,U;const y=ft("src");return d(),g(V,null,[n.value?(d(),g("div",{key:0,class:"flex flex-col gap-2",onClick:C},[c("div",YI,[v(Pe,{class:"row-span-2 h-6 w-6 shrink-0 rounded-lg text-sm",url:((T=a.value)==null?void 0:T.avatarUrl)??"",name:((M=a.value)==null?void 0:M.nickname)??""},null,8,["url","name"]),c("div",XI,[c("div",ZI,f((U=a.value)==null?void 0:U.nickname),1),c("div",QI,f(l.value),1)]),u.value?de((d(),g("img",eR,null,512)),[[y,u.value.thumbnailUrl]]):I("",!0)]),x[0]||(x[0]=c("div",{class:"-mx-4 h-px bg-gray-200 dark:bg-zinc-600"},null,-1)),c("div",{class:"prose prose-sm dark:prose-invert",innerHTML:b.value},null,8,tR)])):(d(),g("div",{key:1,class:"prose prose-sm dark:prose-invert prose-p:my-0 prose-p:leading-6 prose-ol:my-0",onClick:h,innerHTML:b.value},null,8,sR)),r.value&&t.message.translatedText?(d(),g("div",oR,f(w.$t("translation"))+": "+f(t.message.translatedText),1)):I("",!0),i.value.length>0?(d(),g("div",nR,[(d(!0),g(V,null,ne(i.value,_=>(d(),g("div",{key:_.url,class:"flex cursor-pointer items-stretch justify-center gap-2",onClick:P=>k(_.url)},[x[1]||(x[1]=c("div",{class:"my-0.5 w-0.5 shrink-0 rounded-full bg-blue-300"},null,-1)),c("div",rR,[c("div",iR,f(_.title),1),c("div",lR,f(_.description||w.$t("tapOpen")),1)]),_.images.length>0?(d(),g("img",{key:0,src:_.images[0],class:"my-auto h-12 w-12 shrink-0 rounded-sm object-cover"},null,8,cR)):I("",!0)],8,aR))),128))])):I("",!0)],64)}}}),et=Me(dR,[["__scopeId","data-v-95a8bd86"]]),uR={key:0,class:"relative flex items-center justify-center"},mR={class:"h-auto max-h-[75vh] w-auto max-w-[90vw] object-contain",alt:"",style:{"object-fit":"contain"}},gR={key:0,class:"absolute h-auto max-h-[75vh] w-auto max-w-[90vw] object-contain",alt:"",style:{"object-fit":"contain"}},hR={key:1,class:"mt-4 flex gap-4"},fR=N({__name:"ImageModal",props:{image:{}},setup(t){const e=Se(),o=Z(),s=$(()=>o.state.imkit.downloadProgresses),n=$(()=>o.state.imkit.imageCache),a=r=>{const i=document.createElement("a"),l=n.value.get(r.originalUrl);i.href=l;const u=l.split(";")[0].replace("data:","").split("/")[1];i.download=`download.${u}`,i.click()};return(r,i)=>{const l=ft("src");return d(),A(m(ze),{class:"flex items-center justify-center p-4","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[t.image?(d(),g("div",uR,[de(c("img",mR,null,512),[[l,t.image.thumbnailUrl]]),t.image.thumbnailUrl!==t.image.originalUrl?de((d(),g("img",gR,null,512)),[[l,t.image.originalUrl]]):I("",!0),(!s.value[t.image.originalUrl]||s.value[t.image.originalUrl]<1)&&t.image.thumbnailUrl!==t.image.originalUrl?(d(),g(V,{key:1},[i[2]||(i[2]=c("div",{class:"absolute inset-0 bg-gray-800/50 fill-blue-300"},null,-1)),v(m(Ot),{class:"absolute!",diameter:40,"completed-steps":s.value[t.image.originalUrl]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):I("",!0)])):I("",!0),t.image?(d(),g("div",hR,[c("button",{class:"flex grow items-center justify-center gap-1.5 rounded-lg border px-3 py-2 text-base font-normal text-white",onClick:i[0]||(i[0]=u=>a(t.image))},[v(m(as),{size:20,class:"text-white"}),K(" "+f(r.$t("download")),1)]),c("button",{class:"flex grow items-center justify-center gap-1.5 rounded-lg border px-3 py-2 text-base font-normal text-white",onClick:i[1]||(i[1]=u=>m(e).closeAll())},f(r.$t("close")),1)])):I("",!0)]),_:1})}}}),pR=["onClick"],vR=N({__name:"ImageMessageContent",props:{message:{}},setup(t){const e=t,o=Z(),s=$(()=>o.state.imkit.uploadProgresses),n=(r,i)=>{if(e.message.images.length===1){const{width:u,height:h}=i;return u<h?{width:"200px",height:`${200*h/u}px`}:{width:`${200*u/h}px`,height:"200px"}}else return r===e.message.images.length-1&&r%2===0?{width:"401px",height:"200px"}:{width:"200px",height:"200px"}},a=r=>{const{open:i}=Ce({component:fR,attrs:{image:r}});i()};return(r,i)=>{const l=ft("src");return d(),g("div",{class:B(["grid gap-px",[t.message.images.length>1?"grid-cols-2":"grid-cols-1"]])},[(d(!0),g(V,null,ne(t.message.images,(u,h)=>(d(),g("div",{key:u.thumbnailUrl,class:B(["relative flex items-center justify-center overflow-hidden rounded-lg",{"col-span-2":t.message.images.length>1&&h===t.message.images.length-1&&h%2===0}]),onClick:p=>a(u)},[de(c("img",{src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"border-0 object-cover transition",style:re(n(h,u))},null,4),[[l,u.thumbnailUrl]]),u.thumbnailUrl.startsWith("data")?(d(),g(V,{key:0},[i[0]||(i[0]=c("div",{class:"absolute inset-0 bg-gray-800/50 fill-blue-300"},null,-1)),v(m(Ot),{class:"absolute!",diameter:40,"completed-steps":s.value[`${u.id}-original`]===void 0?(s.value[`${u.id}-original`]+s.value[`${u.id}-thumbnail`])/2*100:s.value[`${u.id}-original`]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):I("",!0)],10,pR))),128))],2)}}}),bR=["src"],so=N({__name:"StickerMessageContent",props:{message:{}},setup(t){const e=t,o=$(()=>e.message.stickerUrl?e.message.stickerUrl:`/sticker/${e.message.stickerId.split("-")[0]}/${e.message.stickerId}.png`);return(s,n)=>(d(),g("img",{src:o.value,class:"h-32 w-32 border-0 object-contain"},null,8,bR))}}),$R={src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"h-full w-full border-0 object-cover transition"},yR={class:"absolute right-2 bottom-2 rounded-full bg-black/30 px-2 py-1 text-xs font-bold text-white"},kR=N({__name:"VideoMessageContent",props:{message:{}},setup(t){const e=t,o=`vp-${Math.random()}`,s=S(),n=S(),a=S(!1),r=$(()=>{const{width:h,height:p}=e.message.video;return`${h} / ${p}`}),i=Z(),l=async()=>{if(a.value)return;a.value=!0;const h=await i.dispatch("imkit/fetchVideoBlob",e.message.video.originalUrl);s.value&&(s.value.src=URL.createObjectURL(h)),n.value=Uo(o)},u=$(()=>i.state.imkit.uploadProgresses);return(h,p)=>{const b=ft("src");return d(),g("div",{class:"-mx-3 -my-2 flex max-h-[400px] max-w-[400px] cursor-pointer items-center justify-center",style:re({aspectRatio:r.value}),onClick:l},[de(c("video",{id:o,ref_key:"videoPlayer",ref:s,class:"w-dvw",controls:"",preload:"auto",autoplay:"",style:re({aspectRatio:r.value})},null,4),[[Bs,a.value]]),a.value?I("",!0):(d(),g(V,{key:0},[de(c("img",$R,null,512),[[b,t.message.video.thumbnailUrl]]),t.message.video.thumbnailUrl.startsWith("data")?(d(),g(V,{key:0},[p[0]||(p[0]=c("div",{class:"absolute inset-0 bg-gray-800/50 fill-blue-300"},null,-1)),v(m(Ot),{class:"absolute!",diameter:40,"completed-steps":u.value[t.message.video.id]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):(d(),g(V,{key:1},[v(m(rs),{class:"pointer-events-none absolute text-white",size:24}),c("div",yR,f(Math.floor(t.message.video.duration/60))+":"+f(`${Math.floor(t.message.video.duration%60)}`.padStart(2,"0")),1)],64))],64))],4)}}}),xR={class:"flex flex-col gap-0.5 font-normal"},wR={class:"text-base break-words"},CR=N({__name:"FileMessageContent",props:{message:{}},setup(t){const e=Z(),o=t,s=$(()=>o.message.isIncoming),n=$(()=>e.state.imkit.uploadProgresses),a=$(()=>{const i=o.message.bytes;return i<1e3?i+"B":i<1e3*1e3?(i/1e3).toFixed(1)+"KB":i<1e3*1e3*1e3?(i/1e3/1e3).toFixed(1)+"MB":(i/1e3/1e3/1e3).toFixed(1)+"GB"}),r=async()=>{try{const{url:i,fileName:l,fileExtension:u}=o.message,h=await e.state.imkit.axios.get(i,{responseType:"blob",onDownloadProgress:k=>{const{total:C}=k;C&&e.commit("imkit/updateField",{key:"downloadProgresses",value:{[i]:k.loaded/C}})}}),p=window.URL.createObjectURL(h.data),b=document.createElement("a");b.href=p,b.download=`${l}.${u}`,document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(p)}catch(i){console.error(i)}};return(i,l)=>(d(),g("div",{class:"relative flex cursor-pointer items-center justify-center gap-2",onClick:r},[v(m(Xt),{size:32,class:"text-gray-600 dark:text-gray-300"}),c("div",xR,[c("div",wR,f(t.message.fileName)+"."+f(t.message.fileExtension),1),c("div",{class:B(["text-sm",{"text-gray-500 dark:text-gray-300":s.value}])},f(i.$t("fileSize"))+": "+f(a.value),3)]),t.message.url===""?(d(),g(V,{key:0},[l[0]||(l[0]=c("div",{class:"absolute inset-0 -m-2 bg-gray-800/50 fill-blue-300"},null,-1)),v(m(Ot),{class:"absolute!",diameter:40,"completed-steps":n.value[t.message.id]*100,"total-steps":100,"start-color":"#60a5fa","stop-color":"#60a5fa","stroke-width":4,"inner-stroke-width":4},null,8,["completed-steps"])],64)):I("",!0)]))}}),MR=Me(CR,[["__scopeId","data-v-323e71aa"]]),Ye=(t,e)=>{switch(e.type){case"message":{const o={roomId:t,messageType:"text",message:e.text};nt.dispatch("imkit/sendMessage",o);break}case"uri":window.open(e.uri,"_blank");break;default:console.error(`Unsupported action type: ${e.type}`);break}},TR={class:"w-[250px] cursor-pointer overflow-hidden text-base"},IR=["src"],RR={key:1,class:"flex flex-col gap-2 border-t border-gray-200 py-3 dark:border-gray-500"},SR=["onClick"],FR=N({__name:"TemplateMessageButtonsContent",props:{message:{}},setup(t){const e=t,o=$(()=>e.message.isIncoming),s=$(()=>!o.value);return(n,a)=>{var r;return d(),g("div",TR,[t.message.template.thumbnailImageUrl?(d(),g("img",{key:0,class:B(["object-cover text-gray-900 dark:text-gray-200",{"object-contain":t.message.template.imageSize==="contain"}]),style:re({"background-color":t.message.template.imageBackgroundColor??"#ffffff",height:`${t.message.template.imageAspectRatio==="square"?250:250/1.51}px`}),src:t.message.template.thumbnailImageUrl,onClick:a[0]||(a[0]=i=>m(Ye)(t.message.roomId,t.message.template.defaultAction))},null,14,IR)):I("",!0),c("div",{class:"flex flex-col gap-1 p-3",onClick:a[1]||(a[1]=i=>m(Ye)(t.message.roomId,t.message.template.defaultAction))},[c("div",null,f((r=t.message.template.title)==null?void 0:r.substring(0,40)),1),t.message.template.text?(d(),g("div",{key:0,class:B(["text-sm",{"text-gray-500 dark:text-gray-300":o.value,"text-gray-100":s.value}])},f(!t.message.template.thumbnailImageUrl&&!t.message.template.title?t.message.template.text.substring(0,160):t.message.template.text.substring(0,60)),3)):I("",!0)]),t.message.template.actions.length>0?(d(),g("div",RR,[(d(!0),g(V,null,ne(t.message.template.actions,i=>(d(),g("div",{key:i.label,class:B(["flex items-center justify-center p-0.5 text-sm",{"text-slate-500 dark:text-slate-300":o.value,"text-slate-100":s.value}]),onClick:l=>m(Ye)(t.message.roomId,i)},f(i.label),11,SR))),128))])):I("",!0)])}}}),AR={class:"w-[250px] overflow-hidden text-base"},_R={class:"p-3"},zR={class:"flex divide-x border-t"},DR=["onClick"],OR=N({__name:"TemplateMessageConfirmContent",props:{message:{}},setup(t){const e=t,o=$(()=>e.message.isIncoming),s=$(()=>!o.value);return(n,a)=>(d(),g("div",AR,[c("div",_R,f(t.message.template.text.substring(0,240)),1),c("div",zR,[(d(!0),g(V,null,ne(t.message.template.actions.slice(0,2),r=>(d(),g("div",{key:r.label,class:B(["flex grow cursor-pointer items-center justify-center p-2",{"text-slate-500":o.value,"text-slate-100":s.value}]),onClick:i=>m(Ye)(t.message.roomId,r)},f(r.label),11,DR))),128))])]))}}),NR={class:"flex cursor-pointer gap-2 overflow-auto text-base"},PR=["src","onClick"],ER=["onClick"],UR={key:1,class:"flex flex-col gap-2 border-t border-gray-200 py-3 dark:border-gray-500"},LR=["onClick"],jR=N({__name:"TemplateMessageCarouselContent",props:{message:{}},setup(t){const e=t,o=$(()=>e.message.isIncoming),s=$(()=>!o.value);return(n,a)=>(d(),g("div",NR,[(d(!0),g(V,null,ne(t.message.template.columns,(r,i)=>{var l;return d(),g("div",{key:i,class:B(["w-[250px] cursor-pointer overflow-hidden rounded-xl text-base",[o.value?"bg-gray-100 text-gray-900 dark:bg-zinc-700 dark:text-gray-200":"bg-blue-400 text-white"]])},[r.thumbnailImageUrl?(d(),g("img",{key:0,class:B(["object-cover",{"object-contain":t.message.template.imageSize==="contain"}]),style:re({"background-color":r.imageBackgroundColor??"#ffffff",height:`${t.message.template.imageAspectRatio==="square"?250:250/1.51}px`}),src:r.thumbnailImageUrl,onClick:u=>m(Ye)(t.message.roomId,r.defaultAction)},null,14,PR)):I("",!0),c("div",{class:"flex flex-col gap-1 p-3",onClick:u=>m(Ye)(t.message.roomId,r.defaultAction)},[c("div",null,f((l=r.title)==null?void 0:l.substring(0,40)),1),r.text?(d(),g("div",{key:0,class:B(["text-sm",{"text-gray-500 dark:text-gray-300":o.value,"text-gray-100":s.value}])},f(!r.thumbnailImageUrl&&!r.title?r.text.substring(0,160):r.text.substring(0,60)),3)):I("",!0)],8,ER),r.actions.length>0?(d(),g("div",UR,[(d(!0),g(V,null,ne(r.actions,u=>(d(),g("div",{key:u.label,class:B(["flex items-center justify-center p-0.5 text-sm",{"text-slate-500 dark:text-slate-300":o.value,"text-slate-100":s.value}]),onClick:h=>m(Ye)(t.message.roomId,u)},f(u.label),11,LR))),128))])):I("",!0)],2)}),128))]))}}),BR={class:"flex cursor-pointer gap-2 overflow-auto text-base"},VR=["src","onClick"],qR=N({__name:"TemplateMessageImageCarouselContent",props:{message:{}},setup(t){return(e,o)=>(d(),g("div",BR,[(d(!0),g(V,null,ne(t.message.template.columns,(s,n)=>(d(),g("img",{key:n,src:s.imageUrl,class:"h-[250px] w-[250px] rounded-xl object-cover",onClick:a=>m(Ye)(t.message.roomId,s.action)},null,8,VR))),128))]))}}),HR=N({__name:"TemplateMessageContent",props:{message:{}},setup(t){const e={[Ge.Buttons]:FR,[Ge.Confirm]:OR,[Ge.Carousel]:jR,[Ge.ImageCarousel]:qR};return(o,s)=>(d(),A(wt(e[t.message.templateType]),{message:t.message},null,8,["message"]))}}),KR=N({__name:"FlexMessageBoxComponent",props:{content:{}},setup(t){const e=o=>({none:"0",xs:"2px",sm:"4px",md:"8px",lg:"12px",xl:"16px",xxl:"20px"})[o]??o;return(o,s)=>(d(),g("div",{class:B(["flex",{"flex-col":t.content.layout==="vertical","flex-row":t.content.layout==="horizontal","flex-row items-baseline":t.content.layout==="baseline"}]),style:re({backgroundColor:t.content.backgroundColor??"#00000000",borderColor:t.content.borderColor,borderWidth:t.content.borderWidth,borderRadius:t.content.cornerRadius,width:t.content.width,maxWidth:t.content.maxWidth,height:t.content.height,maxHeight:t.content.maxHeight})},[(d(!0),g(V,null,ne(t.content.contents,(n,a)=>(d(),A(vt,{key:a,content:n,style:re(t.content.layout==="vertical"?{marginTop:n.margin?e(n.margin):a===0?0:e(t.content.spacing)}:{marginLeft:n.margin?e(n.margin):a===0?0:e(t.content.spacing)})},null,8,["content","style"]))),128))],6))}}),GR=N({__name:"FlexMessageButtonComponent",props:{content:{}},setup(t){const e=t,o=Z(),s=Lo("messageId"),n=$(()=>{var i,l;return(l=(i=o.state.imkit.messageMultiLists.get(o.state.imkit.selectedRoomId))==null?void 0:i.main)==null?void 0:l.map.get(s)}),a=$(()=>e.content.style==="primary"?"#ffffff":e.content.style==="secondary"?"#000000":e.content.color||"#42659a"),r=$(()=>e.content.style==="primary"?e.content.color||"#17c950":e.content.style==="secondary"?e.content.color||"#dcdfe5":"");return(i,l)=>(d(),g("button",{class:B([[t.content.size==="md"?"h-52px":"h-10"],"rounded-lg"]),style:re({color:a.value,backgroundColor:r.value}),onClick:l[0]||(l[0]=u=>m(Ye)(n.value.roomId,t.content.action))},f(t.content.action.label),7))}}),WR=["src"],JR=N({__name:"FlexMessageImageComponent",props:{content:{}},setup(t){const e=t,o=$(()=>e.content.aspectRatio?e.content.aspectRatio.replace(":","/"):"1/1");return(s,n)=>(d(),g("div",{class:B(["w-full overflow-hidden bg-gray-300",[t.content.aspectMode==="cover"?"object-cover":"object-contain"]]),style:re({"aspect-ratio":o.value})},[c("img",{class:"h-full w-full",src:t.content.url},null,8,WR)],6))}}),YR=["src"],XR=N({__name:"FlexMessageVideoComponent",props:{content:{}},setup(t){return(e,o)=>(d(),g("video",{src:t.content.url},null,8,YR))}}),ZR=N({__name:"FlexMessageIconComponent",props:{content:{}},setup(t){const e=t,o=$(()=>{const s=e.content.size;return{xxs:"12px",xs:"13px",sm:"14px",md:"16px",lg:"19px",xl:"22px",xxl:"29px","3xl":"35px","4xl":"48px","5xl":"74px"}[s]??"16px"});return(s,n)=>(d(),g("span",{style:re({overflow:"hidden",background:"no-repeat center",backgroundSize:"contain",backgroundImage:"url("+t.content.url+")",width:o.value,height:o.value})},null,4))}}),QR=N({__name:"FlexMessageTextComponent",props:{content:{}},setup(t){const e=t,o=$(()=>{const s=e.content.size;return{xxs:"12px",xs:"13px",sm:"14px",md:"16px",lg:"19px",xl:"22px",xxl:"29px","3xl":"35px","4xl":"48px","5xl":"74px"}[s]??"16px"});return(s,n)=>(d(),g("div",{class:"basis-0",style:re({flexGrow:t.content.flex??0})},[c("p",{class:B([t.content.weight==="bold"?"font-bold":"font-normal",t.content.wrap?"overflow-clip overflow-hidden break-words whitespace-normal":"truncate overflow-hidden whitespace-nowrap"]),style:re({fontSize:o.value,color:t.content.color,"text-size-adjust":"100%"})},f(t.content.text),7)],4))}}),e6=N({__name:"FlexMessageSpanComponent",props:{content:{}},setup(t){return(e,o)=>(d(),g("span",null,f(t.content.text),1))}}),t6=N({__name:"FlexMessageSeparatorComponent",props:{content:{}},setup(t){return(e,o)=>(d(),g("div"))}}),vt=N({__name:"FlexMessageComponent",props:{content:{}},setup(t){const e={box:KR,button:GR,image:JR,video:XR,icon:ZR,text:QR,span:e6,separator:t6},o=t,s=$(()=>o.content.type);return(n,a)=>(d(),A(wt(e[s.value]),{content:t.content},null,8,["content"]))}}),oo=N({__name:"FlexMessageBubbleComponent",props:{content:{}},setup(t){const e=t,o=$(()=>e.content.header),s=$(()=>e.content.hero),n=$(()=>e.content.body),a=$(()=>e.content.footer),r=$(()=>{var p;return(p=e.content.styles)==null?void 0:p.header}),i=$(()=>{var p;return(p=e.content.styles)==null?void 0:p.hero}),l=$(()=>{var p;return(p=e.content.styles)==null?void 0:p.body}),u=$(()=>{var p;return(p=e.content.styles)==null?void 0:p.footer}),h=$(()=>{switch(e.content.size){case"nano":return"10px";case"micro":return"13px";case"kilo":return a.value?"13px 13px 17px 13px":"13px";case"mega":return a.value?"19px 20px 10px 20px":"20px";case"giga":return a.value?"19px 20px 10px 20px":"20px";default:return"20px"}});return(p,b)=>{var k,C,w,x,y,T,M,U,_,P,F,q;return d(),g("div",{class:B(["overflow-hidden bg-gray-100 text-[#444444] dark:bg-zinc-700",{"w-[120px]":t.content.size==="nano","w-[160px]":t.content.size==="micro","w-[260px]":t.content.size==="kilo","w-[300px]":t.content.size==="mega"||!t.content.size,"w-[386px]":t.content.size==="giga"}])},[o.value?(d(),A(vt,{key:0,content:o.value,style:re({backgroundColor:(k=r.value)==null?void 0:k.backgroundColor,borderBottom:(C=r.value)!=null&&C.separator?`1px solid ${(w=r.value)==null?void 0:w.separatorColor}`:"none"})},null,8,["content","style"])):I("",!0),s.value?(d(),A(vt,{key:1,content:s.value,style:re({backgroundColor:(x=i.value)==null?void 0:x.backgroundColor,borderBottom:(y=i.value)!=null&&y.separator?`1px solid ${(T=i.value)==null?void 0:T.separatorColor}`:"none"})},null,8,["content","style"])):I("",!0),n.value?(d(),A(vt,{key:2,content:n.value,style:re({backgroundColor:(M=l.value)==null?void 0:M.backgroundColor,borderBottom:(U=l.value)!=null&&U.separator?`1px solid ${(_=l.value)==null?void 0:_.separatorColor}`:"none",padding:h.value})},null,8,["content","style"])):I("",!0),a.value?(d(),A(vt,{key:3,content:a.value,class:"p-2.5",style:re({backgroundColor:(P=u.value)==null?void 0:P.backgroundColor,borderBottom:(F=u.value)!=null&&F.separator?`1px solid ${(q=u.value)==null?void 0:q.separatorColor}`:"none"})},null,8,["content","style"])):I("",!0)],2)}}}),s6=N({__name:"FlexMessageBubbleContent",props:{message:{}},setup(t){return(e,o)=>(d(),A(oo,{content:t.message.contents},null,8,["content"]))}}),o6={class:"flex items-start gap-2 overflow-auto"},n6=N({__name:"FlexMessageCarouselContent",props:{message:{}},setup(t){return(e,o)=>(d(),g("div",o6,[(d(!0),g(V,null,ne(t.message.contents.contents,(s,n)=>(d(),A(oo,{key:n,content:s},null,8,["content"]))),128))]))}}),a6=N({__name:"FlexMessageContent",props:{message:{}},setup(t){const e={[ts.Bubble]:s6,[ts.Carousel]:n6};return(o,s)=>(d(),A(wt(e[t.message.flexType]),{message:t.message},null,8,["message"]))}}),r6={class:"w-[250px] p-2 underline sm:w-[300px]"},i6=N({__name:"LocationMessageContent",props:{message:{}},setup(t){const e=t,s=Z().state.imkit.config.mapApiKey,n=$(()=>({lat:e.message.latitude,lng:e.message.longitude})),a=()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${e.message.address}`,"_blank")};return(r,i)=>(d(),g("div",{class:"relative -mx-3 -my-2 flex cursor-pointer flex-col",onClick:a},[v(m(Vs),{"api-key":m(s),center:n.value,zoom:15,"disable-default-ui":!0,class:"h-[150px] w-[250px] sm:h-[200px] sm:w-[300px]"},{default:D(()=>[v(m(qs),{options:{position:n.value}},null,8,["options"])]),_:1},8,["api-key","center"]),c("div",r6,f(t.message.address),1),i[0]||(i[0]=c("div",{class:"absolute inset-0"},null,-1))]))}}),l6=Me(i6,[["__scopeId","data-v-69917d13"]]),c6={key:1,class:"flex h-5 items-center justify-center"},d6={class:"rounded-full bg-black/30 px-2 py-1 text-xs font-bold text-white"},u6=N({__name:"AudioMessageContent",props:{message:{}},setup(t){const e=t,o=Z(),s=S(0),n=S(),a=S(0),r=S(),i=$(()=>e.message.isIncoming),l=()=>{n.value&&(a.value=n.value.seek()/n.value.duration()*100,n.value.playing()&&requestAnimationFrame(l))},u=async()=>{var p,b;switch(s.value){case 0:{const k=new Bo.Howl({src:e.message.url,format:["m4a","mp3","wav","aac","webm"],onload:()=>{k.play(),s.value=3},onplay:()=>{requestAnimationFrame(l)},onend:()=>{s.value=2},onloaderror:(C,w)=>console.log(2,C,w),xhr:{headers:{"IM-Authorization":o.state.imkit.config.token,"IM-Client-Key":o.state.imkit.config.clientKey}}});n.value=k,s.value=1;break}case 2:case 4:(p=n.value)==null||p.play(),s.value=3;break;case 3:(b=n.value)==null||b.pause(),s.value=4;break}},h=async p=>{if(!n.value||!r.value)return;const{x:b,width:k}=r.value.getBoundingClientRect();a.value=(p.clientX-b)/k*100,n.value.seek(n.value.duration()*a.value/100)};return(p,b)=>(d(),g(V,null,[c("div",{class:B(["pointer-events-none absolute top-0 bottom-0 left-0",[i.value?"bg-gray-300":"bg-blue-300"]]),style:re({width:`${a.value}%`})},null,6),c("div",{ref_key:"container",ref:r,class:"relative flex w-full items-center justify-between p-1",onClick:h},[c("button",{onClick:ve(u,["stop"])},[new Set([0,2,4]).has(s.value)?(d(),A(m(rs),{key:0,size:24,class:"text-gray-600 dark:text-gray-300"})):s.value===1?(d(),g("div",c6,[(d(),g("svg",{class:B(["h-5 w-5 animate-spin",[i.value?"fill-gray-100 text-gray-400":"fill-blue-400 text-gray-200 dark:fill-sky-700 dark:text-gray-700"]]),viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...b[0]||(b[0]=[c("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),c("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)])],2))])):s.value===3?(d(),A(m(jo),{key:2,size:24,class:"text-gray-600 dark:text-gray-300"})):I("",!0)]),b[1]||(b[1]=c("div",{class:"w-[200px]"},null,-1)),c("div",d6,f(Math.floor(t.message.duration/60))+":"+f(`${Math.floor(t.message.duration%60)}`.padStart(2,"0")),1)],512)],64))}}),m6={class:"flex items-center justify-center"},g6={class:"my-3 rounded-lg bg-gray-100 px-2 py-1.5 text-sm text-gray-700 dark:bg-zinc-700 dark:text-gray-200 dark:text-gray-300"},h6=N({__name:"SystemMessageContent",props:{message:{}},setup(t){const e=t,o=Z(),s=$(()=>o.state.imkit.users),{t:n}=Le(),a=$(()=>{var i;const r=(i=s.value[e.message.senderId])==null?void 0:i.nickname;switch(e.message.type){case E.Recall:return e.message.senderId===o.state.imkit.uid?n("youUnsentMessage"):n("someoneUnsentMessage",[r]);case E.JoinRoom:return n("someoneJoinedTheChat",[r]);case E.LeaveRoom:return n("someoneLeftTheChat",[r]);case E.AddMember:return n("someoneInvited",[r,e.message.members.map(l=>l.nickname).join(", ")]);case E.DeleteMember:return n("someoneKicked",[r,e.message.members.map(l=>l.nickname).join(", ")]);case E.AddMembers:return n("someoneInvited",[r,e.message.members.map(l=>l.nickname).join(", ")]);case E.Announcement:return e.message.text;default:return""}});return(r,i)=>(d(),g("div",m6,[c("div",g6,f(a.value),1)]))}}),f6={},p6={class:"flex h-4 items-center"};function v6(t,e){return d(),g("div",p6,[(d(),g(V,null,ne(3,o=>c("div",{key:o,class:B(["mr-0.5 h-1 w-1 rounded-full bg-gray-400",[`animate-bounce-${o}`]])},null,2)),64))])}const b6=Me(f6,[["render",v6],["__scopeId","data-v-490ce08b"]]),$6=N({__name:"AIStreamingMessageContent",props:{message:{}},setup(t){const e=t;return(o,s)=>(d(),A(m(Vo),{class:"prose prose-sm dark:prose-invert prose-headings:mt-0 prose-p:my-0 prose-p:leading-6 prose-ol:my-0",content:e.message.text,"typewriter-effect":!0},null,8,["content"]))}}),y6=Me($6,[["__scopeId","data-v-51a759cf"]]),k6=(t,e,o=he())=>{const s=he(t);if(s.isSame(o,"day"))return e("today");if(s.isSame(o.subtract(1,"day"),"day"))return e("yesterday");const n=Hs.fromMillis(t);return s.isSame(o,"week")?n.toLocaleString({month:"numeric",day:"numeric",weekday:"short"}):s.isSame(o,"year")?n.toLocaleString({month:"numeric",day:"numeric"}):n.toLocaleString({month:"numeric",day:"numeric",year:"numeric"})},x6={class:"cursor-pointer transition-all hover:opacity-80"},w6={class:B(["flex items-center gap-2 rounded-xl bg-white px-4 py-2 text-2xl shadow-lg","dark:border dark:border-zinc-700 dark:bg-zinc-800"])},C6=["onClick"],Fs=N({__name:"MessageEmojiPicker",emits:["select"],setup(t,{emit:e}){const o=e,s=["💖","🤣","😮","😔","👍"],n=a=>{o("select",a)};return(a,r)=>(d(),A(m(qo),{placement:"top"},{content:D(()=>[c("div",w6,[(d(),g(V,null,ne(s,i=>c("div",{key:i,class:"cursor-pointer transition-all hover:translate-y-[-2px]",onClick:l=>n(i)},f(i),9,C6)),64))])]),default:D(()=>[c("div",x6,[St(a.$slots,"default",{},()=>[v(m(Ks),{class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400"})])])]),_:3}))}}),M6={class:"reactions flex items-center gap-1"},T6=["onClick"],I6={class:"text-xs"},R6=N({name:"ReactionList",__name:"ReactionList",props:{reactions:{}},emits:["selectEmoji"],setup(t,{emit:e}){const o=t,s=e,n=Z(),a=$(()=>n.state.imkit.uid),r=$(()=>{const u=new Map;return o.reactions.forEach(h=>{const p=u.get(h.reaction);p?(p.count+=1,p.clients.includes(h.client)||p.clients.push(h.client)):u.set(h.reaction,{reaction:h.reaction,count:1,clients:[h.client]})}),Array.from(u.values())}),i=u=>{s("selectEmoji",u)},l=u=>[u.clients.includes(a.value)?"bg-[#dff7fe] border-[#447faf] border text-[#447faf]":"bg-white dark:bg-zinc-500","flex items-center gap-1 rounded-full px-2 py-1 cursor-pointer"];return(u,h)=>(d(),g("div",M6,[(d(!0),g(V,null,ne(r.value,p=>(d(),g("div",{key:p.reaction,class:B(l(p)),onClick:b=>i(p.reaction)},[c("span",null,f(p.reaction),1),c("span",I6,f(p.count),1)],10,T6))),128))]))}}),S6={},F6={"aria-hidden":"true",class:"animate-spin fill-blue-400 text-gray-200 dark:fill-sky-700 dark:text-gray-700",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function A6(t,e){return d(),g("svg",F6,[...e[0]||(e[0]=[c("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"},null,-1),c("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"},null,-1)])])}const us=Me(S6,[["render",A6]]),_6={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},z6={class:"text-gray-500 dark:text-gray-400"},D6={class:"flex items-center justify-center gap-2"},no=N({__name:"DeleteMessageConfirmModal",props:{messageId:{},deleteType:{}},setup(t){const e=Se(),o=Z(),s=S(!1),n=t,a=$(()=>{var i,l;return(l=(i=o.state.imkit.messageMultiLists.get(o.state.imkit.selectedRoomId))==null?void 0:i.main)==null?void 0:l.map.get(n.messageId)}),r=async()=>{s.value=!0;try{n.deleteType==="everyone"?await o.dispatch("imkit/deleteMessage",{roomId:a.value.roomId,messageId:n.messageId}):await o.dispatch("imkit/hideMessage",{roomId:a.value.roomId,messageIds:[n.messageId]}),e.closeAll()}catch(i){console.error("Error deleting message:",i)}finally{s.value=!1}};return(i,l)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 min-w-[200px] max-w-full rounded-xl p-5 flex flex-col gap-3 w-[300px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",_6,[c("span",null,f(i.$t("confirmDeleteMessage")),1),c("button",{class:"flex items-center justify-center",onClick:l[0]||(l[0]=u=>m(e).closeAll())},[v(We,{class:"h-6 w-6"})])]),c("div",z6,[n.deleteType==="everyone"?(d(),g(V,{key:0},[K(f(i.$t("deleteForEveryoneWarning")),1)],64)):(d(),g(V,{key:1},[K(f(i.$t("deleteForMeWarning")),1)],64))]),c("div",D6,[c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 w-[100px] grow rounded-lg border border-gray-200 text-base dark:border-stone-400 dark:text-stone-400",onClick:l[1]||(l[1]=u=>m(e).closeAll())},f(i.$t("cancel")),1),c("button",{class:B(["flex h-10 w-[100px] grow items-center justify-center gap-2 rounded-lg text-base text-white",s.value?"cursor-not-allowed bg-red-300":"bg-red-500"]),onClick:l[2]||(l[2]=u=>r())},[s.value?(d(),A(us,{key:0,class:B(["h-4 w-4",s.value?"fill-red-300! text-white!":"fill-red-500"])},null,8,["class"])):I("",!0),K(" "+f(i.$t("delete")),1)],2)])]),_:1}))}}),O6={class:"mb-3 flex items-center justify-between text-xl font-semibold text-gray-700 dark:text-gray-300"},N6=N({__name:"DeleteMessageModal",props:{messageId:{},roomId:{}},setup(t){const e=Se(),o=Z(),s=t,n=$(()=>o.state.imkit.rooms[s.roomId]),a=r=>{const{open:i}=Ce({component:no,attrs:{messageId:s.messageId,deleteType:r}});i()};return(r,i)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[300px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>{var l;return[c("div",O6,[i[3]||(i[3]=c("div",null," ",-1)),K(" "+f(r.$t("deleteMessageConfirmation"))+" ",1),c("button",{class:"flex items-center justify-center",onClick:i[0]||(i[0]=u=>m(e).closeAll())},[v(We,{class:"h-7 w-7"})])]),c("button",{class:"flex h-10 w-full items-center justify-center rounded-lg border border-gray-300 text-base text-gray-700 dark:border-zinc-600 dark:text-gray-300",onClick:i[1]||(i[1]=u=>a("me"))},f(r.$t("deleteForMe")),1),(l=n.value)!=null&&l.isSuperuser&&n.value.type===m(Je).Group?(d(),g("button",{key:0,class:"flex h-10 w-full items-center justify-center rounded-lg bg-red-500 text-base text-white",onClick:i[2]||(i[2]=u=>a("everyone"))},f(r.$t("deleteForEveryone")),1)):I("",!0)]}),_:1}))}}),P6={key:0,class:"mt-4 mb-2 flex items-center justify-center"},E6={class:"rounded-full bg-gray-100 px-2 py-1 text-xs text-gray-600 dark:bg-zinc-700 dark:text-gray-400"},U6={key:1,class:"col-span-2 text-xs font-medium text-gray-500 dark:text-gray-300"},L6={key:0,class:"flex items-center justify-end gap-2"},j6={class:"relative flex items-center justify-center"},B6={key:1,class:"flex flex-col items-end self-end-safe"},V6={key:2,class:"flex flex-col items-end self-end-safe text-xs text-gray-500 dark:text-gray-300"},q6={key:0},H6={key:3,class:"self-end text-xs text-gray-500 dark:text-gray-300"},K6={key:4,class:"flex shrink-0 items-center justify-start gap-2"},G6=N({inheritAttrs:!1,__name:"MessageCell",props:{source:{}},setup(t){const e=t;Ho("messageId",e.source.id);const o=Le(),s=$(()=>e.source),n=$(()=>r.state.imkit.config.settings),a={[E.Text]:et,[E.Image]:vR,[E.Sticker]:so,[E.Video]:kR,[E.File]:MR,[E.Template]:HR,[E.Flex]:a6,[E.Location]:l6,[E.Audio]:u6,[E.Recall]:et,[E.JoinRoom]:et,[E.LeaveRoom]:et,[E.AddMember]:et,[E.DeleteMember]:et,[E.AddMembers]:et,[E.Announcement]:et,[E.Typing]:b6,[E.AIStreaming]:y6},r=Z(),i=$(()=>{if(r.state.imkit.uid!==e.source.senderId)return 0;const{rooms:te,uid:oe,messageMultiLists:ue,selectedRoomId:Ie}=r.state.imkit,Ae=te[e.source.roomId];if(!Ae)return 0;const Xe=ue.get(Ie);return Object.keys(Ae.lastReadMessageId).filter(Ee=>Ee!==oe).map(Ee=>{var Tt;const Ze=Ae.lastReadMessageId[Ee];return(Tt=Xe==null?void 0:Xe.main)==null?void 0:Tt.finds(Ze)}).reduce((Ee,Ze)=>Ze&&Ze.createdAt>=e.source.createdAt?Ee+1:Ee,0)}),l=$(()=>e.source.isIncoming),u=$(()=>!l.value),h=$(()=>{var ue,Ie,Ae;if(s.value.type===E.Typing)return!0;const oe=(((Ie=(ue=r.state.imkit.messageMultiLists.get(r.state.imkit.selectedRoomId))==null?void 0:ue.main)==null?void 0:Ie.messageGroups)??new Map).get(s.value.groupId);return oe?oe[0].id===s.value.id||((Ae=s.value.prev)==null?void 0:Ae.senderId)!==s.value.senderId:!1}),p=$(()=>{var ue,Ie,Ae;if(s.value.type===E.Typing)return!0;const oe=(((Ie=(ue=r.state.imkit.messageMultiLists.get(r.state.imkit.selectedRoomId))==null?void 0:ue.main)==null?void 0:Ie.messageGroups)??new Map).get(s.value.groupId);return oe?oe[oe.length-1].id===s.value.id||((Ae=s.value.next)==null?void 0:Ae.senderId)!==s.value.senderId:!1}),b=$(()=>s.value.reactions),k=$(()=>b.value.length>0),C=$(()=>!new Set([E.Sticker,E.Audio,E.File,E.Image,E.Video,E.Flex,E.Template]).has(e.source.type)),w=$(()=>new Set([E.Text,E.Image,E.Video,E.Sticker]).has(e.source.type)),x=$(()=>e.source.type===E.Text),y=S(!1),T=te=>{y.value=!0,te.preventDefault()},M=()=>{y.value=!1,r.commit("imkit/setState",{replyId:e.source.id})},U=()=>{y.value=!1;let te="";switch(e.source.type){case E.Text:te=e.source.text;break;case E.Location:te=e.source.address;break}navigator.clipboard.writeText(te)},_=$(()=>r.state.imkit.rooms[e.source.roomId]),P=()=>{r.commit("imkit/deleteMessages",[e.source.id])},F=()=>{var te;if((te=_.value)!=null&&te.isSuperuser&&_.value.type===Je.Group){const{open:oe}=Ce({component:N6,attrs:{messageId:e.source.id,roomId:e.source.roomId}});oe()}else{const{open:oe}=Ce({component:no,attrs:{messageId:e.source.id,deleteType:"me"}});oe()}},q=()=>{y.value=!1,r.dispatch("imkit/recallMessage",{roomId:e.source.roomId,_id:e.source.id,messageType:"recall"})},Q=()=>{r.dispatch("imkit/retryMessage",e.source)},ge=$(()=>{const te=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g;if(e.source.type===E.Text){const oe=e.source.text;for(let ue=0;ue<oe.length;ue++)if(!te.test(oe[ue]))return!1;return!0}return!1}),$e=$(()=>e.source),be=$(()=>e.source.isSystem),ye=$(()=>r.state.imkit.config.styles),H=$(()=>r.state.imkit.config.translationApiKey),J=$(()=>r.state.imkit.users[e.source.senderId]),ae=$(()=>r.state.imkit.uid),G=$(()=>{var oe,ue,Ie;return((Ie=(((ue=(oe=r.state.imkit.messageMultiLists.get(r.state.imkit.selectedRoomId))==null?void 0:oe.main)==null?void 0:ue.firstMessageOfDate)??new Map).get(e.source.dateId))==null?void 0:Ie.id)===e.source.id}),se=$(()=>[l.value?"rounded-r-xl":"rounded-l-xl",u.value&&h.value?"rounded-tr-xl":"",u.value&&p.value?"rounded-br-xl":"",l.value&&h.value?"rounded-tl-xl":"",l.value&&p.value?"rounded-bl-xl":""]),Fe=$(()=>{const te=[...se.value],oe=e.source.type,ue=$e.value.templateType;return(new Set([E.Sticker,E.Image,E.Template,E.Flex]).has(oe)||new Set([Ge.ImageCarousel,Ge.Carousel]).has(ue)||ge.value)&&te.push("bg-white! dark:bg-zinc-800!"),ge.value&&te.push("text-3xl!"),!new Set([E.Template,E.Flex]).has(oe)&&!new Set([Ge.ImageCarousel,Ge.Carousel]).has(ue)&&te.push("px-3","py-2"),oe===E.Audio&&te.push("w-full","max-w-[250px]!"),te}),qe=()=>{y.value=!1,r.dispatch("imkit/translateMessage",e.source)},W=async te=>(y.value=!1,b.value.some(ue=>ue.reaction===te&&ue.client===ae.value)?r.dispatch("imkit/deleteReaction",{messageId:e.source.id,reaction:te}):r.dispatch("imkit/sendReaction",{messageId:e.source.id,reaction:te})),Y=S(null);is(Y,()=>{y.value=!0},{modifiers:{prevent:!0}});const Te=S(!1);let De=null,Ne=null,xe=null;return pe(()=>s.value.status,te=>{if(De&&(clearTimeout(De),De=null),Ne&&(clearTimeout(Ne),Ne=null),te!==Ue.Sending){if(Te.value&&xe){const oe=Date.now()-xe,ue=Math.max(0,1e3-oe);Ne=setTimeout(()=>{Te.value=!1,xe=null,Ne=null},ue)}else Te.value=!1,xe=null;return}te===Ue.Sending&&u.value&&(De=setTimeout(()=>{Te.value=!0,xe=Date.now(),De=null},1e3))},{immediate:!0}),ns(()=>{De&&clearTimeout(De),Ne&&clearTimeout(Ne)}),(te,oe)=>{var ue,Ie,Ae,Xe,Ee;return d(),g(V,null,[G.value?(d(),g("div",P6,[c("div",E6,f(m(k6)(t.source.createdAt,m(o).t)),1)])):I("",!0),be.value?(d(),A(h6,{key:1,message:t.source},null,8,["message"])):(d(),g("div",{key:2,class:B(["grid w-full grid-flow-row gap-2",[l.value?h.value?"grid-cols-[30px_fit-content(75%)_120px] grid-rows-[16px_1fr]":"grid-cols-[fit-content(75%)_120px] pl-[38px]":"grid-cols-[minmax(140px,auto)_fit-content(75%)]",h.value?"mt-1":"mt-0.25",p.value?"mb-1":"mb-0.25"]]),onMouseleave:oe[1]||(oe[1]=Ze=>y.value=!1)},[l.value&&h.value?(d(),A(Pe,{key:0,url:((ue=J.value)==null?void 0:ue.avatarUrl)??"",name:((Ie=J.value)==null?void 0:Ie.nickname)??"",class:"row-span-2 h-[30px]! w-[30px]! rounded-full text-xs"},null,8,["url","name"])):I("",!0),l.value&&h.value?(d(),g("div",U6,f(((Ae=J.value)==null?void 0:Ae.nickname)??""),1)):I("",!0),u.value?(d(),g(V,{key:2},[y.value?de((d(),g("div",L6,[s.value.status===m(Ue).Delivered?(d(),g(V,{key:0},[v(m(bt),{class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:F}),v(m(Ko),{class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:q}),C.value?(d(),A(m(bs),{key:0,class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:U})):I("",!0),w.value?(d(),A(m($s),{key:1,class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:M})):I("",!0),c("div",j6,[v(Fs,{onSelect:W})])],64)):s.value.status===m(Ue).Failed?(d(),g(V,{key:1},[v(m(je),{class:"h-5.5 w-5.5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:P}),v(m(Go),{class:"h-4 w-4 cursor-pointer text-slate-500 dark:text-slate-400",onClick:Q})],64)):I("",!0)])),[[m(Ve),()=>y.value=!1]]):p.value?I("",!0):(d(),g("div",B6,[Te.value?(d(),A(m(ys),{key:0,class:"h-3 w-3 animate-spin"})):s.value.status===m(Ue).Failed?(d(),A(m(ks),{key:1,class:"h-4 w-4 text-red-500"})):I("",!0)])),p.value&&!y.value?(d(),g("div",V6,[n.value.enableReadReceipt&&i.value>0?(d(),g("div",q6,[K(f(te.$t("read"))+" ",1),((Xe=_.value)==null?void 0:Xe.type)===m(Je).Group?(d(),g(V,{key:0},[K(f(i.value),1)],64)):I("",!0)])):I("",!0),c("div",null,[Te.value?(d(),A(m(ys),{key:0,class:"mr-1 mb-0.5 inline h-3 w-3 animate-spin"})):s.value.status===m(Ue).Failed?(d(),A(m(ks),{key:1,class:"mr-1 mb-0.5 inline h-4 w-4 text-red-500"})):I("",!0),K(" "+f(m(he)(t.source.createdAt).format("H:mm")),1)])])):I("",!0)],64)):I("",!0),c("div",{ref_key:"messageCellRef",ref:Y,class:B(["relative overflow-hidden rounded bg-gray-100 text-gray-900 dark:bg-zinc-700 dark:text-gray-100",Fe.value]),style:re([l.value?ye.value.incomingMessageCell:ye.value.outgoingMessageCell]),onContextmenu:T,onMouseenter:oe[0]||(oe[0]=Ze=>y.value=!0)},[(d(),A(wt(a[t.source.type]),{message:s.value},null,8,["message"])),k.value?(d(),A(R6,{key:0,reactions:b.value,class:"mt-2",onSelectEmoji:W},null,8,["reactions"])):I("",!0)],38),l.value&&p.value&&!y.value&&s.value.type!==m(E).Typing?(d(),g("div",H6,f(m(he)(t.source.createdAt).format("H:mm")),1)):I("",!0),l.value&&y.value?de((d(),g("div",K6,[w.value?(d(),A(m($s),{key:0,class:B(["h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",h.value?"ml-1":"ml-2"]),onClick:M},null,8,["class"])):I("",!0),C.value?(d(),A(m(bs),{key:1,class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:U})):I("",!0),v(Fs,{class:"relative flex items-center justify-center",onSelect:W}),x.value&&H.value?(d(),A(m(Wo),{key:2,class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:qe})):I("",!0),(Ee=_.value)!=null&&Ee.isSuperuser&&_.value.type===m(Je).Group?(d(),A(m(bt),{key:3,class:"h-5 w-5 cursor-pointer text-slate-500 dark:text-slate-400",onClick:F})):I("",!0)])),[[m(Ve),()=>y.value=!1]]):I("",!0)],34))],64)}}}),W6=Me(G6,[["__scopeId","data-v-86869409"]]),J6={class:"absolute right-0 bottom-[110%] flex h-80 w-80 max-w-full flex-col divide-y overflow-auto rounded-xl bg-white shadow-lg dark:bg-zinc-800"},Y6={class:"grid grow grid-cols-3 items-center justify-center gap-4 overflow-y-auto p-4 sm:grid-cols-4"},X6=["src","onClick"],Z6={key:0,class:"flex h-14 w-full shrink-0 gap-4 overflow-x-auto p-3"},Q6=["src","onClick"],e9=N({__name:"StickerPanel",emits:["close"],setup(t,{emit:e}){const o=Z(),s=[{name:"FunFunFamily",number:40}],n=S(s[0]),a=$(()=>o.state.imkit.rooms[o.state.imkit.selectedRoomId]),r=e,i=async l=>{const u={teamId:o.state.tribo.currentTeamId,roomId:a.value.id,messageType:"sticker",sticker:l};await o.dispatch("imkit/sendMessage",u),r("close")};return(l,u)=>(d(),g("div",J6,[c("div",Y6,[(d(!0),g(V,null,ne(n.value.number,h=>(d(),g("img",{key:h,src:`/sticker/${n.value.name}/${n.value.name}-${h}.png`,class:"cursor-pointer border-0 object-contain",onClick:p=>i(`${n.value.name}-${h}`)},null,8,X6))),128))]),s.length>1?(d(),g("div",Z6,[(d(),g(V,null,ne(s,h=>c("img",{key:h.name,src:`/sticker/${h.name}/${h.name}-1.png`,class:"h-full cursor-pointer border-0 object-contain",onClick:p=>n.value=h},null,8,Q6)),64))])):I("",!0)]))}}),Jt=t=>new Promise((e,o)=>{const s=new FileReader;s.onload=()=>{const n=new Image;n.src=s.result,n.onload=async()=>{e({id:await Zt(n.src),width:n.width,height:n.height,thumbnailUrl:n.src,originalUrl:n.src})},n.onerror=()=>o},s.onerror=()=>{o(s.error)},s.readAsDataURL(t)}),t9=t=>new Promise((e,o)=>{const s=document.createElement("canvas"),n=s.getContext("2d");if(!n){o(new Error("Could not get canvas context"));return}const a=document.createElement("video");a.src=URL.createObjectURL(t),a.autoplay=!0,a.onloadedmetadata=()=>{s.width=a.videoWidth,s.height=a.videoHeight},a.onloadeddata=()=>{n.drawImage(a,0,0,s.width,s.height),s.toBlob(async r=>{if(!r){o(new Error("Could not create blob"));return}const i=new File([r],"snapshot.jpg",{type:"image/jpeg"}),l=new FileReader;l.readAsDataURL(r),l.onloadend=async()=>{e({id:await Zt(a.src),width:s.width,height:s.height,duration:a.duration,thumbnailUrl:l.result,originalUrl:"",thumbnailFile:{id:await Zt(s.toDataURL()),file:i}})}},"image/jpeg")},a.onerror=()=>o}),ms=()=>{const t=window.location.href,e=t.substring(t.indexOf("?"));return new URLSearchParams(e.lastIndexOf("#/")==-1?e:e.substring(0,e.lastIndexOf("#/")))},s9="https://tribo-beta.funtek.io";function gs(){const t=Z(),e=S(!1),o=S(null),s=mt.create({baseURL:s9,timeout:1e4,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(x=>{const y=t.state.imkit.config.token;return y&&(x.headers.Authorization=`Bearer ${y}`),x},x=>Promise.reject(x)),s.interceptors.response.use(x=>x,x=>(o.value=x,Promise.reject(x)));const n=async(x,y)=>{try{return e.value=!0,o.value=null,(await s.get(x,y)).data}catch(T){throw o.value=T,T}finally{e.value=!1}},a=async(x,y,T)=>{try{return e.value=!0,o.value=null,(await s.post(x,y,T)).data}catch(M){throw o.value=M,M}finally{e.value=!1}};return{loading:e,error:o,request:async x=>{try{return e.value=!0,o.value=null,(await s.request(x)).data}catch(y){throw o.value=y,y}finally{e.value=!1}},get:n,post:a,put:async(x,y,T)=>{try{return e.value=!0,o.value=null,(await s.put(x,y,T)).data}catch(M){throw o.value=M,M}finally{e.value=!1}},patch:async(x,y,T)=>{try{return e.value=!0,o.value=null,(await s.patch(x,y,T)).data}catch(M){throw o.value=M,M}finally{e.value=!1}},delete:async(x,y)=>{try{return e.value=!0,o.value=null,(await s.delete(x,y)).data}catch(T){throw o.value=T,T}finally{e.value=!1}},inviteMember:async(x,y)=>a(`/api/v1/teams/${x}/invite-by-email`,y),inviteMemberToRoom:async(x,y,T)=>a(`/api/v1/chat/team/${x}/rooms/${y}/add-members`,T),getTeam:async x=>n(`/api/v1/teams/${x}`),getTeamMembers:async x=>n(`/api/v1/teams/${x}/members`),getRoomInfo:async x=>n(`/api/v1/chat/rooms/${x}`),createRoom:async(x,y)=>a(`/api/v1/chat/team/${x}/rooms`,y)}}const gt=N({name:"Avatar",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Jo,{...s,class:ke("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n,t.class)},e)}}}),kt=N({name:"AvatarImage",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Yo,{...s,class:ke("aspect-square h-full w-full",n,t.class)},e)}}}),ht=N({name:"AvatarFallback",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Xo,{...s,class:ke("bg-muted flex h-full w-full items-center justify-center rounded-full",n,t.class)},e)}}}),o9=t=>({default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"})[t],n9=t=>({default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"})[t],Re=N({name:"Button",inheritAttrs:!1,props:{variant:{type:String,default:"default"},size:{type:String,default:"default"},as:{type:[String,Object],default:"button"}},setup(t,{attrs:e,slots:o}){return()=>{const{class:s,type:n,...a}=e,r="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",i=o9(t.variant),l=n9(t.size),u=ke(r,i,l,s),h={...a,class:u};return typeof t.as=="string"&&t.as==="button"&&n===void 0?h.type="button":n!==void 0&&(h.type=n),ee(t.as,h,o)}}}),ao=N({name:"CCheckbox",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{attrs:e,slots:o}){return()=>{const s={...e},n=s.class;return delete s.class,ee(Qo,{...s,class:ke("peer h-4 w-4 shrink-0 rounded-sm border border-primary/20 shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n,t.class)},{default:()=>ee(Zo,{class:"flex items-center justify-center text-current"},{default:()=>{var a;return((a=o.default)==null?void 0:a.call(o))??[ee(ls,{class:"h-3.5 w-3.5"})]}})})}}}),Ct=en,a9=on,r9=sn,i9=N({name:"DialogOverlay",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(an,{...s,class:ke("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/40",n,t.class)},e)}}}),Mt=N({name:"DialogContent",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(a9,null,{default:()=>[ee(i9),ee(tn,{...s,class:ke("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed top-[50%] left-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",n,t.class)},{default:()=>{var a;return[(a=e.default)==null?void 0:a.call(e),ee(r9,{class:"ring-offset-background data-[state=open]:bg-accent data-[state=open]:text-muted-foreground focus:ring-ring absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none"},{default:()=>[ee(je,{class:"h-4 w-4"}),ee("span",{class:"sr-only"},"Close")]})]}})]})}}}),Lt=N({name:"DialogHeader",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee("div",{...s,class:ke("flex flex-col space-y-1.5 text-center sm:text-left",n,t.class)},e)}}}),jt=N({name:"DialogTitle",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(nn,{...s,class:ke("text-lg leading-none font-semibold tracking-tight",n,t.class)},e)}}}),l9={class:"space-y-4"},c9={class:"mb-2 block text-sm font-medium"},d9={class:"max-h-48 space-y-2 overflow-y-auto"},u9=["onClick"],m9={class:"flex-1"},g9={class:"text-sm font-medium"},h9={class:"text-xs text-muted-foreground"},f9={key:0,class:"text-sm text-muted-foreground"},p9={key:1,class:"mt-3 flex items-start gap-2 text-xs text-muted-foreground"},v9={class:"flex justify-end space-x-2 pt-2"},ro=N({name:"InviteMemberToRoomDialog",__name:"InviteMemberToRoomDialog",props:{open:{type:Boolean,default:!1},roomMemberIds:{default:()=>[]},defaultSelectedMemberIds:{default:()=>[]}},emits:["invite-member","close"],setup(t,{emit:e}){const o=t,s=e,n=Z(),{t:a}=Le(),{inviteMemberToRoom:r}=gs(),i=S([...o.defaultSelectedMemberIds??[]]),l=$(()=>o.open),u=$(()=>n.state.tribo.teamMembers),h=$(()=>i.value.length===0),p=$(()=>n.state.imkit.selectedRoomId),b=$(()=>n.state.tribo.currentTeamId),k=()=>{i.value=[...o.defaultSelectedMemberIds??[]]};pe(()=>o.open,U=>{U||k()});const C=U=>{console.log("handleOpenChange",U),U||(k(),s("close"))};pe(()=>o.defaultSelectedMemberIds,U=>{o.open||(i.value=[...U??[]])},{deep:!0});const w=U=>o.roomMemberIds.includes(U),x=U=>{if(w(U))return;const _=i.value.indexOf(U);_!==-1?i.value=i.value.slice(0,_).concat(i.value.slice(_+1)):i.value=[...i.value,U]},y=async()=>{if(!h.value)try{await r(b.value,p.value,{invitees:i.value,systemMessage:!0}),k(),s("close"),dt("SHOW_TOAST",{title:a("inviteMemberSuccess"),description:a("inviteMemberSuccessDescription"),variant:"success"})}catch(U){console.error("Failed to invite member",U)}},T=()=>{k(),s("close")},M=U=>{const _=(U??"").trim(),[P="成"]=_;return P.toUpperCase()};return(U,_)=>(d(),A(m(Ct),{open:l.value,"onUpdate:open":C},{default:D(()=>[v(m(Mt),{class:"sm:max-w-md"},{default:D(()=>[v(m(Lt),null,{default:D(()=>[v(m(jt),null,{default:D(()=>[K(f(U.$t("inviteMemberToRoom")),1)]),_:1})]),_:1}),c("div",l9,[c("div",null,[c("label",c9,f(U.$t("inviteMember")),1),c("div",d9,[(d(!0),g(V,null,ne(u.value,P=>(d(),g("div",{key:P.userId,class:B(["flex items-center space-x-3 rounded-lg p-2",w(P.userId)?"cursor-not-allowed opacity-50":"cursor-pointer hover:bg-muted"]),onClick:F=>!w(P.userId)&&x(P.userId)},[v(m(ao),{id:P.userId,checked:i.value.includes(P.userId),disabled:w(P.userId),onClick:_[0]||(_[0]=ve(()=>{},["stop"])),"onUpdate:checked":()=>!w(P.userId)&&x(P.userId)},null,8,["id","checked","disabled","onUpdate:checked"]),v(m(gt),{class:"h-8 w-8"},{default:D(()=>[P.userAvatar?(d(),A(m(kt),{key:0,src:P.userAvatar,alt:P.userName},null,8,["src","alt"])):(d(),A(m(ht),{key:1,class:"bg-secondary text-xs text-secondary-foreground","delay-ms":0},{default:D(()=>[K(f(M(P.userName)),1)]),_:2},1024))]),_:2},1024),c("div",m9,[c("p",g9,f(P.userName),1),c("p",h9,f(P.userEmail),1)])],10,u9))),128))]),u.value.length===0?(d(),g("p",f9,f(U.$t("noMembersToInvite")),1)):(d(),g("p",p9,[v(m(Gs),{class:"mt-0.5 h-3 w-3 shrink-0"}),c("span",null,f(U.$t("memberAlreadyInRoomHint")),1)]))]),c("div",v9,[v(m(Re),{variant:"outline",class:"pt-2",onClick:T},{default:D(()=>[K(f(U.$t("cancel")),1)]),_:1}),v(m(Re),{class:"pt-2",disabled:h.value,onClick:y},{default:D(()=>[K(f(U.$t("inviteMember")),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1},8,["open"]))}}),b9={},$9={xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",version:"1.0",viewBox:"0 0 96 96"};function y9(t,e){return d(),g("svg",$9,[...e[0]||(e[0]=[c("path",{d:"M9.2 13.2C8.4 14 8 18.6 8 27.1 8 37.3 8.3 40 9.6 41c.9.9 11.2 2.3 27.5 3.9C51.3 46.3 63 47.7 63 48c0 .3-11.7 1.7-25.9 3.1-16.3 1.6-26.6 3-27.5 3.9C8.3 56 8 58.7 8 69c0 13.8.7 15.8 5.2 14.6 5.7-1.6 73.3-32.5 74.2-33.9.8-1.2.8-2.2 0-3.4-1-1.6-72.6-34.1-75.4-34.2-.9-.1-2.1.4-2.8 1.1z"},null,-1)])])}const As=Me(b9,[["render",y9]]),k9={class:"flex grow items-center gap-1"},x9={class:"relative flex h-12 w-0 min-w-0 grow items-center gap-3 rounded-xl bg-gray-100 px-3 dark:bg-zinc-700"},w9={key:0,class:"flex items-center gap-1 rounded-xl bg-white p-2 text-xs text-gray-600 transition duration-150 ease-in-out dark:bg-zinc-800"},C9={class:"volumes"},M9={class:"ml-auto rounded-full bg-black/30 px-2 py-1 text-xs font-bold text-white"},_s="audio/webm",T9=180,I9=N({__name:"AudioInput",setup(t){const{t:e}=Le(),o=Z(),s=$(()=>o.state.imkit.config.styles),n=S(3),a=S(),r=S(),i=S(0),l=S(0),u=S(),h=S(),p=js([]),b=S(""),k=$(()=>i.value>1),C=async()=>{var x,y;try{switch(n.value){case 3:{n.value=0,p.splice(0),i.value=0,l.value=0,a.value=await navigator.mediaDevices.getUserMedia({video:!1,audio:!0}),r.value=new rn.RecordRTCPromisesHandler(a.value,{type:"audio",mimeType:_s});let T=new AudioContext,M=T.createAnalyser();M.fftSize=64,M.smoothingTimeConstant=0,T.createMediaStreamSource(a.value).connect(M),h.value=window.setInterval(()=>{let _=new Uint8Array(M.frequencyBinCount);M.getByteFrequencyData(_);let P=_.reduce((q,Q)=>q+Q)/_.length;const F=Math.min(1,P/128);p.unshift(F)},100),await r.value.startRecording(),l.value=Date.now(),u.value=window.setInterval(()=>{i.value=(Date.now()-l.value)/1e3,i.value>=T9&&C()},1e3),n.value=1;break}case 1:n.value=2,await((x=r.value)==null?void 0:x.stopRecording()),(y=a.value)==null||y.getTracks().forEach(T=>T.stop()),clearInterval(u.value),clearInterval(h.value),n.value=3;break;default:break}}catch(T){console.error(T),b.value=e("noAccessMicrophonePermission")}},w=async()=>{var y;n.value!==3&&await C(),p.splice(0),i.value=0,l.value=0;let x=await((y=r.value)==null?void 0:y.getBlob());if(x){const T=await ln(x),M=new File([x],`${_t()}.webm`),U={roomId:o.state.imkit.selectedRoomId,teamId:o.state.tribo.currentTeamId,messageType:"audio",file:M,duration:T,originalUrl:"",extra:{mimeType:_s,fileName:M.name.split(".").slice(0,-1).join("."),bytes:M.size,fileExtension:M.name.split(".").pop()}};await o.dispatch("imkit/sendMessage",U)}};return ns(()=>{clearInterval(u.value),clearInterval(h.value)}),(x,y)=>(d(),g("div",k9,[c("div",x9,[c("div",{class:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full border-2 border-gray-300",onClick:C},[c("div",{class:B(["h-6 w-6 rounded-full bg-red-500 transition-all duration-200 ease-in",{"h-3! w-3! rounded-xs":n.value!=1,"cursor-not-allowed bg-red-300":b.value}])},null,2)]),v($t,null,{default:D(()=>[b.value?(d(),g("div",w9,[v(m(je),{size:16,class:"h-4 w-4 text-gray-600 dark:text-gray-300"}),K(" "+f(b.value),1)])):I("",!0)]),_:1}),c("div",C9,[(d(!0),g(V,null,ne(p,(T,M)=>(d(),g("div",{key:M,class:"min-h-0.5! w-0.5 shrink-0 rounded-sm bg-gray-400",style:re({height:`${T*28}px`})},null,4))),128))]),c("div",M9,f(Math.floor(i.value/60))+":"+f(`${Math.floor(i.value%60)}`.padStart(2,"0")),1)]),k.value?(d(),A(As,{key:0,class:"mr-1 ml-2 h-6 w-6 cursor-pointer fill-blue-500",style:re(s.value.sendButtonEnabled),onClick:w},null,8,["style"])):(d(),A(As,{key:1,disabled:!k.value,class:"mr-1 ml-2 h-6 w-6 cursor-not-allowed fill-gray-200 dark:fill-gray-700",style:re(s.value.sendButtonDisabled)},null,8,["disabled","style"]))]))}}),R9=Me(I9,[["__scopeId","data-v-3221e66e"]]),S9={class:"mb-1 text-xl font-medium text-gray-700 dark:text-gray-300"},F9={class:"text-gray-500 dark:text-gray-400"},A9={class:"mt-2 flex items-center justify-center gap-2"},_9=N({__name:"FileSizeLimitModal",props:{fileSizeLimit:{}},setup(t){const e=t,o=Se();function s(a){return a>=1e6?`${Math.round(a/1e6)} MB`:a>=1e3?`${Math.round(a/1e3)} KB`:`${a} B`}const n=$(()=>s(e.fileSizeLimit));return(a,r)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 min-w-[200px] max-w-full rounded-xl p-5 flex flex-col gap-3 w-[300px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",S9,f(a.$t("fileSizeLimitTitle","File too large")),1),c("div",F9,f(a.$t("fileSizeLimitMessage",[n.value])),1),c("div",A9,[c("button",{class:"h-10 w-[100px] grow rounded-lg border border-gray-200 text-base dark:border-stone-400 dark:text-stone-400",onClick:r[0]||(r[0]=i=>m(o).closeAll())},f(a.$t("confirm")),1)])]),_:1}))}});var io=(t=>(t[t.Map=0]="Map",t[t.CurrentPosition=1]="CurrentPosition",t))(io||{});class It{constructor(e,o,s=null){O(this,"lat");O(this,"lng");O(this,"address");this.lat=e,this.lng=o,this.address=s}get isValid(){return this.address!==null}}const z9=N({components:{GoogleMap:Vs,CustomMarker:qs,CloseSvg:We,VueFinalModal:ze,Navigation:cn,X:je},setup(){const t=Se(),{t:e}=Le(),o=Z(),s=o.state.imkit.config.mapApiKey,n=S(),a=S(new It(21.30895,-157.826182)),r=S({lat:a.value.lat,lng:a.value.lng}),i=$(()=>({position:{lat:a.value.lat,lng:a.value.lng}})),l=S(""),u=S(!1),h=S(10),p=S(!1),b=S(""),k=()=>new Promise((y,T)=>{u.value=!0,navigator.geolocation.getCurrentPosition(M=>{let{latitude:U,longitude:_}=M.coords;b.value="",u.value=!1,y({lat:U,lng:_})},M=>{switch(u.value=!1,M.code){case M.PERMISSION_DENIED:b.value=e("noAccessLocationPermission");break;case M.POSITION_UNAVAILABLE:b.value=e("locationInfoUnavailable");break;case M.TIMEOUT:b.value=e("requestLocationTimeout");break}T(M)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),C=async(y,T)=>{try{const{data:M}=await mt.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${y},${T}&key=${s}`);if(M.error_message)throw new Error(M.error_message);return M.results[0].formatted_address}catch(M){throw b.value=e("addressUnavailable"),M}},w=Nt(700,async y=>{var T,M;try{if(y===0){const P=(T=n.value)==null?void 0:T.map.getCenter();if(P){const{lat:F,lng:q}=P;a.value=new It(F(),q())}}else if(y===1){const{lat:P,lng:F}=await k();a.value=new It(P,F),h.value=17,(M=n.value)==null||M.map.panTo({lat:P,lng:F})}let{lat:U,lng:_}=a.value;_=((_+180)%360+360)%360-180,U=Math.max(Math.min(U,90),-90),l.value=await C(U,_),a.value=new It(U,_,l.value)}catch(U){console.error(U)}},{noLeading:!1,noTrailing:!1}),x=async()=>{p.value=!0;const y={teamId:o.state.tribo.currentTeamId,roomId:o.state.imkit.selectedRoomId,messageType:"location",message:l.value,latitude:i.value.position.lat,longitude:i.value.position.lng};t.closeAll(),await o.dispatch("imkit/sendMessage",y),p.value=!1};return w(1),{vfm:t,t:e,apiKey:s,mapRef:n,location:a,center:r,markerOptions:i,address:l,isGettingCurrentPosition:u,zoom:h,isRequesting:p,geolocationPositionErrorMessage:b,debounceLocationChange:w,LocationSource:io,send:x}}}),D9={class:"relative flex justify-center"},O9={key:0,class:"absolute bottom-2 flex items-center gap-1 rounded-full bg-white/85 p-2 text-xs shadow-lg transition duration-150 ease-in-out dark:bg-zinc-800"},N9=["disabled"],P9={key:0,class:"flex h-10.5 w-full items-center justify-center"},E9={class:"text-base font-semibold"},U9={class:"text-xs"};function L9(t,e,o,s,n,a){const r=at("CustomMarker"),i=at("google-map"),l=at("CloseSvg"),u=at("Navigation"),h=at("X"),p=at("vue-final-modal");return d(),A(p,{class:"flex items-center justify-center","content-class":"flex flex-col bg-white dark:bg-zinc-800 rounded-lg overflow-hidden sm:w-[450px] w-[350px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",D9,[v(i,{ref:"mapRef","api-key":t.apiKey,center:t.center,zoom:t.zoom,"disable-default-ui":!0,class:"h-[250px] w-[350px] sm:h-[350px] sm:w-[450px]",onCenter_changed:e[0]||(e[0]=b=>t.debounceLocationChange(t.LocationSource.Map))},{default:D(()=>[v(r,{options:t.markerOptions},null,8,["options"])]),_:1},8,["api-key","center","zoom"]),c("button",{class:"absolute top-2 right-2 flex items-center justify-center rounded-full shadow-lg",onClick:e[1]||(e[1]=b=>t.vfm.closeAll())},[v(l,{class:"h-9 w-9"})]),c("button",{class:"absolute right-2 bottom-2 flex h-9 w-9 items-center justify-center rounded-full bg-white shadow-lg dark:bg-zinc-800",onClick:e[2]||(e[2]=b=>t.debounceLocationChange(t.LocationSource.CurrentPosition))},[v(u,{size:20,class:B(["text-gray-600 dark:text-gray-300",{"animate-pulse":t.isGettingCurrentPosition}])},null,8,["class"])]),v($t,null,{default:D(()=>[t.geolocationPositionErrorMessage?(d(),g("div",O9,[v(h,{size:16,class:"text-red-500"}),K(" "+f(t.geolocationPositionErrorMessage),1)])):I("",!0)]),_:1})]),c("button",{class:"disabled:( cursor-not-allowed) m-2 flex flex-col items-center gap-0.5 rounded-lg bg-blue-400 p-2 text-white",disabled:t.isGettingCurrentPosition||t.isRequesting||!t.location.isValid,onClick:e[3]||(e[3]=(...b)=>t.send&&t.send(...b))},[t.isRequesting?(d(),g("div",P9,[...e[4]||(e[4]=[c("svg",{class:"h-6 w-6 animate-spin fill-blue-300 text-gray-200",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),c("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)])])):(d(),g(V,{key:1},[c("div",E9,f(t.$t("sendCurrentLocation")),1),c("div",U9,f(t.address),1)],64))],8,N9)]),_:1})}const j9=Me(z9,[["render",L9],["__scopeId","data-v-226b5eac"]]),B9={key:0,class:"mb-3 flex gap-2 rounded-lg bg-gray-200 p-2 dark:bg-zinc-600"},V9={class:"flex flex-col gap-1"},q9={class:"text-sm font-bold text-gray-600 dark:text-gray-300"},H9={class:"multiline-ellipsis text-xs text-gray-500 dark:text-gray-300"},K9={class:"ml-auto flex shrink-0 gap-2"},G9={key:0},W9={key:1},J9={src:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"h-[2.8rem] w-[2.8rem] border-0 object-contain"},Y9={key:2,class:"h-10 w-10 rounded object-cover"},X9=N({__name:"ReplyMessagePreview",setup(t){const e=Z(),o=$(()=>{var b,k;const{replyId:u,messageMultiLists:h,selectedRoomId:p}=e.state.imkit;return(k=(b=h.get(p))==null?void 0:b.main)==null?void 0:k.map.get(u)}),s=$(()=>{const u=o.value;if(u)return e.state.imkit.users[u.senderId]}),n=$(()=>{if(o.value.type===E.Text)return o.value.text;if(o.value.type===E.Image||o.value.type===E.Sticker||o.value.type===E.Video){const{t:u}=Le();return{[E.Image]:u("image"),[E.Video]:u("video"),[E.Sticker]:u("sticker")}[o.value.type]}return""}),a=$(()=>{if(o.value.type===E.Image)return o.value.images[0]}),r=$(()=>o.value),i=$(()=>o.value),l=()=>{e.commit("imkit/setState",{replyId:""})};return(u,h)=>{var b,k,C;const p=ft("src");return o.value?(d(),g("div",B9,[v(Pe,{class:"row-span-2 h-6 w-6 shrink-0 rounded-lg bg-gray-300 text-sm",url:((b=s.value)==null?void 0:b.avatarUrl)??"",name:((k=s.value)==null?void 0:k.nickname)??""},null,8,["url","name"]),c("div",V9,[c("div",q9,f((C=s.value)==null?void 0:C.nickname),1),c("div",H9,f(n.value),1)]),c("div",K9,[o.value.type===m(E).Sticker?(d(),g("div",G9,[v(so,{class:B({"h-[2.8rem] w-[2.8rem]":!0}),message:r.value},null,8,["message"])])):I("",!0),o.value.type===m(E).Video?(d(),g("div",W9,[de(c("img",J9,null,512),[[p,i.value.video.thumbnailUrl]])])):I("",!0),a.value?de((d(),g("img",Y9,null,512)),[[p,a.value.thumbnailUrl]]):I("",!0),v(m(je),{size:20,class:"h-5 w-5 cursor-pointer text-gray-400",onClick:l})])])):I("",!0)}}}),Z9=Me(X9,[["__scopeId","data-v-b0802a47"]]),Q9={class:"relative flex grow items-center rounded-lg bg-gray-100 px-4 py-3 dark:bg-zinc-700"},eS={key:0,class:"flex h-5 w-5 items-center justify-center"},tS=["placeholder"],sS={class:"absolute top-1/2 right-2 flex -translate-y-1/2 items-center justify-center"},oS={class:"pb-0.5 text-sm font-medium text-gray-500 dark:text-gray-300"},nS=N({__name:"SearchPanel",setup(t){const e=Z(),o=S(""),s=S(0),n=S([]),a=S(!1),r=S(!1),i=async()=>{var k;if(!a.value&&o.value){r.value=!0;const{data:{result:C}}=await e.state.imkit.axios.post(He.Search,{type:["messages"],room:e.state.imkit.selectedRoomId,keyword:o.value});n.value=((k=C.messages[0])==null?void 0:k.messages)??[],r.value=!1,n.value.length>0?(s.value=n.value.length,await e.commit("imkit/setState",{messageSearchKeyword:o.value}),await e.dispatch("imkit/navigateToMessage",n.value[s.value-1])):s.value=0}},l=k=>{k>0&&k<=n.value.length&&(s.value=k,e.dispatch("imkit/navigateToMessage",n.value[k-1]))},u=Nt(1e3,i),h=cs(500,u,{atBegin:!1}),p=$(()=>e.state.imkit.config.styles);pe(o,h),xt(()=>{o.value=e.state.imkit.messageSearchKeyword,n.value=e.state.imkit.searchedMessageIds.get(e.state.imkit.selectedRoomId)??[]});const b=()=>{e.commit("imkit/setState",{isSearchInRoomMode:!1,messageSearchKeyword:""})};return(k,C)=>(d(),g("div",{class:"flex h-15 items-center justify-center border-b border-solid border-gray-200 p-2 dark:border-zinc-700",style:re(p.value.chatRoomHeader)},[c("div",Q9,[c("div",null,[r.value?(d(),g("div",eS,[v(us)])):(d(),A(m(Pt),{key:1,size:20,class:"h-5 w-5 cursor-pointer text-gray-600 dark:text-gray-300"}))]),de(c("input",{"onUpdate:modelValue":C[0]||(C[0]=w=>o.value=w),class:"-mr-4 ml-2 h-5 grow bg-gray-100 text-gray-900 placeholder-gray-400 outline-none dark:bg-zinc-700 dark:text-gray-100",placeholder:k.$t("searchInConversation"),onCompositionstart:C[1]||(C[1]=w=>a.value=!0),onCompositionend:C[2]||(C[2]=w=>a.value=!1)},null,40,tS),[[ot,o.value]]),c("div",sS,[!r.value&&o.value.length>0?(d(),g(V,{key:0},[c("div",oS,f(s.value)+"/"+f(n.value.length),1),s.value>1?(d(),A(m(xs),{key:0,size:20,class:"cursor-pointer text-gray-600 dark:text-gray-300",onClick:C[3]||(C[3]=w=>l(s.value-1))})):(d(),A(m(xs),{key:1,size:20,class:"text-gray-400"})),s.value<n.value.length?(d(),A(m(Qt),{key:2,size:20,class:"cursor-pointer text-gray-600 dark:text-gray-300",onClick:C[4]||(C[4]=w=>l(s.value+1))})):(d(),A(m(Qt),{key:3,size:20,class:"text-gray-400"}))],64)):I("",!0),v(m(je),{size:20,class:"h-5 w-5 cursor-pointer text-gray-600 dark:text-gray-300",onClick:C[5]||(C[5]=()=>{m(h).cancel({upcomingOnly:!0}),o.value="",m(u)(),b()})})])])],4))}}),lo="1.94.0",aS=N({__name:"VersionModal",setup(t){const e=Se(),o=()=>{e.closeAll()};return(s,n)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 max-w-[420px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[K(" IMKIT version: "+f(m(lo))+" ",1),c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 grow rounded-lg bg-blue-400 text-base text-white",onClick:o},f(s.$t("confirm")),1)]),_:1}))}});function Yt(t,e){if(typeof t!="object")return;if(t.getRangeAt){if(t.rangeCount===0)return;t=t.getRangeAt(0)}if(t.cloneRange){let s=t.cloneRange();s.collapse(!0),t=s.startContainer,t.nodeType===1&&(t=t.childNodes[s.startOffset])}if(!t)return;let o=t;for(;o&&o.nodeType!==1;)o=o.previousSibling;t=o||t.parentNode,t&&rS(t,e)}function rS(t,e){if(t.scrollIntoViewIfNeeded)t.scrollIntoViewIfNeeded(!1);else{e=e||t.parentElement;const o=t.offsetTop-e.scrollTop;(o<0||o>e.offsetHeight-t.offsetHeight)&&(e.scrollTop=t.offsetTop)}}function lt(t){const e=window.getSelection();e&&(e.removeAllRanges(),e.addRange(t))}function ss(){const t=window.getSelection();if(t&&t.rangeCount>0)return t.getRangeAt(0)}function ut(t,e){return e.map(o=>({at:o,index:t.lastIndexOf(o)})).reduce((o,s)=>o.index>s.index?o:s)}function iS(t,e){e=e||window;for(var o={top:t.offsetTop,left:t.offsetLeft},s=t.offsetParent;s!=null&&s!=e;)o.left+=s.offsetLeft,o.top+=s.offsetTop,s=s.offsetParent;return o}function lS(t,e){do if(e(t))return t;while(t=t&&t.parentNode)}function zs(){const t=ss();if(t){const e=t.cloneRange();return e.collapse(!0),e.setStart(e.endContainer,0),e}}const cS={name:"VueAt",props:{value:{type:String,default:null},at:{type:String,default:null},ats:{type:Array,default:()=>["@"]},suffix:{type:String,default:" "},loop:{type:Boolean,default:!0},allowSpaces:{type:Boolean,default:!0},tabSelect:{type:Boolean,default:!1},avoidEmail:{type:Boolean,default:!0},showUnique:{type:Boolean,default:!0},hoverSelect:{type:Boolean,default:!0},members:{type:Array,default:()=>[]},nameKey:{type:String,default:""},filterMatch:{type:Function,default:(t,e)=>t.toLowerCase().indexOf(e.toLowerCase())>-1},deleteMatch:{type:Function,default:(t,e,o)=>e===t+o},scrollRef:{type:String,default:""}},emits:["update:value","at","insert"],data(){return{bindsValue:this.value!=null,customsEmbedded:!1,hasComposition:!1,atwho:null}},computed:{atItems(){return this.at?[this.at]:this.ats},currentItem(){return this.atwho?this.atwho.list[this.atwho.cur]:""},style(){if(this.atwho){const{x:t,y:e}=this.atwho,{wrap:o}=this.$refs;if(o){const s=iS(o),n=this.scrollRef?document.querySelector(this.scrollRef).scrollLeft:0,a=this.scrollRef?document.querySelector(this.scrollRef).scrollTop:0,r=t+n+window.pageXOffset-s.left+"px",i=e+a+window.pageYOffset-s.top+"px";return{left:r,top:i}}}return null}},watch:{"atwho.cur"(t){t!=null&&this.$nextTick(()=>{this.scrollToCur()})},members(){this.handleInput(!0)},value(t){this.bindsValue&&this.handleValueUpdate(t)}},mounted(){this.$slots.embeddedItem&&(this.customsEmbedded=!0),this.bindsValue&&this.handleValueUpdate(this.value)},methods:{itemName(t){const{nameKey:e}=this;return e?t[e]:t},isCur(t){return t===this.atwho.cur},handleValueUpdate(t){const e=this.$el.querySelector("[contenteditable]");t!==e.innerHTML&&(e.innerHTML=t,this.dispatchInput())},dispatchInput(){let t=this.$el.querySelector("[contenteditable]"),e=new Event("input",{bubbles:!0});t.dispatchEvent(e)},handleItemHover(t){this.hoverSelect&&this.selectByMouse(t)},handleItemClick(t){this.selectByMouse(t),this.insertItem()},handleDelete(t){const e=zs();if(e){if(this.customsEmbedded&&e.endOffset>=1){let h=e.endContainer.childNodes[e.endOffset]||e.endContainer.childNodes[e.endOffset-1];if(!h||h.nodeType===Node.TEXT_NODE&&!/^\s?$/.test(h.data))return;h.nodeType===Node.TEXT_NODE?h.previousSibling&&(h=h.previousSibling):h.previousElementSibling&&(h=h.previousElementSibling);let p=[].slice.call(h.childNodes);p=[].reverse.call(p),p.unshift(h);let b;if([].some.call(p,k=>{if(k.getAttribute&&k.getAttribute("data-at-embedded")!=null)return b=k,!0}),b){t.preventDefault(),t.stopPropagation();const k=ss();k&&(k.setStartBefore(b),k.deleteContents(),lt(k),this.handleInput())}return}const{atItems:o,members:s,suffix:n,deleteMatch:a,itemName:r}=this,i=e.toString(),{at:l,index:u}=ut(i,o);if(u>-1){const h=i.slice(u+l.length);if(s.some(b=>{const k=r(b);return a(k,h,n)})){t.preventDefault(),t.stopPropagation();const b=ss();b&&(b.setStart(b.endContainer,u),b.deleteContents(),lt(b),this.handleInput())}}}},handleKeyDown(t){const{atwho:e}=this;if(e){if(t.keyCode===38||t.keyCode===40){t.metaKey||t.ctrlKey||(t.preventDefault(),t.stopPropagation(),this.selectByKeyboard(t));return}if(t.keyCode===13||this.tabSelect&&t.keyCode===9){t.preventDefault(),t.stopPropagation(),this.insertItem();return}if(t.keyCode===27){this.closePanel();return}}(t.keyCode>=48&&t.keyCode<=90||t.keyCode===8)&&setTimeout(()=>{this.handleInput()},50),t.keyCode===8&&this.handleDelete(t)},handleCompositionStart(){this.hasComposition=!0},handleCompositionEnd(){this.hasComposition=!1,this.handleInput()},handleInput(t){if(this.hasComposition)return;const e=this.$el.querySelector("[contenteditable]");this.$emit("update:value",e.innerHTML);const o=zs();if(o){const{atItems:s,avoidEmail:n,allowSpaces:a,showUnique:r}=this;let i=!0;const l=o.toString(),{at:u,index:h}=ut(l,s);h<0&&(i=!1);const p=l[h-1],b=l.slice(h+u.length,l.length);if(n&&/^[a-z0-9]$/i.test(p)&&(i=!1),!a&&/\s/.test(b)&&(i=!1),/^\s/.test(b)&&(i=!1),!i)this.closePanel();else{const{members:k,filterMatch:C,itemName:w}=this;!t&&b&&this.$emit("at",b);const x=k.filter(y=>{const T=w(y);return C(T,b,u)});if(i=!1,x.length&&(i=!0,!r)){let y=x[0];b===w(y)&&(i=!1)}i?this.openPanel(x,o,h,u):this.closePanel()}}},closePanel(){this.atwho&&(this.atwho=null)},openPanel(t,e,o,s){const n=()=>{const a=e.cloneRange();a.setStart(a.endContainer,o+s.length);const r=a.getClientRects()[0];this.atwho={range:e,offset:o,list:t,x:r.left,y:r.top-4,cur:0}};this.atwho?n():setTimeout(n,10)},scrollToCur(){let{wrap:t}=this.$refs,{cur:e}=this.atwho;const o=t.querySelector(`.atwho-li[data-index="${e}"]`),s=o.parentElement.parentElement;Yt(o,s)},selectByMouse(t){const o=+lS(t.target,s=>s.getAttribute("data-index")).getAttribute("data-index");this.atwho={...this.atwho,cur:o}},selectByKeyboard(t){const e=t.keyCode===38?-1:1,{cur:o,list:s}=this.atwho,n=this.loop?(o+e+s.length)%s.length:Math.max(0,Math.min(o+e,s.length-1));this.atwho={...this.atwho,cur:n}},insertText(t,e){e.deleteContents();const o=e.endContainer;if(o.nodeType===Node.TEXT_NODE){const s=e.endOffset;o.data=o.data.slice(0,s)+t+o.data.slice(s),e.setEnd(o,s+t.length)}else{const s=document.createTextNode(t);e.insertNode(s),e.setEndAfter(s)}e.collapse(!1),lt(e),this.dispatchInput()},insertHtml(t,e){e.deleteContents();const o=e.endContainer,s=document.createElement("span");if(s.appendChild(document.createTextNode(" ")),s.appendChild(this.htmlToElement(t)),s.appendChild(document.createTextNode(" ")),s.setAttribute("data-at-embedded",""),s.setAttribute("contenteditable",!1),o.nodeType===Node.TEXT_NODE){const n=e.endOffset;let a=o.splitText(n);o.parentNode.insertBefore(s,a),e.setEndBefore(a)}else{const n=document.createTextNode(this.suffix);e.insertNode(s),e.setEndAfter(s),e.insertNode(n),e.setEndAfter(n)}e.collapse(!1),lt(e)},insertItem(){const{range:t,list:e,cur:o}=this.atwho,{suffix:s,atItems:n,itemName:a,customsEmbedded:r}=this,i=t.cloneRange(),l=t.toString(),{at:u,index:h}=ut(l,n),p=r?h:h+u.length;i.setStart(i.endContainer,p),lt(i),lt(i);const b=e[o];if(r){const k=this.$refs.embeddedItem.firstElementChild.innerHTML;this.insertHtml(k,i)}else{const k=a(b)+s;this.insertText(k,i)}Yt(window.getSelection()),this.$emit("insert",b),this.handleInput(),Yt(i)},htmlToElement(t){const e=document.createElement("template");return t=t.trim(),e.innerHTML=t,e.content.firstChild}}},dS={class:"atwho-inner"},uS={class:"atwho-view"},mS={class:"atwho-ul"},gS=["data-index"],hS=["textContent"],fS={ref:"embeddedItem"};function pS(t,e,o,s,n,a){return d(),g("div",{ref:"wrap",class:"atwho-wrap",onCompositionstart:e[2]||(e[2]=(...r)=>a.handleCompositionStart&&a.handleCompositionStart(...r)),onCompositionend:e[3]||(e[3]=(...r)=>a.handleCompositionEnd&&a.handleCompositionEnd(...r)),onInput:e[4]||(e[4]=r=>a.handleInput()),onKeydownCapture:e[5]||(e[5]=(...r)=>a.handleKeyDown&&a.handleKeyDown(...r))},[n.atwho?(d(),g("div",{key:0,class:"atwho-panel",style:re(a.style)},[c("div",dS,[c("div",uS,[c("ul",mS,[(d(!0),g(V,null,ne(n.atwho.list,(r,i)=>(d(),g("li",{key:i,class:B(["atwho-li",a.isCur(i)&&"atwho-cur"]),"data-index":i,onMouseenter:e[0]||(e[0]=(...l)=>a.handleItemHover&&a.handleItemHover(...l)),onClick:e[1]||(e[1]=(...l)=>a.handleItemClick&&a.handleItemClick(...l))},[St(t.$slots,"item",{item:r},()=>[c("span",{textContent:f(a.itemName(r))},null,8,hS)])],42,gS))),128))])])])],4)):I("",!0),de(c("span",fS,[St(t.$slots,"embeddedItem",{current:a.currentItem})],512),[[Bs,!1]]),St(t.$slots,"default")],544)}const vS=Me(cS,[["render",pS]]),bS={name:"AtTextarea",extends:vS,emits:["update:value","at","insert"],computed:{style(){if(this.atwho){const{x:t,y:e}=this.atwho,{wrap:o}=this.$refs,s=this.$el.querySelector("textarea");if(o){const n=t+s.offsetLeft-s.scrollLeft+"px",a=e+s.offsetTop-s.scrollTop+"px";return{left:n,top:a}}}return null}},methods:{handleValueUpdate(t){const e=this.$el.querySelector("textarea");t!==e.value&&(e.value=t,this.dispatchInput())},dispatchInput(){let t=this.$el.querySelector("textarea"),e=new Event("input",{bubbles:!0});t.dispatchEvent(e)},handleDelete(){const t=this.$el.querySelector("textarea");if(t.selectionEnd-t.selectionStart>0)return;const o=t.value.slice(0,t.selectionEnd);if(o){const{atItems:s,members:n,suffix:a,deleteMatch:r,itemName:i}=this,{at:l,index:u}=ut(o,s);if(u>-1){const h=o.slice(u+l.length);n.some(b=>{const k=i(b);return r(k,h,a)})&&(t.value=t.value.slice(0,u)+t.value.slice(t.selectionEnd-1),t.selectionStart=u+1,t.selectionEnd=u+1,this.handleInput())}}},handleInput(t){if(this.hasComposition)return;const e=this.$el.querySelector("textarea");this.$emit("update:value",e.value);const o=e.value.slice(0,e.selectionEnd);if(o){const{atItems:s,avoidEmail:n,allowSpaces:a}=this;let r=!0;const{at:i,index:l}=ut(o,s);l<0&&(r=!1);const u=o[l-1],h=o.slice(l+i.length,o.length);if(n&&/^[a-z0-9]$/i.test(u)&&(r=!1),!a&&/\s/.test(h)&&(r=!1),/^\s/.test(h)&&(r=!1),!r)this.closePanel();else{const{members:p,filterMatch:b,itemName:k}=this;t||this.$emit("at",h);const C=p.filter(w=>{const x=k(w);return b(x,h,i)});C.length?this.openPanel(C,h,l,i,t):this.closePanel()}}else this.closePanel()},openPanel(t,e,o,s){const n=()=>{const a=this.$el.querySelector("textarea"),r=o+s.length,i=dn(a,r);this.atwho={chunk:e,offset:o,list:t,atEnd:r,x:i.left,y:i.top-4,cur:0}};this.atwho?n():setTimeout(n,10)},insertText(t,e){const o=e.selectionStart,s=e.selectionEnd;e.value=e.value.slice(0,o)+t+e.value.slice(s);const n=o+t.length;e.selectionStart=n,e.selectionEnd=n,this.dispatchInput()},insertItem(){const{list:t,cur:e,atEnd:o}=this.atwho,{suffix:s,atItems:n,itemName:a}=this,r=this.$el.querySelector("textarea"),i=r.value.slice(0,o),{at:l,index:u}=ut(i,n),h=u+l.length;r.selectionStart=h,r.focus();const p=t[e],b=a(p)+s;this.insertText(b,r),this.$emit("insert",p),this.handleInput()}}},$S=["width","height"],yS={__name:"StickerSvg",props:{width:{type:[Number,String],default:22},height:{type:[Number,String],default:22}},setup(t){const e=t;return(o,s)=>(d(),g("svg",{width:e.width,height:e.height,viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},[...s[0]||(s[0]=[c("path",{d:"M480 336V160C479.961 126.064 466.463 93.5296 442.467 69.5334C418.47 45.5371 385.936 32.039 352 32H160C126.064 32.039 93.5296 45.5371 69.5334 69.5334C45.5371 93.5296 32.039 126.064 32 160V352C32.039 385.936 45.5371 418.47 69.5334 442.467C93.5296 466.463 126.064 479.961 160 480H320C323.919 480 327.703 478.564 330.634 475.962L474.634 347.962C477.371 345.395 479.105 341.938 479.528 338.21L479.566 338.026C479.756 337.361 479.901 336.684 480 336ZM336 428.07V392C336.014 380.971 340.401 370.398 348.199 362.599C355.998 354.801 366.571 350.414 377.6 350.4H422.304L336 428.07ZM64 352V160C64.028 134.548 74.1512 110.146 92.1486 92.1486C110.146 74.1512 134.548 64.028 160 64H352C377.452 64.028 401.854 74.1512 419.851 92.1486C437.849 110.146 447.972 134.548 448 160V318.4H377.6C358.087 318.422 339.379 326.183 325.581 339.981C311.783 353.779 304.022 372.487 304 392V448H160C134.548 447.972 110.146 437.849 92.1486 419.851C74.1512 401.854 64.028 377.452 64 352Z"},null,-1),c("path",{d:"M208 176V168C208 157.391 203.786 147.217 196.284 139.716C188.783 132.214 178.609 128 168 128C157.391 128 147.217 132.214 139.716 139.716C132.214 147.217 128 157.391 128 168V176C128 180.243 129.686 184.313 132.686 187.314C135.687 190.314 139.757 192 144 192C148.243 192 152.313 190.314 155.314 187.314C158.314 184.313 160 180.243 160 176V168C160 165.878 160.843 163.843 162.343 162.343C163.843 160.843 165.878 160 168 160C170.122 160 172.157 160.843 173.657 162.343C175.157 163.843 176 165.878 176 168V176C176 180.243 177.686 184.313 180.686 187.314C183.687 190.314 187.757 192 192 192C196.243 192 200.313 190.314 203.314 187.314C206.314 184.313 208 180.243 208 176Z"},null,-1),c("path",{d:"M320 192C324.243 192 328.313 190.314 331.314 187.314C334.314 184.313 336 180.243 336 176V168C336 165.878 336.843 163.843 338.343 162.343C339.843 160.843 341.878 160 344 160C346.122 160 348.157 160.843 349.657 162.343C351.157 163.843 352 165.878 352 168V176C352 180.243 353.686 184.313 356.686 187.314C359.687 190.314 363.757 192 368 192C372.243 192 376.313 190.314 379.314 187.314C382.314 184.313 384 180.243 384 176V168C384 157.391 379.786 147.217 372.284 139.716C364.783 132.214 354.609 128 344 128C333.391 128 323.217 132.214 315.716 139.716C308.214 147.217 304 157.391 304 168V176C304 180.243 305.686 184.313 308.686 187.314C311.687 190.314 315.757 192 320 192Z"},null,-1),c("path",{d:"M328 264V240C328 235.757 326.314 231.687 323.314 228.686C320.313 225.686 316.243 224 312 224H200C195.757 224 191.687 225.686 188.686 228.686C185.686 231.687 184 235.757 184 240V264C184 283.096 191.586 301.409 205.088 314.912C218.591 328.414 236.904 336 256 336C275.096 336 293.409 328.414 306.912 314.912C320.414 301.409 328 283.096 328 264ZM216 264V256H296V264C296 274.609 291.786 284.783 284.284 292.284C276.783 299.786 266.609 304 256 304C245.391 304 235.217 299.786 227.716 292.284C220.214 284.783 216 274.609 216 264Z"},null,-1)])],8,$S))}},kS={key:2,class:"relative h-10 w-10"},xS={class:"overflow-hidden text-base text-ellipsis whitespace-nowrap text-gray-900 dark:text-gray-100"},wS={key:4,class:"absolute top-[60px] right-3 z-10 flex w-[188px] flex-col items-stretch gap-1 rounded-lg bg-white p-1.5 text-base text-gray-800 shadow-md dark:bg-zinc-800 dark:text-gray-200"},CS={key:0,class:"flex h-12 w-full items-center justify-center"},MS={class:"relative flex items-end justify-center gap-3 p-3 pl-3"},TS={class:"overflow-hidden text-ellipsis whitespace-nowrap"},IS={key:2,class:"absolute bottom-16 left-2 z-10 flex items-stretch gap-1 rounded-lg bg-white p-1.5 text-gray-900 shadow-md dark:bg-zinc-800 dark:text-gray-100"},RS={class:"text-xs"},SS={class:"text-xs whitespace-nowrap"},FS={key:4,class:"relative flex grow flex-col items-stretch rounded-lg bg-gray-100 px-4 py-3 dark:bg-zinc-700"},AS={class:"flex items-center gap-3 bg-gray-100 dark:bg-zinc-700"},_S={class:"flex w-0 min-w-0 grow flex-col items-stretch justify-center gap-3"},zS=["disabled","placeholder"],DS={key:0,class:"flex gap-3"},OS=["src"],NS=N({__name:"ChatRoom",setup(t){const e=Z(),{open:o}=Ce({component:j9}),s=()=>{const{open:L}=Ce({component:_9,attrs:{fileSizeLimit:J.value}});L()},n=$(()=>e.state.imkit.rooms[e.state.imkit.selectedRoomId]),a=$(()=>e.state.imkit.selectedRoomId),r=$(()=>!!e.state.imkit.isRequesting[`/rooms/${e.state.imkit.selectedRoomId}/messages`]),i=$(()=>{var j,X;const L=Object.keys(e.state.imkit.isTyping).map(ie=>new fe({_id:ie,messageType:"typing",sender:{_id:ie}}));return((X=(j=e.state.imkit.messageMultiLists.get(e.state.imkit.selectedRoomId))==null?void 0:j.main)==null?void 0:X.array().concat(L))??[]}),l=$(()=>ms().has("roomId")),u=$(()=>i.value.at(-1)),h=$(()=>e.state.imkit.isRoomInfoVisible),p=$(()=>e.state.imkit.isRoomContentVisible),b=$(()=>e.state.imkit.navigationTargetId),k=S(null),C=S(""),w=S(!1),x=S(!1),y=S(!1),T=S(null),M=S(null),U=S(!1),_=S(),P=S([]),F=S([]),q=S(!1),Q=S(!1),ge=S(),$e=S(he().subtract(5,"second")),be=S(!1),ye=$(()=>e.state.imkit.replyId),H=$(()=>e.state.imkit.config.settings),J=$(()=>H.value.fileUploadSizeLimit??2e7),ae=$(()=>e.state.imkit.isSearchInRoomMode),G=$(()=>e.state.imkit.config.styles),se=S(!1),Fe=S(null),qe=async()=>{const L=async()=>{if(C.value){const{replyId:X}=e.state.imkit;let ie=C.value.trim(),me=[];if(ie.includes("@"))for(const Qe of n.value.memberIds){const le=e.state.imkit.users[Qe];ie.includes(`@${le.nickname}`)&&(me.push(le.id),ie=ie.replace(`@${le.nickname}`,`@${le.id}`))}const Oe={teamId:e.state.tribo.currentTeamId,roomId:n.value.id,messageType:"text",message:ie,reply:X||null,mentions:me};C.value="",await vn(),ge.value&&(ge.value.style.height="auto",ge.value.style.height=Math.min(ge.value.scrollHeight,64)+"px"),await e.dispatch("imkit/sendMessage",Oe),e.commit("imkit/setState",{replyId:null})}},j=async()=>{if(P.value.length>0){const X={teamId:e.state.tribo.currentTeamId,roomId:n.value.id,messageType:"image",images:P.value,files:F.value};P.value=[],F.value=[],await e.dispatch("imkit/sendMessage",X)}};await Promise.all([j(),L()])},W=async()=>{var j,X;if(i.value.length>=e.state.imkit.numberOfTotalMessages)return;const L=await e.dispatch("imkit/loadMessages",{roomId:n.value.id,beforeMessageId:(j=i.value[0])==null?void 0:j.id});L&&L.length>0&&((X=k.value)==null||X.scrollToIndex(L.length))},Y=async()=>{var L,j,X;Q.value=!1,((L=e.state.imkit.messageMultiLists.get(e.state.imkit.selectedRoomId))==null?void 0:L.main)!=((j=e.state.imkit.messageMultiLists.get(e.state.imkit.selectedRoomId))==null?void 0:j.tail)&&await e.dispatch("imkit/loadMessages",{roomId:n.value.id,afterMessageId:(X=i.value[i.value.length-1])==null?void 0:X.id})},ce=L=>{C.value+=L.i,y.value=!1},Te=()=>{x.value=!1},De=()=>{y.value=!1},Ne=()=>{x.value=!x.value,x.value&&(y.value=!1)},xe=()=>{y.value=!y.value,y.value&&(x.value=!1)},te=()=>{var L;(L=_.value)==null||L.click()},oe=async L=>{var Qe;const j=Array.from(((Qe=L==null?void 0:L.target)==null?void 0:Qe.files)||[]);if(j.some(le=>le.size>=J.value)){s(),_.value&&(_.value.value="");return}const X=j.filter(le=>le.size<J.value);if(X.length===0||X.length>10)return;const ie=X.filter(le=>le.type.startsWith("image")),me=X.filter(le=>le.type.startsWith("video")),Oe=X.filter(le=>!le.type.startsWith("image")&&!le.type.startsWith("video"));if(ie.length>0){const le=await Promise.all(ie.map(Jt)),rt={teamId:e.state.tribo.currentTeamId,roomId:n.value.id,messageType:"image",images:le,files:Array.from(X)};await e.dispatch("imkit/sendMessage",rt)}if(me.length>0)for(const le of me){const rt=await t9(le),{width:vo,height:bo,duration:$o}=rt,yo={teamId:e.state.tribo.currentTeamId,roomId:n.value.id,messageType:"video",video:rt,file:le,width:vo,height:bo,duration:$o};await e.dispatch("imkit/sendMessage",yo)}if(Oe.length>0)for(const le of Oe){const rt={teamId:e.state.tribo.currentTeamId,roomId:n.value.id,messageType:"file",file:le,originalUrl:"",extra:{mimeType:le.type,fileName:le.name.split(".").slice(0,-1).join("."),bytes:le.size,fileExtension:le.name.split(".").pop()}};await e.dispatch("imkit/sendMessage",rt)}_.value&&(_.value.value="")},ue=async L=>{const j=((L==null?void 0:L.dataTransfer)||{}).files||[];if(j.length===0||j.length>10)return;if(Array.from(j).some(me=>me.size>=J.value)){s();return}const X=await Promise.all(Array.from(j).map(Jt)),ie={teamId:e.state.tribo.currentTeamId,roomId:n.value.id,messageType:"image",images:X,files:Array.from(j)};await e.dispatch("imkit/sendMessage",ie)},Ie=L=>{L.preventDefault()},Ae=async L=>{const X=(L.clipboardData||{}).files;if(!(X.length===0||X.length>10)){if(Array.from(X).some(ie=>ie.size>=J.value)){s();return}L.preventDefault(),P.value=P.value.concat(await Promise.all(Array.from(X).map(Jt))),F.value=F.value.concat(Array.from(X))}},Xe=()=>{e.commit("imkit/setState",{selectedRoomId:""})},Ee=L=>{P.value.splice(L,1),F.value.splice(L,1)},Ze=()=>{setTimeout(()=>{w.value=!1},0)},Tt=L=>{!w.value&&L.keyCode==13&&!L.shiftKey&&!H.value.sendButtonEnabled&&(L.preventDefault(),qe())},go=()=>{ge.value&&(ge.value.style.height="auto",ge.value.style.height=Math.min(ge.value.scrollHeight,64)+"px")},ho=()=>{e.commit("imkit/setState",{isSearchInRoomMode:!0})};let hs=0;const fs=async(L,j=!0)=>{j&&(q.value=!1),e.commit("imkit/clearChatRoom"),Promise.all([e.dispatch("imkit/loadMessages",{roomId:L}),e.dispatch("imkit/fetchRoom",L)]).finally(()=>{var X,ie,me;H.value.enableReadReceipt&&(((X=n.value)==null?void 0:X.numberOfUnread)??0)>0&&(e.dispatch("imkit/updateLastRead",L),e.dispatch("imkit/insertUnreadMessage")),(ie=n.value)!=null&&ie.isSuperuser&&e.dispatch("imkit/getBlockList",n.value.id);for(const Oe of e.state.imkit.deliveringMessages.values())Oe.roomId===L&&e.commit("imkit/pushMessage",Oe);(me=k.value)==null||me.scrollToBottom(),q.value=!0})},Vt=S(!1),ps=()=>{se.value=!se.value};xt(()=>{pe(a,async(L,j)=>{L!==j&&L&&fs(L)},{immediate:!0}),pe([()=>i.value.length,()=>u.value],([L],[j])=>{var X,ie,me,Oe,Qe,le;L<j||L-j>1||((X=k.value)==null?void 0:X.getOffset())!==void 0&&(((ie=k.value)==null?void 0:ie.getOffset())+((me=k.value)==null?void 0:me.getClientSize())>=((Oe=k.value)==null?void 0:Oe.getScrollSize())||((Qe=u.value)==null?void 0:Qe.senderId)===e.state.imkit.uid?(Q.value=!1,(le=k.value)==null||le.scrollToBottom()):Q.value=!0)}),pe(b,L=>{var X;if(!L)return;const j=i.value.findIndex(ie=>ie.id===L);j!==-1&&((X=k.value)==null||X.scrollToIndex(j)),e.commit("imkit/setState",{navigationTargetId:""})}),pe(ye,()=>{ye.value&&(U.value=!1,setTimeout(()=>{var L;(L=ge.value)==null||L.focus()},0))}),pe(C,()=>{if($e.value.add(5,"second")>he())return;$e.value=he();const{socket:L,selectedRoomId:j}=e.state.imkit;L.emit("typing",j)}),document.addEventListener("visibilitychange",()=>{document.hidden?hs=he().unix():he().unix()-hs>60&&(e.state.imkit.socket.connect(),fs(a.value,!1))})});const fo=()=>{const{open:L}=Ce({component:aS});L()},po=$(()=>n.value.memberIds.map(L=>{var j;return(j=e.state.imkit.users[L])==null?void 0:j.nickname})),qt=$(()=>{const L=n.value;if(!L||!L.isSuperuser)return!1;const j=L.memberIds.filter(X=>X!==e.state.imkit.uid&&!X.endsWith("_sub"));return j.length===0?!1:j.every(X=>{var ie;return!!((ie=e.state.imkit.blockedUsers)!=null&&ie[X])})});return(L,j)=>{var ie;const X=ft("touch");return n.value?(d(),g("div",{key:0,class:"flex h-dvh flex-col bg-white dark:bg-zinc-800",onDrop:ve(ue,["prevent"]),onDragenter:Ie,onDragover:Ie},[ae.value?(d(),A(nS,{key:0})):de((d(),g("div",{key:1,class:"flex h-15 items-center gap-3 border-b border-solid border-gray-200 px-3 py-2.5 select-none dark:border-zinc-700",style:re(G.value.chatRoomHeader)},[l.value?I("",!0):(d(),A(m(Ws),{key:0,size:24,class:"flex cursor-pointer text-gray-600 sm:hidden! dark:text-gray-300",onClick:Xe})),n.value.avatars.length===1?(d(),A(Pe,{key:1,url:n.value.avatars[0].url,name:n.value.avatars[0].name,class:"h-10! w-10! text-lg!"},null,8,["url","name"])):(d(),g("div",kS,[v(Pe,{url:n.value.avatars[1].url,name:n.value.avatars[1].name,class:"absolute top-0 right-0 h-7! w-7! rounded-xl text-base!"},null,8,["url","name"]),v(Pe,{url:n.value.avatars[0].url,name:n.value.avatars[0].name,class:"absolute bottom-0 left-0 h-[30px]! w-[30px]! rounded-xl border-2 border-white text-base! group-hover:border-gray-100 dark:border-zinc-800"},null,8,["url","name"])])),c("div",xS,f(n.value.displayName),1),j[11]||(j[11]=c("div",{class:"grow"},null,-1)),H.value.searchInRoomEnabled?(d(),A(m(Pt),{key:3,size:24,class:"relative mx-2 h-6 w-6 cursor-pointer text-gray-600 dark:text-gray-300",onClick:ho})):I("",!0),v(m(un),{size:24,class:"relative mx-2 h-6 w-6 cursor-pointer text-gray-600 dark:text-gray-300",onClick:j[0]||(j[0]=me=>m(e).commit("imkit/setState",{isRoomContentVisible:!p.value,isRoomInfoVisible:!1}))}),v(m(ds),{ref_key:"actionMenuRef",ref:Fe,class:"relative mx-2 h-6 w-6 cursor-pointer text-gray-600 dark:text-gray-300",size:24,onClick:ve(ps,["stop"])},null,512),se.value?de((d(),g("div",wS,[c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 text-sm hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:j[1]||(j[1]=me=>Vt.value=!0)},[v(m(Js),{size:20}),K(" "+f(L.$t("inviteMember")),1)]),n.value.type===m(Je).Group&&H.value.showGroupChatRoomInfoButton||n.value.type===m(Je).Direct&&H.value.showDirectChatRoomInfoButton?(d(),g("div",{key:0,class:"flex cursor-pointer items-center gap-2 rounded p-2 text-sm hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:j[2]||(j[2]=me=>m(e).commit("imkit/setState",{isRoomInfoVisible:!h.value,isRoomContentVisible:!1}))},[v(m(Gs),{size:20}),K(" "+f(L.$t("chatRoomInfo")),1)])):I("",!0)])),[[m(Ve),[()=>{ps()},{ignore:[Fe.value]}]]]):I("",!0)],4)),[[X,fo,"longtap"]]),v(m(Et),{ref_key:"vl",ref:k,class:B(["grow overflow-auto p-2",{"opacity-0":!q.value&&!r.value}]),"data-key":"id","data-sources":i.value,"data-component":W6,"wrap-class":"flex flex-col","estimated-size":66,keeps:50,onTotop:W,onTobottom:Y},{header:D(()=>[r.value?(d(),g("div",CS,[...j[12]||(j[12]=[c("svg",{class:"h-6 w-6 animate-spin fill-blue-400 text-gray-200 dark:fill-sky-700 dark:text-gray-700",viewBox:"0 0 100 101",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z",fill:"currentColor"}),c("path",{d:"M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z",fill:"currentFill"})],-1)])])):I("",!0)]),_:1},8,["class","data-sources"]),c("div",MS,[Q.value?(d(),g("div",{key:0,class:"absolute -top-10 right-0 left-0 flex h-10 cursor-pointer items-center bg-gray-200/90 px-3 dark:bg-zinc-600/90",onClick:j[3]||(j[3]=(...me)=>k.value.scrollToBottom&&k.value.scrollToBottom(...me))},[c("span",TS,f((ie=n.value.lastMessage)==null?void 0:ie.string),1)])):I("",!0),H.value.locationInputEnabled||H.value.audioInputEnabled?(d(),A(m(yt),{key:1,class:B(["h-12 w-5 shrink-0 transform cursor-pointer object-contain text-slate-500 transition dark:text-slate-400",{"rotate-45":U.value}]),onClick:j[4]||(j[4]=()=>{U.value?U.value=!1:be.value=!0})},null,8,["class"])):I("",!0),be.value?de((d(),g("div",IS,[H.value.locationInputEnabled?(d(),g("div",{key:0,class:"flex min-w-16 cursor-pointer flex-col items-center justify-center gap-1 p-2",onClick:j[5]||(j[5]=(...me)=>m(o)&&m(o)(...me))},[v(m(mn),{class:"h-6 w-6 text-slate-500 dark:text-slate-400"}),c("div",RS,f(L.$t("location")),1)])):I("",!0),H.value.audioInputEnabled?(d(),g("div",{key:1,class:"flex min-w-16 cursor-pointer flex-col items-center justify-center gap-1 p-2",onClick:j[6]||(j[6]=()=>{be.value=!1,U.value=!0})},[v(m(gn),{class:"h-6 w-6 text-slate-500 dark:text-slate-400"}),c("div",SS,f(L.$t("audio")),1)])):I("",!0)])),[[m(Ve),()=>{be.value=!1}]]):I("",!0),H.value.audioInputEnabled&&U.value?(d(),A(R9,{key:3})):(d(),g("div",FS,[v(Z9),c("div",AS,[c("div",_S,[v(bS,{class:"flex",members:po.value},{default:D(()=>[de(c("textarea",{ref_key:"input",ref:ge,"onUpdate:modelValue":j[7]||(j[7]=me=>C.value=me),disabled:qt.value,type:"text",rows:"1",class:B(["w-full resize-none bg-gray-100 text-gray-900 placeholder-gray-400 outline-none dark:bg-zinc-700 dark:text-gray-100",{"cursor-not-allowed":qt.value}]),placeholder:qt.value?L.$t("textareaBlockedHint"):L.$t("TypeMessage"),onCompositionstart:j[8]||(j[8]=me=>w.value=!0),onCompositionend:Ze,onKeydown:hn(Tt,["enter"]),onInput:go,onPaste:Ae},null,42,zS),[[ot,C.value]])]),_:1},8,["members"]),P.value.length>0?(d(),g("div",DS,[(d(!0),g(V,null,ne(P.value,(me,Oe)=>(d(),g("div",{key:`${me.id}-${Oe}`,class:"group relative h-12 w-12"},[c("img",{src:me.thumbnailUrl,class:"absolute bottom-0 left-0 h-full w-full rounded-lg bg-gray-200 object-cover dark:bg-zinc-600"},null,8,OS),v(m(je),{size:20,class:"absolute -top-2 -right-2 hidden h-5 w-5 cursor-pointer text-gray-600 group-hover:block dark:text-gray-300",onClick:Qe=>Ee(Oe)},null,8,["onClick"])]))),128))])):I("",!0)]),H.value.stickerInputEnabled?(d(),g("button",{key:0,ref_key:"stickerButtonEl",ref:T,class:"shrink-0 cursor-pointer",onClick:ve(Ne,["stop"])},[v(yS,{class:"fill-slate-500 dark:fill-slate-400"})],512)):I("",!0),H.value.emojiInputEnabled?(d(),g("button",{key:1,ref_key:"emojiButtonEl",ref:M,class:"shrink-0 cursor-pointer",onClick:ve(xe,["stop"])},[v(m(Ks),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"})],512)):I("",!0),H.value.fileInputEnabled?(d(),g("button",{key:2,class:"shrink-0 cursor-pointer",onClick:te},[v(m(fn),{class:"h-5 w-5 text-slate-500 dark:text-slate-400"}),c("input",{ref_key:"fileInput",ref:_,type:"file",multiple:"true",class:"hidden",onChange:oe},null,544)])):I("",!0)]),H.value.stickerInputEnabled&&x.value?de((d(),A(e9,{key:0,onClose:j[9]||(j[9]=()=>{x.value=!1})},null,512)),[[m(Ve),[Te,{ignore:[T.value]}]]]):I("",!0)])),H.value.emojiInputEnabled&&y.value?de((d(),A(m(pn),{key:5,class:B(["absolute right-2.5 bottom-16 overflow-auto","is-light"]),native:!0,theme:"light",onSelect:ce},null,512)),[[m(Ve),[De,{ignore:[M.value]}]]]):I("",!0),U.value?I("",!0):(d(),g(V,{key:6},[C.value.length>0?(d(),A(m(ws),{key:0,class:B(["my-auto mr-1 ml-0.5 h-6 w-6 cursor-pointer text-blue-500",{"sm:hidden":!H.value.sendButtonEnabled}]),style:re(G.value.sendButtonEnabled),onClick:qe},null,8,["class","style"])):(d(),A(m(ws),{key:1,disabled:C.value.length===0,class:B(["my-auto mr-1 ml-0.5 h-6 w-6 cursor-not-allowed text-gray-200 dark:text-gray-700",{"sm:hidden":!H.value.sendButtonEnabled}]),style:re(G.value.sendButtonDisabled)},null,8,["disabled","class","style"]))],64)),v(ro,{"room-member-ids":n.value.memberIds,open:Vt.value,onClose:j[10]||(j[10]=me=>Vt.value=!1)},null,8,["room-member-ids","open"])])],32)):I("",!0)}}}),Ds=Me(NS,[["__scopeId","data-v-121850ee"]]),PS={class:"space-y-4"},ES={class:"mb-2 block text-sm font-medium"},US={class:"flex justify-end space-x-2 pt-2"},LS=N({name:"InviteMemberToRoomDialog",__name:"MoveOutMemberConfirmModal",props:{open:{type:Boolean},roomId:{},memberId:{},memberName:{}},emits:["invite-member","close"],setup(t,{emit:e}){const o=t,s=e,n=Z(),a=$(()=>o.open),r=u=>{console.log("handleOpenChange",u),u||s("close")},i=async()=>{try{await n.dispatch("imkit/removeMembers",{roomId:o.roomId,uids:[o.memberId]}),s("close")}catch(u){console.error("Failed to move out member",u)}},l=()=>{s("close")};return(u,h)=>(d(),A(m(Ct),{open:a.value,"onUpdate:open":r},{default:D(()=>[v(m(Mt),{class:"sm:max-w-md"},{default:D(()=>[v(m(Lt),null,{default:D(()=>[v(m(jt),null,{default:D(()=>[K(f(u.$t("remove-member-title")),1)]),_:1})]),_:1}),c("div",PS,[c("p",ES,f(u.$t("remove-member-message",{memberName:o.memberName})),1),c("div",US,[v(m(Re),{variant:"outline",class:"pt-2",onClick:l},{default:D(()=>[K(f(u.$t("cancel")),1)]),_:1}),v(m(Re),{variant:"destructive",class:"pt-2",onClick:i},{default:D(()=>[K(f(u.$t("remove-member-confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["open"]))}}),jS={class:"space-y-4"},BS={class:"mb-2 block text-sm font-medium"},VS={class:"flex justify-end space-x-2 pt-2"},qS=N({name:"InviteMemberToRoomDialog",__name:"LeaveChatRoomConfirmModal",props:{open:{type:Boolean},roomId:{},memberId:{},roomName:{}},emits:["invite-member","close"],setup(t,{emit:e}){const o=t,s=e,n=Z(),a=$(()=>o.open),r=u=>{console.log("handleOpenChange",u),u||s("close")},i=async()=>{try{await n.dispatch("imkit/removeMembers",{roomId:o.roomId,uids:[o.memberId]}),s("close")}catch(u){console.error("Failed to leave chat room",u)}},l=()=>{s("close")};return(u,h)=>(d(),A(m(Ct),{open:a.value,"onUpdate:open":r},{default:D(()=>[v(m(Mt),{class:"sm:max-w-md"},{default:D(()=>[v(m(Lt),null,{default:D(()=>[v(m(jt),null,{default:D(()=>[K(f(u.$t("leave-room-title")),1)]),_:1})]),_:1}),c("div",jS,[c("p",BS,f(u.$t("leave-room-message",{roomName:o.roomName})),1),c("div",VS,[v(m(Re),{variant:"outline",class:"pt-2",onClick:l},{default:D(()=>[K(f(u.$t("cancel")),1)]),_:1}),v(m(Re),{variant:"destructive",class:"pt-2",onClick:i},{default:D(()=>[K(f(u.$t("leave-room-confirm")),1)]),_:1})])])]),_:1})]),_:1},8,["open"]))}}),HS={class:"absolute inset-0 flex w-full flex-col divide-y divide-gray-200 bg-white sm:relative sm:w-[350px] sm:max-w-[350px] sm:min-w-[350px] dark:divide-zinc-700 dark:bg-zinc-800"},KS={class:"flex h-15 items-center gap-4 px-3"},GS={class:"flex-1"},WS={class:"text-lg font-semibold text-foreground"},JS={class:"flex flex-col items-center space-y-3 border-b border-gray-200 py-6 dark:border-zinc-700"},YS={class:"space-y-1 text-center"},XS={class:"text-lg font-semibold text-foreground"},ZS={key:0,class:"flex flex-col gap-4 overflow-auto p-2"},QS={class:"space-y-3 px-4 py-4"},e7={class:"flex items-center justify-between"},t7={class:"text-sm font-medium"},s7={class:"flex flex-col gap-3 p-4"},o7={class:"flex items-center"},n7={class:"relative h-[50px] w-[50px]"},a7={class:"mt-[-8px] flex flex-col overflow-hidden text-ellipsis whitespace-nowrap"},r7={class:"text-base text-gray-900 dark:text-gray-100"},i7={key:0,class:"border-t border-gray-200 dark:border-zinc-700"},l7=N({__name:"ChatRoomInfo",setup(t){he.extend(Ut);const e=Z(),o=$(()=>e.state.imkit.rooms[e.state.imkit.selectedRoomId]),s=$(()=>e.state.imkit.users),n=$(()=>e.state.imkit.uid),a=()=>{e.commit("imkit/setState",{isRoomInfoVisible:!1})},r=S(!1),i=S(!1),l=S(!1),u=async x=>{console.log(x),r.value=!1},h=S(""),p=S(""),b=(x,y)=>{h.value=x,p.value=y,i.value=!0},k=()=>{i.value=!1,h.value="",p.value=""},C=()=>{l.value=!0},w=()=>{l.value=!1};return(x,y)=>(d(),g(V,null,[c("div",HS,[c("div",null,[c("div",KS,[c("div",GS,[c("h2",WS,f(x.$t("chatRoomInfo")),1)]),v(m(je),{class:"h-5 w-5 cursor-pointer text-gray-600 dark:text-gray-300",onClick:a})]),c("div",JS,[v(m(gt),{class:"h-24 w-24"},{default:D(()=>[v(m(kt),{src:o.value.coverUrl},null,8,["src"]),v(m(ht),{class:"bg-secondary text-2xl text-secondary-foreground"},{default:D(()=>[c("span",null,f(o.value.name.charAt(0)),1)]),_:1})]),_:1}),c("div",YS,[c("h3",XS,f(o.value.name),1)])]),o.value.type===m(Je).Group?(d(),g("div",ZS,[c("div",QS,[c("div",e7,[c("h4",t7,f(x.$t("members"))+" ("+f(o.value.memberIds.length)+") ",1),v(m(Re),{variant:"outline",size:"sm",onClick:y[0]||(y[0]=T=>r.value=!0)},{default:D(()=>[v(m(Js),{class:"mr-2 h-4 w-4"}),K(" "+f(x.$t("invite")),1)]),_:1})])]),c("div",null,[c("div",s7,[(d(!0),g(V,null,ne(o.value.memberIds,T=>(d(),g("div",{key:T,class:"flex items-center justify-between gap-4"},[c("div",o7,[c("div",n7,[v(m(gt),{class:"h-10 w-10"},{default:D(()=>[v(m(kt),{src:s.value[T].avatarUrl},null,8,["src"]),v(m(ht),{class:"bg-secondary text-2xl text-secondary-foreground"},{default:D(()=>[c("span",null,f(s.value[T].nickname.charAt(0)),1)]),_:2},1024)]),_:2},1024)]),c("div",a7,[c("div",r7,f(s.value[T].nickname),1)])]),s.value[T].id!==n.value?(d(),A(m(Re),{key:0,size:"icon",variant:"ghost",class:"h-8 w-8 flex-shrink-0 text-muted-foreground hover:text-destructive",onClick:M=>b(T,s.value[T].nickname)},{default:D(()=>[v(m(bn),{class:"h-4 w-4"})]),_:1},8,["onClick"])):I("",!0)]))),128))])])])):I("",!0)]),o.value.type===m(Je).Group?(d(),g("div",i7,[v(m(Re),{variant:"ghost",class:"w-full text-muted-foreground hover:text-foreground",onClick:C},{default:D(()=>[v(m(Ys),{class:"mr-2 h-4 w-4"}),K(" "+f(x.$t("leaveChatRoom")),1)]),_:1})])):I("",!0)]),v(ro,{open:r.value,onClose:y[1]||(y[1]=T=>r.value=!1),onInviteMember:u},null,8,["open"]),v(LS,{open:i.value,roomId:o.value.id,memberId:h.value,memberName:p.value,onClose:k},null,8,["open","roomId","memberId","memberName"]),v(qS,{open:l.value,roomId:o.value.id,roomName:o.value.name,memberId:n.value,onClose:w},null,8,["open","roomId","roomName","memberId"])],64))}}),c7="/assets/imkit_logo_no_text-McT4VEFt.png",d7={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},u7=["onClick"],m7=N({__name:"AddToFolderModal",props:{roomId:{}},setup(t){const e=Se(),o=t,s=Z(),n=$(()=>s.state.imkit.sortedFolderIds.map(r=>s.state.imkit.folders[r]).filter(r=>r)),a=r=>{o.roomId&&s.dispatch("imkit/addRoomToFolder",{roomId:o.roomId,folderId:r})};return(r,i)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[360px] relative max-h-80vh overflow-y-auto","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",d7,[K(f(r.$t("addToFolder"))+" ",1),c("button",{class:"flex items-center justify-center",onClick:i[0]||(i[0]=l=>m(e).closeAll())},[v(We,{class:"h-7 w-7"})])]),(d(!0),g(V,null,ne(n.value,l=>(d(),g("div",{key:l.id,class:"group relative flex cursor-pointer items-center gap-3 rounded-lg bg-slate-200 p-2 dark:bg-slate-700",onClick:()=>{a(l.id),m(e).closeAll()}},[v(m($n),{size:30,class:"text-gray-600 dark:text-gray-300"}),K(" "+f(l.name),1)],8,u7))),128))]),_:1}))}}),g7=["width","height"],h7={__name:"AlertSvg",props:{width:{type:[Number,String],default:50},height:{type:[Number,String],default:50}},setup(t){const e=t;return(o,s)=>(d(),g("svg",{width:e.width,height:e.height,viewBox:"0 0 50 50",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...s[0]||(s[0]=[yn('<g clip-path="url(#ovlhak8zza)" fill="#FF4D4F"><path d="M25 0C11.215 0 0 11.215 0 25s11.215 25 25 25 25-11.215 25-25S38.785 0 25 0zm0 45.161C13.883 45.161 4.839 36.117 4.839 25S13.883 4.839 25 4.839 45.161 13.883 45.161 25 36.117 45.161 25 45.161z"></path><path d="M25 12.299a2.419 2.419 0 0 0-2.42 2.42v13.219a2.42 2.42 0 0 0 4.839 0v-13.22a2.419 2.419 0 0 0-2.42-2.42zM25 37.12a2.42 2.42 0 1 0 0-4.84 2.42 2.42 0 0 0 0 4.84z"></path></g><defs><clipPath id="ovlhak8zza"><path fill="#fff" d="M0 0h50v50H0z"></path></clipPath></defs>',2)])],8,g7))}},f7={class:"w-full"},p7={class:"text-center text-base font-medium text-stone-800 dark:text-stone-300"},v7={class:"text-sm font-normal text-stone-700 dark:text-stone-400"},b7={class:"flex w-full gap-3"},$7=N({__name:"DeleteRoomModal",props:{roomId:{}},setup(t){const e=Se(),o=Z(),s=S(!1),n=t,a=async()=>{s.value=!0;try{await o.dispatch("imkit/hideMessagesFromUserInRoom",n.roomId),await o.dispatch("imkit/updateRoomPrefs",{roomId:n.roomId,prefs:{hidden:!0}}),e.closeAll(),o.state.imkit.selectedRoomId===n.roomId&&o.commit("imkit/setState",{selectedRoomId:""})}catch(r){console.error("Error deleting room:",r)}finally{s.value=!1}};return(r,i)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col items-center gap-5 max-w-[350px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",f7,[c("button",{class:"ml-auto flex items-center justify-center",onClick:i[0]||(i[0]=l=>m(e).closeAll())},[v(We,{class:"h-7 w-7"})])]),v(h7),c("div",p7,f(r.$t("chatroomDeleteConfirmationTitle")),1),c("div",v7,f(r.$t("chatroomDeleteConfirmationMessage")),1),c("div",b7,[c("button",{class:"h-10 w-full rounded-md border border-gray-200 text-gray-800 dark:border-stone-400 dark:text-stone-400",onClick:i[1]||(i[1]=l=>m(e).closeAll())},f(r.$t("cancel")),1),c("button",{class:B(["flex h-10 w-full items-center justify-center gap-2 rounded-md text-white",s.value?"cursor-not-allowed bg-red-300":"bg-red-500"]),onClick:a},[s.value?(d(),A(us,{key:0,class:B(["h-4 w-4",s.value?"fill-red-300! text-white!":"fill-red-500"])},null,8,["class"])):I("",!0),K(" "+f(r.$t("delete")),1)],2)])]),_:1}))}}),y7=["textContent"],k7=["textContent"],x7=["textContent"],os=N({__name:"HighlightedText",props:{text:{},highlight:{}},setup(t){const e=t,o=$(()=>{if(!e.highlight)return[{text:e.text,highlight:!1}];const n=new RegExp(`(${s(e.highlight)})`,"gi");return e.text.split(n).map(r=>{var i;return{text:r,highlight:r.toLowerCase()===((i=e.highlight)==null?void 0:i.toLowerCase())}})});function s(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}return(n,a)=>t.highlight?(d(!0),g(V,{key:1},ne(o.value,(r,i)=>(d(),g(V,{key:i},[r.highlight?(d(),g("span",{key:0,class:"text-blue-400",textContent:f(r.text)},null,8,k7)):(d(),g("span",{key:1,textContent:f(r.text)},null,8,x7))],64))),128)):(d(),g("span",{key:0,textContent:f(t.text)},null,8,y7))}}),w7={key:0},C7={class:"mb-3 flex items-center justify-between text-xl font-semibold text-gray-700 dark:text-gray-300"},M7={class:"mb-1 flex items-center justify-between text-gray-700 dark:text-gray-300"},T7=["placeholder"],I7={key:0,class:"mt-1 text-sm text-red-500"};const R7={class:"mt-3 mb-1 text-base"},S7={class:"divide-y rounded bg-gray-100 dark:bg-zinc-800"},F7={class:"grid grid-cols-6 gap-3 p-4"},A7=["onClick"],_7={class:"flex items-center justify-center gap-3 rounded p-3"},z7=["placeholder"],D7={class:"mt-5 flex gap-3"},O7=["disabled"],N7={key:1},P7={class:"mb-1 mb-5 flex min-w-[380px] items-center justify-between text-xl font-semibold text-gray-700 dark:text-gray-300"},E7={key:0,class:"mt-1 flex flex-wrap gap-2"},U7=["onClick"],L7={class:"flex items-center gap-3"},j7={class:"w-64 truncate overflow-hidden text-base text-ellipsis whitespace-nowrap text-black dark:text-[#F3F4F6]"},B7={class:"flex items-center gap-3"},V7={class:"mt-3"},q7={class:"text-[#60A5FA]"},H7={key:2},K7={class:"mb-2 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},G7=N({__name:"TagsModal",props:{roomId:{}},setup(t){const e=Se(),o=t,s=Z(),n=S([]),a=S({}),r=S([]),i=S({}),l=S(""),u=S("#60a5fa"),h=S(!0),p=S(1),b=S(""),k=S(!1),C=S(""),w=S(-1),x=$(()=>{if(!l.value.trim())return!1;const H=n.value.includes(l.value);return h.value?H:H&&l.value!==C.value}),y=["#f43f5e","#f97316","#f59e0b","#84cc16","#10b981","#06b6d4","#0ea5e9","#6366f1","#8b5cf6","#6b7280","#64748B","#78716c"],T=H=>{s.dispatch("imkit/updateRoomPrefs",{roomId:H,prefs:{tags:n.value,tagColors:a.value}})},M=s.state.imkit.rooms[o.roomId];M.pref&&(n.value=[...M.pref.tags||[]],r.value=[...M.pref.tags||[]],a.value={...M.pref.tagColors||{}},i.value={...M.pref.tagColors||{}},n.value.length>0&&(p.value=0,k.value=!1));const U=()=>{l.value&&(n.value.length>=5||(n.value.includes(l.value)||n.value.push(l.value),u.value.startsWith("#")&&(a.value[l.value]=u.value,l.value="")))},_=()=>{l.value&&u.value.startsWith("#")&&(n.value[w.value]=l.value,delete a.value[C.value],a.value[l.value]=u.value,l.value="")},P=()=>{n.value=n.value.filter(H=>H!==b.value),delete a.value[b.value]},F=H=>{b.value=H,p.value=2},q=H=>{l.value=H,u.value=a.value[H]},Q=()=>{u.value=u.value.replace(/[^#0-9a-fA-F]/g,""),u.value.charAt(0)!=="#"&&(u.value="#"+u.value)},ge=()=>{p.value=1,h.value=!0,l.value="",u.value="#60a5fa"},$e=(H,J)=>{p.value=1,h.value=!1,l.value=`${H}`,u.value=a.value[H],C.value=`${H}`,w.value=J},be=()=>{p.value=0,k.value=!1},ye=()=>{k.value=!0};return(H,J)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 max-w-[420px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[p.value===1?(d(),g("div",w7,[c("div",C7,[J[12]||(J[12]=c("div",null," ",-1)),K(" "+f(h.value===!0?H.$t("createTag"):H.$t("editTag"))+" ",1),c("button",{class:"flex items-center justify-center",onClick:J[0]||(J[0]=ae=>m(e).closeAll())},[v(We,{class:"h-7 w-7"})])]),c("div",M7,[de(c("input",{"onUpdate:modelValue":J[1]||(J[1]=ae=>l.value=ae),type:"text",class:B(["w-32 grow rounded-md bg-gray-100 p-2 text-base placeholder-gray-400 outline-none dark:bg-zinc-700 dark:placeholder-gray-400",x.value&&"border border-red-500"]),placeholder:h.value===!0?H.$t("createTag"):H.$t("editTag"),onInput:J[2]||(J[2]=ae=>ye())},null,42,T7),[[ot,l.value]])]),x.value?(d(),g("div",I7,f(H.$t("duplicateTagName")),1)):I("",!0),(n.value.length>0,I("",!0)),c("div",null,[c("div",R7,f(H.$t("chooseColor")),1),c("div",S7,[c("div",F7,[(d(),g(V,null,ne(y,ae=>c("div",{key:ae,class:"h-8 w-12 rounded",style:re({backgroundColor:ae}),onClick:G=>(u.value=ae,ye())},null,12,A7)),64))]),c("div",_7,[c("div",{class:"h-8 w-12 rounded-md bg-white p-2 text-base",style:re({backgroundColor:u.value})},"   ",4),de(c("input",{"onUpdate:modelValue":J[4]||(J[4]=ae=>u.value=ae),type:"text",class:"h-8 w-50 grow rounded-md bg-gray-100 p-2 text-base placeholder-gray-400 outline-none dark:bg-zinc-700",placeholder:H.$t("inputTagPlaceholder"),maxlength:"7",pattern:"^#[0-9a-fA-F]{6}$",onInput:J[5]||(J[5]=ae=>(ye(),Q()))},null,40,z7),[[ot,u.value]])])])]),c("div",D7,[c("button",{class:"h-10 grow rounded-lg border border-gray-200 text-base dark:border-stone-400 dark:text-stone-400",onClick:J[6]||(J[6]=ae=>be())},f(H.$t("cancel")),1),c("button",{class:"h-10 w-[40%] grow rounded-lg bg-blue-400 text-base text-white disabled:cursor-not-allowed disabled:bg-gray-200 dark:disabled:bg-gray-700 dark:disabled:text-gray-500",disabled:!l.value.trim()||!u.value||!k.value||x.value,onClick:J[7]||(J[7]=()=>{h.value?U():_(),T(t.roomId),be()})},f(h.value==!0?H.$t("create"):H.$t("save")),9,O7)])])):I("",!0),p.value===0?(d(),g("div",N7,[c("div",P7,[J[13]||(J[13]=c("div",null," ",-1)),K(" "+f(H.$t("tag"))+" ",1),c("button",{class:"flex items-center justify-center",onClick:J[8]||(J[8]=ae=>m(e).closeAll())},[v(We,{class:"h-7 w-7"})])]),n.value.length>0?(d(),g("div",E7,[(d(!0),g(V,null,ne(n.value,(ae,G)=>(d(),g("div",{key:ae,class:"flex min-w-[380px] items-center justify-between gap-1 overflow-hidden rounded-md bg-gray-200 p-3 text-base text-white dark:bg-zinc-600",onClick:se=>q(ae)},[c("div",L7,[c("div",{class:"circle-shadow h-4 w-4 rounded-full",style:re({backgroundColor:a.value[ae]})},null,4),c("div",j7,f(ae),1)]),c("div",B7,[v(m(Xs),{size:20,class:"cursor-pointer text-gray-600 dark:text-gray-300",onClick:ve(se=>$e(ae,G),["stop"])},null,8,["onClick"]),v(m(bt),{size:20,class:"cursor-pointer text-red-500",onClick:ve(se=>F(ae),["stop"])},null,8,["onClick"])])],8,U7))),128))])):I("",!0),c("div",V7,[c("div",{class:"flex cursor-pointer gap-2",onClick:J[9]||(J[9]=ae=>ge())},[v(m(yt),{size:20,class:"text-[#60A5FA]"}),c("div",q7,f(H.$t("createTag")),1)])])])):I("",!0),p.value===2?(d(),g("div",H7,[c("div",K7,[K(f(H.$t("confirmDeleteTag"))+" ",1),c("button",{class:"ml-2 flex items-center justify-center",onClick:J[10]||(J[10]=ae=>be())},[v(We,{class:"h-7 w-7"})])]),c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) mt-3 h-10 w-full grow rounded-lg bg-blue-400 text-base text-white",onClick:J[11]||(J[11]=ae=>(P(),T(t.roomId),be()))},f(H.$t("confirm")),1)])):I("",!0)]),_:1}))}}),W7={class:"relative flex items-center justify-center gap-1.5 px-2 pt-2"},J7={class:"relative h-[50px]! w-[50px]! shrink-0"},Y7={key:2,class:"absolute -right-1 -bottom-1 flex h-5 w-5 items-center justify-center rounded-lg bg-slate-200 p-[3px]"},X7={class:"flex w-0 min-w-0 grow flex-col text-left"},Z7={class:"flex justify-between gap-2"},Q7={class:"flex flex-1 items-center justify-center gap-1 overflow-hidden"},eF={class:"w-full overflow-hidden text-base text-ellipsis whitespace-nowrap text-gray-900 dark:text-gray-100"},tF={class:"flex-none text-xs whitespace-nowrap text-gray-500 dark:text-gray-300"},sF={class:"overflow-hidden text-sm text-ellipsis whitespace-nowrap text-gray-500 dark:text-gray-400"},oF={key:1,class:"mt-1 flex flex-wrap gap-1"},nF={key:2,class:"text-gray-500 dark:text-gray-400"},aF={key:0,class:"absolute top-[calc(50%+28px)] right-3 z-10 flex flex-col items-stretch gap-1 rounded-lg bg-white p-1.5 text-base text-gray-800 shadow-md dark:bg-zinc-800 dark:text-gray-200"},rF=N({__name:"RoomCell",props:{source:{}},setup(t){he.extend(Ut),he.extend(kn);const e=t,{t:o,locale:s}=Le(),n=$(()=>l.state.imkit.config.settings),a=$(()=>l.state.imkit.config.styles),r=G=>({"zh-TW":"zh-tw","zh-CN":"zh-cn","en-US":"en","ja-JP":"ja","ko-KR":"ko","fr-FR":"fr","de-DE":"de","es-ES":"es","pt-PT":"pt","ro-RO":"ro","th-TH":"th","vi-VN":"vi"})[G]||"en",i=$(()=>{const G=r(s.value),se=he(e.source.updatedAt).locale(G),Fe=he().locale(G);return se.isSame(Fe,"day")?se.format("H:mm"):se.isYesterday()?o("yesterday"):se.isSame(Fe,"week")?se.format("dddd"):se.isSame(Fe,"year")?se.format("MMM D"):se.format("ll")}),l=Z(),u=$(()=>l.state.imkit.rooms[e.source.id]),h=$(()=>{if(l.state.imkit.searchKeyword.length>0&&(l.state.imkit.searchType===we.RoomName||l.state.imkit.searchType===we.RoomMember))return l.state.imkit.searchKeyword}),p=$(()=>{if(l.state.imkit.searchKeyword.length>0&&(l.state.imkit.searchType===we.Messages||l.state.imkit.searchType===we.RoomMember))return l.state.imkit.searchKeyword}),b=$(()=>{var G;return l.state.imkit.searchKeyword.length>0&&l.state.imkit.searchType===we.RoomMember?u.value.memberIds.map(se=>l.state.imkit.users[se]).filter(se=>se).map(se=>se.nickname||se.id).join(", "):(G=u.value.lastMessage)==null?void 0:G.string}),k=$(()=>l.state.imkit.selectedRoomId===e.source.id),C=$(()=>!!l.state.imkit.roomIdsInFolders[e.source.id]),w=$(()=>l.state.imkit.actionMenuRoomId),x=$(()=>l.state.imkit.actionMenuFolderId),y=$(()=>l.state.imkit.searchKeyword),T=$(()=>{var G;return((G=u.value.pref)==null?void 0:G.sticky)??!1}),M=$(()=>{var G;return((G=u.value.pref)==null?void 0:G.hidden)??!1}),U=$(()=>l.state.imkit.sortedFolderIds),_=()=>{const{open:G}=Ce({component:G7,attrs:{roomId:e.source.id}});G(),l.commit("imkit/setState",{actionMenuRoomId:""})},P=()=>{w.value===e.source.id?l.commit("imkit/setState",{actionMenuRoomId:""}):l.commit("imkit/setState",{actionMenuRoomId:e.source.id})},F=async()=>{if(w.value||x.value)return;await l.commit("imkit/setState",{selectedRoomId:e.source.id,actionMenuRoomId:""});const G=!!l.state.imkit.searchKeyword;await l.commit("imkit/setState",{messageSearchKeyword:G?l.state.imkit.searchKeyword:"",isSearchInRoomMode:G})},q=async()=>{await l.dispatch("imkit/updateRoomPrefs",{roomId:e.source.id,prefs:{sticky:!T.value}})},Q=async()=>{l.commit("imkit/setState",{actionMenuRoomId:""}),l.dispatch("imkit/updateRoomPrefs",{roomId:e.source.id,prefs:{hidden:!M.value}})},ge=async()=>{const{open:G}=Ce({component:$7,attrs:{roomId:e.source.id}});G()},$e=async()=>{await l.dispatch("imkit/removeRoomFromFolder",e.source.id)},be=async()=>{const{open:G}=Ce({component:m7,attrs:{roomId:e.source.id}});G()},ye=S(null);is(ye,()=>{P()},{modifiers:{prevent:!0}});const J=$(()=>l.getters["imkit/roomsInSelectedFolder"]),ae=()=>{setTimeout(()=>{l.commit("imkit/setState",{actionMenuRoomId:""})},0)};return(G,se)=>{var Fe,qe,W;return d(),g("div",W7,[C.value&&!y.value?(d(),g("div",{key:0,class:B(["absolute left-2 h-[120%] w-1 shrink-0 rounded-full bg-slate-500",{"mt-4 h-full!":J.value[0].id===e.source.id,"mb-4 h-full!":J.value[J.value.length-1].id===e.source.id}])},null,2)):I("",!0),c("div",{ref_key:"roomCellRef",ref:ye,class:B(["group relative flex min-h-[66px] grow cursor-pointer items-center gap-3 rounded-lg p-2 select-none sm:hover:bg-gray-100 sm:hover:dark:bg-zinc-700",{"bg-gray-100 dark:bg-zinc-700":k.value,"ml-4":C.value&&!y.value}]),onClick:F},[c("div",J7,[u.value.avatars.length===1?(d(),A(Pe,{key:0,url:u.value.avatars[0].url,name:u.value.avatars[0].name,class:"relative"},null,8,["url","name"])):(d(),g(V,{key:1},[v(Pe,{url:u.value.avatars[1].url,name:u.value.avatars[1].name,class:"absolute top-0 right-0 h-9! w-9! text-base"},null,8,["url","name"]),v(Pe,{url:u.value.avatars[0].url,name:u.value.avatars[0].name,class:B(["absolute bottom-0 left-0 h-[38px]! w-[38px]! border-2 border-white text-base group-hover:border-gray-100 dark:border-zinc-800 group-hover:dark:border-zinc-700",{"border-gray-100":k.value}])},null,8,["url","name","class"])],64)),T.value?(d(),g("div",Y7,[v(m(Cs),{class:"h-3 w-3 text-gray-700"})])):I("",!0)]),c("div",X7,[c("div",Z7,[c("div",Q7,[c("div",eF,[v(os,{text:u.value.displayName??"",highlight:h.value},null,8,["text","highlight"])]),u.value.muted?(d(),A(m(Ms),{key:0,class:"mt-0.5 h-3.5 w-3.5 text-gray-600 dark:text-gray-400"})):I("",!0)]),c("div",tF,f(i.value),1)]),n.value.enableReadReceipt?(d(),g("div",{key:0,class:B(["flex items-center justify-between",{"text-gray-800":u.value.numberOfUnread>0}])},[c("div",sF,[v(os,{text:b.value??"",highlight:p.value},null,8,["text","highlight"])]),u.value.numberOfUnread>0&&!k.value?(d(),g("div",{key:0,class:"flex h-5 min-w-5 items-center justify-center rounded-full bg-blue-400 px-1.5 text-center text-xs leading-none font-semibold text-white",style:re(a.value.roomListUnreadBadge)},f(u.value.numberOfUnread>99?"99+":u.value.numberOfUnread),5)):I("",!0)],2)):I("",!0),(Fe=u.value.pref)!=null&&Fe.tags?(d(),g("div",oF,[(d(!0),g(V,null,ne(((qe=u.value.pref)==null?void 0:qe.tags)??[],Y=>{var ce;return d(),g("div",{key:Y,class:"overflow-hidden rounded-md bg-blue-400 px-1 py-0.5 text-xs text-ellipsis whitespace-nowrap text-white",style:re({backgroundColor:(((ce=u.value.pref)==null?void 0:ce.tagColors)||{})[Y]})},f(Y),5)}),128))])):I("",!0),y.value&&m(l).state.imkit.searchType===m(we).Messages?(d(),g("div",nF,f(G.$t("foundMessages",[((W=m(l).state.imkit.searchedMessageIds.get(t.source.id))==null?void 0:W.length)??0])),1)):I("",!0)]),c("div",{class:B(["absolute right-4 hidden h-8 w-8 items-center justify-center rounded-full bg-white shadow-md hover:scale-110 hover:transform hover:transition sm:group-hover:flex dark:bg-zinc-800",{"flex!":w.value==t.source.id}]),onClick:ve(P,["stop"])},[v(m(ds),{class:"h-5 w-5 text-gray-700 dark:text-gray-300"})],2),w.value==t.source.id?de((d(),g("div",aF,[c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(_,["stop"])},[v(m(xn),{class:"h-5 w-5"}),K(" "+f(G.$t("tag")),1)]),c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(q,["stop"])},[T.value?(d(),A(m(wn),{key:0,class:"h-5 w-5"})):(d(),A(m(Cs),{key:1,class:"h-5 w-5"})),K(" "+f(T.value?G.$t("unpin"):G.$t("pin")),1)]),c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(Q,["stop"])},[v(m(Cn),{class:"h-5 w-5"}),K(" "+f(M.value?G.$t("unhide"):G.$t("hide")),1)]),c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(ge,["stop"])},[v(m(bt),{class:"h-5 w-5"}),K(" "+f(G.$t("delete")),1)]),C.value?(d(),g("div",{key:0,class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve($e,["stop"])},[v(m(Mn),{class:"h-5 w-5"}),K(" "+f(G.$t("removeFromFolder")),1)])):U.value.length>0?(d(),g("div",{key:1,class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(be,["stop"])},[v(m(Zs),{class:"h-5 w-5"}),K(" "+f(G.$t("addToFolder")),1)])):I("",!0),c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:se[0]||(se[0]=ve(()=>{m(l).commit("imkit/setState",{actionMenuRoomId:""}),m(l).dispatch("imkit/toggleNotification",e.source.id)},["stop"]))},[u.value.muted?(d(),A(m(Tn),{key:0,class:"h-5 w-5"})):(d(),A(m(Ms),{key:1,class:"h-5 w-5"})),K(" "+f(u.value.muted?G.$t("unmute"):G.$t("mute")),1)])])),[[m(Ve),ae]]):I("",!0)],2)])}}}),iF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB60lEQVR4nO2Zzy4EQRCH2wUHJ3F1IeLIwZ9n4B1wE9u9i6rhXLWLo+DGKwiReAESBw/AGxAnJEhcSFZmiUhmd3uYpvVMfcnvXl9qZnp+M0oJgiAIgvAvKeFav0Y6MECPBrmeJhr4SgNvak09KjxZvksrmhBHPq9UdrpUKOh4sz+U/SJNKhTMNy7j1sL0XFqmARUCJqPsnwfoUQMfLSzVhoshjJ/i9/HzpzjC2LiV9gsmzA+FEjbIdRG24XtDsmGUS7ou9zBmeGgJghAWRNRpkHfil2/fZ6izAN1roO3YLSHckPU94C9FI28lhfO02YQw3RZMmO+aCPNhjjd8kBAuAc3mVjjimYQwAPVq4Bffw7kPvc4j9TU9mgzSae62C3zS8iw2SJg74YihpXBlZW3Q94Cus7haG2op/LHlS99DOgvwRVvZhjDwhvdBHUUDrVuFdVSd9D2oq5SBJqzCSqkOg3Tte9jsoZvYJY2w0sB7ORDeTSX7LkzT/gfOlnJUnUotHP/IdvG71GOe5oi61XcIuUw0LQs2Qi4TTcuCjXDLRJuyYCPEMtG2LNgIsUy0LQs2QiwT1rJgwwCf+ZZIHeAzlZVSVB2PzzXvMvY8mWUaUy7QSzRqkI7/5ZfNxkx0XIbaiBNZQRAEQRDUb/EGC4sae12sFiYAAAAASUVORK5CYII=",lF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR4nO2asUrEQBCGp7PxEbSx8VnEFzG7Bp05sJ05rS18jDsEX8Pn8CxV9ArbkVVEUEJyJrhZ838wXYr92ORLM0QAAAAAGBWVXOwG0evIuo5i3mUC2yqwXYag21SerD12Ff0xrLd1fbVFpRDSzf5W9vO2xZRKIW7wGjcL62t1qntUArGnbPZhXQe2m6OT8/1pCH+JP6UeTUf449NaTkzYXiYlHMUcwgCA/0U1mx9G0fvif0lsq+PZ/KBVOD2Y+7CDDetdq3D2Qw48BOFv5L4R3LDglXZ8w4JoOSrdRO6qotKCSjsqLai0o9JN5K4qKi2otKPSgko7Kt1E7qqi0oJKOyotfSrN/ZdaRjOsz63CaSEk+0GHm0WrcNp+SQshIzhsrwmiD/WZ7tAGq4fLtCNRnuj7mRedZQEAAABAf8UbgvvRyv0JTvIAAAAASUVORK5CYII=",cF={key:1,class:"relative h-[34px] w-[34px] shrink-0"},dF={class:"flex w-0 min-w-0 grow flex-col text-left"},uF={class:"overflow-hidden text-sm text-ellipsis whitespace-nowrap text-gray-900 dark:text-gray-300"},co=N({__name:"RoomCell",props:{source:{}},setup(t){he.extend(Ut);const e=t,o=Z(),s=$(()=>!!o.state.imkit.selectedRoomIdsForCreateFolder[e.source.id]),n=a=>{const r=new Date;o.commit("imkit/updateField",{key:"selectedRoomIdsForCreateFolder",value:{[e.source.id]:a?r:void 0}})};return(a,r)=>(d(),g("div",{class:B(["group relative flex min-h-11 w-full cursor-pointer items-center gap-3 rounded-md p-1 px-2 sm:hover:bg-gray-100 sm:hover:dark:bg-zinc-700",{"bg-gray-100 dark:bg-zinc-700 hover:dark:bg-zinc-700":s.value}]),onClick:r[0]||(r[0]=i=>n(!s.value))},[t.source.avatars.length===1?(d(),A(Pe,{key:0,url:t.source.avatars[0].url,name:t.source.avatars[0].name,class:"h-[34px]! w-[34px]! shrink-0 rounded-xl text-base"},null,8,["url","name"])):(d(),g("div",cF,[v(Pe,{url:t.source.avatars[1].url,name:t.source.avatars[1].name,class:"rounded-10px absolute top-0 right-0 h-[26px]! w-[26px]! text-base"},null,8,["url","name"]),v(Pe,{url:t.source.avatars[0].url,name:t.source.avatars[0].name,class:B(["rounded-10px absolute bottom-0 left-0 h-7! w-7! border-2 border-white text-xs group-hover:border-gray-100 dark:border-zinc-800 group-hover:dark:border-zinc-700",{"border-gray-100":s.value}])},null,8,["url","name","class"])])),c("div",dF,[c("div",uF,f(t.source.displayName),1)]),s.value?(d(),A(m(ls),{key:2,size:20,class:"text-green-500"})):(d(),A(m(In),{key:3,size:20,class:"text-gray-400"}))],2))}}),mF={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},gF=["placeholder"],hF={class:"flex items-center justify-center gap-2"},fF=["disabled"],uo=N({__name:"UpdateFolderModal",props:{folderId:{}},setup(t){const e=Se(),o=t,s=Z(),n=S(),a=S(""),r=$(()=>n.value?n.value.roomIds.map(u=>s.state.imkit.rooms[u]).concat(s.state.imkit.sortedRooms).sort((u,h)=>{var p,b,k;return!!((p=u.pref)!=null&&p.sticky)==!!((b=h.pref)!=null&&b.sticky)?h.updatedAt-u.updatedAt:(k=u.pref)!=null&&k.sticky?-1:1}):s.state.imkit.sortedRooms),i=$(()=>a.value.length>0&&Object.keys(s.state.imkit.selectedRoomIdsForCreateFolder).length>0),l=()=>{var u;s.dispatch("imkit/updateFolder",{folderKey:((u=n.value)==null?void 0:u.id)||`folder_${Date.now()}`,name:a.value})};return n.value=s.state.imkit.folders[o.folderId],n.value&&(a.value=n.value.name,s.commit("imkit/setState",{selectedRoomIdsForCreateFolder:n.value.roomIds.reduce((u,h)=>(u[h]=!0,u),{})})),(u,h)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",mF,f(n.value?u.$t("editFolder"):u.$t("createFolder")),1),de(c("input",{"onUpdate:modelValue":h[0]||(h[0]=p=>a.value=p),type:"text",class:"grow rounded-md bg-gray-100 p-2 placeholder-gray-400 outline-none dark:bg-zinc-700",placeholder:u.$t("folderName")},null,8,gF),[[ot,a.value]]),v(m(Et),{class:"h-[50vh] overflow-auto","data-key":"id","data-sources":r.value,"data-component":co,"wrap-class":"flex flex-col gap-1.5","estimated-size":44},null,8,["data-sources"]),c("div",hF,[c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 grow rounded-lg border border-gray-200 text-base text-gray-800 dark:border-stone-400 dark:text-stone-400",onClick:h[1]||(h[1]=()=>{m(e).closeAll()})},f(u.$t("cancel")),1),c("button",{class:B(["h-10 grow rounded-lg bg-blue-400 text-base text-white",{"cursor-not-allowed bg-gray-400!":!i.value}]),disabled:!i.value,onClick:h[2]||(h[2]=()=>{l(),m(e).closeAll()})},f(u.$t("confirm")),11,fF)])]),_:1}))}}),pF={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},vF={class:"flex items-center justify-center gap-2"},bF=N({__name:"DeleteFolderConfirmModal",props:{folder:{}},setup(t){const e=Se(),o=t,s=Z(),n=a=>{s.dispatch("imkit/removeFolder",a)};return(a,r)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 min-w-[200px] max-w-full rounded-xl p-5 flex flex-col gap-3 max-w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",pF,f(a.$t("confirmToDeleteFolder")),1),c("div",vF,[c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 w-[100px] grow rounded-lg border border-gray-200 text-base dark:border-stone-400 dark:text-stone-400",onClick:r[0]||(r[0]=()=>{m(e).closeAll()})},f(a.$t("cancel")),1),c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 w-[100px] grow rounded-lg bg-blue-400 text-base text-white",onClick:r[1]||(r[1]=()=>{n(o.folder.id),m(e).closeAll()})},f(a.$t("confirm")),1)])]),_:1}))}}),$F={key:0,width:"30",height:"30",src:iF},yF={key:1,width:"30",height:"30",src:lF},kF={class:"flex flex-col overflow-hidden"},xF={class:"overflow-hidden text-base text-ellipsis whitespace-nowrap text-gray-900 dark:text-gray-100"},wF={class:"overflow-hidden text-sm text-ellipsis whitespace-nowrap text-gray-500 dark:text-gray-400"},CF={key:2,class:"ml-auto flex h-5 min-w-5 items-center justify-center rounded-full bg-blue-400 text-center text-xs leading-none font-semibold text-white"},MF={key:3,class:"absolute top-[calc(50%+28px)] right-3 z-10 flex flex-col items-stretch gap-1 rounded-lg bg-white p-1.5 text-base text-gray-800 shadow-md dark:bg-zinc-800 dark:text-gray-200"},TF=N({__name:"FolderCell",props:{source:{}},setup(t){const e=t,o=Z(),s=$(()=>{if(o.state.imkit.searchKeyword.length>0&&o.state.imkit.searchType===we.RoomPrefFolder)return o.state.imkit.searchKeyword}),n=$(()=>o.state.imkit.selectedFolderId),a=$(()=>e.source.roomIds.filter(y=>o.state.imkit.selectedRoomId!==y).reduce((y,T)=>{const M=o.state.imkit.rooms[T];return M?y+M.numberOfUnread:y},0)),r=$(()=>o.state.imkit.roomTag),i=$(()=>e.source.roomIds.map(y=>o.state.imkit.rooms[y]).filter(y=>r.value?y&&y.roomTags.includes(r.value):y).length),l=$(()=>o.state.imkit.actionMenuRoomId),u=$(()=>o.state.imkit.actionMenuFolderId),h=()=>{l.value||u.value||(o.state.imkit.selectedFolderId===e.source.id?o.commit("imkit/setState",{selectedFolderId:""}):o.commit("imkit/setState",{selectedFolderId:e.source.id}))},p=()=>{const{open:y}=Ce({component:bF,attrs:{folder:e.source}});y(),o.commit("imkit/setState",{actionMenuFolderId:""})},b=()=>{const{open:y}=Ce({component:uo,attrs:{folderId:e.source.id}});y(),o.commit("imkit/setState",{actionMenuFolderId:""})},k=()=>{u.value===e.source.id?o.commit("imkit/setState",{actionMenuFolderId:""}):o.commit("imkit/setState",{actionMenuFolderId:e.source.id})},C=()=>{setTimeout(()=>{o.commit("imkit/setState",{actionMenuFolderId:""})},0)},w=S(null);return is(w,()=>{k()},{modifiers:{prevent:!0},delay:500}),(y,T)=>(d(),g("div",{ref_key:"folderCellRef",ref:w,class:"group relative mx-2 mt-2 flex min-h-[66px] cursor-pointer items-center gap-3 rounded-lg bg-slate-200 p-2 select-none active:bg-slate-300 dark:bg-slate-700 active:dark:bg-slate-600",onClick:h},[n.value===t.source.id?(d(),g("img",$F)):(d(),g("img",yF)),c("div",kF,[c("div",xF,[v(os,{text:t.source.name,highlight:s.value},null,8,["text","highlight"])]),c("div",wF,f(i.value?y.$t("numberOfChatroom",i.value):y.$t("no-chatroom")),1)]),a.value>0?(d(),g("div",CF,f(a.value),1)):I("",!0),c("div",{class:B(["absolute right-4 h-8 w-8 items-center justify-center rounded-full bg-white shadow-md hover:scale-110 hover:transform hover:transition dark:bg-zinc-800",{flex:u.value==t.source.id,"hidden sm:group-hover:flex":u.value!=t.source.id}]),onClick:ve(k,["stop"])},[v(m(ds),{class:"h-5 w-5 text-gray-700 dark:text-gray-300"})],2),u.value==t.source.id?de((d(),g("div",MF,[c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(b,["stop"])},[v(m(Xs),{class:"h-5 w-5"}),K(" "+f(y.$t("edit")),1)]),c("div",{class:"flex cursor-pointer items-center gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ve(p,["stop"])},[v(m(bt),{class:"w- h-5"}),K(" "+f(y.$t("delete")),1)])])),[[m(Ve),C]]):I("",!0)],512))}}),IF=N({__name:"RoomListWrapperCell",props:{source:{}},setup(t){return(e,o)=>t.source instanceof m(ct)?(d(),A(rF,{key:0,source:t.source},null,8,["source"])):(d(),A(TF,{key:1,source:t.source},null,8,["source"]))}}),RF=N({name:"DropdownMenuContent",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;delete s.class;const a=s.sideOffset??4;return ee(Rn,{...s,sideOffset:a,class:ke("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md",n,t.class)},e)}}}),pt=N({name:"DropdownMenuItem",inheritAttrs:!1,props:{class:{type:null,default:void 0},inset:{type:Boolean,default:!1}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Sn,{...s,class:ke("hover:bg-gray-100 hover:dark:bg-zinc-700 relative flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.inset?"pl-8":"",n,t.class)},e)}}}),Os=N({name:"DropdownMenuSeparator",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Fn,{...s,class:ke("bg-muted -mx-1 my-1 h-px",n,t.class)},e)}}}),SF=N({name:"CInput",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{attrs:e}){return()=>{const o={...e},s=o.class;return delete o.class,ee("input",{...o,class:ke("border-input bg-background ring-offset-background file:text-foreground placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s,t.class)})}}}),FF={class:"space-y-4"},AF={class:"mb-2 block text-sm font-medium"},_F={class:"mb-2 block text-sm font-medium"},zF={class:"max-h-48 space-y-2 overflow-y-auto"},DF=["onClick"],OF={class:"flex-1"},NF={class:"text-sm font-medium"},PF={class:"text-xs text-muted-foreground"},EF={key:0,class:"text-sm text-muted-foreground"},UF={class:"flex justify-end space-x-2 pt-2"},LF=N({name:"CreateRoomDialog",__name:"CreateRoomDialog",props:{open:{type:Boolean,default:!1},initialRoomName:{default:""},defaultSelectedMemberIds:{default:()=>[]}},emits:["create-room","close"],setup(t,{emit:e}){const o=t,s=e,n=Z(),{t:a}=Le(),{createRoom:r}=gs(),i=S(o.initialRoomName??""),l=S(new Set(o.defaultSelectedMemberIds??[])),u=$(()=>o.open),h=$(()=>n.state.tribo.teamMembers),p=$(()=>n.state.tribo.currentTeamId),b=$(()=>n.state.imkit.uid),k=$(()=>!i.value.trim()||l.value.size===0),C=()=>{const F=h.value.find(q=>q.userId===b.value);return F==null?void 0:F.userId},w=()=>{const F=C();F&&!l.value.has(F)&&l.value.add(F)},x=()=>{i.value=o.initialRoomName??"",l.value=new Set(o.defaultSelectedMemberIds??[]),w()};pe(()=>o.open,F=>{F?w():x()});const y=F=>{console.log("handleOpenChange",F),F||(x(),s("close"))};pe(()=>o.initialRoomName,F=>{o.open||(i.value=F??"")}),pe(()=>o.defaultSelectedMemberIds,F=>{o.open||(l.value=new Set(F??[]),w())},{deep:!0}),pe(()=>h.value,()=>{o.open&&w()},{deep:!0});const T=F=>{const q=F.target;i.value=(q==null?void 0:q.value)??""},M=F=>{l.value.has(F)?l.value.delete(F):l.value.add(F)},U=async()=>{if(!k.value)try{await r(p.value,{name:i.value.trim(),members:Array.from(l.value)}),x(),s("close"),s("create-room",{name:i.value.trim(),memberIds:Array.from(l.value)}),dt("SHOW_TOAST",{title:a("createRoomSuccess"),description:a("createRoomSuccessDescription"),variant:"success"})}catch(F){console.error("Failed to create room",F),dt("SHOW_TOAST",{title:a("createRoomFailed"),description:a("createRoomFailedDescription"),variant:"error"})}},_=()=>{console.log("handleCancel"),x(),s("close")},P=F=>{const q=(F??"").trim(),[Q="成"]=q;return Q.toUpperCase()};return(F,q)=>(d(),A(m(Ct),{open:u.value,"onUpdate:open":y},{default:D(()=>[v(m(Mt),{class:"sm:max-w-md"},{default:D(()=>[v(m(Lt),null,{default:D(()=>[v(m(jt),null,{default:D(()=>[K(f(F.$t("createNewRoom")),1)]),_:1})]),_:1}),c("div",FF,[c("div",null,[c("label",AF,f(F.$t("roomName")),1),v(m(SF),{placeholder:F.$t("inputRoomNamePlaceholder"),value:i.value,class:"w-full pt-2",onInput:T},null,8,["placeholder","value"])]),c("div",null,[c("label",_F,f(F.$t("inviteMember")),1),c("div",zF,[(d(!0),g(V,null,ne(h.value,Q=>(d(),g("div",{key:Q.userId,class:"flex cursor-pointer items-center space-x-3 rounded-lg p-2 hover:bg-muted",onClick:ge=>M(Q.userId)},[v(m(ao),{id:Q.userId,checked:l.value.has(Q.userId),onClick:q[0]||(q[0]=ve(()=>{},["stop"])),"onUpdate:checked":()=>M(Q.userId)},null,8,["id","checked","onUpdate:checked"]),v(m(gt),{class:"h-8 w-8"},{default:D(()=>[Q.userAvatar?(d(),A(m(kt),{key:0,src:Q.userAvatar,alt:Q.userName},null,8,["src","alt"])):(d(),A(m(ht),{key:1,class:"bg-secondary text-xs text-secondary-foreground","delay-ms":0},{default:D(()=>[K(f(P(Q.userName)),1)]),_:2},1024))]),_:2},1024),c("div",OF,[c("p",NF,f(Q.userName),1),c("p",PF,f(Q.userEmail),1)])],8,DF))),128)),h.value.length===0?(d(),g("p",EF,f(F.$t("noMembersToInvite")),1)):I("",!0)])]),c("div",UF,[v(m(Re),{variant:"secondary",class:"pt-2",onClick:_},{default:D(()=>[K(f(F.$t("cancel")),1)]),_:1}),v(m(Re),{class:"pt-2",disabled:k.value,onClick:U},{default:D(()=>[K(f(F.$t("createRoom")),1)]),_:1},8,["disabled"])])])]),_:1})]),_:1},8,["open"]))}}),jF={class:"mb-4 flex items-center justify-between"},BF={class:"flex items-center space-x-3"},VF={class:"text-base font-semibold text-foreground"},qF=["aria-label"],HF={class:"px-2 py-1.5 text-xs font-semibold text-muted-foreground"},KF={class:"flex items-center gap-2"},GF={class:"flex items-center space-x-1"},WF=["title"],JF=N({name:"LogoSection",__name:"index",setup(t){const e=Z(),{getTeamMembers:o,getTeam:s}=gs(),n=An("Tribo"),a=S(null),r=S(!1),i=$(()=>e.state.tribo.teams),l=$(()=>e.state.tribo.currentTeamId),u=$(()=>{var M;const y=((M=n.value)==null?void 0:M.trim())||"T",[T="T"]=y;return T.toUpperCase()}),h=$(()=>a.value),p=y=>{y&&dt("ROUTER",{path:y})},b=()=>{dt("LOGOUT")},k=y=>{console.log("setShowInviteDialog",y),r.value=y},C=()=>{k(!0)},w=y=>{console.log(y),k(!1)},x=y=>{dt("TEAM_SWITCHED",{teamId:y.id})};return pe(()=>l.value,y=>{y&&(s(y).then(T=>{const M=T;M.avatar?a.value=M.avatar:M.avatarUrl?a.value=M.avatarUrl:a.value=null,M.name&&(n.value=M.name)}).catch(T=>{console.error("Failed to get team",T),a.value=null}),o(y).then(T=>{const M=T.items;e.commit(`tribo/${Ke.setTeamMembers}`,M)}).catch(T=>{console.error("Failed to get team members",T)}))},{immediate:!0}),(y,T)=>(d(),g("div",jF,[c("div",BF,[v(m(gt),{class:"h-8 w-8"},{default:D(()=>[h.value?(d(),A(m(kt),{key:0,src:h.value,alt:n.value},null,8,["src","alt"])):I("",!0),v(m(ht),{class:"flex h-full w-full items-center justify-center bg-primary text-sm text-primary-foreground","delay-ms":0},{default:D(()=>[K(f(u.value),1)]),_:1})]),_:1}),c("h1",VF,f(n.value),1),v(m(_n),null,{default:D(()=>[v(m(zn),{"as-child":""},{default:D(()=>[c("button",{type:"button",class:"flex h-6 w-6 items-center justify-center rounded text-muted-foreground hover:bg-muted","aria-label":y.$t("openMenu")},[v(m(Qt),{class:"h-4 w-4"})],8,qF)]),_:1}),v(m(Dn),null,{default:D(()=>[v(m(RF),{align:"start",class:"w-48 border-border bg-card"},{default:D(()=>[v(m(pt),{onSelect:T[0]||(T[0]=M=>p("/account/settings"))},{default:D(()=>[v(m(On),{class:"mr-2 h-4 w-4"}),c("span",null,f(y.$t("settings")),1)]),_:1}),v(m(pt),{onSelect:T[1]||(T[1]=M=>p(`/team/${l.value}/members`))},{default:D(()=>[v(m(Nn),{class:"mr-2 h-4 w-4"}),c("span",null,f(y.$t("manageMembers")),1)]),_:1}),v(m(Os)),c("div",HF,f(y.$t("switchWorkspace")),1),(d(!0),g(V,null,ne(i.value,M=>(d(),A(m(pt),{key:M.id,class:"flex cursor-pointer items-center justify-between",onSelect:U=>x(M)},{default:D(()=>[c("div",KF,[v(m(gt),{class:"!h-5 !w-5"},{default:D(()=>[v(m(ht),{class:"text-xs font-semibold"},{default:D(()=>{var U;return[K(f(((U=M.name)==null?void 0:U.charAt(0))||"T"),1)]}),_:2},1024)]),_:2},1024),c("span",null,f(M.name),1)]),l.value===M.id?(d(),A(m(ls),{key:0,class:"h-4 w-4 text-[#2B5CE6]"})):I("",!0)]),_:2},1032,["onSelect"]))),128)),v(m(pt),{onSelect:T[2]||(T[2]=M=>p("/create-team"))},{default:D(()=>[v(m(yt),{class:"mr-2 h-4 w-4"}),c("span",null,f(y.$t("createTeam")),1)]),_:1}),v(m(Os)),v(m(pt),{class:"text-destructive focus:text-destructive",onSelect:b},{default:D(()=>[v(m(Ys),{class:"mr-2 h-4 w-4"}),c("span",null,f(y.$t("logout")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),c("div",GF,[c("button",{type:"button",class:"flex h-8 w-8 items-center justify-center rounded text-muted-foreground hover:bg-muted",title:y.$t("createNewRoom"),onClick:C},[v(m(yt),{class:"h-4 w-4"})],8,WF)]),v(LF,{open:r.value,onClose:T[3]||(T[3]=M=>k(!1)),onCreateRoom:w},null,8,["open"])]))}}),YF={class:"mb-1 flex items-center justify-between text-xl font-medium text-gray-700 dark:text-gray-300"},XF=["placeholder"],ZF={class:"mb-2 flex h-12 items-center gap-2 rounded-lg bg-gray-100 p-3 dark:bg-zinc-700"},QF={class:"grow overflow-hidden"},eA=["placeholder"],tA={key:0,class:"flex flex-col gap-1"},sA={class:"flex items-center justify-center gap-2"},oA=["disabled"],nA=N({__name:"MassTextingModal",setup(t){const e=Se(),o=Z(),s=S(""),n=$(()=>o.state.imkit.searchKeyword?o.state.imkit.searchRooms[we.RoomName]||[]:Object.values(o.state.imkit.rooms).sort((k,C)=>{const w=!!o.state.imkit.selectedRoomIdsForCreateFolder[k.id],x=!!o.state.imkit.selectedRoomIdsForCreateFolder[C.id];return w&&!x?-1:!w&&x?1:w&&x?o.state.imkit.selectedRoomIdsForCreateFolder[k.id]-o.state.imkit.selectedRoomIdsForCreateFolder[C.id]:0})),a=$(()=>s.value.length>0),r=S(""),i=S(!1),u=Nt(1e3,async()=>{r.value!==o.state.imkit.searchKeyword&&(r.value?o.dispatch("imkit/searchRooms",r.value):o.commit("imkit/setState",{searchKeyword:""}))}),h=cs(500,u,{atBegin:!1});pe(r,h);const p=$(()=>!!o.state.imkit.isRequesting[He.Search]),b=async()=>{await o.dispatch("imkit/batchSendMessage",{message:s.value,messageType:"text",paras:Object.keys(o.state.imkit.selectedRoomIdsForCreateFolder).map(k=>({room:k}))}),o.commit("imkit/setState",{selectedRoomIdsForCreateFolder:{},searchKeyword:""})};return(k,C)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[360px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade"},{default:D(()=>[c("div",YF,f(k.$t("massTexting")),1),de(c("textarea",{"onUpdate:modelValue":C[0]||(C[0]=w=>s.value=w),rows:"3",class:"grow rounded-md bg-gray-100 p-2 placeholder-gray-400 outline-hidden dark:bg-zinc-700",placeholder:k.$t("inputMessage")},null,8,XF),[[ot,s.value]]),v(m(Et),{class:"h-[50vh] overflow-auto","data-key":"id","data-sources":n.value,"data-component":co,"wrap-class":"flex flex-col gap-1.5","estimated-size":44},{header:D(()=>[c("div",ZF,[v(m(Pt),{size:24,class:"h-6 w-6 cursor-pointer text-gray-600 dark:text-gray-300"}),c("div",QF,[de(c("input",{ref:"searchInput","onUpdate:modelValue":C[1]||(C[1]=w=>r.value=w),class:"bg-gray-100 placeholder-gray-400 outline-hidden dark:bg-zinc-700",placeholder:k.$t("search"),onCompositionstart:C[2]||(C[2]=w=>i.value=!0),onCompositionend:C[3]||(C[3]=w=>i.value=!1)},null,40,eA),[[ot,r.value]])]),r.value?(d(),A(m(je),{key:0,size:20,class:"h-5 w-5 cursor-pointer text-gray-600 dark:text-gray-300",onClick:C[4]||(C[4]=()=>{m(h).cancel({upcomingOnly:!0}),r.value="",m(u)()})})):I("",!0)]),p.value?(d(),g("div",tA,[(d(),g(V,null,ne(10,w=>c("div",{key:w,class:"flex gap-3 p-2"},[...C[7]||(C[7]=[c("div",{class:"loading h-[34px] w-[34px] rounded-xl"},null,-1),c("div",{class:"flex grow flex-col justify-center gap-2"},[c("div",{class:"loading h-3 w-full rounded-md"}),c("div",{class:"loading h-3 w-4/5 rounded-md"})],-1)])])),64))])):I("",!0)]),_:1},8,["data-sources"]),c("div",sA,[c("button",{class:"disabled:(bg-blue-200 cursor-not-allowed) h-10 grow rounded-lg border border-gray-200 text-base dark:border-stone-400 dark:text-stone-400",onClick:C[5]||(C[5]=()=>{m(e).closeAll()})},f(k.$t("cancel")),1),c("button",{class:B(["h-10 grow rounded-lg bg-blue-400 text-base text-white",{"cursor-not-allowed bg-gray-400!":!a.value}]),disabled:!a.value,onClick:C[6]||(C[6]=()=>{b(),m(e).closeAll()})},f(k.$t("confirm")),11,oA)])]),_:1}))}}),aA=Me(nA,[["__scopeId","data-v-ea55b280"]]),rA={class:"relative overflow-auto"},iA={class:"border-b border-gray-200 p-4 dark:border-zinc-700"},lA={class:"flex items-center space-x-2"},cA={class:"relative flex-1"},dA=["placeholder"],uA={class:"relative"},mA={key:0,class:"absolute top-12 right-0 z-50 min-w-32 overflow-hidden rounded-md border border-gray-200 bg-white p-1 shadow-lg dark:border-zinc-700 dark:bg-zinc-800"},gA={key:0,class:"mx-2 mt-2 flex items-center gap-2 overflow-auto text-sm text-gray-900 dark:text-gray-200"},hA=["onClick"],fA={key:1,class:"flex flex-col gap-1"},pA={key:2,class:"flex h-[80dvh] flex-col items-center justify-center gap-6 px-6 py-12"},vA=["src"],bA={key:1,src:c7,class:"h-24 w-24 object-contain"},$A={class:"text-center text-base text-gray-500 dark:text-gray-400"},yA={class:"absolute right-0 bottom-0 flex flex-col items-end gap-2 p-3"},kA={key:0,class:"transform-gpu flex-col items-stretch gap-1 rounded-lg bg-white p-1.5 text-base text-gray-800 shadow-md dark:bg-zinc-800 dark:text-gray-200"},xA=N({__name:"RoomList",setup(t){const e=Z(),o=S(""),s=Se(),n=S(!1),a=S("time"),r=S("desc"),i=S(!1),l=S(),u=$(()=>e.state.imkit.sortedRooms),h=$(()=>e.state.imkit.sortedFolderIds.map(W=>e.state.imkit.folders[W]).filter(W=>W)),p=$(()=>e.state.imkit.folders[e.state.imkit.selectedFolderId]),b=$(()=>e.state.imkit.searchType),k=$(()=>e.state.imkit.searchKeyword?Object.keys(e.state.imkit.searchRooms):[]),C=$(()=>e.state.imkit.roomTag),w=$(()=>e.state.imkit.config.settings),x=()=>{const W=r.value==="desc"?"-":"";switch(a.value){case"time":return`${W}lastMessage`;case"name":return`${W}name`;case"unread":return"-lastMessage";default:return"-lastMessage"}},y=()=>a.value==="unread"?r.value==="desc"?1:-1:0,T=async()=>{const W=x(),Y=y();P.value=!0;try{e.commit("imkit/setState",{sortBy:W,sortUnreadFirst:Y}),e.commit("imkit/setState",{sortedRooms:[],numberOfFetchedRooms:0,numberOfTotalRooms:0}),await e.dispatch("imkit/fetchRooms")}finally{P.value=!1}},M=async W=>{a.value=W,await T()},U=async W=>{r.value=W,await T()},_=$(()=>{if(e.state.imkit.searchKeyword&&s.modals.length===0){if(b.value===we.RoomPrefFolder&&p.value){const Te=[...e.state.imkit.searchRooms[b.value]],De=p.value.roomIds.map(xe=>e.state.imkit.rooms[xe]).filter(xe=>C.value?xe&&xe.roomTags.includes(C.value):xe),Ne=Te.findIndex(xe=>xe.id===p.value.id);return Ne>-1&&Te.splice(Ne+1,0,...De),Te.filter(xe=>xe instanceof ct)}return e.state.imkit.searchRooms[b.value]||[]}const W=[...u.value],Y=[...h.value,...W];if(p.value){const ce=e.getters["imkit/roomsInSelectedFolder"],Te=h.value.findIndex(De=>De.id===p.value.id);Te>-1&&Y.splice(Te+1,0,...ce)}return Y}),P=S(!1),F=S(!1),q=S(!1),Q=$(()=>s.modals.length===0&&(i.value||P.value||q.value&&o.value.length>0)),ge=()=>{e.dispatch("imkit/fetchRooms")},$e=()=>{F.value=!F.value},be=()=>{const{open:W}=Ce({component:uo});W()},ye=()=>{const{open:W}=Ce({component:aA});W()},H=async()=>{if(o.value!==e.state.imkit.searchKeyword)if(o.value){q.value=!0;try{await e.dispatch("imkit/searchRooms",o.value)}finally{q.value=!1}}else e.commit("imkit/setState",{searchKeyword:""}),se()},J=()=>{var W;o.value="",H(),(W=l.value)==null||W.focus()},ae=Nt(1e3,H),G=cs(500,ae,{atBegin:!1});pe(o,G),pe(u,W=>{if(W.length!==0&&w.value.autoSelectRoomWhenLoaded&&!e.state.imkit.selectedRoomId&&document.body.clientWidth>640)if(w.value.enableReadReceipt){const Y=Object.values(W).find(ce=>ce.numberOfUnread===0);Y&&e.commit("imkit/setState",{selectedRoomId:Y.id})}else{const Y=W[0];Y&&e.commit("imkit/setState",{selectedRoomId:Y.id})}});const se=async()=>{P.value=!0;try{await e.dispatch("imkit/fetchPrefs"),await e.dispatch("imkit/fetchRooms")}finally{P.value=!1}await e.dispatch("imkit/fetchRoomsInFolders")};let Fe=0;const qe=$(()=>e.state.imkit.uid);return xt(()=>{pe(qe,()=>{se()},{immediate:!0}),document.addEventListener("visibilitychange",()=>{document.hidden?Fe=he().unix():he().unix()-Fe>60&&(se(),e.state.imkit.socket.connect())})}),(W,Y)=>(d(),g("div",rA,[v(m(Et),{class:"h-full overflow-auto transition ease-in-out","data-key":"id","data-sources":_.value,"data-component":IF,"wrap-class":"flex flex-col","estimated-size":66,keeps:60,onTobottom:ge},{header:D(()=>[c("div",iA,[v(JF),c("div",lA,[c("div",cA,[v(m(Pt),{class:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform text-gray-500"}),de(c("input",{ref_key:"searchInput",ref:l,"onUpdate:modelValue":Y[0]||(Y[0]=ce=>o.value=ce),class:"flex h-10 w-full rounded-md border-0 bg-gray-100 px-3 py-2 pt-2 pl-10 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:ring-1 focus-visible:ring-blue-400 focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:bg-zinc-800",placeholder:w.value.searchRoomPlaceholder||W.$t("search"),onCompositionstart:Y[1]||(Y[1]=ce=>i.value=!0),onCompositionend:Y[2]||(Y[2]=ce=>i.value=!1),onBlur:Y[3]||(Y[3]=ce=>i.value=!1)},null,40,dA),[[ot,o.value]]),o.value?(d(),g("button",{key:0,class:"absolute inset-y-0 right-3 flex items-center text-gray-400 transition-colors hover:text-gray-600 focus-visible:ring-1 focus-visible:ring-blue-400 focus-visible:outline-none dark:text-gray-100",type:"button","aria-label":"Clear search",onClick:J},[v(m(je),{class:"h-4 w-4"})])):I("",!0)]),de((d(),g("div",uA,[c("button",{class:"inline-flex h-10 w-10 shrink-0 cursor-pointer items-center justify-center gap-2 rounded-md text-sm font-medium whitespace-nowrap text-gray-900 ring-offset-background transition-colors hover:bg-gray-100 focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2 focus-visible:outline-none disabled:pointer-events-none disabled:opacity-50 dark:text-gray-100 dark:hover:bg-zinc-700",type:"button",onClick:Y[4]||(Y[4]=ce=>n.value=!n.value)},[v(m(Pn),{class:"h-4 w-4"})]),v($t,{name:"slide-fade"},{default:D(()=>[n.value?(d(),g("div",mA,[c("div",{class:B(["relative flex cursor-pointer items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none hover:bg-gray-100 dark:hover:bg-zinc-700",{"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":a.value==="time"}]),onClick:Y[5]||(Y[5]=ce=>M("time"))},f(W.$t("sortByTime")),3),c("div",{class:B(["relative flex cursor-pointer items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none hover:bg-gray-100 dark:hover:bg-zinc-700",{"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":a.value==="name"}]),onClick:Y[6]||(Y[6]=ce=>M("name"))},f(W.$t("sortByName")),3),c("div",{class:B(["relative flex cursor-pointer items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none hover:bg-gray-100 dark:hover:bg-zinc-700",{"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":a.value==="unread"}]),onClick:Y[7]||(Y[7]=ce=>M("unread"))},f(W.$t("sortByUnread")),3),Y[10]||(Y[10]=c("div",{class:"-mx-1 my-1 h-px bg-gray-200 dark:bg-zinc-700"},null,-1)),c("div",{class:B(["relative flex cursor-pointer items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none hover:bg-gray-100 dark:hover:bg-zinc-700",{"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":r.value==="asc"}]),onClick:Y[8]||(Y[8]=ce=>U("asc"))},f(W.$t("sortAscending")),3),c("div",{class:B(["relative flex cursor-pointer items-center rounded-sm px-2 py-1.5 text-sm transition-colors outline-none select-none hover:bg-gray-100 dark:hover:bg-zinc-700",{"bg-blue-50 text-blue-600 dark:bg-blue-900/20 dark:text-blue-400":r.value==="desc"}]),onClick:Y[9]||(Y[9]=ce=>U("desc"))},f(W.$t("sortDescending")),3)])):I("",!0)]),_:1})])),[[m(Ve),()=>{n.value=!1}]])])]),k.value.length>0&&m(s).modals.length===0?(d(),g("div",gA,[(d(!0),g(V,null,ne(k.value,ce=>(d(),g("div",{key:ce,class:B(["cursor-pointer rounded-lg p-2 whitespace-nowrap hover:bg-gray-100 hover:dark:bg-white hover:dark:text-gray-900",{"bg-gray-100 font-medium text-gray-800":ce===b.value}]),onClick:Te=>m(e).commit("imkit/setState",{searchType:ce})},f(W.$t(ce)),11,hA))),128))])):I("",!0),Q.value&&_.value.length===0?(d(),g("div",fA,[(d(),g(V,null,ne(20,ce=>c("div",{key:ce,class:"flex gap-3 p-2"},[...Y[11]||(Y[11]=[c("div",{class:"loading h-[50px] w-[50px] rounded-2xl bg-white dark:bg-zinc-800"},null,-1),c("div",{class:"flex grow flex-col justify-center gap-2"},[c("div",{class:"loading h-5 w-full rounded-md bg-white dark:bg-zinc-800"}),c("div",{class:"loading h-4 w-4/5 rounded-md bg-white dark:bg-zinc-800"})],-1)])])),64))])):!Q.value&&_.value.length===0&&m(s).modals.length===0?(d(),g("div",pA,[w.value.noRoomsImageURL?(d(),g("img",{key:0,src:w.value.noRoomsImageURL,class:"h-24 w-24 object-contain"},null,8,vA)):(d(),g("img",bA)),c("p",$A,f(w.value.noRoomsText||W.$t("noRoomsAvailable")),1)])):I("",!0)]),_:1},8,["data-sources"]),de((d(),g("div",yA,[v($t,{name:"slide-fade"},{default:D(()=>[F.value?(d(),g("div",kA,[w.value.massTextingEnabled?(d(),g("div",{key:0,class:"flex cursor-pointer items-center justify-start gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:ye},[v(m(En),{class:"h-6 w-6"}),K(" "+f(W.$t("massTexting")),1)])):I("",!0),c("div",{class:"flex cursor-pointer items-center justify-start gap-2 rounded p-2 hover:bg-gray-100 hover:dark:bg-zinc-700",onClick:be},[v(m(Zs),{class:"h-6 w-6"}),K(" "+f(W.$t("createFolder")),1)])])):I("",!0)]),_:1}),c("button",{class:"flex h-12 w-12 cursor-pointer items-center justify-center rounded-full bg-slate-500 shadow-md hover:scale-110 hover:transform hover:transition sm:group-hover:flex",onClick:ve($e,["stop"])},[v(m(yt),{size:30,class:"text-white"})])])),[[m(Ve),()=>{F.value=!1}]])]))}}),wA=Me(xA,[["__scopeId","data-v-d590ada8"]]),CA={class:"text-xl font-medium text-gray-900 dark:text-white"},MA={class:"text-gray-500 dark:text-gray-400"},TA=N({__name:"UnauthorizedModal",setup(t){const e=Se(),o=()=>{e.closeAll()};return(s,n)=>(d(),A(m(ze),{class:"flex items-center justify-center","content-class":"bg-white dark:bg-zinc-800 rounded-xl p-5 flex flex-col gap-3 w-[300px]","content-transition":"vfm-fade","overlay-transition":"vfm-fade","click-to-close":!1,"esc-to-close":!1},{default:D(()=>[c("div",CA,f(s.$t("unauthorizedTitle")),1),c("div",MA,f(s.$t("unauthorizedMessage")),1),c("button",{class:"mt-2 w-full rounded-lg bg-blue-500 px-4 py-2 font-medium text-white transition-colors hover:bg-blue-600",onClick:o},f(s.$t("confirm","確定")),1)]),_:1}))}});function Rt(t,e,o){const{url:s}=e,n=s==null?void 0:s.split("?")[0];if(!n)return;const a={};a[n]=t==0?new Date:null,o.commit("imkit/updateField",{key:"isRequesting",value:a})}const IA=async t=>{localStorage.getItem("imkit-token")&&localStorage.removeItem("imkit-token");const{open:e}=Ce({component:TA});return e(),!1};function RA(t,e){const{domain:o}=t,s=mt.create({baseURL:o,timeout:1e4});return s.interceptors.request.use(n=>{Rt(0,n,e);const a=new Ts({"IM-Authorization":e.state.imkit.config.token,"IM-Client-Key":e.state.imkit.config.clientKey});return n.headers=a,n},n=>{const{config:a}=n;return Rt(1,a,e),Promise.reject(n)}),s.interceptors.response.use(n=>{const{config:a}=n;return Rt(1,a,e),n},async n=>{var r;const{config:a}=n;if(Rt(1,a,e),((r=n.response)==null?void 0:r.status)===401){await IA();const i=new Ts({"IM-Authorization":e.state.imkit.config.token,"IM-Client-Key":e.state.imkit.config.clientKey});return a.headers=i,mt.request(a)}return Promise.reject(n)}),s}function SA(t,e){const{domain:o,clientKey:s}=t,n=Ls(o,{forceBase64:!0,transports:["websocket","webtransport"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3});return n.on("connect",()=>{n.emit("auth2",e.state.imkit.config.token,{CLIENT_KEY:s,Authorization:e.state.imkit.config.token})}),n.on("disconnect",a=>{n.active||(n.connect(),console.log(a))}),n.on("connect_error",a=>{n.active||(n.connect(),console.log(a.message))}),n.on("chat message",a=>{var h;const r=fe.createReactive(a),i={},l=new Be(a.sender),u=e.state.imkit.config.callbacks;(h=u==null?void 0:u.onMessageReceived)==null||h.call(u,r,l),i[l.id]=l,e.commit("imkit/updateField",{key:"users",value:i}),e.dispatch("imkit/handleMessageFromSocket",r)}),n.on("room",a=>{e.dispatch("imkit/handleRoomFromSocket",a)}),n.on("lastRead",a=>{const{roomID:r,memberID:i,messageID:l}=a;e.dispatch("imkit/handleLastReadFromSocket",{roomId:r,uid:i,messageId:l})}),n.on("roomPref",a=>{const{room:r,...i}=a;r&&(e.commit("imkit/updateRoom",{id:r,pref:i}),i.sticky!==void 0&&e.dispatch("imkit/aggregateRoomsAndFolders"))}),n.on("myPrefChange",a=>{e.dispatch("imkit/handlePrefChangeFromSocket",a)}),n.on("myPrefDelete",a=>{e.dispatch("imkit/handlePrefDeleteFromSocket",a)}),n.on("typing",a=>{e.dispatch("imkit/handleTypingFromSocket",a)}),n.on("ai_streaming",a=>{e.dispatch("imkit/handleAIStreamingFromSocket",a)}),n}const FA={install:async(t,e)=>{console.log("IMKIT version:",lo);const{store:o,config:s}=e;o.hasModule("imkit")||o.registerModule("imkit",to);let n="";try{const{id:i,_id:l}=Us(s.token);n=i||l}catch(i){console.log(i)}const a=RA(s,o),r=SA(s,o);o.commit("imkit/setState",{config:s,uid:n,axios:a,socket:r}),t.use(Un()),t.use(_e),t.use(Ln,{disableClick:!1}),t.directive("src",async(i,l)=>{const{value:u,oldValue:h}=l;if(u.startsWith("data:")){i.src=u;return}const{imageCache:p}=o.state.imkit;if(h===void 0||u!==h){if(p.has(u)){i.src=p.get(u);return}try{i.classList.add("opacity-0");const b=await a.get(u,{responseType:"arraybuffer",onDownloadProgress:w=>{const{total:x}=w;x&&o.commit("imkit/updateField",{key:"downloadProgresses",value:{[u]:w.loaded/x}})}}),k=btoa(new Uint8Array(b.data).reduce((w,x)=>w+String.fromCharCode(x),"")),C=`data:${b.headers["content-type"]};base64,${k}`;p.set(u,C),i.src=C}catch{i.src=u}i.classList.remove("opacity-0")}})}},AA={class:"flex h-full flex-col"},_A={class:"relative flex flex-1 items-center justify-center bg-black/95"},zA=["src","alt"],DA=["src"],OA={class:"pointer-events-none absolute inset-x-0 top-1/2 flex -translate-y-1/2 justify-between px-4"},NA={class:"flex items-center justify-between border-t bg-background p-4"},PA={class:"min-w-0 flex-1"},EA={class:"text-sm font-medium"},UA={class:"text-xs text-muted-foreground"},LA=N({name:"ContentLightboxDialog",__name:"ContentLightboxDialog",props:{open:{type:Boolean,default:!1},selectedMedia:{default:null},previousMedia:{type:Function,default:()=>{}},nextMedia:{type:Function,default:()=>{}}},emits:["update:open","close"],setup(t,{emit:e}){const o=Z(),s=t,n=e,a=S(null),r=$(()=>s.open),i=b=>{n("update:open",b),b||n("close")},l=async()=>{var b,k;try{const C=await o.dispatch("imkit/fetchPresignedUrl",{bucketName:((b=s.selectedMedia)==null?void 0:b.room)||"",fileId:((k=s.selectedMedia)==null?void 0:k._id)||""});a.value=C||null}catch(C){console.error("[Lightbox] fetchPresignedUrl error:",C),a.value=null}},u=()=>{s.selectedMedia&&a.value&&window.open(a.value,"_blank")};pe([()=>s.open,()=>s.selectedMedia],([b,k])=>{b&&k?l():a.value=null},{immediate:!0});const h=()=>s.previousMedia&&s.previousMedia(),p=()=>s.nextMedia&&s.nextMedia();return(b,k)=>(d(),A(m(Ct),{open:r.value,"onUpdate:open":i},{default:D(()=>[v(m(Mt),{class:"h-[90vh] max-w-5xl p-0"},{default:D(()=>{var C,w;return[c("div",AA,[c("div",_A,[t.selectedMedia&&t.selectedMedia.fileType==="image"&&a.value?(d(),g("img",{key:0,src:a.value,alt:b.$t("preview"),class:"max-h-full max-w-full object-contain"},null,8,zA)):(d(),g(V,{key:1},[t.selectedMedia&&a.value?(d(),g("video",{key:0,src:a.value,controls:"",class:"max-h-full max-w-full",autoplay:""},null,8,DA)):I("",!0)],64)),c("div",OA,[v(m(Re),{variant:"ghost",size:"icon",class:"pointer-events-auto h-10 w-10 rounded-full bg-black/50 text-white hover:bg-black/70",onClick:h},{default:D(()=>[v(m(Ws),{class:"h-6 w-6"})]),_:1}),v(m(Re),{variant:"ghost",size:"icon",class:"pointer-events-auto h-10 w-10 rounded-full bg-black/50 text-white hover:bg-black/70",onClick:p},{default:D(()=>[v(m(jn),{class:"h-6 w-6"})]),_:1})])]),c("div",NA,[c("div",PA,[c("p",EA,f(b.$t("sender"))+"："+f((C=t.selectedMedia)==null?void 0:C.client.nickname),1),c("p",UA,f(m(he)((w=t.selectedMedia)==null?void 0:w.createdAt).format("YYYY-MM-DD HH:mm:ss")),1)]),v(m(Re),{size:"sm",class:"ml-4",onClick:u},{default:D(()=>[v(m(as),{class:"mr-2 h-4 w-4"}),K(" "+f(b.$t("download")),1)]),_:1})])])]}),_:1})]),_:1},8,["open"]))}}),jA=N({name:"LazyMedia",inheritAttrs:!1,props:{bucketName:{type:String,default:""},fileId:{type:String,default:""},alt:{type:String,default:""},type:{type:String,required:!0},sender:{type:String,default:""},date:{type:String,default:""},onClick:{type:Function,required:!0},class:{type:null,default:void 0}},setup(t,{attrs:e}){const o=Z(),s=S(!1),n=S(!1),a=S(null);let r=null;const i=S(null),l=async()=>{try{const u=await o.dispatch("imkit/fetchPresignedUrl",{bucketName:t.bucketName,fileId:t.fileId});i.value=u||null}catch(u){console.error("[LazyMedia] fetchPresignedUrl error:",u),i.value=null}};return xt(()=>{a.value&&(r=new IntersectionObserver(u=>{u.forEach(h=>{h.isIntersecting&&(n.value=!0,r&&h.target&&r.unobserve(h.target))})},{rootMargin:"50px",threshold:.01}),r.observe(a.value),l())}),Bn(()=>{r&&a.value&&r.unobserve(a.value),r=null}),()=>{const u={...e},h=u.class;delete u.class;const p="relative aspect-square rounded-lg overflow-hidden bg-muted hover:opacity-90 transition-opacity group",b=[];return n.value?(b.push(ee("img",{src:i.value,class:ke("w-full h-full object-cover transition-opacity duration-300",s.value?"opacity-100":"opacity-0"),onLoad:()=>s.value=!0,loading:"lazy"})),s.value||b.push(ee("div",{class:"absolute inset-0 flex items-center justify-center"},[ee("div",{class:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})]))):b.push(ee("div",{class:"absolute inset-0 flex items-center justify-center bg-muted"},[ee("div",{class:"w-8 h-8 border-2 border-muted-foreground/20 border-t-transparent rounded-full animate-spin"})])),t.type==="video"&&s.value&&b.push(ee("div",{class:"absolute inset-0 flex items-center justify-center"},[ee("div",{class:"w-12 h-12 bg-black/60 rounded-full flex items-center justify-center backdrop-blur-sm"},[ee(rs,{class:"h-6 w-6 text-white fill-white ml-0.5"})])])),s.value&&b.push(ee("div",{class:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center p-2"},[ee("p",{class:"text-white text-xs font-medium"},t.sender),ee("p",{class:"text-white/80 text-[10px]"},he(t.date).format("YYYY/MM/DD HH:mm:ss"))])),ee("button",{ref:a,onClick:t.onClick,class:ke(p,h,t.class),...u},b)}}}),BA=Vn,VA=N({name:"TabsList",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(qn,{...s,class:ke("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",n,t.class)},e)}}}),Ns=N({name:"TabsTrigger",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Hn,{...s,class:ke("inline-flex items-center justify-center cursor-pointer whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",n,t.class)},e)}}}),Ps=N({name:"TabsContent",inheritAttrs:!1,props:{class:{type:null,default:void 0}},setup(t,{slots:e,attrs:o}){return()=>{const s={...o},n=s.class;return delete s.class,ee(Kn,{...s,class:ke("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n,t.class)},e)}}}),qA={class:"absolute inset-0 flex w-full flex-col justify-between bg-white sm:relative sm:w-[350px] sm:max-w-[350px] sm:min-w-[350px] dark:divide-zinc-700 dark:bg-zinc-800"},HA={class:"flex h-15 items-center gap-4 px-3"},KA={class:"flex-1"},GA={class:"text-lg font-semibold text-foreground"},WA={class:"border-t border-gray-200 dark:border-zinc-700"},JA={class:"shrink-0 px-4 pt-3"},YA={class:"flex-1"},XA={class:"space-y-6 p-4"},ZA={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},QA={class:"text-sm font-medium text-muted-foreground"},e_={class:"sticky top-0 z-10 bg-background pb-3"},t_={class:"text-sm font-medium text-muted-foreground"},s_={class:"grid grid-cols-3 gap-2"},o_={class:"h-full space-y-6 p-4"},n_={key:0,class:"flex flex-col items-center justify-center py-12 text-center"},a_={class:"text-sm font-medium text-muted-foreground"},r_={class:"flex items-start gap-3"},i_={class:"min-w-0 flex-1"},l_={class:"truncate text-sm font-medium"},c_={class:"space-y-0.5 text-xs text-muted-foreground"},d_={class:"flex shrink-0 gap-1"},u_=N({__name:"ChatRoomContent",setup(t){const e=Z(),o=$(()=>e.state.imkit.selectedRoomId),s=$(()=>e.state.imkit.rooms[o.value]),n=$(()=>e.state.imkit.chatRoomContent||[]),a=_=>_<1e3?_+"B":_<1e3*1e3?(_/1e3).toFixed(1)+"KB":_<1e3*1e3*1e3?(_/1e3/1e3).toFixed(1)+"MB":(_/1e3/1e3/1e3).toFixed(1)+"GB",r=async(_,P,F)=>{try{const q=`/files/${_}/${P}`,Q=await e.state.imkit.axios.get(q,{responseType:"blob",onDownloadProgress:be=>{const{total:ye}=be;ye&&e.commit("imkit/updateField",{key:"downloadProgresses",value:{[q]:be.loaded/ye}})}}),ge=window.URL.createObjectURL(Q.data),$e=document.createElement("a");$e.href=ge,$e.download=F,document.body.appendChild($e),$e.click(),document.body.removeChild($e),window.URL.revokeObjectURL(ge)}catch(q){console.error(q)}},i=_=>{switch(_.toLowerCase()){case"pdf":return{Icon:Xt,color:"text-red-600",bgColor:"bg-red-50"};case"doc":case"docx":return{Icon:Ht,color:"text-blue-600",bgColor:"bg-blue-50"};case"xls":case"xlsx":return{Icon:Ht,color:"text-green-600",bgColor:"bg-green-50"};case"jpg":case"jpeg":case"png":case"gif":return{Icon:Is,color:"text-purple-600",bgColor:"bg-purple-50"};case"mp4":case"avi":case"mov":return{Icon:Yn,color:"text-pink-600",bgColor:"bg-pink-50"};case"zip":case"rar":case"7z":return{Icon:Jn,color:"text-orange-600",bgColor:"bg-orange-50"};case"mp3":case"wav":return{Icon:Wn,color:"text-cyan-600",bgColor:"bg-cyan-50"};case"fig":case"sketch":return{Icon:Gn,color:"text-pink-600",bgColor:"bg-pink-50"};default:return{Icon:Ht,color:"text-gray-600",bgColor:"bg-gray-50"}}},l=_=>{console.log(_);const P={};return _.forEach(F=>{const q=he(F.createdAt).format("YYYY-MM");P[q]||(P[q]=[]),P[q].push(F)}),Object.keys(P).sort((F,q)=>new Date(q).getTime()-new Date(F).getTime()).map(F=>({date:F+"-01",items:P[F].sort((q,Q)=>new Date(Q.createdAt).getTime()-new Date(q.createdAt).getTime())}))},{t:u,locale:h}=Le(),p=_=>{const P=new Date(_),F=new Date,q=P.getFullYear(),Q=P.getMonth(),ge=F.getFullYear(),$e=F.getMonth();if(q===ge&&Q===$e)return u("thisMonth");const be=new Date(F);return be.setMonth(F.getMonth()-1),q===be.getFullYear()&&Q===be.getMonth()?u("lastMonth"):Hs.fromJSDate(P).setLocale(h.value).toLocaleString({month:"long",year:"numeric"})},b=$(()=>l(n.value));he.extend(Ut);const k=()=>{e.commit("imkit/setState",{isRoomContentVisible:!1})},C=S("media"),w=S(null),x=S(0),y=S(!1),T=(_,P)=>{w.value=_,x.value=P,y.value=!0},M=()=>{const _=b.value.flatMap(F=>F.items),P=x.value>0?x.value-1:_.length-1;x.value=P,w.value=_[P]},U=()=>{const _=b.value.flatMap(F=>F.items),P=x.value<_.length-1?x.value+1:0;x.value=P,w.value=_[P]};return pe(C,_=>{_==="media"?e.dispatch("imkit/fetchRoomContent",{roomId:s.value.id,fileTypes:"image,video"}):_==="files"&&e.dispatch("imkit/fetchRoomContent",{roomId:s.value.id,fileTypes:"audio,document"})},{immediate:!0}),(_,P)=>(d(),g(V,null,[c("div",qA,[c("div",null,[c("div",HA,[c("div",KA,[c("h2",GA,f(_.$t("chatRoomContent")),1)]),v(m(je),{class:"h-5 w-5 cursor-pointer text-gray-600 dark:text-gray-300",onClick:k})]),c("div",WA,[v(m(BA),{modelValue:C.value,"onUpdate:modelValue":P[0]||(P[0]=F=>C.value=F),class:"flex flex-1 flex-col"},{default:D(()=>[c("div",JA,[v(m(VA),{class:"grid w-full grid-cols-2 p-1.5"},{default:D(()=>[v(m(Ns),{value:"media",class:"w-full px-4 text-xs"},{default:D(()=>[K(f(_.$t("photosVideos")),1)]),_:1}),v(m(Ns),{value:"files",class:"w-full px-4 text-xs"},{default:D(()=>[K(f(_.$t("file")),1)]),_:1})]),_:1})]),c("div",YA,[v(m(Ps),{value:"media",class:"mt-0"},{default:D(()=>[c("div",XA,[b.value.length===0?(d(),g("div",ZA,[v(m(Is),{class:"mb-4 h-12 w-12 text-muted-foreground"}),c("p",QA,f(_.$t("noPhotosVideos")),1)])):I("",!0),(d(!0),g(V,null,ne(b.value,F=>(d(),g("div",{key:F.date,class:"space-y-3"},[c("div",e_,[c("div",t_,f(p(F.date)),1)]),c("div",s_,[(d(!0),g(V,null,ne(F.items,(q,Q)=>(d(),A(m(jA),{key:q._id,"bucket-name":q.room,"file-id":q._id,alt:q.client.nickname,type:q.fileType,sender:q.client.nickname,date:q.createdAt,onClick:ge=>T(q,Q)},null,8,["bucket-name","file-id","alt","type","sender","date","onClick"]))),128))])]))),128))])]),_:1}),v(m(Ps),{value:"files",class:"mt-0"},{default:D(()=>[c("div",o_,[n.value.length===0?(d(),g("div",n_,[v(m(Xt),{class:"mb-4 h-12 w-12 text-muted-foreground"}),c("p",a_,f(_.$t("noFiles")),1)])):I("",!0),(d(!0),g(V,null,ne(n.value,F=>(d(),g("div",{key:F._id,class:"rounded-lg p-4 transition-colors hover:bg-muted/50"},[c("div",r_,[c("div",{class:B(["flex h-10 w-10 shrink-0 items-center justify-center rounded-lg",i(F.fileType).bgColor])},[(d(),A(wt(i(F.fileType).Icon),{class:B(["h-5 w-5",i(F.fileType).color])},null,8,["class"]))],2),c("div",i_,[c("p",l_,f(F.originalName),1),c("div",c_,[c("div",null,f(F.client.nickname),1),c("div",null,f(m(he)(F.createdAt).format("YYYY-MM-DD HH:mm:ss"))+" • "+f(a(F.size)),1)])]),c("div",d_,[v(m(Re),{variant:"ghost",size:"icon",class:"h-8 w-8",onClick:q=>r(F.room,F._id,F.originalName)},{default:D(()=>[v(m(as),{class:"h-4 w-4"})]),_:1},8,["onClick"])])])]))),128))])]),_:1})])]),_:1},8,["modelValue"])])])]),v(LA,{open:y.value,"selected-media":w.value,"previous-media":M,"next-media":U,onClose:P[1]||(P[1]=F=>y.value=!1)},null,8,["open","selected-media"])],64))}}),m_=N({__name:"MainView",setup(t){const e=Z(),o=Es(),s=$(()=>e.state.imkit.selectedRoomId),n=$(()=>e.state.imkit.isRoomInfoVisible),a=$(()=>e.state.imkit.isRoomContentVisible),r=$(()=>ms()),i=$(()=>r.value.has("roomId"));return e.commit("imkit/setState",{selectedRoomId:r.value.get("roomId")??""}),pe(()=>o.query.darkMode,l=>{switch(l){case"true":case"1":Kt.value=!0;break;case"false":case"0":Kt.value=!1;break}},{immediate:!0}),(l,u)=>(d(),g("div",{class:B([{dark:m(Kt)},"relative flex h-screen divide-x divide-gray-200 bg-white dark:divide-zinc-700 dark:bg-zinc-800"])},[i.value?(d(),g(V,{key:0},[s.value?(d(),A(Ds,{key:0,class:"absolute inset-0 w-full sm:relative sm:flex"})):I("",!0)],64)):(d(),g(V,{key:1},[v(wA,{class:"w-full min-w-[350px] bg-white sm:max-w-[350px] dark:bg-zinc-800"}),v($t,{name:"slide-fade"},{default:D(()=>[s.value?(d(),A(Ds,{key:0,class:"absolute inset-0 grow overflow-hidden sm:relative sm:flex"})):I("",!0)]),_:1})],64)),s.value&&n.value?(d(),A(l7,{key:2})):I("",!0),s.value&&a.value?(d(),A(u_,{key:3})):I("",!0)],2))}}),g_=Me(m_,[["__scopeId","data-v-45def627"]]),Bt=Xn(MI);Bt.use(nt);const h_=Zn({history:Qn(),routes:[{path:"/",component:g_}]});Bt.use(h_);const Dt={domain:"https://tribo.imkit.io",clientKey:"WWpneU5HSmtPRE10TmpneU5DMDBZamczTFdFd1l6SXROR1ZrTldNM1pqQXlOVEUzLTE3NTU3ODU5OTI5NDY=",token:"",translationApiKey:"AIzaSyB3t1p6ig_D4S6oV-WzIsLxXtT35O-3OhE",mapApiKey:"AIzaSyC1XhSZ_MVbnZAtYNV-0PwRn7rILnOcZV4",firebaseConfig:{apiKey:"AIzaSyDH6fgpRFaH7vIqAcGQi48wgvNf8BJ9q1I",authDomain:"fir-chat-server.firebaseapp.com",databaseURL:"https://fir-chat-server.firebaseio.com",projectId:"fir-chat-server",storageBucket:"fir-chat-server.appspot.com",messagingSenderId:"970263218499",appId:"1:970263218499:web:cf2db5b6ba042a9a4247f6"},firebaseVapidKey:"BEcbM6I41PAJDlJbS0pAYhbjugsD4BY4E-apKrSqBcmy7WODyFGxv90PrPhoXGf1DVHIdldBUR1Onmva5grnq-g",settings:{locationInputEnabled:!0,audioInputEnabled:!0,fileInputEnabled:!0,emojiInputEnabled:!0,stickerInputEnabled:!0,sendButtonEnabled:!1,searchInRoomEnabled:!0,showDirectChatRoomInfoButton:!0,showGroupChatRoomInfoButton:!0,autoSelectRoomWhenLoaded:!0,customRoomInfoIframeURL:"",showLeaveRoomButton:!0,showMemberActionMenu:!0,massTextingEnabled:!0,showDarkModeSwitch:!0,enableReadReceipt:!0,linkPreviewEnabled:!0,fileUploadSizeLimit:2e7,noRoomsImageURL:"",noRoomsText:"",searchRoomPlaceholder:""},styles:{incomingMessageCell:"",outgoingMessageCell:"",roomListUnreadBadge:"",chatRoomHeader:"",sendButtonEnabled:"",sendButtonDisabled:""},callbacks:{onMessageReceived:()=>{},onMessageSent:()=>{}}},mo=ms();Dt.token=mo.get("token")||Dt.token;ea("localStorage")&&mo.has("token")&&localStorage.setItem("imkit-token",Dt.token);Bt.use(FA,{store:nt,config:Dt});Bt.mount("#app");nt.dispatch("imkit/subscribe");
